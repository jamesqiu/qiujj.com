<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:黑体;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 2 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:2 4 5 3 5 2 3 3 2 2;}
@font-face
	{font-family:Latha;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Raavi;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Shruti;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Tunga;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:3 8 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:微软雅黑;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Fixedsys;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Vera Sans YuanTi Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
@font-face
	{font-family:Garamond;
	panose-1:2 2 4 4 3 3 1 1 8 3;}
@font-face
	{font-family:"Wingdings 2";
	panose-1:5 2 1 2 1 5 7 7 7 7;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"\@微软雅黑";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@黑体";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
h1
	{margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:21.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.6pt;
	line-height:240%;
	page-break-after:avoid;
	font-size:22.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h2
	{margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:28.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-28.8pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h3
	{mso-style-link:"标题 3 Char";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-36.0pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h4
	{margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:53.7pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-43.2pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h5
	{margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:50.4pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-50.4pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h6
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:57.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-57.6pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:64.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-64.8pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:72.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-72.0pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:79.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-79.2pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:10.5pt;
	font-family:"Arial","sans-serif";}
p.MsoIndex1, li.MsoIndex1, div.MsoIndex1
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex2, li.MsoIndex2, div.MsoIndex2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex3, li.MsoIndex3, div.MsoIndex3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:20.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex4, li.MsoIndex4, div.MsoIndex4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:30.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex5, li.MsoIndex5, div.MsoIndex5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:40.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex6, li.MsoIndex6, div.MsoIndex6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:50.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex7, li.MsoIndex7, div.MsoIndex7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:60.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex8, li.MsoIndex8, div.MsoIndex8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:70.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex9, li.MsoIndex9, div.MsoIndex9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:80.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-right:0cm;
	margin-left:0cm;
	layout-grid-mode:char;
	font-size:10.5pt;
	font-family:"Calibri","sans-serif";
	text-transform:uppercase;
	font-weight:bold;}
p.MsoToc1CxSpFirst, li.MsoToc1CxSpFirst, div.MsoToc1CxSpFirst
	{margin-right:0cm;
	margin-left:0cm;
	layout-grid-mode:char;
	font-size:10.5pt;
	font-family:"Calibri","sans-serif";
	text-transform:uppercase;
	font-weight:bold;}
p.MsoToc1CxSpMiddle, li.MsoToc1CxSpMiddle, div.MsoToc1CxSpMiddle
	{margin-right:0cm;
	margin-left:0cm;
	layout-grid-mode:char;
	font-size:10.5pt;
	font-family:"Calibri","sans-serif";
	text-transform:uppercase;
	font-weight:bold;}
p.MsoToc1CxSpLast, li.MsoToc1CxSpLast, div.MsoToc1CxSpLast
	{margin-right:0cm;
	margin-left:0cm;
	layout-grid-mode:char;
	font-size:10.5pt;
	font-family:"Calibri","sans-serif";
	text-transform:uppercase;
	font-weight:bold;}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.5pt;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	font-variant:small-caps;}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	font-size:10.0pt;
	font-family:"Calibri","sans-serif";
	font-style:italic;}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:31.5pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:42.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:52.5pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:63.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:73.5pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"页眉 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	layout-grid-mode:char;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"页脚 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoIndexHeading, li.MsoIndexHeading, div.MsoIndexHeading
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";}
p.MsoTof, li.MsoTof, div.MsoTof
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-10.0pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
span.MsoFootnoteReference
	{vertical-align:super;}
span.MsoEndnoteReference
	{vertical-align:super;}
p.MsoEndnoteText, li.MsoEndnoteText, div.MsoEndnoteText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToa, li.MsoToa, div.MsoToa
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoMacroText, li.MsoMacroText, div.MsoMacroText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Courier New";}
p.MsoToaHeading, li.MsoToaHeading, div.MsoToaHeading
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{mso-style-link:"正文文本 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:6.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	background:navy;
	font-size:9.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoPlainText, li.MsoPlainText, div.MsoPlainText
	{mso-style-link:"纯文本 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:宋体;}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:宋体;}
code
	{font-family:宋体;}
pre
	{mso-style-link:"HTML 预设格式 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:宋体;}
tt
	{font-family:宋体;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	font-size:10.5pt;
	font-family:"Calibri","sans-serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.kw1
	{mso-style-name:kw1;}
span.br0
	{mso-style-name:br0;}
span.kw3
	{mso-style-name:kw3;}
span.nu0
	{mso-style-name:nu0;}
span.me1
	{mso-style-name:me1;}
span.kw2
	{mso-style-name:kw2;}
span.keyword
	{mso-style-name:keyword;}
span.string
	{mso-style-name:string;}
span.number
	{mso-style-name:number;}
span.Char
	{mso-style-name:"页眉 Char";
	mso-style-link:页眉;}
span.Char0
	{mso-style-name:"页脚 Char";
	mso-style-link:页脚;}
span.dct-tt
	{mso-style-name:dct-tt;}
span.dct-elb
	{mso-style-name:dct-elb;}
span.comment
	{mso-style-name:comment;}
span.HTMLChar
	{mso-style-name:"HTML 预设格式 Char";
	mso-style-link:"HTML 预设格式";
	font-family:宋体;}
span.sy0
	{mso-style-name:sy0;}
span.st0
	{mso-style-name:st0;}
span.es0
	{mso-style-name:es0;}
span.co1
	{mso-style-name:co1;}
span.apple-style-span
	{mso-style-name:apple-style-span;}
span.apple-converted-space
	{mso-style-name:apple-converted-space;}
span.co2
	{mso-style-name:co2;}
span.kw4
	{mso-style-name:kw4;}
span.3Char
	{mso-style-name:"标题 3 Char";
	mso-style-link:"标题 3";
	font-weight:bold;}
span.opn
	{mso-style-name:opn;}
span.pln
	{mso-style-name:pln;}
span.pun
	{mso-style-name:pun;}
span.kwd
	{mso-style-name:kwd;}
span.clo
	{mso-style-name:clo;}
span.str
	{mso-style-name:str;}
span.lit
	{mso-style-name:lit;}
span.p
	{mso-style-name:p;}
span.nf
	{mso-style-name:nf;}
span.nv
	{mso-style-name:nv;}
span.o
	{mso-style-name:o;}
span.s
	{mso-style-name:s;}
span.k
	{mso-style-name:k;}
span.nb
	{mso-style-name:nb;}
span.mi
	{mso-style-name:mi;}
span.title
	{mso-style-name:title;}
span.body
	{mso-style-name:body;
	font-family:Consolas;}
span.list
	{mso-style-name:list;}
span.code-quote
	{mso-style-name:code-quote;}
span.code-keyword
	{mso-style-name:code-keyword;}
p.3Consolas, li.3Consolas, div.3Consolas
	{mso-style-name:"样式 标题 3 + \(西文\) Consolas \(中文\) 微软雅黑 四号 下划线";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:46.5pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-36.0pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:Consolas;
	font-weight:bold;
	text-decoration:underline;}
p.4Consolas1, li.4Consolas1, div.4Consolas1
	{mso-style-name:"样式 标题 4 + \(西文\) Consolas \(中文\) 微软雅黑 五号 下划线 右侧\:  1 字符";
	margin-top:14.0pt;
	margin-right:10.5pt;
	margin-bottom:14.5pt;
	margin-left:53.7pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-43.2pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:Consolas;
	font-weight:bold;
	text-decoration:underline;}
span.Char1
	{mso-style-name:"纯文本 Char";
	mso-style-link:纯文本;
	font-family:宋体;}
span.Char2
	{mso-style-name:"正文文本 Char";
	mso-style-link:正文文本;
	font-family:Consolas;}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:teal;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:red;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 28.3pt 72.0pt 36.0pt;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ZH-CN link=blue vlink=purple style='text-justify-trim:punctuation; padding: 25px'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<p class=MsoDocumentMap align=center style='text-align:center'><a
name="_Toc306183946"><b><span lang=EN-US style='font-size:26.0pt;color:yellow'>Clojure
1.2 Handbook</span></b></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a href="./clojure-handbook.html">2012-01-01修订版</a></span></p>
<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>发音：<b><u>可鲁耶！</u></b></span><b><span
style='font-family:Consolas'> </span></b><span class=apple-style-span><span
lang=EN-US style='font-size:24.0pt;font-family:Consolas;color:#006600'>λ</span></span><span
class=apple-style-span><span style='font-size:24.0pt;font-family:"MS Gothic"'>&#9775;</span></span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></b></p>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-family:宋体'>“<i>和别人分享你的知识，那才是永恒之道</i>”――</span></b><b><span
lang=EN-US style='font-family:Consolas'>somebody</span></b></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='font-size:7.5pt;font-family:Consolas;text-transform:uppercase'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><b><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span style='font-family:宋体'>前言：</span></b></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>书籍浩如烟海，技术方面的书也是汗牛充栋，可惜我们的阅读速度和理解力、记忆力太有限，好不容易学懂的知识转眼就变得非常陌生，“博闻强志、过目不忘”者毕竟罕见。对于大部分人来说，即便昔日信手拈来的东西，时间久了也会毫无头绪。所以知识不在于学过多少，而在于你能记住和使用多少。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>“好记性不如烂笔头”――近年来我慢慢习惯把费力学习的东西都做一个笔记，一是在学习的过程中加深印象，毕竟技术学习不同于欣赏娱乐大片和浏览娱乐新闻看个过眼烟云；二是便于学而“时习之”，书上的东西一般是针对不同技术背景的读者，有很多作者费力用墨之处对你来说纯属废话，而他一笔带过的地方恰恰让你困惑不已。一本读书笔记相当于你对书的“注解”。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>Lisp</span><span style='font-family:宋体'>是一门神秘的语言，有无数的</span><span
lang=EN-US style='font-family:Consolas'>geek</span><span style='font-family:
宋体'>，</span><span lang=EN-US style='font-family:Consolas'>hacker</span><span
style='font-family:宋体'>对他推崇备至，也有众多的程序员对它嗤之以鼻，他和我们小学、中学、大学最先接触的</span><span
lang=EN-US style='font-family:Consolas'>Basic</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Pascal</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Fortran</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>C/C++</span><span
style='font-family:宋体'>是如此的风格迥异，以至于第一眼看上去就令人排斥。其根本原因在于，大部分人有天生的排异反应，对于和自己理念相左的事物，第一反应就是：切！胡扯！但人类能弄出来的任何新玩意儿，没有那个是和原有知识完全脱钩的。终于有一天，我看到一篇文章（</span><i><span
lang=EN-US style='font-family:Consolas'>Lisp</span></i><i><span
style='font-family:宋体'>的本质</span></i><i><span lang=EN-US style='font-family:
Consolas'>(The Nature of Lisp)</span></i><span style='font-family:宋体'>），分析</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>就是</span><span lang=EN-US style='font-family:Consolas'>XML++</span><span
style='font-family:宋体'>：</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>表达式既表示数据也表示代码，代码即数据、数据即代码，</span><span lang=EN-US
style='font-family:Consolas'>&lt;f&gt;..&lt;/f&gt;</span><span
style='font-family:宋体'>简化成</span><span lang=EN-US style='font-family:Consolas'>(f
..)</span><span style='font-family:宋体'>。</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>是</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>出生数十年后的新的实现（</span><span lang=EN-US style='font-family:Consolas'>200x</span><span
style='font-family:宋体'>年出品），或者</span><span lang=EN-US style='font-family:Consolas'>JLisp</span><span
style='font-family:宋体'>（</span><span lang=EN-US style='font-family:Consolas'>Lisp
on JVM</span><span style='font-family:宋体'>）。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>对于从</span><span
lang=EN-US style='font-family:Consolas'>C/Java</span><span style='font-family:
宋体'>或者其他</span><span lang=EN-US style='font-family:Consolas'>FP</span><span
style='font-family:宋体'>走过来的人，</span><span lang=EN-US style='font-family:Consolas'>Lisp/Clojure</span><span
style='font-family:宋体'>有很多“别扭”的用法，很难记清楚用正确。学任何语言，包括</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>，最佳的做法是把它用到日常的应用开发中，不断加深记忆。但即便你准备这么做了，手头没有一份方便的备查材料，刚开始也会步履艰难。我在使用的过程中也有这个体会，所以才不厌其烦地把一些学来并尝试过的东西记在本文档中备查，以便之后能行云流水地“玩转”它。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>个人认为，对于一门编程语言使用中的查阅，大致有几个阶段：查教程（</span><span
lang=EN-US style='font-family:Consolas'>tutorial</span><span style='font-family:
宋体'>）――》查手册（</span><span lang=EN-US style='font-family:Consolas'>handbook</span><span
style='font-family:宋体'>）――》查自己写的库（把个人所有的编程语言经验写成类或函数）。这个材料，不是严格的教程，或手册，而是介于这两者间。</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>目前已经出版了几本书，这些书从各自的角度解读</span><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>，大部分是英文的，不利于以母语速度快速浏览。数学问题用公式表达最清楚，编程问题用<b><u>图表和代码</u></b>表示最清楚，这二者也是本文用的最多的表达方式，我尽量采用简短的代码来说明问题（简短代码也能说明很多事情，广受赞誉的</span><span
lang=EN-US style='font-family:Consolas'>Effective Java</span><span
style='font-family:宋体'>基本没有超过一页的程序代码）。能够熟练使用</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>的程序员，参考本笔记，应该可以自如地开始着手写</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>程序。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>希望本材料能给同样对</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>感兴趣的人一些帮助。</span></p>

<p class=MsoNormal align=right style='text-align:right;text-indent:21.0pt'><span
style='font-family:宋体'>――</span><span lang=EN-US style='font-family:Consolas'>JamesQiu</span></p>

<p class=MsoNormal align=right style='text-align:right;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'><a href="mailto:jamesqiu@sina.com">jamesqiu@sina.com</a></span></p>

<p class=MsoNormal align=right style='text-align:right;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'><a href="http://qiujj.com">http://qiujj.com</a></span></p>

<p class=MsoNormal align=right style='margin-right:5.25pt;text-align:right;
text-indent:21.0pt'><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoTocHeading><span style='font-family:宋体'>目录</span></p>

<p class=MsoToc1CxSpFirst style='line-height:11.0pt'><span
class=MsoHyperlink><span lang=EN-US><a href="#_Toc306183946">Clojure 1.2
Handbook<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></span></p>

<p class=MsoToc1CxSpLast style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306183947"><span style='font-family:Consolas'>1</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>Why Clojure</span><span style='color:windowtext;display:none;
text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183948"><span style='font-family:Consolas'>1.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>美观方便、</span></span><span
style='font-family:Consolas'>DSL</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183949"><span style='font-family:Consolas'>1.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>易用的数据结构</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183950"><span style='font-family:Consolas'>1.3</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>STM</span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>模型</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183951"><span style='font-family:Consolas'>1.4</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>基于</span></span><span
style='font-family:Consolas'>JVM</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183952"><span style='font-family:Consolas'>1.5</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>Clojure</span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>是</span></span><span style='font-family:Consolas'>Lisp reload</span><span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>9</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183953"><span style='font-family:Consolas'>1.6</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>代码</span></span><span
style='font-family:Consolas'>==</span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>数据</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183954"><span style='font-family:Consolas'>1.7</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>开发社区</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183955"><span style='font-family:Consolas'>1.8</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>几点期待</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306183956"><span style='font-family:Consolas'>2</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>lang</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>11</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183957"><span style='font-family:Consolas'>2.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>REPL</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>11</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183958"><span style='font-family:Consolas'>2.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>定义变量</span></span><span
style='font-family:Consolas'>def let binding</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>13</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183959"><span style='font-family:Consolas'>2.3</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>内部变量</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>14</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183960"><span style='font-family:Consolas'>2.4</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>基本类型</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>15</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183961"><span style='font-family:Consolas'>2.5</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>类型判断</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>21</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183962"><span style='font-family:Consolas'>2.6</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>条件语句</span></span><span
style='font-family:Consolas'>if when cond condp case</span><span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>22</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183963"><span style='font-family:Consolas'>2.7</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>循环语句</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>24</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183964"><span style='font-family:Consolas'>2.8</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>正则表达式</span></span><span
style='font-family:Consolas'>regex</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>30</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183965"><span style='font-family:Consolas'>2.9</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>命名空间</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>30</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183966"><span style='font-family:Consolas'>2.10</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>结构</span></span><span
style='font-family:Consolas'>defstruct</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>33</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183967"><span style='font-family:Consolas'>2.11</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>类</span></span><span
style='font-family:Consolas'>defrecord</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>34</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183968"><span style='font-family:Consolas'>2.12</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>接口</span></span><span
style='font-family:Consolas'>protocol</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>35</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183969"><span style='font-family:Consolas'>2.13</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>-&gt;</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>36</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183970"><span style='font-family:Consolas'>2.14</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>编码规范</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>37</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306183971"><span style='font-family:Consolas'>3</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>coll</span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>数据结构</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>37</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183972"><span style='font-family:Consolas'>3.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>List</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>38</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183973"><span style='font-family:Consolas'>3.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>Vector</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>39</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183974"><span style='font-family:Consolas'>3.3</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>Set</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>41</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183975"><span style='font-family:Consolas'>3.4</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>Map</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>42</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183976"><span style='font-family:Consolas'>3.5</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>操作</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>47</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183977"><span style='font-family:Consolas'>3.6</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>序列</span></span><span
style='font-family:Consolas'>seq</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>57</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306183978"><span style='font-family:Consolas'>4</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>函数</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>58</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183979"><span style='font-family:Consolas'>4.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>函数帮助</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>58</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183980"><span style='font-family:Consolas'>4.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>调用函数</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>58</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183981"><span style='font-family:Consolas'>4.3</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>以“函数名”调用</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>58</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183982"><span style='font-family:Consolas'>4.4</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>运行时动态创建函数</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>59</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183983"><span style='font-family:Consolas'>4.5</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>meta</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>60</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183984"><span style='font-family:Consolas'>4.6</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>定义函数</span></span><span
style='font-family:Consolas'>defn</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>60</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183985"><span style='font-family:Consolas'>4.7</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>defmutil </span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>函数名重载</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>62</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183986"><span style='font-family:Consolas'>4.8</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>匿名函数</span></span><span
style='font-family:Consolas'>fn #()</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>64</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183987"><span style='font-family:Consolas'>4.9</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>偏函数</span></span><span
style='font-family:Consolas'>partial</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>65</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183988"><span style='font-family:Consolas'>4.10</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>组合函数</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>66</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183989"><span style='font-family:Consolas'>4.11</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>递归函数</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>67</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306183990"><span style='font-family:Consolas'>5</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>宏</span></span><span
style='font-family:Consolas'>macro</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>68</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183991"><span style='font-family:Consolas'>5.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>概念</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>68</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183992"><span style='font-family:Consolas'>5.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>设计方法</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>68</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183993"><span style='font-family:Consolas'>5.3</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>调试宏</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>69</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183994"><span style='font-family:Consolas'>5.4</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas;background:yellow'>`</span><span style='font-family:Consolas'>&nbsp; <span
style='background:yellow'>~'</span> <span style='background:yellow'>'~</span> <span
style='background:yellow'>~@</span></span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>69</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306183995"><span style='font-family:Consolas'>6</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>调用</span></span><span
style='font-family:Consolas'>Java</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>的类和方法</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>70</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183996"><span style='font-family:Consolas'>6.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>基本用法</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>70</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183997"><span style='font-family:Consolas'>6.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>得到所有</span></span><span
style='font-family:Consolas'>Java</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>类方法</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>71</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183998"><span style='font-family:Consolas'>6.3</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>Java</span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>数组</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>71</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306183999"><span style='font-family:Consolas'>6.4</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>reflect</span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>调用</span></span><span style='font-family:Consolas'>Java</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>方法</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>72</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184000"><span style='font-family:Consolas'>6.5</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>Java</span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>方法作为函数参数</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>73</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184001"><span style='font-family:Consolas'>6.6</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>设置属性值</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>73</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184002"><span style='font-family:Consolas'>6.7</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>JavaBean</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>73</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184003"><span style='font-family:Consolas'>6.8</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>提升性能</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>73</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184004"><span style='font-family:Consolas'>6.9</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>proxy </span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>实现接口</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>74</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184005"><span style='font-family:Consolas'>6.10</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Exception</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>75</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184006"><span style='font-family:Consolas'>6.11</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Java</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>调</span></span><span style='font-family:
Consolas'>Clojure</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>75</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184007"><span style='font-family:Consolas'>6.12</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>编译</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>76</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184008"><span style='font-family:Consolas'>6.13</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>调用</span></span><span
style='font-family:Consolas'>OS</span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>系统功能</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>76</span></a></span></span></p>

<p class=MsoToc1CxSpFirst style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306184009"><span style='font-family:Consolas'>7</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>正则表达式</span></span><span
style='font-family:Consolas'>regex</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>76</span></a></span></span></p>

<p class=MsoToc1CxSpLast style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306184010"><span style='font-family:Consolas'>8</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>并发</span></span><span
style='font-family:Consolas'> STM</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>77</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184011"><span style='font-family:Consolas'>8.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>基本概念</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>77</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184012"><span style='font-family:Consolas'>8.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>ref</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>77</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184013"><span style='font-family:Consolas'>8.3</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>atom</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>80</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184014"><span style='font-family:Consolas'>8.4</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>agent</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>80</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184015"><span style='font-family:Consolas'>8.5</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>var</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>80</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184016"><span style='font-family:Consolas'>8.6</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>状态更新对比</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>81</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184017"><span style='font-family:Consolas'>8.7</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>多线程</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>81</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184018"><span style='font-family:Consolas'>8.8</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>pmap</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>81</span></a></span></span></p>

<p class=MsoToc1CxSpFirst style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306184019"><span style='font-family:Consolas'>9</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style='font-family:
Consolas'>GUI</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>82</span></a></span></span></p>

<p class=MsoToc1CxSpLast style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306184020"><span style='font-family:Consolas'>10</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>IO JDBC</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>83</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184021"><span style='font-family:Consolas'>10.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>文件</span></span><span
style='font-family:Consolas'>IO</span><span style='color:windowtext;display:
none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>83</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184022"><span style='font-family:Consolas'>10.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>网络</span></span><span
style='font-family:Consolas'>IO</span><span style='color:windowtext;display:
none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>85</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184023"><span style='font-family:Consolas'>10.3</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>配置、数据文件</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>85</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184024"><span style='font-family:Consolas'>10.4</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>JDBC</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>数据库</span></span><span style='font-family:
Consolas'>IO</span><span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>87</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184025"><span style='font-family:Consolas'>10.5</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>ClojureQL</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>88</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184026"><span style='font-family:Consolas'>10.6</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>MongoDB</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>操作</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>88</span></a></span></span></p>

<p class=MsoToc1CxSpFirst style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306184027"><span style='font-family:Consolas'>11</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Unit Test</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>90</span></a></span></span></p>

<p class=MsoToc1CxSpLast style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306184028"><span style='font-family:Consolas'>12</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>web</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>开发</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>91</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184029"><span style='font-family:Consolas'>12.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Ring</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>91</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184030"><span style='font-family:Consolas'>12.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Compojure</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>93</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184031"><span style='font-family:Consolas'>12.3</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Conjure</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>93</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184032"><span style='font-family:Consolas'>12.4</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Weld</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>93</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184033"><span style='font-family:Consolas'>12.5</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>hiccup</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>93</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184034"><span style='font-family:Consolas'>12.6</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Enlive</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>模板引擎</span></span><span style='color:
windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>96</span></a></span></span></p>

<p class=MsoToc1CxSpFirst style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306184035"><span style='font-family:Consolas'>13</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>网络资源</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>96</span></a></span></span></p>

<p class=MsoToc1CxSpLast style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306184036"><span style='font-family:Consolas'>14</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>临时</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>97</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184037"><span style='font-family:Consolas'>14.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>InfoQ</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>采访</span></span><span style='font-family:
Consolas'>Clojure</span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>实用</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>97</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184038"><span style='font-family:Consolas'>14.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Lisp</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>用户的问题</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>98</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184039"><span style='font-family:Consolas'>14.3</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Rich Hickey</span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>访谈</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>100</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184040"><span style='font-family:Consolas'>14.4</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>语言结构决定人类思维方式及行动方法</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>100</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184041"><span style='font-family:Consolas'>14.5</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>The Joy of Clojure</span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>笔记</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>101</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184042"><span style='font-family:Consolas'>14.6</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>On Lisp</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>笔记</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>101</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184043"><span style='font-family:Consolas'>14.7</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Clojure on Heroku</span><span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>101</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184044"><span style='font-family:Consolas'>14.8</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:Consolas'>Clojure 1.3 changelog</span><span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>101</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US><a href="#_Toc306184045"><span style='font-family:Consolas'>15</span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span
style='color:windowtext;text-transform:none;font-weight:normal;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>对照表</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>102</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184046"><span style='font-family:Consolas'>15.1</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>和</span></span><span
style='font-family:Consolas'>clisp</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span><span style='font-family:
Consolas'>scheme</span><span lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span
lang=EN-US>的区别</span></span><span style='color:windowtext;display:none;
text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>102</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-variant:normal !important;text-transform:uppercase'><a
href="#_Toc306184047"><span style='font-family:Consolas'>15.2</span><span
style='font-size:10.5pt;color:windowtext;text-transform:none;text-decoration:
none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang=EN-US
style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>和</span></span><span
style='font-family:Consolas'>newlisp</span><span lang=EN-US style='font-family:
"微软雅黑","sans-serif"'><span lang=EN-US>的区别</span></span><span style='color:windowtext;
display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>104</span></a></span></span></p>

<p class=MsoNormal style='line-height:11.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='margin-right:5.25pt;text-align:left;
text-indent:21.0pt'><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc306183947"><span lang=EN-US style='font-family:Consolas'>1、<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Why Clojure</span></u></a></h1>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='font-family:Consolas'>“Clojure is computer reload and Lisp reload”</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-family:宋体'>“</span><span lang=EN-US style='font-family:Consolas'>Rooted
in 50 years of Lisp, as well as 15 years of Java best practices</span><span
style='font-family:宋体'>”</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-family:宋体'>“不识篆字不好意思说懂中文，不熟</span><span lang=EN-US
style='font-family:Consolas'>Lisp</span><span style='font-family:宋体'>不好意思说懂编程”</span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
style='font-family:宋体'>“<b><u>方便有用酷</u></b>是我判断一个东西好坏的标准”</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><b><span
  style='font-family:宋体'>方便</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
  style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
  style='font-family:宋体'>简化，消除附加复杂性</span></p>
  <p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
  style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US
  style='font-family:Consolas'>REPL</span></p>
  <p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
  style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
  style='font-family:宋体'>小写</span><span lang=EN-US style='font-family:Consolas'>-</span><span
  style='font-family:宋体'>空格而非骆驼命名法</span><span lang=EN-US style='font-family:
  Consolas'>_,;</span></p>
  <p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
  style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
  style='font-family:宋体'>内置的数据结构及统一处理方式</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><b><span
  style='font-family:宋体'>有用</span></b></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
  style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US
  style='font-family:Consolas'>STM</span><span style='font-family:宋体'>模型</span></p>
  <p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
  style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
  style='font-family:宋体'>无缝接入</span><span lang=EN-US style='font-family:Consolas'>JVM</span><span
  style='font-family:宋体'>，直接使用现有资源</span></p>
  <p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
  style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
  style='font-family:宋体'>友好的开发社区</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><b><span
  style='font-family:宋体'>酷</span></b></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
  style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US
  style='font-family:Consolas'>Lisp reload</span></p>
  <p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
  style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US
  style='font-family:Consolas'>FP</span><span style='font-family:宋体'>、</span><span
  lang=EN-US style='font-family:Consolas'>STM</span></p>
  <p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
  text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
  style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
  style='font-family:宋体'>微内核，比</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
  style='font-family:宋体'>简单得多</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183948"></a><a
name="_Toc281923983"></a><a name="_Toc281658823"></a><a name="_Toc281556330"></a><a
name="_Toc281556226"></a><a name="_Toc281556122"></a><a name="_Toc281555920"></a><a
name="_Toc281555763"><span lang=EN-US style='font-family:Consolas'>1.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>美观方便、</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>DSL</span></u></h2>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>美观方便</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>C/Java</span><span
style='font-family:宋体'>中用得最多的就是</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>, ; { }</span></p>

<p class=MsoNormal><span style='font-family:宋体'>而</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>中用得最多的是</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>( ) </span><span style='font-family:宋体'>空格</span></p>

<p class=MsoNormal><span style='font-family:宋体'>无论敲起来还是看起来，</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>都更方便更美观，</span><span style='font-family:Consolas'> </span><span
style='font-family:宋体'>小写字母和连字符也比骆驼命名法不断切换大小写快得多，也好看得多（请对比：</span><span
lang=EN-US style='font-family:Consolas'> strJoin</span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>str-join,
writeFileWithName</span><span style='font-family:宋体'>和</span><span lang=EN-US
style='font-family:Consolas'>write-file-with-name</span><span style='font-family:
宋体'>）。事实上有人宣称</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>是“</span><span class=apple-style-span><span
style='font-family:宋体;color:black'>世界上最美丽的编程语言”，除了设计思想，估计命名也是个原因。</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>相对</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>有其方便之处，如：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 + 2 + 3 +
  4 + 5</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(+ 1 2 3 4
  5)</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>int s=0; for(i
  : arr) s+=i; //</span><span style='font-family:宋体'>数据元素求和</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(apply +
  arr)</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>if (n&gt;3
  &amp;&amp; n&lt;5)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(if (&lt; 3
  n 5))</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;hello-world&quot;.substring(0,5).toUpperCase()</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(..
  &quot;hello-world&quot; (substring 0 5) toUpperCase)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>或</span><span lang=EN-US
  style='font-family:Consolas'> (.. (subs &quot;hello-world&quot; 0 5)
  toUpperCase)</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>简单函数也必须包装在</span><span
  lang=EN-US style='font-family:Consolas'>class</span><span style='font-family:
  宋体'>中</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class foo { </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>void f() {..}</span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>public static void main(String[] args) {..}</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>函数随手可用：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fn ..) </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#(..) </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f [] ..)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>DSL</span><span
style='font-family:宋体'>易于表达业务</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>XML</span><span
style='font-family:宋体'>可以表示任意</span><span lang=EN-US style='font-family:Consolas'>DSL</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>是</span><span lang=EN-US style='font-family:Consolas'>xml++</span><span
style='font-family:宋体'>，当然更面向</span><span lang=EN-US style='font-family:Consolas'>DSL</span><span
style='font-family:宋体'>了。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如对比：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>xml</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>s</span></b><b><span
  style='font-family:宋体'>表达式</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;todo
  des=&quot;</span><span style='font-family:宋体'>写</span><span lang=EN-US
  style='font-family:Consolas'>clojure</span><span style='font-family:宋体'>笔记</span><span
  lang=EN-US style='font-family:Consolas'>&quot;&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
  &lt;item priority=&quot;high&quot;&gt;</span><span style='font-family:宋体'>定框架</span><span
  lang=EN-US style='font-family:Consolas'>&lt;/item&gt;</span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>&lt;item priority=&quot;high&quot;&gt;</span><span
  style='font-family:宋体'>写内容</span><span lang=EN-US style='font-family:Consolas'>&lt;/item&gt;</span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>&lt;item priority=&quot;low&quot;&gt;</span><span
  style='font-family:宋体'>调整格式</span><span lang=EN-US style='font-family:Consolas'>&lt;/item&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/todo&gt;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(todo &quot;</span><span
  style='font-family:宋体'>写</span><span lang=EN-US style='font-family:Consolas'>clojure</span><span
  style='font-family:宋体'>笔记</span><span lang=EN-US style='font-family:Consolas'>&quot;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (item
  (priority high) &quot;</span><span style='font-family:宋体'>定框架</span><span
  lang=EN-US style='font-family:Consolas'>&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (item
  (priority high) &quot;</span><span style='font-family:宋体'>写内容</span><span
  lang=EN-US style='font-family:Consolas'>&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (item
  (priority low) &quot;</span><span style='font-family:宋体'>调整格式</span><span
  lang=EN-US style='font-family:Consolas'>&quot;))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183949"></a><a
name="_Toc281923984"></a><a name="_Toc281658824"></a><a name="_Toc281556331"></a><a
name="_Toc281556227"></a><a name="_Toc281556123"></a><a name="_Toc281555921"></a><a
name="_Toc281555764"><span lang=EN-US style='font-family:Consolas'>1.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>易用的数据结构</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>list/vector/map</span><span
style='font-family:宋体'>及其丰富特性支持让你解决数据结构问题时游刃有余。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>'(1 2 3 4 5)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[1 2 3 4 5]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>{:name
&quot;qh&quot; :age 30}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f [n]
(and (&gt; n 10) (&lt; n 100)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(filter f '(1
31 4 3 53 4 234)) <span style='color:#5B6E6E'>; (31 53)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>中的数据结构具备</span><span lang=EN-US style='font-family:Consolas'>FP</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>immutable</span><span
style='font-family:宋体'>，线程安全，易于测试，便于从小程序逐步进化到大型应用。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>为了避免大量的数据结构复制会出现性能和内存瓶颈，</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>采用共享元素的方式仅进行部分</span><span lang=EN-US style='font-family:Consolas'>copy</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US><img
width=500 height=351 src="ClojureHandbook.files/image001.gif"></span></p>

<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>可用</span><span lang=EN-US style='font-family:Consolas'>identical?</span><span
style='font-family:宋体'>简单验证是否同一对象：</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(def a [1 3 5 [2 4]])</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(def b (cons 7 (next a))) ; b </span><span
style='font-family:宋体'>复用了</span><span lang=EN-US style='font-family:Consolas'>a</span><span
style='font-family:宋体'>的部分对象</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(identical? (last a) (last b)) ; true</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183950"></a><a
name="_Toc281923985"></a><a name="_Toc281658825"></a><a name="_Toc281556332"></a><a
name="_Toc281556228"></a><a name="_Toc281556124"></a><a name="_Toc281555922"></a><a
name="_Toc281555765"><span lang=EN-US style='font-family:Consolas'>1.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>STM</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>模型</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>采用</span><span lang=EN-US style='font-family:Consolas'>STM</span><span
style='font-family:宋体'>模型、</span><span lang=EN-US style='font-family:Consolas'>agent</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>atom</span><span
style='font-family:宋体'>、动态变量简化了并发编程。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>STM</span><span
style='font-family:宋体'>模型和</span><span lang=EN-US style='font-family:Consolas'>RDB</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>OLTP</span><span
style='font-family:宋体'>交易概念类似，易于程序员理解。</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183951"></a><a
name="_Toc281923986"></a><a name="_Toc281658826"></a><a name="_Toc281556333"></a><a
name="_Toc281556229"></a><a name="_Toc281556125"></a><a name="_Toc281555923"></a><a
name="_Toc281555766"><span lang=EN-US style='font-family:Consolas'>1.4<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>基于</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>JVM</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>――使用</span><span lang=EN-US
style='font-family:Consolas'>ASM</span><span style='font-family:宋体'>在内存中进行编译后运行，比大部分动态语言要快得多。</span><span
lang=EN-US style='font-family:Consolas'>(Clojure</span><span style='font-family:
宋体'>将</span><u><span lang=EN-US style='font-family:Consolas'>org.objectweb.asm</span></u><span
style='font-family:宋体'>包下最必要的源代码摘取到</span><u><span lang=EN-US style='font-family:
Consolas'>clojure.asm</span></u><span style='font-family:宋体'>包中，和</span><span
lang=EN-US style='font-family:Consolas'>ASM</span><span style='font-family:
宋体'>依赖包解耦。</span><span lang=EN-US style='font-family:Consolas'>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>――调用</span><span lang=EN-US
style='font-family:Consolas'>java</span><span style='font-family:宋体'>的对象、方法直接而快速，没有太多额外开销。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>――有更多的内建库和数据结构，编程就更快，</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>在完全继承</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>.NET</span><span
style='font-family:宋体'>的标准库的基础上，还扩展了更丰富有用的函数库。</span><span style='font-family:
宋体'>看看</span><span lang=EN-US style='font-family:Consolas'>C++</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>D</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Go</span><span
style='font-family:宋体'>等语言</span><span style='font-family:宋体'>库的发展情况（不是匮乏就是混乱），就知道从头创建如</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>.NET</span><span
style='font-family:宋体'>这般庞大全面的类库并非易事；</span></p>

<p class=MsoNormal><span style='font-family:宋体'>类库和运行速度有关系吗？――很大程度上有，众多专家已经在类库中准备了充分优化的稳定算法，</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>对</span><span lang=EN-US style='font-family:Consolas'>Java Collection</span><span
style='font-family:宋体'>算法进行直接包装或者直接调用，如果没有丰富的类库，你在项目周期内免不了摘抄一些不一定靠谱的算法和功能代码，这些代码极有可能在运行时给你带来麻烦。使用类库算法，不用担忧自造轮子的运行效率。</span></p>

<p class=MsoNormal align=center style='text-align:center'><b><span lang=EN-US
style='font-family:Consolas'>Java/Scala</span></b><b><span style='font-family:
宋体'>运行模式如下</span></b><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='font-family:Consolas'><img width=566 height=313
src="ClojureHandbook.files/image002.jpg"></span></p>

<p class=MsoNormal align=center style='text-align:center'><b><span lang=EN-US
style='font-family:Consolas'>Clojure</span></b><b><span style='font-family:
宋体'>运行模式如下</span></b><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='font-family:Consolas'><img width=566 height=376
src="ClojureHandbook.files/image003.jpg"></span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183952"></a><a
name="_Toc281923987"></a><a name="_Toc281658827"></a><a name="_Toc281556334"></a><a
name="_Toc281556230"></a><a name="_Toc281556126"></a><a name="_Toc281555924"></a><a
name="_Toc281555767"><span lang=EN-US style='font-family:Consolas'>1.5<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Clojure</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>是</span></u><u><span lang=EN-US
style='font-family:Consolas'>Lisp reload</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>语言是大事――语言影响使用者的思维方式。语言和语言不一样。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>微内核，几乎没有多余的关键字和语法，只有</span><span lang=EN-US
style='font-family:Consolas'>(f (g ..) (h..) ..) '() [] {} #{} (def ) (defn )</span><span
style='font-family:宋体'>等少数，其他都是函数库，学习起来比</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>都简单。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>基于数学逻辑</span><span lang=EN-US style='font-family:Consolas'>s-</span><span
style='font-family:宋体'>表达式、支持</span><span lang=EN-US style='font-family:Consolas'>GC</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>年代久远（</span><span lang=EN-US style='font-family:Consolas'>1958
by John McCarthy</span><span style='font-family:宋体'>），健康长寿。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>有</span><span lang=EN-US style='font-family:Consolas'>metaprogramming</span><span
style='font-family:宋体'>能力</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>^</span><span style='font-family:宋体'>开头的类名或者任意</span><span
lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
宋体'>，如：</span><span lang=EN-US style='font-family:Consolas'>^String ^{:doc
&quot;..&quot; :author &quot;qh&quot;}</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>增加了对非</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>程序员的友好性（语法比传统</span><span lang=EN-US style='font-family:
Consolas'>Lisp</span><span style='font-family:宋体'>丰富一些）。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>比</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>更纯函数式，</span><span style='font-family:宋体'>意味着拥有不可变性和不易错性。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Lisp/Clojure</span><span
style='font-family:宋体'>是动态类型，动态编译，动态转载的</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Read-Eval-Print
Loop</span><span style='font-family:宋体'>交互解释器，编程更愉快</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>代码即数据――我的理解：（</span><span
lang=EN-US style='font-family:Consolas'>1</span><span style='font-family:宋体'>）</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>代码足以表述数据，不需单独的</span><span lang=EN-US style='font-family:Consolas'>.properties</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>.xml</span><span
style='font-family:宋体'>等辅之（</span><span lang=EN-US style='font-family:Consolas'>2</span><span
style='font-family:宋体'>）</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>代码也是以</span><span lang=EN-US style='font-family:Consolas'>list</span><span
style='font-family:宋体'>的数据结构显式表示的，在编译时、运行时都可以生成执行新代码。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>所有数据结构通用的列表处理方式</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>语言内核非常精炼但扩展性极强</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc281923988"></a><a
name="_Toc281658828"></a><a name="_Toc281556335"></a><a name="_Toc281556231"></a><a
name="_Toc281556127"></a><a name="_Toc281555925"></a><a name="_Toc281555768"></a><a
name="_Toc306183953"><span lang=EN-US style='font-family:Consolas'>1.6<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>代码</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>==</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>数据</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>这是</span><span lang=EN-US
style='font-family:Consolas'>Lisp</span><span style='font-family:宋体'>语言最与众不同之处：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><img
width=711 height=141 src="ClojureHandbook.files/image004.gif"></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><img
width=711 height=162 src="ClojureHandbook.files/image005.gif"></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183954"><span
lang=EN-US style='font-family:Consolas'>1.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>开发社区</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>开发</span><span lang=EN-US style='font-family:Consolas'>/</span><span
style='font-family:宋体'>用户社区气氛良好，基本都是资深开发者、顶级</span><span lang=EN-US
style='font-family:Consolas'>Hacker</span><span style='font-family:宋体'>以及有追求的程序员，层次很高。</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183955"><span
lang=EN-US style='font-family:Consolas'>1.8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>几点期待</span></u></a></h2>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>希望</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>加入类似</span><span
lang=EN-US style='font-family:Consolas'>python</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>&quot;&quot;&quot;
.... &quot;&quot;&quot;</span><span style='font-family:宋体'>多行注释，其中可以包含除</span><span
lang=EN-US style='font-family:Consolas'>;;;</span><span style='font-family:
宋体'>之外的任意字符，如</span><span lang=EN-US style='font-family:Consolas'>:</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>;;;</span><span lang=EN-US
style='font-family:Consolas'> 11111111111</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>222222222222222</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>333333333333333 <span style='background:yellow'>;;;</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>目前可以用如下写法，但必须注意包含</span><span
lang=EN-US style='font-family:Consolas'>&quot;<span style='background:yellow'>(</span>&quot;
&quot;<span style='background:yellow'>)</span>&quot; &quot;<span
style='background:yellow'>;</span>&quot;</span><span style='font-family:宋体'>等特殊符号：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(comment 111111111</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>22222222222222</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>33333333333333 )</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>更好的错误提示，别来个：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=ES style='font-family:
Consolas'>NullPointerException at line 0</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>更快的启动速度，至少达到</span><span lang=EN-US
style='font-family:Consolas'>bsh</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>scala</span><span style='font-family:
宋体'>这种级别（注：推荐</span><span lang=EN-US style='font-family:Consolas'>newlisp</span><span
style='font-family:宋体'>来写</span><span lang=EN-US style='font-family:Consolas'>shell</span><span
style='font-family:宋体'>和进行系统调用）。</span></p>

<h1><a name="_Toc306183956"></a><a name="_Toc281923989"></a><a
name="_Toc281658829"></a><a name="_Toc281556336"></a><a name="_Toc281556232"></a><a
name="_Toc281556128"></a><a name="_Toc281555926"></a><a name="_Toc281555769"><span
lang=EN-US style='font-family:Consolas'>2、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>lang</span></u></a></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183957"></a><a
name="_Toc281923990"></a><a name="_Toc281658830"></a><a name="_Toc281556337"></a><a
name="_Toc281556233"></a><a name="_Toc281556129"></a><a name="_Toc281555927"></a><a
name="_Toc281555770"><span lang=EN-US style='font-family:Consolas'>2.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>REPL</span></u></a></h2>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281923991"></a><a
name="_Toc281658831"></a><a name="_Toc281556338"></a><a name="_Toc281556234"></a><a
name="_Toc281556130"></a><a name="_Toc281555928"></a><a name="_Toc281555771"><span
lang=EN-US style='text-decoration:none'>2.1.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>使用</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>启动：</span><span lang=EN-US
style='font-family:Consolas'>java Ccp clojure.jar;clojure-contrib.jar
clojure.main</span></p>

<p class=MsoNormal><span style='font-family:宋体'>退出：</span><span lang=EN-US
style='font-family:Consolas'>Ctrl-Z</span></p>

<p class=MsoNormal><span style='font-family:宋体'>手动转载文件中的程序：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>load-file</span> &quot;temp.clj&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>自动转载</span><span lang=EN-US
style='font-family:Consolas'>clj</span><span style='font-family:宋体'>文件：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>在</span><span
lang=EN-US style='font-family:Consolas'>classpath</span><span style='font-family:
宋体'>如</span><u><span lang=EN-US style='font-family:Consolas'>e:\clojure-1.2.0\jamesqiu</span></u><span
style='font-family:宋体'>中建名为</span><span lang=EN-US style='font-family:Consolas'>user.clj</span><span
style='font-family:宋体'>的文件即可。</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281923992"></a><a
name="_Toc281658832"></a><a name="_Toc281556339"></a><a name="_Toc281556235"></a><a
name="_Toc281556131"></a><a name="_Toc281555929"></a><a name="_Toc281555772"><span
lang=EN-US style='text-decoration:none'>2.1.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>自动完成</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>通过</span><span lang=EN-US
style='font-family:Consolas'>jLine</span><span style='font-family:宋体'>（</span><a
href="http://jline.sourceforge.net/"><span lang=EN-US style='font-family:Consolas'>http://jline.sourceforge.net/</span></a><span
style='font-family:宋体'>）的</span><span lang=EN-US style='font-family:Consolas'>Completor</span><span
style='font-family:宋体'>类（放在</span><span lang=EN-US style='font-family:Consolas'>classpath</span><span
style='font-family:宋体'>如</span><span lang=EN-US style='font-family:Consolas'>jamesqiu</span><span
style='font-family:宋体'>目录下）：</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>@java -cp <u>clojure.jar;clojure-contrib.jar;.\jamesqiu\jline.jar;.\jamesqiu</u>
</span></p>

<p class=MsoNormal align=left style='text-align:left'><b><span lang=EN-US
style='font-family:Consolas;background:yellow'>-D<i><u>jline.ConsoleRunner.completors</u></i>=<u>ClojureCompletor</u>
<u>jline.ConsoleRunner</u></span></b><span lang=EN-US style='font-family:Consolas'>
clojure.main %*</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>ClojureCompletor.java</span><span
style='font-family:宋体'>内容如下（</span><span lang=EN-US style='font-family:Consolas'>sorry</span><span
style='font-family:宋体'>，忘了来自哪里，但自行编译即可）：</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>-------------------------------------</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>import java.util.List;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>import jline.Completor;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>import clojure.lang.MapEntry;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>import
clojure.lang.Namespace;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>import clojure.lang.RT;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>import
clojure.lang.Symbol;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>public class
ClojureCompletor implements Completor{</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
@Override</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
public int complete(String buffer, int cursor, List candidates) {</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(buffer == null)</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
buffer = &quot;&quot;;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Namespace ns = (Namespace) RT.CURRENT_NS.get();</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
String split[] = split(buffer);</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
String head = split[0];</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
String tail = split[1];</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
boolean exist = false;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
for(Object it: ns.getMappings()){</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
MapEntry entry = (MapEntry) it;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(entry.getKey() instanceof Symbol){</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Symbol symbol = (Symbol) entry.getKey();</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(symbol.getName().startsWith(tail)){</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
candidates.add(symbol.getName());</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
exist = true;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
return exist ? head.length() : -1;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
String[] split(String buffer){</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
int end = buffer.length() - 1;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
for(; end &gt;= 0; end--){</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
char ch = buffer.charAt(end);</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(&quot; \t,(&quot;.indexOf(ch)&gt;0){</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
break;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
String result[] = new String[2];</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if(end &gt;=0){</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result[0] =
buffer.substring(0, end+1);</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result[1] = buffer.substring(end+1);</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
else {</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result[0] = &quot;&quot;;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result[1] = buffer;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return
result;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:8.0pt'><span
lang=EN-US style='font-size:9.0pt;font-family:Consolas'>}</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>-------------------------------------</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.1.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>print</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>print</span>
&quot;hello world&quot;)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>println </span>&quot;hello&quot;
&quot;world&quot; 1) <span style='color:#5B6E6E'>; &quot;hello world 1&quot;</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>printf </span>&quot;hello
%s (%.3f)&quot; &quot;world&quot; 3.0) <span style='color:#5B6E6E'>; hello
world (3.000)</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>format </span>&quot;hello
%s (%.3f)&quot; &quot;world&quot; 3.0) <span style='color:#5B6E6E'>; &quot;hello
world (3.000)&quot;</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>str</span>
&quot;hello &quot; &quot;world &quot; 3) <span style='color:#5B6E6E'>; &quot;hello
world 3&quot;</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>println-str</span>
&quot;hello&quot; &quot;world&quot; 3)<span style='color:#5B6E6E'> ; &quot;hello
world 3\n&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span><span lang=EN-US
style='font-family:Consolas'>pr,prn,pr-str,prn-str</span><span
style='font-family:宋体'>与</span><span lang=EN-US style='font-family:Consolas'>print,println,print-str,println-str</span><span
style='font-family:宋体'>略有不同</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281923993"></a><a
name="_Toc281658833"></a><a name="_Toc281556340"></a><a name="_Toc281556236"></a><a
name="_Toc281556132"></a><a name="_Toc281555930"></a><a name="_Toc281555773"><span
lang=EN-US style='text-decoration:none'>2.1.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>注释</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>单行：</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'> ; ;; ;;; Lisper</span><span
style='font-family:宋体;color:#5B6E6E'>习惯于用越多</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>;</span><span style='font-family:
宋体;color:#5B6E6E'>表示越重要或者越概要的注释</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-family:宋体;color:#5B6E6E'>单行注释</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>;;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-family:宋体;color:#5B6E6E'>函数注释</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>;;;&nbsp;
&nbsp;&nbsp;macro</span><span style='font-family:宋体;color:#5B6E6E'>或者</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>defmulti</span><span
style='font-family:宋体;color:#5B6E6E'>的注释</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>;;;;&nbsp;&nbsp;
ns</span><span style='font-family:宋体;color:#5B6E6E'>注释</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>多行：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>(comment
&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>...1...</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>...2...</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.1.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>设置</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(set! <span
style='background:yellow'>*print-length*</span> 103)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(iterate inc
1)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>输出就不会太多而停不下来了：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(1 2 3 4 5 6 7
8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34
35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60
61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86
87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 ...)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>要改回无限制：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(set! <span
style='background:yellow'>*print-length*</span> false)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>另：</span><span
style='font-family:Consolas'> <span lang=EN-US>*command-line-args* &nbsp;</span></span><span
style='font-family:宋体'>获得命令行参数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183958"></a><a
name="_Toc281923994"></a><a name="_Toc281658834"></a><a name="_Toc281556341"></a><a
name="_Toc281556237"></a><a name="_Toc281556133"></a><a name="_Toc281555931"></a><a
name="_Toc281555774"><span lang=EN-US style='font-family:Consolas'>2.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>定义变量</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>def let binding</span></u></h2>

<pre style='line-height:16.8pt'><span style='font-size:10.5pt;color:black'>变量名可以下面字符开始（</span><span
lang=EN-US style='font-size:7.5pt;font-family:Consolas'><a
href="https://github.com/laurentpetit/ccw/blob/master/clojure-antlr-grammar/src/Clojure.g">https://github.com/laurentpetit/ccw/blob/master/clojure-antlr-grammar/src/Clojure.g</a></span><span
style='font-size:10.5pt;color:black'>）</span><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>:&nbsp;&nbsp; </span></pre><pre
style='line-height:16.8pt'><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas;color:black'>'a'..'z' | 'A'..'Z' | '*' | '+' | '!' | '-' | '_' | '?' | '&gt;' | '&lt;' | '=' | '$'</span></pre>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>def</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def</span><span
style='font-family:宋体'>定义值或名称，相当于</span><span lang=EN-US style='font-family:
Consolas'>Scala</span><span style='font-family:宋体'>的</span><span lang=EN-US
style='font-family:Consolas'>val/def</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>def</span> v1 10)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v2 (int 10)) ; </span><span style='font-family:
宋体'>定义成基本类型，在循环计算中可以提高效率</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v3 (fn [n] (* n n))) ; v3</span><span
style='font-family:宋体'>是函数别名</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.2.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>let</span></p>

<p class=MsoNormal><span style='font-family:宋体'>局部临时变量定义：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>let</span> [x 10] (println x))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义多个变量</span><span lang=EN-US
style='font-family:Consolas'> (def</span><span style='font-family:宋体'>好像不能定义多个</span><span
lang=EN-US style='font-family:Consolas'>)</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (let
<span style='background:yellow'>[</span>[x y] [3 4]<span style='background:
yellow'>]</span> (println (* x y))) ; 12</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (let
[x 3 y 4] (println (* x y)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (let
[[x y] [3 4 5]] [x y]) ; [3 4] </span><span style='font-family:宋体'>多余的</span><span
lang=EN-US style='font-family:Consolas'>5</span><span style='font-family:宋体'>被忽略</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (let
[[_ _ z] [3 4 5]] z) ; 5</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (let
[[a b <span style='background:yellow'>&amp; c</span>] [1 2 <span
style='background:yellow'>3 4 5</span>]] [a b c]) ; [1 2 <span
style='background:yellow'>(3 4 5)</span>]</span></p>

<p class=MsoNormal><span style='font-family:宋体'>多个变量之间可以依赖（后面的依赖前面的），这点</span><b><span
lang=EN-US style='font-family:Consolas'>*</span></b><b><span style='font-family:
宋体'>非常</span></b><b><span lang=EN-US style='font-family:Consolas'>*</span></b><b><span
style='font-family:宋体'>非常</span></b><b><span lang=EN-US style='font-family:
Consolas'>*</span></b><span style='font-family:宋体'>有用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (let
[x 10 y (* x x) z (* 2 y)] (println z)) ; 200</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>let</span><span
style='font-family:宋体'>的执行体内可以调用多个函数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (let
[x 10] <u>(println x)</u> <u>(println (* x x))</u>)</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.2.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>binding</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>binding</span><span
style='font-family:宋体'>可以临时改变</span><span lang=EN-US style='font-family:Consolas'>def</span><span
style='font-family:宋体'>定义的变量：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v1 10)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v2 20)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>binding</span>
[v1 1 v2 2] (+ v1 v2)) ; 3</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(+ v1 v2) ; 30</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn f [] (+ v1 v2))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>binding</span>
[v1 1 v2 2] (f)) ; 3</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(f) ; 30</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>binding</span><span
style='font-family:宋体'>内部还可以使用</span><span lang=EN-US style='font-family:Consolas'>set!</span><span
style='font-family:宋体'>来设置变量：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v 10)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>declare</span> x)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>binding</span> [x
20] (inc x)) ; 1 x</span><span style='font-family:宋体'>必须先用</span><span
lang=EN-US style='font-family:Consolas'>def</span><span style='font-family:
宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>declare</span><span
style='font-family:宋体'>定义</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>declare</span><span style='font-family:宋体'>定义变量但不绑定初始值：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>declare</span>
v1)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn f [] (println v1))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(let [v1 10] (f)) ; </span><span style='font-family:
宋体'>报错</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(binding [v1 100] (f)) ; 100</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.2.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>let binding</span><span style='font-family:"微软雅黑","sans-serif"'>区别</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def v 0)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f []
(println v))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let [v 10] (f))&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
; 0 </span><span style='font-family:宋体'>没有影响</span><span lang=EN-US
style='font-family:Consolas'>f</span><span style='font-family:宋体'>函数，只会影响</span><span
lang=EN-US style='font-family:Consolas'>(let..)</span><span style='font-family:
宋体'>内显式出现的</span><span lang=EN-US style='font-family:Consolas'>v</span><span
style='font-family:宋体'>值</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(binding [v
100] (f))&nbsp;&nbsp;&nbsp;&nbsp; ; 100 </span><span style='font-family:宋体'>影响</span><span
lang=EN-US style='font-family:Consolas'>f</span><span style='font-family:宋体'>函数，是</span><span
lang=EN-US style='font-family:Consolas'>ThreadLocal</span><span
style='font-family:宋体'>级别的</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183959"><span
lang=EN-US style='font-family:Consolas'>2.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>内部变量</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>函数或者过程内的变量可以使用</span><span
lang=EN-US style='font-family:Consolas'>let</span><span style='font-family:
宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>def</span><span
style='font-family:宋体'>来定义：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义：</span><span lang=EN-US
style='font-family:Consolas'>(x+y)*(x+y)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>let</span><span style='font-family:宋体'>（<span
style='color:#0070C0'>推荐</span>）：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn f1 [x y]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; (<span style='background:yellow'>let</span>
[xy (+ x y)]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:15.75pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;(* xy xy)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用内部</span><span lang=EN-US
style='font-family:Consolas'>def</span><span style='font-family:宋体'>（<span
style='color:red'>慎用</span></span><span lang=EN-US style='font-family:Consolas;
color:red'>,</span><span style='font-family:宋体;color:red'>不推荐</span><span
style='font-family:宋体'>）：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn f2 [x y]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; (<span style='background:yellow'>def</span>
xy (+ x y))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; (* xy xy))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183960"></a><a
name="_Toc281923995"></a><a name="_Toc281658835"></a><a name="_Toc281556342"></a><a
name="_Toc281556238"></a><a name="_Toc281556134"></a><a name="_Toc281555932"></a><a
name="_Toc281555775"><span lang=EN-US style='font-family:Consolas'>2.4<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>基本类型</span></u></a></h2>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281923996"></a><a
name="_Toc281658836"></a><a name="_Toc281556343"></a><a name="_Toc281556239"></a><a
name="_Toc281556135"></a><a name="_Toc281555933"></a><a name="_Toc281555776"><span
lang=EN-US style='text-decoration:none'>2.4.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>一览表</span></a></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>类型</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>例子</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>boolean</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>true false</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class true)
  -&gt; java.lang.Boolean</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>char</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>\a</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class \a)
  -&gt; java.lang.Character</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>string</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;hello&quot;</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class
  &quot;hi&quot;) -&gt; java.lang.String</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>keyword</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:tag :doc</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class :tag)
  -&gt; clojure.lang.Keyword</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>symbol</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(</span><span
  style='font-family:宋体'>指针或内部标识</span><span lang=EN-US style='font-family:
  Consolas'>)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>'a</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>+</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>java.lang.String</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class 'a) ;
  clojure.lang.Symbol</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class +) ; clojure.core$_PLUS_</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class map)
  ; clojure.core$map</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class
  java.lang.String) -&gt; java.lang.Class</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>list</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>'(1 2 3) </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(println
  &quot;hello&quot;)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>一组数据，或者函数调用</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class '(2
  3)) -&gt; clojure.lang.PersistentList</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>vector</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[1 2 3]</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class [1 2
  3]) -&gt; clojure.lang.PersistentVector</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>set</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#{:red
  :green :blue}</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class #{:r
  :g :b}) -&gt; clojure.lang.PersistentHashSet</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>{:name
  &quot;qh&quot; :age 30}</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class {:k1
  &quot;v1&quot;}) -&gt; clojure.lang.PersistentArrayMap</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>空</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>nil</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class nil)
  -&gt; nil</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>number</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 4.2</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class 1)
  -&gt; java.lang.Integer</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class 1.2)
  -&gt; java.lang.Double</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(class 1.2M)
  -&gt; java.math.BigDecimal</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>注：取类型用</span><span
style='font-family:Consolas'> </span><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>class</span> foo) </span><span style='font-family:
宋体'>或者</span><span lang=EN-US style='font-family:Consolas'> (<span
style='background:yellow'>type</span> foo)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281923997"></a><a
name="_Toc281658837"></a><a name="_Toc281556344"></a><a name="_Toc281556240"></a><a
name="_Toc281556136"></a><a name="_Toc281555934"></a><a name="_Toc281555777"><span
lang=EN-US style='text-decoration:none'>2.4.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>区分</span><span
lang=EN-US>#</span></a></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>样式</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>#{</span><span lang=EN-US style='font-family:Consolas'>1 3 5<span
  style='background:yellow'>}</span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>set</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>#(</span><span lang=EN-US style='font-family:Consolas'>.toUpperCase %<span
  style='background:yellow'>)</span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>匿名函数</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>#&quot;</span><span lang=EN-US style='font-family:Consolas'>a?b<span
  style='background:yellow'>&quot;</span></span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>regex</span><span
  style='font-family:宋体'>正则表达式</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281923998"></a><a
name="_Toc281658838"></a><a name="_Toc281556345"></a><a name="_Toc281556241"></a><a
name="_Toc281556137"></a><a name="_Toc281555935"></a><a name="_Toc281555778"><span
lang=EN-US style='text-decoration:none'>2.4.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Number</span></a></p>

<p class=4Consolas1><a name="_Toc281556242"></a><a name="_Toc281556138"></a><a
name="_Toc281555936"></a><a name="_Toc281555779"><span lang=EN-US
style='text-decoration:none'>2.4.3.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>Int</span></a></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(int 10)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(int 10.9) ; 10</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(int \a) ; 97</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(Integer/parseInt &quot;12&quot;) ; 12</span></p>

<p class=MsoNormal><span style='font-family:宋体'>数字转换为字符串：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(str 10) ; &quot;10&quot;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>数字运算符：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(+)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ;
0</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(+
3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 3</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(+ 3
4)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 7</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(+ 3 4 5)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 12</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(-)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
; </span><span style='font-family:宋体;color:#C00000'>错误</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(-
3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; -3</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(- 3
2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 1</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(- 3 2
2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; -1</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(*)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
; 1</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(/)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
; </span><span style='font-family:宋体;color:#C00000'>错误</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(/
3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 1/3</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(/ 3
2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 3/2</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(/ 3 2
2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; 3/4</span></p>

<p class=MsoNormal><span style='font-family:宋体'>判断奇偶：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(even? 10) ; true</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(odd? 3) ; true</span></p>

<p class=MsoNormal><span style='font-family:宋体'>判断正负：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(neg? -1.2) ; true</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(pos? 3) ; true</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(zero? 0.0) ; true</span></p>

<p class=MsoNormal><span style='font-family:宋体'>增减</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(inc 3) ; 4</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(dec 4) ; 3 </span></p>

<p class=MsoNormal><span style='font-family:宋体'>愿意用</span><span lang=EN-US
style='font-family:Consolas'>++</span><span style='font-family:宋体'>，</span><span
lang=EN-US style='font-family:Consolas'>--</span><span style='font-family:宋体'>的，可以</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def ++ inc)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def -- inc)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>随机数：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(rand-int 100) ; </span><span style='font-family:
宋体'>得到一个</span><span lang=EN-US style='font-family:Consolas'>[0 100) </span><span
style='font-family:宋体'>的随机数</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(for [i (range 20)] (<span style='background:yellow'>rand-int</span>
10)) ; (4 0 5 9 9 7 5 9 3 1 0 8 7 1 9 8 9 4 7 1)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(take 10 (repeatedly #(<span style='background:
yellow'>rand-int</span> 100))) ; (50 12 86 73 42 90 84 96 71 33)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>取一个集合中的随机位置元素：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>rand-nth</span>
[11 22 33 44 55]) ; </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(rand-nth (range 100)) ; </span><span
style='font-family:宋体'>每次运行结果会变</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>float</span><span
style='font-family:宋体'>随机数：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>rand</span>) ; [0
1.0) </span><span style='font-family:宋体'>的</span><span lang=EN-US
style='font-family:Consolas'>float</span><span style='font-family:宋体'>，如：</span><span
lang=EN-US style='font-family:Consolas'>0.43488316932510274</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(rand 10) ; [0 10.0)</span><span style='font-family:
宋体'>，如：</span><span lang=EN-US style='font-family:Consolas'>6.26826853733003</span></p>

<p class=4Consolas1><a name="_Toc281556243"></a><a name="_Toc281556139"></a><a
name="_Toc281555937"></a><a name="_Toc281555780"><span lang=EN-US
style='text-decoration:none'>2.4.3.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>bigint</span></a><span style='font-family:"微软雅黑","sans-serif"'>、</span><span
lang=EN-US>BigInt</span><span style='font-family:"微软雅黑","sans-serif"'>、</span><span
lang=EN-US>BigInteger</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure1.3</span><span
style='font-family:宋体'>对</span><span lang=EN-US style='font-family:Consolas'>bigint</span><span
style='font-family:宋体'>的处理发生了变化，原来的</span><span lang=EN-US style='font-family:
Consolas'>bigint</span><span style='font-family:宋体'>就直接用</span><span
lang=EN-US style='font-family:Consolas'>java.math.BigInteger</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>1.3</span><span
style='font-family:宋体'>为了统一并提高数值较小时的运算速度，自己造了</span><span lang=EN-US
style='font-family:Consolas'>clojure.lang.BigInt</span><span style='font-family:
宋体'>，但没有实现所有</span><span lang=EN-US style='font-family:Consolas'>BigInteger</span><span
style='font-family:宋体'>的方法。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def v
(BigInteger/valueOf 10000000000000000000000000))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(type v) ; java.math.BigInteger</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(type (<span
style='background:yellow'>bigint</span> v)) ; BigInteger </span><span
style='font-family:宋体'>转为</span><span lang=EN-US style='font-family:Consolas'>clojure.lang.BigInt</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(type (<span
style='background:yellow'>BigInteger/valueOf</span> (bigint v))) ; BigInt</span><span
style='font-family:宋体'>转为</span><span lang=EN-US style='font-family:Consolas'>BigInteger</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="93%"
 style='width:93.12%;border-collapse:collapse;border:none'>
 <tr>
  <td width="16%" valign=top style='width:16.52%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width="83%" valign=top style='width:83.48%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.52%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure 1.2</span></p>
  </td>
  <td width="83%" valign=top style='width:83.48%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(type
  (bigint 3)) ; java.math.BigInteger </span></p>
  <p class=MsoNormal><span style='font-family:宋体'>有</span><span lang=EN-US
  style='font-family:Consolas'>.pow .isProbablePrime</span><span
  style='font-family:宋体'>等方法可用</span></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.52%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure 1.3</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width="83%" valign=top style='width:83.48%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(type
  (bigint 3)) ; clojure.lang.BigInt</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>可用方法少，但数小时运算更快</span><span
  lang=EN-US style='font-family:Consolas'>,</span><span style='font-family:
  宋体'>要用</span><span lang=EN-US style='font-family:Consolas'>BigInteger</span><span
  style='font-family:宋体'>的方法的话，可先转换：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(BigInteger/valueOf
  3) ; 3</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(BigInteger/valueOf
  3N) ; 3</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(bigint 3) ;
  3N</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=4Consolas1><span lang=EN-US style='text-decoration:none'>2.4.3.3<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US>= ==</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>==</span><span
style='font-family:宋体'>只能用于</span><span lang=EN-US style='font-family:Consolas'>Number</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>=</span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>java</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>equals()</span><span
style='font-family:宋体'>，可用于对象、数字、数据结构集合等</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (==
(+ 1 2) 3) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (=&nbsp;
(+ 1 2) 3) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (==
(+ 0.5 0.5) 1) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (=&nbsp;
(+ 0.5 0.5) 1) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (==
true (not false)) ; </span><span style='font-family:宋体;color:#C00000'>报错</span><span
style='font-family:Consolas;color:#C00000'> </span><span style='font-family:
宋体;color:#C00000'>不是数字类型</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (=&nbsp;
true (not false)) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (=
[1 2 3] (conj [1 2] 3)) ; true</span></p>

<p class=4Consolas1><span lang=EN-US style='text-decoration:none'>2.4.3.4<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:"微软雅黑","sans-serif"'>其他进制的数</span></p>

<p class=MsoNormal><span style='font-family:宋体'>表示法：进制</span><span lang=EN-US
style='font-family:Consolas'>r</span><span style='font-family:宋体'>数</span></p>

<p class=MsoNormal><span style='font-family:宋体'>比如</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>进制</span><span
lang=EN-US style='font-family:Consolas'>101</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>2r</span>1001 ; 2</span><span style='font-family:
宋体'>进制数，</span><span lang=EN-US style='font-family:Consolas'>=9</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>16r</span>FF&nbsp; ; 16</span><span style='font-family:
宋体'>进制数，</span><span lang=EN-US style='font-family:Consolas'>=256</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>10r</span>19&nbsp; ; 10</span><span style='font-family:
宋体'>进制数，</span><span lang=EN-US style='font-family:Consolas'>=19</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; 36rZ
; 36</span><span style='font-family:宋体'>进制数，</span><span lang=EN-US
style='font-family:Consolas'>=35</span></p>

<p class=MsoNormal><span style='font-family:宋体'>其中，</span><span lang=EN-US
style='font-family:Consolas'>16</span><span style='font-family:宋体'>进制和</span><span
lang=EN-US style='font-family:Consolas'>8</span><span style='font-family:宋体'>进制可表示成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; 0xFF
; 256</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; 010
; 8</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>10</span><span
style='font-family:宋体'>进制数――</span><span lang=EN-US style='font-family:Consolas'>&gt;</span><span
style='font-family:宋体'>其他进制字符串：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (Integer/toString
1024 2) ; &quot;10000000000&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (Integer/toString
196 16) ; &quot;c4&quot;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>其他进制字符串――</span><span
lang=EN-US style='font-family:Consolas'>&gt; 10</span><span style='font-family:
宋体'>进制数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (Integer/parseInt
&quot;1001&quot; 2) ; 9</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (Integer/parseInt
&quot;ce&quot; 16) ; 206</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=4Consolas1><a name="_Toc281556244"></a><a name="_Toc281556140"></a><a
name="_Toc281555938"></a><a name="_Toc281555781"><span lang=EN-US
style='text-decoration:none'>2.4.3.5<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>Ratio</span></a></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def x (/ 1 3))&nbsp; ; 1/3</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>class</span> x) ;
clojure.lang.Ratio</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(* x 3) ; 1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>小数转换为分数：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>rationalize</span><b>
</b>1.33) ; 133/100</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>rationalize</span>
1.4M) ; 7/5</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>rationalize</span>
5.0) ; 5</span></p>

<p class=MsoNormal><span style='font-family:宋体'>取分子分母：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>numerator</span>
(/ 2 3))&nbsp;&nbsp;&nbsp; ; 2</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>denominator</span>
(/ 2 3))&nbsp; ; 3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>要整除：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>quot</span> 10 3) ; 3 </span><span style='font-family:
宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>java</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>10/3&nbsp;
quotient: </span><span style='font-family:宋体'>除法的商</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>rem</span> 10 3) ; 1 </span><span style='font-family:
宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>java</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>
10 % 3 <span style='background:yellow'>rem</span>inder</span><span
style='font-family:宋体'>：余数</span></p>

<p class=4Consolas1><a name="_Toc281556245"></a><a name="_Toc281556141"></a><a
name="_Toc281555939"></a><a name="_Toc281555782"><span lang=EN-US
style='text-decoration:none'>2.4.3.6<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>BigDecimal</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>表示：</span><span lang=EN-US
style='font-family:Consolas'>1.20M</span></p>

<p class=MsoNormal><span style='font-family:宋体'>比较：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(+ 1 (/ 0.00001 1000000000000000000)) ; 1.0</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(+ 1 (/ 0.00001M 1000000000000000000)) ; 1.00000000000000000000001M</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(class (* 1000 1000 1000)) ; java.lang.Integer</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(class (* 1000 1000 1000 1000 1000 1000 1000
1000)) ; </span><span style='font-family:宋体'>自动提升为</span><span lang=EN-US
style='font-family:Consolas'>java.math.BigInteger</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>with-precision</span> 10 (/ 1M 3)) ; 0.3333333333M</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281923999"></a><a
name="_Toc281658839"></a><a name="_Toc281556346"></a><a name="_Toc281556246"></a><a
name="_Toc281556142"></a><a name="_Toc281555940"></a><a name="_Toc281555783"><span
lang=EN-US style='text-decoration:none'>2.4.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Boolean</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>原则：<b><u>除了</u></b></span><b><u><span
lang=EN-US style='font-family:Consolas'>false</span></u></b><b><u><span
style='font-family:宋体'>和</span></u></b><b><u><span lang=EN-US style='font-family:
Consolas'>nil</span></u></b><b><u><span style='font-family:宋体'>，其他都为</span></u></b><b><u><span
lang=EN-US style='font-family:Consolas'>true</span></u></b></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(&gt; 5 2) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (&gt;=
5 2) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (&gt;=
5 5) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (=
5 2) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (=
5 5) ; true</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以不止</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>个数比较，非常方便：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (&gt;
5 3 1 -1) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (&gt;
5 3 6) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (=
2 2 2 2 2) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (not
(= 5 3)) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>not=</span> 5 3) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (and
true false) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (or
true false) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n</span><span
style='font-family:宋体'>为</span><span lang=EN-US style='font-family:Consolas'>0</span><span
style='font-family:宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>1</span><span
style='font-family:宋体'>，可以写成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (&lt;=
0 n 1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>返回值为</span><span lang=EN-US
style='font-family:Consolas'>true/false</span><span style='font-family:宋体'>的函数一般名字最后是</span><span
lang=EN-US style='font-family:Consolas'>&quot;?&quot;</span><span
style='font-family:宋体'>，如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (string<span
style='background:yellow'>?</span> &quot;hello&quot;) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
isodd<span style='background:yellow'>?</span> [n] (= 0 (mod n 2))) </span></p>

<p class=MsoNormal><span style='font-family:宋体'>判断奇偶正负：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (odd?
3) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (even?
2) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (pos?
1.2) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (zero?
0) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (neg?
-3) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=4Consolas1><span lang=EN-US style='text-decoration:none'>2.4.4.1<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US>and/or</span><span
style='font-family:"微软雅黑","sans-serif"'>的应用</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=42 valign=top style='width:31.35pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>or</span></p>
  </td>
  <td width=445 valign=top style='width:333.75pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>从左到右，碰到非“</span><span
  lang=EN-US style='font-family:Consolas'>nil</span><span style='font-family:
  宋体'>和</span><span lang=EN-US style='font-family:Consolas'>false</span><span
  style='font-family:宋体'>”马上返回，否则返回最后一个</span></p>
  </td>
 </tr>
 <tr>
  <td width=42 valign=top style='width:31.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>and</span></p>
  </td>
  <td width=445 valign=top style='width:333.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>从左到右，碰到“</span><span
  lang=EN-US style='font-family:Consolas'>nil</span><span style='font-family:
  宋体'>或</span><span lang=EN-US style='font-family:Consolas'>false</span><span
  style='font-family:宋体'>”马上返回，否则返回最后一个</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：操作不成功时提供缺省值：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(or (first nil) &quot;default&quot;) ; &quot;default&quot;</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(or (first [1 2]) &quot;default&quot;) ; 1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(and nil &quot;default&quot;) ; nil</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(and 1 2) ; 2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924000"></a><a
name="_Toc281658840"></a><a name="_Toc281556347"></a><a name="_Toc281556247"></a><a
name="_Toc281556143"></a><a name="_Toc281555941"></a><a name="_Toc281555784"><span
lang=EN-US style='text-decoration:none'>2.4.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>String</span></a></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(str 10) <span style='color:#5B6E6E'>;
&quot;10&quot;</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(str \a) <span style='color:#5B6E6E'>;
&quot;a&quot;</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(str \a <span style='background:yellow'>nil</span>
&quot;bc&quot;) <span style='color:#5B6E6E'>; &quot;abc&quot;</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(str &quot;hello&quot; &quot;world&quot;) <span
style='color:#5B6E6E'>; &quot;hello world&quot;</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(str '(\a \b \c)) <span style='color:#5B6E6E'>; &quot;(\\a
\\b \\c)&quot;</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>apply</span> str
'(\a \b \c)) <span style='color:#5B6E6E'>; &quot;abc&quot; </span></span><span
style='font-family:宋体;color:#5B6E6E'>相当于</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'> (str \a \b \c)</span><span
lang=EN-US style='font-family:Consolas'><br>
(seq &quot;abc&quot;) <span style='color:#5B6E6E'>; (\a \b \c)</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(format &quot;%s %s&quot; &quot;hello&quot;
&quot;world&quot;) <span style='color:#5B6E6E'>; &quot;hello world&quot;</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(subs &quot;12345&quot; 1) ; <span
style='color:#5B6E6E'>&quot;2345&quot; </span></span><span style='font-family:
宋体;color:#5B6E6E'>相当于</span><span lang=EN-US style='font-family:Consolas;
color:#5B6E6E'> (.substring &quot;12345&quot; 1)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(subs &quot;12345&quot; 1 3) ; <span
style='color:#5B6E6E'>&quot;23&quot;</span></span><span style='font-family:
宋体;color:#5B6E6E'>相当于</span><span lang=EN-US style='font-family:Consolas;
color:#5B6E6E'> (.substring &quot;12345&quot; 1 3)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(apply str (<span style='background:yellow'>reverse</span>
&quot;12345&quot;)) ; <span style='color:#5B6E6E'>&quot;54321&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>Stringx.join</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>实现</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(apply str (interpose sep seq))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(apply str (interpose &quot; + &quot; [1 2 3 4
5])) ; &quot;1 + 2 + 3 + 4 + 5&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span><span lang=EN-US
style='font-family:Consolas'>wr3.clj.s</span><span style='font-family:宋体'>有所有常用的</span><span
lang=EN-US style='font-family:Consolas'>String</span><span style='font-family:
宋体'>处理函数，</span><span lang=EN-US style='font-family:Consolas'>clojure.string</span><span
style='font-family:宋体'>也有部分重要的</span><span lang=EN-US style='font-family:Consolas'>String</span><span
style='font-family:宋体'>函数，如：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>blank? escape join split split-lines</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>capitalize lower-case/upper-case</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>replace replace-first reverse</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924001"></a><a
name="_Toc281658841"></a><a name="_Toc281556348"></a><a name="_Toc281556248"></a><a
name="_Toc281556144"></a><a name="_Toc281555942"></a><a name="_Toc281555785"><span
lang=EN-US style='text-decoration:none'>2.4.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Char</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>\a \n \t <span
style='background:yellow'>\space</span> \\</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(char 97) ; \a</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(first
&quot;hello&quot;) ; \h</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>ffirst</span> [&quot;hello&quot; &quot;world&quot;])
; \h</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(nth
&quot;hello&quot; 4) ; \o</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(Character/toUpperCase
\s) ; \S</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(interleave
&quot;abc&quot; &quot;123&quot;) ; (\a \1 \b \2 \c \3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(apply str
(interleave &quot;abc&quot; &quot;123&quot;)) ; &quot;a1b2c3&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(seq
&quot;hello&quot;) ; (\h \e \l \l \o)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(vec
&quot;hello&quot;) ; [\h \e \l \l \o]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(vector
&quot;hello&quot;) ; [&quot;hello&quot;]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.4.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>fnil</span></p>

<p class=MsoNormal><span style='font-family:宋体'>针对</span><span lang=EN-US
style='font-family:Consolas'>nil</span><span style='font-family:宋体'>，</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>提供了</span><span lang=EN-US style='font-family:Consolas'>fnil</span><span
style='font-family:宋体'>函数，可把</span><span lang=EN-US style='font-family:Consolas'>f</span><span
style='font-family:宋体'>函数的第</span><span lang=EN-US style='font-family:Consolas'>1</span><span
style='font-family:宋体'>个或者</span><span lang=EN-US style='font-family:Consolas'>2</span><span
style='font-family:宋体'>个参数如下处理：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f [a b]
(+ a b))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f 10 nil) ;<span
style='color:red'> java.lang.NullPointerException</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
style='background:yellow'>fnil</span> f 0 0) 10 nil) ; 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
style='background:yellow'>fnil</span> f 0 0) nil 10) ; 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
style='background:yellow'>fnil</span> f 0 0) nil nil) ; 0 </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
style='background:yellow'>fnil</span> f 0) nil 10) ; 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
style='background:yellow'>fnil</span> f 0) 10 nil) ; <span style='color:red'>java.lang.NullPointerException</span></span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183961"></a><a
name="_Toc281924002"></a><a name="_Toc281658842"></a><a name="_Toc281556349"></a><a
name="_Toc281556249"></a><a name="_Toc281556145"></a><a name="_Toc281555943"></a><a
name="_Toc281555786"><span lang=EN-US style='font-family:Consolas'>2.5<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>类型判断</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>取类型：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>class</span> foo)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>判断类型：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>instance?</span> Integer 10)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>instance?</span> String &quot;hi&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>特定类型判断的单目表达式：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (true?
true) ; </span><span style='font-family:宋体'>只有</span><span lang=EN-US
style='font-family:Consolas'>true</span><span style='font-family:宋体'>为</span><span
lang=EN-US style='font-family:Consolas'>true</span><span style='font-family:
宋体'>，其他皆为</span><span lang=EN-US style='font-family:Consolas'>false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (true?
false) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (true?
nil) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (true?
&quot;&quot;) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (true?
&quot;abc&quot;) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (false?
false) ; </span><span style='font-family:宋体'>只有</span><span lang=EN-US
style='font-family:Consolas'>false</span><span style='font-family:宋体'>为</span><span
lang=EN-US style='font-family:Consolas'>true</span><span style='font-family:
宋体'>，其他皆为</span><span lang=EN-US style='font-family:Consolas'>false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (false?
true) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (false?
nil) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (nil?
nil) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (nil?
false) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (zero?
0) ; true </span><span style='font-family:宋体'>参数只能是数字</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (zero?
0.0) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (zero?
0.0M) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (zero?
(/ 1 3)) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (char?
\a) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (string?
&quot;hello&quot;) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (number?
10) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (number?
10.3) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (number?
10.3M) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (number?
(/ 1 3)) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (integer?
10) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (ratio?
(/ 1 3)) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (every?
rational? [3 3.14M (/ 1 3)]) ; true </span><span style='font-family:宋体'>有理数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (float?
1.3) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (float?
(double 1.3)) ; true *</span><span style='font-family:宋体'>没有</span><span
lang=EN-US style='font-family:Consolas'>* (double? 1.3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (keyword?
:k1) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (symbol?
's1) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(every? <span style='background:yellow'>coll?</span>
(list [] '() {} #{})) ; true</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(seq? '()) ; true</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(vector? []) ; true</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(list? '()) ; true</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(map? {}) ; true</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(set? #{}) ; true</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.5.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>使用</span><span
lang=EN-US>seq</span><span style='font-family:"微软雅黑","sans-serif"'>做判断</span></p>

<p class=MsoNormal><span style='font-family:宋体'>利用</span><span lang=EN-US
style='font-family:Consolas'>seq </span><span style='font-family:宋体'>的特性</span><span
lang=EN-US style='font-family:Consolas'>:</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(seq nil) ; nil</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(seq {}) ; nil</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(seq []) ; nil</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(seq #{}) ; nil</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(seq '()) ; nil</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可统一判断处理空的基本类型、</span><span
lang=EN-US style='font-family:Consolas'>sequence</span><span style='font-family:
宋体'>类型</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183962"></a><a
name="_Toc281924003"></a><a name="_Toc281658843"></a><a name="_Toc281556350"></a><a
name="_Toc281556250"></a><a name="_Toc281556146"></a><a name="_Toc281555944"></a><a
name="_Toc281555787"><span lang=EN-US style='font-family:Consolas'>2.6<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>条件语句</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>if when cond</span></u><u><span lang=EN-US
style='font-family:Consolas'> condp case</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>if</span><span
style='font-family:宋体'>条件中除了</span><span lang=EN-US style='font-family:Consolas'>false</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>nil</span><span
style='font-family:宋体'>，其他都为</span><span lang=EN-US style='font-family:Consolas'>true</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(if true &quot;true&quot;) ; &quot;true&quot;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(if 0 &quot;true&quot;) ; &quot;true&quot; </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(if &quot;&quot; &quot;true&quot;) ;
&quot;true&quot;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(if nil &quot;true&quot;) ; nil</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(if false &quot;true&quot;) ; nil</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>if-not</span>
false &quot;true&quot;) ; true</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>if-not</span> true
&quot;true&quot;) ; nil</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (if
(not (= a b)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
style='font-family:Consolas'>not=</span><span style='font-family:宋体'>可以写成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (if
(<span style='background:yellow'>not=</span> a b))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
style='font-family:Consolas'>if-not</span><span style='font-family:宋体'>可以写成</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (if-not
(= a b))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>第三个参数就是</span><span lang=EN-US
style='font-family:Consolas'>else</span><span style='font-family:宋体'>子句，但</span><span
lang=EN-US style='font-family:Consolas'>&quot;else&quot;</span><span
style='font-family:宋体'>不用写：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(if true &quot;true&quot; &quot;false&quot;) ;
&quot;true&quot;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(if false &quot;true&quot; &quot;false&quot;) ;
&quot;false&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>when</span><span
style='font-family:宋体'>没有</span><span lang=EN-US style='font-family:Consolas'>else</span><span
style='font-family:宋体'>子句，执行条件后的所有语句：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (when
true <u>&quot;1&quot; &quot;2&quot; &quot;3&quot;</u>)&nbsp; ; &quot;3&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (when
false <u>&quot;1&quot; &quot;2&quot; &quot;3&quot;</u>) ; nil</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>when-not</span> false &quot;1&quot;) ; &quot;1&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (when-not
true &quot;1&quot;) ; nil</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：区别</span><span lang=EN-US
style='font-family:Consolas'>if</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>when</span><span style='font-family:
宋体'>，打印小于</span><span lang=EN-US style='font-family:Consolas'>5</span><span
style='font-family:宋体'>的正整数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(loop [i 1] (<span
style='background:yellow'>if</span> (&lt; i 5) (println i) (recur (inc i)))) ; </span><span
style='font-family:宋体;color:red'>错误</span><span style='font-family:Consolas;
color:red'> </span><span style='font-family:宋体;color:red'>仅打印</span><span
lang=EN-US style='font-family:Consolas;color:red'>1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(loop [i 1] (<span
style='background:yellow'>if</span> (&lt; i 5) (<span style='background:yellow'>do</span>
(println i) (recur (inc i))))) ; </span><span style='font-family:宋体'>正确</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(loop [i 1] (<span
style='background:yellow'>when</span> (&lt; i 5) (println i) (recur (inc i))))
; </span><span style='font-family:宋体'>正确</span><span lang=EN-US
style='font-family:Consolas'> when</span><span style='font-family:宋体'>把条件判断后的所有都执行</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>cond</span><span
style='font-family:宋体'>类似于</span><span lang=EN-US style='font-family:Consolas'>switch..case..default:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>cond</span> (= 5 2) &quot;5==2&quot; (= 5 5)
&quot;5==5&quot; (= 5 6) &quot;5==6&quot;) ; &quot;5==5&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
f [n] (<span style='background:yellow'>cond</span> (&lt; n 0) &quot;&lt;0&quot;
(&lt; n 10) &quot;&lt;10&quot; <span style='background:yellow'>:else</span>
&quot;&gt;=10&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f
-1) ; &quot;&lt;0&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f
1) ; &quot;&lt;10&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f
10) ; &quot;&gt;=10&quot;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：</span><span lang=EN-US
style='font-family:Consolas'>:else</span><span style='font-family:宋体'>只是个习惯用法，</span><span
style='font-family:Consolas'> </span><span style='font-family:宋体'>变成其他东西，不影响</span><span
lang=EN-US style='font-family:Consolas'>cond</span><span style='font-family:
宋体'>的功能。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：猜数字游戏</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def ans
(rand-int 100))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn guess
[n] (cond (= n ans) &quot;got it!&quot; (&lt; n ans) &quot;too small&quot;
(&gt; n ans) &quot;too large&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(guess 62)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>condp:</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>condp</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>对应的</span></b><b><span lang=EN-US style='font-family:
  Consolas'>cond</span></b><b><span style='font-family:宋体'>写法</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def n 3)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def n 3)</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>condp</span> <b><span style='background:yellow'>= n</span></b>
  <u>2 &quot;2=n&quot;</u> <u>3 &quot;3=n&quot;</u> <u>&quot;no match&quot;</u>)
  ; &quot;3=n&quot;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(cond (= 2
  n) &quot;2=n&quot; (= 3 n) &quot;3=n&quot; :else &quot;no match&quot;)</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>condp</span> <b><span style='color:red;background:
  yellow'>&gt; n</span></b> <u>0 &quot;0&gt;n&quot;</u> <u>5 &quot;5&gt;n&quot;</u>
  <u>&quot;others&quot;</u>) ; &quot;5&gt;n&quot;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(cond <b><span
  style='background:yellow'>(<span style='color:red'>&gt; 0 n</span>)</span></b>
  &quot;0&gt;n&quot; <b><span style='color:red;background:yellow'>(&gt; 5 n)</span></b>
  &quot;5&gt;n&quot; :else &quot;other&quot;)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>注意：可见后面的值如</span><span
lang=EN-US style='font-family:Consolas'>0</span><span style='font-family:宋体'>，</span><span
lang=EN-US style='font-family:Consolas'>5</span><span style='font-family:宋体'>是作为</span><span
lang=EN-US style='font-family:Consolas'>&gt;</span><span style='font-family:
宋体'>函数的第一个参数</span><span lang=EN-US style='font-family:Consolas'>.</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>case</span><span
style='font-family:宋体'>类似于</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>switch:</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:14.15pt'><span
lang=EN-US style='font-family:Consolas'>(defn f [x] (<span style='background:
yellow'>case</span> x </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:14.15pt'><span
lang=EN-US style='font-family:Consolas'>1 10 </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:14.15pt'><span
lang=EN-US style='font-family:Consolas'>2 20 </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:14.15pt'><span
lang=EN-US style='font-family:Consolas'>3 30 </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:14.15pt'><span
lang=EN-US style='font-family:Consolas'>0))</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:14.15pt'><span
lang=EN-US style='font-family:Consolas'>(f 1) ; 10</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:14.15pt'><span
lang=EN-US style='font-family:Consolas'>(f 3) ; 30</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:14.15pt'><span
lang=EN-US style='font-family:Consolas'>(f 4) ; 0</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:14.15pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>case</span><span
style='font-family:宋体'>可以匹配不同类型：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn jumper [x]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; (<span style='background:yellow'>case</span>
x</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &quot;JoC&quot;&nbsp;&nbsp;
:a-book</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &quot;Fogus&quot; :a-boy</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; :eggs&nbsp;&nbsp; :breakfast</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (+ x 100)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; [42]&nbsp;&nbsp;&nbsp;
:a-vector-of-42</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&quot;The default&quot;))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.6.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>when-first</span></p>

<p class=MsoNormal><span style='font-family:宋体'>另有</span><span lang=EN-US
style='font-family:Consolas'>when-first(</span><span style='font-family:宋体'>“但集合不为空或者</span><span
lang=EN-US style='font-family:Consolas'>nil</span><span style='font-family:
宋体'>时，绑定为第一个元素”：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(when-first [a
[1 3 5]] a) ; 1 </span><span style='font-family:宋体'>如果</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(when-first [a
[1 3 5]] &quot;hello&quot;) ; &quot;hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(when-first [a
[]] a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; nil</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(when-first [a
nil] a)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; nil</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.6.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>if-let when-let</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>if-let</span><span
style='font-family:宋体'>在值不为</span><span lang=EN-US style='font-family:Consolas'>nil</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>false</span><span
style='font-family:宋体'>时执行前者，否则后者：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(= (<span
style='background:yellow'>if-let</span> [a nil] a 10) 10)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(= (<span
style='background:yellow'>if-let</span> [a false] &quot;yes&quot;
&quot;no&quot;) &quot;no&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(= (<span
style='background:yellow'>if-let</span> [a 4] (* a 10) 10) 40)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>when-let</span><span
style='font-family:宋体'>在值为</span><span lang=EN-US style='font-family:Consolas'>nil</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>false</span><span
style='font-family:宋体'>时返回</span><span lang=EN-US style='font-family:Consolas'>nil</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(= (<span
style='background:yellow'>when-let</span> [a 4] (* a 10)) 40)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(= (<span
style='background:yellow'>when-let</span> [a false] (* a 10)) nil)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>when-let</span> [a 9] (println a) (+ a 4))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>9</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>13</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183963"></a><a
name="_Toc281924004"></a><a name="_Toc281658844"></a><a name="_Toc281556351"></a><a
name="_Toc281556251"></a><a name="_Toc281556147"></a><a name="_Toc281555945"></a><a
name="_Toc281555788"><span lang=EN-US style='font-family:Consolas'>2.7<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>循环语句</span></u></a></h2>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281658845"></a><a
name="_Toc281556352"></a><a name="_Toc281556252"></a><a name="_Toc281556148"></a><a
name="_Toc281555946"></a><a name="_Toc281555789"></a><a name="_Toc281924005"><span
lang=EN-US style='text-decoration:none'>2.7.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>loop</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>loop</span> <span style='background:yellow'>[</span><u>a
[1 3 5] b [2 4 6]</u><span style='background:yellow'>]</span> (interleave a b))
<span style='color:#5B6E6E'>; (1 2 3 4 5 6)</span></span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924006"><span
lang=EN-US style='text-decoration:none'>2.7.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>if recur, when recur</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((fn [s ii] (<span
style='background:yellow'>if</span> ii <u>(<span style='background:yellow'>recur</span>
(subs s (first ii)) (next ii))</u> s)) </span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&quot;hello world&quot; [1 2 3]) ;
&quot;world&quot;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对比</span><span lang=EN-US
style='font-family:Consolas'>loop..if..recur</span><span style='font-family:
宋体'>版本：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>loop</span> [s &quot;hello world&quot; ii [1 2 3]] (<span
style='background:yellow'>if</span> ii <u>(<span style='background:yellow'>recur</span>
(subs s (first ii)) (next ii))</u> s)) ; &quot;world&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>仅使用</span><span lang=EN-US
style='font-family:Consolas'>recur</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn f [n] <u>(when (pos? <b>n</b>) (println <b>n</b>)
(<span style='background:yellow'>recur</span> (dec <b>n</b>))))</u></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn f [n] <u>(when (pos? <b>n</b>) (do (println <b>n</b>)
(<span style='background:yellow'>recur</span> (dec <b>n</b>))))</u>)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>相当于如下的简写：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn f [n] (loop [i n] <u>(when (pos? <b>i</b>)
(do (println <b>i</b>) (<span style='background:yellow'>recur</span> (dec <b>i</b>))))</u>
))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：求下一个素数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn pnext
[n] (let [n2 (inc n)] (if (prime? n2) n2 (recur n2))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如何找集合中符合条件的第一个元素（模拟</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>find</span><span
style='font-family:宋体'>）</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=80 valign=top style='width:59.7pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>方法</span><span lang=EN-US
  style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>
  </td>
  <td width=602 valign=top style='width:451.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>可以用</span><span lang=EN-US
  style='font-family:Consolas'>if..recur</span><span style='font-family:宋体'>：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn
  find-first [pred coll]</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(loop [c
  coll] (if (or (empty? c) (pred (first c))) (first c) (recur (rest c)))))</span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:59.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>方法</span><span lang=EN-US
  style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>
  </td>
  <td width=602 valign=top style='width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>其实由于</span><span lang=EN-US
  style='font-family:Consolas'>filter</span><span style='font-family:宋体'>是</span><span
  lang=EN-US style='font-family:Consolas'>lazy</span><span style='font-family:
  宋体'>的，如下即可：</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span class=apple-style-span><span
  lang=EN-US style='font-family:Consolas;color:black'>(first (filter pred
  coll))</span></span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:59.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>方法</span><span lang=EN-US
  style='font-family:Consolas'>3</span><span style='font-family:宋体'>：</span></p>
  </td>
  <td width=602 valign=top style='width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>或者直接用</span><span lang=EN-US
  style='font-family:Consolas'>contrib</span><span style='font-family:宋体'>中的函数：</span></p>
  <p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>(use '[<u>clojure.contrib.seq-utils</u> :only
  (find-first)])</span></p>
  <p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>find-first</span>
  even? [1 3 5 2 4]) ; 2</span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:59.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span style='font-family:宋体'>方法</span></b><b><span
  lang=EN-US style='font-family:Consolas'>4</span></b><b><span
  style='font-family:宋体'>：</span></b></p>
  </td>
  <td width=602 valign=top style='width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>巧用</span><span lang=EN-US
  style='font-family:Consolas'>some</span><span style='font-family:宋体'>：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(some #(when
  (pred %) %) coll)</span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:59.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>方法</span><span lang=EN-US
  style='font-family:Consolas'>5</span><span style='font-family:宋体'>：</span></p>
  </td>
  <td width=602 valign=top style='width:451.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span class=apple-style-span><span style='font-family:
  宋体;color:black'>用补函数：</span></span></p>
  <p class=MsoNormal><span class=apple-style-span><span lang=EN-US
  style='font-family:Consolas;color:black'>(first (drop-while (complement pred)
  coll))</span></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>这样</span><span lang=EN-US
style='font-family:Consolas'>pnext</span><span style='font-family:宋体'>也可以写成</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn pnext
[n] (find-first prime? (range (inc n) (* 2 n))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn pnext
[n] (first (filter prime? (iterate inc (inc n)))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(take 10
(iterate pnext 2))</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.7.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>loop if recur</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>是</span><span lang=EN-US style='font-family:Consolas'>FP</span><span
style='font-family:宋体'>，没有</span><span lang=EN-US style='font-family:Consolas'>C/Java</span><span
style='font-family:宋体'>的循环变量，要使用递归（</span><span lang=EN-US style='font-family:
Consolas'>recursion</span><span style='font-family:宋体'>）。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>形式：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>loop </span>[<u><span style='background:lime'>v ..</span></u>]
(<span style='background:yellow'>if </span>(..) <b><u>rt</u></b> (<span
style='background:yellow'>recur </span><u><span style='background:lime'>v' ..</span></u>)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>说明：</span></p>

<p class=MsoNormal style='margin-left:42.05pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>recur</span><span
style='font-family:宋体'>表示递归表达式；</span><span lang=EN-US style='font-family:Consolas'>if</span><span
style='font-family:宋体'>内的条件是循环退出条件，如果多个条件也可以用</span><span lang=EN-US
style='font-family:Consolas'>cond</span><span style='font-family:宋体'>；</span><span
lang=EN-US style='font-family:Consolas'>rt</span><span style='font-family:宋体'>是递归出口值；</span></p>

<p class=MsoNormal style='margin-left:42.05pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas;background:lime'>v
..</span></u><span style='font-family:宋体'>是循环变量初始值，</span><u><span lang=EN-US
style='font-family:Consolas;background:lime'>v' ..</span></u><span
style='font-family:宋体'>是</span><u><span lang=EN-US style='font-family:Consolas;
background:lime'>v ..</span></u><span style='font-family:宋体'>对应的变化（位置必须一致，变量个数必须一致）；</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：变量</span><span lang=EN-US
style='font-family:Consolas'>x</span><span style='font-family:宋体'>从</span><span
lang=EN-US style='font-family:Consolas'>1</span><span style='font-family:宋体'>到</span><span
lang=EN-US style='font-family:Consolas'>7</span><span style='font-family:宋体'>，变量</span><span
lang=EN-US style='font-family:Consolas'>r</span><span style='font-family:宋体'>存值</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>loop</span> [r [] x 1] (<span style='background:yellow'>if</span>
(&gt; x 7) r <u>(<span style='background:yellow'>recur</span> (conj r x) (inc
x))</u>)) ; [1 2 3 4 5 6 7]</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>loop</span><span style='font-family:宋体'>就不用定义函数了，对比：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f [r x]
(if (&gt; x 7) r (recur (conj r x) (inc x))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f [] 1) ; [1
2 3 4 5 6 7]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>1+2+</span><span style='font-family:宋体'>……</span><span
lang=EN-US style='font-family:Consolas'>+100</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><img
width=711 height=119 src="ClojureHandbook.files/image006.gif"></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>fib</span><span style='font-family:宋体'>数列（</span><span
lang=EN-US style='font-family:Consolas'>1 2 3 5 8 13 </span><span
style='font-family:宋体'>……）</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn fib [n] (<span style='background:yellow'>loop</span>
[a 1 b 2 i n] (<span style='background:yellow'>if</span> (zero? i) a <u>(<span
style='background:yellow'>recur</span> b (+ a b) (dec i))</u>)))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(map fib (range 10)) ; (1 2 3 5 8 13 21 34 55 89)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对比不使用</span><span lang=EN-US
style='font-family:Consolas'>loop</span><span style='font-family:宋体'>的自递归写法：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn fib [a b i] (<span style='background:yellow'>if</span>
(zero? i) a <u>(<span style='background:yellow'>recur</span> b (+ a b) (dec i))</u>))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(map (partial fib 1 2) (range 10))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>fib</span><span style='font-family:宋体'>数列的另一种</span><span
lang=EN-US style='font-family:Consolas'>loop</span><span style='font-family:
宋体'>写法，直接得到前</span><span lang=EN-US style='font-family:Consolas'>n</span><span
style='font-family:宋体'>个</span><span lang=EN-US style='font-family:Consolas'>fib</span><span
style='font-family:宋体'>数</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn fib2 [n] (loop [i 2 r [1 2]] </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(if (&gt;= i n) r (recur (inc i) (conj
r (+ (last r) (last (butlast r))))))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：阶乘</span><span lang=EN-US
style='font-family:Consolas'> 5</span><span style='font-family:宋体'>！</span><span
lang=EN-US style='font-family:Consolas'>=120</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>loop</span> [i 1
r 1] (<span style='background:yellow'>if</span> (&gt; i 5) r (<span
style='background:yellow'>recur</span> (inc i) (* i r)))) ; 120</span></p>

<p class=MsoNormal><span style='font-family:宋体'>参照上面，可定义阶乘函数如下：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn fac [n] (<span style='background:yellow'>loop</span>
[i 1 r 1] (if (&gt; i n) r (<span style='background:yellow'>recur</span> (inc
i) (* i r)))))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对比不用</span><span lang=EN-US
style='font-family:Consolas'>loop</span><span style='font-family:宋体'>的：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn fac0 [i r] (if (zero? i) r (<span
style='background:yellow'>recur</span> (dec i) (* i r))))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn fac [n] (fac0 n 1))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:1.0cm;text-indent:-1.0cm'><span
style='font-family:宋体'>例子：牛顿法求</span><span lang=EN-US style='font-family:Consolas'>n</span><span
style='font-family:宋体'>的平方根（说明：任取一个数</span><span lang=EN-US style='font-family:
Consolas'>a</span><span style='font-family:宋体'>（</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>或者</span><span
lang=EN-US style='font-family:Consolas'>n/2</span><span style='font-family:
宋体'>）</span><span lang=EN-US style='font-family:Consolas'>,</span><span
style='font-family:宋体'>另一个因子就是</span><span lang=EN-US style='font-family:Consolas'>b=n/a;
</span><span style='font-family:宋体'>如果</span><span lang=EN-US style='font-family:
Consolas'>a</span><span style='font-family:宋体'>和</span><span lang=EN-US
style='font-family:Consolas'>b</span><span style='font-family:宋体'>不够接近，取平均</span><span
lang=EN-US style='font-family:Consolas'>a=(a+b)/2, </span><span
style='font-family:宋体'>而</span><span lang=EN-US style='font-family:Consolas'>b=n/a</span><span
style='font-family:宋体'>直到</span><span lang=EN-US style='font-family:Consolas'>a</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>b</span><span
style='font-family:宋体'>足够接近）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn <span
style='background:yellow'>sqrt2</span> [n]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (loop
[a (/ n 2.0) b (/ n a)]</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(if (&gt;= 0.00001 (Math/abs (- a b))) (double a) </span></p>

<p class=MsoNormal style='text-indent:31.5pt'><span lang=EN-US
style='font-family:Consolas'>(recur (/ (+ a b) 2) (/ n (/ (+ a b) 2)) ))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(sqrt2 2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924007"></a><a
name="_Toc281658846"></a><a name="_Toc281556353"></a><a name="_Toc281556253"></a><a
name="_Toc281556149"></a><a name="_Toc281555947"></a><a name="_Toc281555790"><span
lang=EN-US style='text-decoration:none'>2.7.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>dotimes dorun doall</span></a></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>dotimes</span> [i
5] (println i)) ; </span><span style='font-family:宋体'>打印</span><span
lang=EN-US style='font-family:Consolas'> 0 1 2 3 4</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'> </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='color:#C0504D'>0 until 5 foreach println // Scala</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>一般也可以写成</span><span lang=EN-US
style='font-family:Consolas'>:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (dotimes
[<span style='background:yellow'>_</span> 5] (println <span style='background:
yellow'>_</span>))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：可以用</span><span lang=EN-US
style='font-family:Consolas'>doseq</span><span style='font-family:宋体'>来完成</span><span
lang=EN-US style='font-family:Consolas'>dotimes</span><span style='font-family:
宋体'>的工作</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(doseq [i (range 5)] (println i))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：打印</span><span lang=EN-US
style='font-family:Consolas'>seq</span><span style='font-family:宋体'>中的所有元素</span><span
lang=EN-US style='font-family:Consolas'>:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
s <u>[2 4 6 8]</u>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (dotimes
[i (count s)] (println (nth s i)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>输出：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>2</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>4</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>6</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>8</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>dorun</span> (map println <u>[2 4 6 8]</u>))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>的</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#C0504D'>&nbsp;&nbsp;&nbsp; List(2,4,6,8)
foreach println // Scala</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以用</span><span lang=EN-US
style='font-family:Consolas'>doseq</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>doseq</span> [x <u>[2 4 6 8]</u>] (println x))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>dorun</span><span
style='font-family:宋体'>只逐个处理</span><span lang=EN-US style='font-family:Consolas'>seq</span><span
style='font-family:宋体'>元素而不在内存中生成</span><span lang=EN-US style='font-family:
Consolas'>seq</span><span style='font-family:宋体'>；与</span><span lang=EN-US
style='font-family:Consolas'>doall</span><span style='font-family:宋体'>有区别：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>doall</span> (map println [2 4 6 8]))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281658847"></a><a
name="_Toc281556354"></a><a name="_Toc281556254"></a><a name="_Toc281556150"></a><a
name="_Toc281555948"></a><a name="_Toc281555791"></a><a name="_Toc281924008"><span
lang=EN-US style='text-decoration:none'>2.7.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>doseq</span></a></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>doseq</span> [i
(range 10)] (println i))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>的</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#C0504D'>&nbsp;&nbsp;&nbsp; for
(i&lt;-Range(0,10)) println(i) // Scala</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：而</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>for</span><span style='font-family:
宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>for..yield</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>变量可以是多个：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>doseq</span> [<b><u>i</u></b><u> [1 2 3]</u> <b><u>j</u></b><u>
[10 20]</u>] (println i &quot;-&quot; j))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>输出：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>1 - 10</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>1 - 20</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>2 - 10</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>2 - 20</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>3 - 10</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>3 C 20</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于</span><span lang=EN-US
style='font-family:Consolas'>Scala</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#C0504D'>&nbsp;&nbsp;&nbsp; for
(i&lt;- List(1,2,3); j&lt;- List(10,20)) println(i + &quot; - &quot; + j) //
Scala</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>结合</span><span lang=EN-US
style='font-family:Consolas'>destructure</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v (map vector (iterate inc 0)
[&quot;one&quot; &quot;two&quot; &quot;three&quot;])) <span style='color:#5B6E6E'>;([0
&quot;one&quot;] [1 &quot;two&quot;] [2 &quot;three&quot;])</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>doseq</span> [<b>[i w]</b> v] (println i w)) </span></p>

<p class=MsoNormal><span style='font-family:宋体'>输出：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>0 one</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 two</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>2 three</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>深入分析：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>其实</span><span lang=EN-US
style='font-family:Consolas'>doseq</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>for</span><span style='font-family:
宋体'>的语法是一样的，只不过</span><span lang=EN-US style='font-family:Consolas'>for</span><span
style='font-family:宋体'>返回</span><span lang=EN-US style='font-family:Consolas'>lazy
seq</span><span style='font-family:宋体'>而</span><span lang=EN-US
style='font-family:Consolas'>doseq</span><span style='font-family:宋体'>是</span><span
lang=EN-US style='font-family:Consolas'>side effect</span><span
style='font-family:宋体'>的，对比：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(doseq <span
  style='background:yellow'>[x (range 7) y (range x) :while (odd? x)]</span> </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>(print [x y]))</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(for <span
  style='background:yellow'>[x (range 7) y (range x) :while (odd? x)]</span> </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>[x y])</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[1 0][3 0][3
  1][3 2][5 0][5 1][5 2][5 3][5 4]nil</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>([1 0] [3 0]
  [3 1] [3 2] [5 0] [5 1] [5 2] [5 3] [5 4])</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924009"><span
lang=EN-US style='text-decoration:none'>2.7.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>repeat</span></a><span lang=EN-US> replicate</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>repeat </span>10
\a) ; (\a \a \a \a \a \a \a \a \a \a)</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(apply str (<span style='background:yellow'>repeat
</span>10 \a)) ; &quot;aaaaaaaaaa&quot;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>上两个例子中，也可以用</span><span
lang=EN-US style='font-family:Consolas;background:yellow'>replicate</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>无次数限制：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (repeat
\a) ; </span><span style='font-family:宋体'>注意会无限循环</span></p>

<p class=MsoNormal><span style='font-family:宋体'>需要配合</span><span lang=EN-US
style='font-family:Consolas'>take</span><span style='font-family:宋体'>来限制次数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>take</span> 10 (repeat \a))</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924010"></a><a
name="_Toc281658848"></a><a name="_Toc281556355"></a><a name="_Toc281556255"></a><a
name="_Toc281556151"></a><a name="_Toc281555949"></a><a name="_Toc281555792"><span
lang=EN-US style='text-decoration:none'>2.7.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>iterate</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var</span><span
style='font-family:宋体'>变量迭代：</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(iterate func var)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (for
i=0; ; i++) { fun }</span></p>

<p class=MsoNormal><span style='font-family:宋体'>所以一般要配合</span><span lang=EN-US
style='font-family:Consolas'>(take n sequence)</span><span style='font-family:
宋体'>来中止：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>take</span> 10 (<span style='background:yellow'>iterate</span>
<u>inc</u> 5)) ; (5 6 7 8 9 10 11 12 13 14)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>take</span> 10 (<span style='background:yellow'>iterate</span>
<u>#(+ % 5)</u> 5)) ; (5 10 15 20 25 30 35 40 45 50)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>take</span> 10 (<span style='background:yellow'>iterate</span>
<u>#(* % 2)</u> 2)) ; (2 4 8 16 32 64 128 256 512 1024)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>fib</span><span style='font-family:宋体'>数列（</span><span
lang=EN-US style='font-family:Consolas'>1 2 3 5 8 13 </span><span
style='font-family:宋体'>……）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
fib [[a b]] [b (+ a b)]) ; </span><span style='font-family:宋体'>得到下一组</span><span
lang=EN-US style='font-family:Consolas'>fib</span><span style='font-family:
宋体'>数，如</span><span lang=EN-US style='font-family:Consolas'>[1 2]-&gt;[2
3]-&gt;[3 5]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (take
5 (<u>iterate fib [1 2]</u>)) ; ([<span style='background:yellow'>1</span> 2] [<span
style='background:yellow'>2</span> 3] [<span style='background:yellow'>3</span>
5] [<span style='background:yellow'>5</span> 8] [<span style='background:yellow'>8</span>
13])</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(take 5 (map first (<u>iterate fib [1 2]</u>))) ; </span><span
style='font-family:宋体'>取头部</span><span style='font-family:Consolas'> <span
lang=EN-US>(1 2 3 5 8)</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：质数表</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn pnext
[n] (first (filter prime? (<span style='background:yellow'>iterate</span> inc
(inc n)))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(take 10 (<span
style='background:yellow'>iterate</span> pnext 2)) ; (2 3 5 7 11 13 17 19 23
29)</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924011"></a><a
name="_Toc281658849"></a><a name="_Toc281556356"></a><a name="_Toc281556256"></a><a
name="_Toc281556152"></a><a name="_Toc281555950"></a><a name="_Toc281555793"><span
lang=EN-US style='text-decoration:none'>2.7.8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>cycle</span></a></p>

<p class=MsoNormal style='margin-left:1.35pt'><span style='font-family:宋体'>类似于</span><span
lang=EN-US style='font-family:Consolas'>(repeat var)</span><span
style='font-family:宋体'>，不过</span><span lang=EN-US style='font-family:Consolas'>(cycle
seq)</span><span style='font-family:宋体'>针对</span><span lang=EN-US
style='font-family:Consolas'>seq</span><span style='font-family:宋体'>，也必须用</span><span
lang=EN-US style='font-family:Consolas'>take</span><span style='font-family:
宋体'>来限制次数：</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; (take 5 (cycle [<u>1 0</u>])) ; (<u>1
0</u> <u>1 0</u> <u>1</u>)</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; (take 10 (cyble (range 3))) ; (<u>0 1
2</u> <u>0 1 2</u> <u>0 1 2</u> <u>0</u>)</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924012"></a><a
name="_Toc281658850"></a><a name="_Toc281556357"></a><a name="_Toc281556257"></a><a
name="_Toc281556153"></a><a name="_Toc281555951"></a><a name="_Toc281555794"><span
lang=EN-US style='text-decoration:none'>2.7.9<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>take, take-while, drop-while</span></a></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>repeat, iterate, cycle</span><span
style='font-family:宋体'>等无限循环都涉及</span><span lang=EN-US style='font-family:Consolas'>
(take n coll)</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; (<span style='background:yellow'>take-while</span>
<span style='background:lime'>pred?</span> <span style='background:aqua'>coll</span>)</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; <span style='background:yellow'>while</span>
(<span style='background:lime'>pred?</span>) { <span style='background:yellow'>take</span>
element from <span style='background:aqua'>coll</span> }</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span style='font-family:宋体'>如：</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; (take-while even? [2 4 6 1 8]) ; [2 4
6]</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; (take-while #(&gt; % 0) [3 2 1 0 -1
-2]) ; (3 2 1)</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span style='font-family:宋体'>或者使用</span><span
lang=EN-US style='font-family:Consolas'>pos?</span><span style='font-family:
宋体'>代替匿名函数：</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; (take-while pos? [3 2 1 0 -1 -2]) ;
(3 2 1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>drop-while</span><span
style='font-family:宋体'>：一直</span><span lang=EN-US style='font-family:Consolas'>drop</span><span
style='font-family:宋体'>直到碰到不符合条件后马上停止，并返回剩下的部分。</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; (<span style='background:yellow'>drop-while</span>
even? [2 4 6 1 3 5]) ; [1 3 5] </span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; (drop-while even? [1 3 2 4 5]) ; [1 3
2 4 5]</span></p>

<p class=MsoNormal style='margin-left:1.35pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924013"></a><a
name="_Toc281658851"></a><a name="_Toc281556358"></a><a name="_Toc281556258"></a><a
name="_Toc281556154"></a><a name="_Toc281555952"></a><a name="_Toc281555795"><span
lang=EN-US style='text-decoration:none'>2.7.10<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>for</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>类似于</span><span lang=EN-US
style='font-family:Consolas'>scala</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>for..yield</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Python</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>list
comps</span><span style='font-family:宋体'>。用于简化</span><span lang=EN-US
style='font-family:Consolas'>map</span><span style='font-family:宋体'>、</span><span
lang=EN-US style='font-family:Consolas'>filter</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>#()</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>fn</span><span
style='font-family:宋体'>：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>用</span></b><b><span lang=EN-US style='font-family:
  Consolas'>map filter #()</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>用</span></b><b><span lang=EN-US style='font-family:
  Consolas'>for</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map #(* %
  %) (range 10))</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>for</span> <span style='background:yellow'>[</span>i
  (range 10)<span style='background:yellow'>]</span> (* i i))</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map #(* %
  %) (filter #(&lt; (* % %) 20) (range 10)))</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>for</span> <span style='background:yellow'>[</span>i
  (range 10) <span style='background:yellow'>:when</span> (&gt; 20 (* i i))<span
  style='background:yellow'>]</span> (* i i))</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>多个变量：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(for [x (range 10) y (range 3) <span
style='background:yellow'>:while</span> (&lt; y x)] [x y])</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(for [a [1 3 5] b [2 4]] [a b]) ; ([1 2] [1 4] [3
2] [3 4] [5 2] [5 4])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>区别</span><span lang=EN-US
style='font-family:Consolas'>:when</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>:while</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(for [x [1 2 0 3 4] <span style='background:yellow'>:when</span>
(pos? x)] x)&nbsp;&nbsp; ; (1 2 3 4) </span><span style='font-family:宋体'>全部做完为止</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(for [x [1 2 0 3 4] <span style='background:yellow'>:while</span>
(pos? x)] x)&nbsp; ; (1 2)&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>碰到不满足就停</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：乘法口诀表</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (for
[a (range 1 10) b (range 1 10) :while (&lt;= b a)] (str b &quot;*&quot; a
&quot;=&quot; (* a b)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：找杨辉三角形</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn tri-yang?
[a b] (def c (Math/sqrt (+ (* a a) (* b b)))) (= (int c) c))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f [n] (for
[a (range 1 n) b (range (inc a) n) :when (tri-yang? a b)] (list a b)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f 21) ; <span
style='color:#5B6E6E'>((3 4) (5 12) (6 8) (8 15) (9 12) (12 16) (15 20))</span></span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924014"></a><a
name="_Toc281658852"></a><a name="_Toc281556359"></a><a name="_Toc281556259"></a><a
name="_Toc281556155"></a><a name="_Toc281555953"></a><a name="_Toc281555796"><span
lang=EN-US style='text-decoration:none'>2.7.11<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>interleave</span></a><span style='font-family:
"微软雅黑","sans-serif"'>，</span><span lang=EN-US>interpose</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=710
 style='width:532.5pt;border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>interleave</span></p>
  </td>
  <td width=260 valign=top style='width:194.65pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>“</span><span
  style='font-family:宋体'>混合</span><span lang=EN-US style='font-family:Consolas'>”</span><span
  style='font-family:宋体'>两个序列</span><span lang=EN-US style='font-family:Consolas'>:</span><span
  style='font-family:宋体'>无限序列和定长序列</span></p>
  </td>
  <td width=359 valign=top style='width:269.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(interleave
  (iterate inc 1) [&quot;a&quot; &quot;b&quot; &quot;c&quot;]) </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; (1
  &quot;a&quot; 2 &quot;b&quot; 3 &quot;c&quot;)</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>interpose</span></p>
  </td>
  <td width=260 valign=top style='width:194.65pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>混合分隔元素和</span><span
  lang=EN-US style='font-family:Consolas'>1</span><span style='font-family:
  宋体'>个定长序列</span></p>
  </td>
  <td width=359 valign=top style='width:269.3pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(interpose
  &quot;-&quot; [&quot;a&quot; &quot;b&quot; &quot;c&quot;]) </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; (&quot;a&quot;
  &quot;-&quot; &quot;b&quot; &quot;-&quot; &quot;c&quot;)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.7.12<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>while</span></p>

<p class=MsoNormal><span style='font-family:宋体'>通过</span><span lang=EN-US
style='font-family:Consolas'>atom</span><span style='font-family:宋体'>明确使用循环变量：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(def a (atom 10))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>while</span>
(pos? @a) (do (println @a) (swap! a dec)))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183964"></a><a
name="_Toc281924015"></a><a name="_Toc281658853"></a><a name="_Toc281556360"></a><a
name="_Toc281556260"></a><a name="_Toc281556156"></a><a name="_Toc281555954"></a><a
name="_Toc281555797"><span lang=EN-US style='font-family:Consolas'>2.8<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>正则表达式</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>regex</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>#</span><span lang=EN-US style='font-family:Consolas'>&quot;foo&quot;
=&gt; </span><span style='font-family:宋体'>表示一个</span><span lang=EN-US
style='font-family:Consolas'> java.util.regex.Pattern</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#&quot;a?c&quot;
; </span><span style='font-family:宋体'>匹配</span><span lang=EN-US
style='font-family:Consolas'>abc aBc aac acc</span><span style='font-family:
宋体'>等</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183965"></a><a
name="_Toc281924016"></a><a name="_Toc281658854"></a><a name="_Toc281556361"></a><a
name="_Toc281556261"></a><a name="_Toc281556157"></a><a name="_Toc281555955"></a><a
name="_Toc281555798"><span lang=EN-US style='font-family:Consolas'>2.9<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>命名空间</span></u></a></h2>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924017"></a><a
name="_Toc281658855"></a><a name="_Toc281556362"></a><a name="_Toc281556262"></a><a
name="_Toc281556158"></a><a name="_Toc281555956"></a><a name="_Toc281555799"><span
lang=EN-US style='text-decoration:none'>2.9.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>namespace</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>参见：</span><span lang=EN-US
style='font-family:Consolas'><a href="http://clojure.org/namespaces">http://clojure.org/namespaces</a></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>一样没有类名和包层次的概念，可能设计函数名不够用的情况。例如要定义一个函数名为</span><span
lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
map [] &quot;hello&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>clojure</span><span
style='font-family:宋体'>自带的</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>函数就会被</span><span lang=EN-US style='font-family:Consolas'>'user/map</span><span
style='font-family:宋体'>覆盖（用</span><span lang=EN-US style='font-family:Consolas'>refer</span><span
style='font-family:宋体'>恢复）。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>自带</span><span lang=EN-US style='font-family:Consolas'>6</span><span
style='font-family:宋体'>个命名空间：</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=157 valign=top style='width:117.95pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>clojure</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
  style='font-family:宋体'>基础命名空间</span></p>
  </td>
 </tr>
 <tr>
  <td width=157 valign=top style='width:117.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>clojure.inspector</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Swing</span><span
  style='font-family:宋体'>监视器</span></p>
  </td>
 </tr>
 <tr>
  <td width=157 valign=top style='width:117.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>clojure.parallel</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>并发处理库（实现</span><span
  lang=EN-US style='font-family:Consolas'>JSR166 ForkJoin</span><span
  style='font-family:宋体'>）</span></p>
  </td>
 </tr>
 <tr>
  <td width=157 valign=top style='width:117.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>clojure.set</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>处理</span><span lang=EN-US
  style='font-family:Consolas'>set</span><span style='font-family:宋体'>集合</span></p>
  </td>
 </tr>
 <tr>
  <td width=157 valign=top style='width:117.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>clojure.xml</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>处理</span><span lang=EN-US
  style='font-family:Consolas'>xml</span></p>
  </td>
 </tr>
 <tr>
  <td width=157 valign=top style='width:117.95pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>clojure.zip</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>压缩</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span style='font-family:宋体'>启动</span><span lang=EN-US
style='font-family:Consolas'>REPL</span><span style='font-family:宋体'>时，创建一个</span><span
lang=EN-US style='font-family:Consolas'>user</span><span style='font-family:
宋体'>命名空间</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=173 valign=top style='width:129.5pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>函数</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>区别</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=173 valign=top style='width:129.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>ns</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>自动引入</span><span lang=EN-US
  style='font-family:Consolas'>java.lang</span><span style='font-family:宋体'>和</span><span
  lang=EN-US style='font-family:Consolas'>clojure.core</span></p>
  </td>
 </tr>
 <tr>
  <td width=173 valign=top style='width:129.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>in-ns</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>自动引入</span><span lang=EN-US
  style='font-family:Consolas'>java.lang</span><span style='font-family:宋体'>但不引入</span><span
  lang=EN-US style='font-family:Consolas'>clojure.core</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>*ns*</span><span lang=EN-US style='font-family:Consolas'> </span><span
style='font-family:宋体'>取得当前</span><span lang=EN-US style='font-family:Consolas'>namespace</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>切换命名空间：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>in-ns</span> 'my) </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
v1 10) ; </span><span style='font-family:宋体'>在</span><span lang=EN-US
style='font-family:Consolas'>my</span><span style='font-family:宋体'>名字空间中，</span><span
lang=EN-US style='font-family:Consolas'>v1=10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>in-ns</span> 'user) ; </span><span style='font-family:
宋体'>切换回缺省的</span><span lang=EN-US style='font-family:Consolas'>user</span><span
style='font-family:宋体'>名字空间</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
v1 &quot;hello&quot;) ; </span><span style='font-family:宋体'>在</span><span
lang=EN-US style='font-family:Consolas'>user</span><span style='font-family:
宋体'>名字空间中，</span><span lang=EN-US style='font-family:Consolas'>
v1=&quot;hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在自己开发的函数库文件中定义</span><span
lang=EN-US style='font-family:Consolas'>namespace</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>ns</span> wr3)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>ns</span>
wr3.util)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>同时也引入其他</span><span lang=EN-US
style='font-family:Consolas'>namespace</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>类空间</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>ns</span> wr3 (<span style='background:yellow'>:use</span>
clojure.contrib.str-utils) (<span style='background:yellow'>:import</span>
(java.io File)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>覆盖</span><span lang=EN-US
style='font-family:Consolas'>clojure.core</span><span style='font-family:宋体'>中的函数名：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
vec 0)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (vec
[1 2 3]) ; </span><span style='font-family:宋体;color:red'>报错</span></p>

<p class=MsoNormal><span style='font-family:宋体'>但可以这样用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (clojure.core/vec
[1 2 3])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>恢复</span><span lang=EN-US
style='font-family:Consolas'>clojure.core</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>namespace</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>refer</span>
'clojure.core)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(vec [1 2 3]) ; </span><span style='font-family:
宋体'>恢复可用</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US
style='font-family:Consolas'>ns</span><span style='font-family:宋体'>内取消</span><span
lang=EN-US style='font-family:Consolas'>&quot;+&quot;</span><span
style='font-family:宋体'>函数：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>ns-unmap</span>
'user '+)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(+ 3 4) ; </span><span style='font-family:宋体;
color:red'>报错</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(clojure.core/+ 3 4) ; 7</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以部分使用</span><span lang=EN-US
style='font-family:Consolas'>clojure.core</span><span style='font-family:宋体'>的函数，部分使用覆盖的：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>refer</span> 'clojure.core <span style='background:
yellow'>:exclude</span> '(map set)) ; </span><span style='font-family:宋体'>恢复这两个外的其他所有</span><span
lang=EN-US style='font-family:Consolas'>core</span><span style='font-family:
宋体'>函数</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>refer</span>
'clojure.core <span style='background:yellow'>:only</span> '(println prn)) ; </span><span
style='font-family:宋体'>只恢复两个</span><span lang=EN-US style='font-family:Consolas'>core</span><span
style='font-family:宋体'>函数</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者其别名：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>refer</span> 'clojure.core <span style='background:
yellow'>:rename</span> {'map 'core-map, 'set 'core-set})</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>alias</span> 'set
'clojure.set)</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924018"></a><a
name="_Toc281658856"></a><a name="_Toc281556363"></a><a name="_Toc281556263"></a><a
name="_Toc281556159"></a><a name="_Toc281555957"></a><a name="_Toc281555800"><span
lang=EN-US style='text-decoration:none'>2.9.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>函数和</span><span
lang=EN-US>macro</span></a><span style='font-family:"微软雅黑","sans-serif"'>的别名</span></p>

<p class=MsoNormal><span style='font-family:宋体'>函数直接用</span><span lang=EN-US
style='font-family:Consolas'>def</span><span style='font-family:宋体'>就可以，如：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def sys-map map)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>macro</span><span
style='font-family:宋体'>宏必须用如下的方法：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>方法</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def <span style='background:yellow'>#^{:macro
true}</span> sys-loop #'loop)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>方法</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(use '<b><u>clojure.contrib.def</u></b>)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>defalias</span> sys-loop
loop)</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.9.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>require, use</span><span style='font-family:
"微软雅黑","sans-serif"'>（</span><span lang=EN-US>Clojure</span><span
style='font-family:"微软雅黑","sans-serif"'>函数空间）</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用全路径名（如果名字有冲突）：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>require</span> <span
style='background:yellow'>'</span>clojure.contrib.math) ; <span
style='background:yellow'>'</span></span><span style='font-family:宋体'>不能少</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(clojure.contrib.math/round 1.7) ; 2</span></p>

<p class=MsoNormal><span style='font-family:宋体'>合并到当前命名空间（如果名字没有冲突，相当于</span><u><span
lang=EN-US style='font-family:Consolas'>import <b>static</b> ns1.*</span></u><span
style='font-family:宋体'>）：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>use</span> <span
style='background:yellow'>'</span>clojure.contrib.math) //</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(round 1.4) ; 1</span></p>

<p class=MsoNormal><span style='font-family:宋体'>只引入制定的函数：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>use</span> <span
style='background:yellow'>'[</span>clojure.contrib.math <span style='background:
yellow'>:only</span> (round floor ceil)<span style='background:yellow'>]</span>)
; <span style='background:yellow'>'[]</span></span><span style='font-family:
宋体'>不能少</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(round 1.4) ; 1</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(floor 1.9) ; 1.0</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(ceil 1.1) ; 2.0</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果开发过程中，函数库文件更改了，可以不重启就重新装载：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(use <span style='background:yellow'>:reload</span>
'examples.exploring) <span style='color:#5B6E6E'>; </span></span><span
style='font-family:宋体;color:#5B6E6E'>仅重新装载本函数库</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(use <span style='background:yellow'>:reload-all</span>
'examples.exploring) <span style='color:#5B6E6E'>; </span></span><span
style='font-family:宋体;color:#5B6E6E'>把</span><span lang=EN-US style='font-family:
Consolas;color:#5B6E6E'>examples.exploring</span><span style='font-family:宋体;
color:#5B6E6E'>用到的函数库也重新装载</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>注：需要在</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>的启动脚本中包含</span><span lang=EN-US style='font-family:Consolas'>clojure-contrib-1.2.0.jar</span><span
style='font-family:宋体'>。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>use '[</span>clojure.contrib.str-utils
<span style='background:yellow'>:only</span> (str-join)<span style='background:
yellow'>]</span>)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(str-join &quot;-&quot; [&quot;hello&quot;,
&quot;clojure&quot;])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：了解其他</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (find-doc
&quot;ns-&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924019"></a><a
name="_Toc281658857"></a><a name="_Toc281556364"></a><a name="_Toc281556264"></a><a
name="_Toc281556160"></a><a name="_Toc281555958"></a><a name="_Toc281555801"><span
lang=EN-US style='text-decoration:none'>2.9.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>import</span></a><span style='font-family:"微软雅黑","sans-serif"'>（</span><span
lang=EN-US>Java</span><span style='font-family:"微软雅黑","sans-serif"'>类空间）</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(import java.io.File)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以</span><span lang=EN-US
style='font-family:Consolas'>import</span><span style='font-family:宋体'>同一包内多个</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>类：</span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:3.0pt'><span
lang=EN-US style='font-family:Consolas'>(<span style='background:yellow'>import</span>
'(<u>java.io</u> File InputStream)) ; '</span><span style='font-family:宋体'>可以省略</span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:3.0pt'><span
lang=EN-US style='font-family:Consolas'>(File/separator) ; </span><span
style='font-family:宋体'>注意不能只用</span><span lang=EN-US style='font-family:Consolas'>
(seperator)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者不同包下的类：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>import</span> '(<u>java.io</u> File InputStream) '(<u>java.util</u>
Random))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924020"></a><a
name="_Toc281658858"></a><a name="_Toc281556365"></a><a name="_Toc281556265"></a><a
name="_Toc281556161"></a><a name="_Toc281555959"></a><a name="_Toc281555802"><span
lang=EN-US style='text-decoration:none'>2.9.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>load-file</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US
style='font-family:Consolas'>classpath</span><span style='font-family:宋体'>类路径下的用</span><span
lang=EN-US style='font-family:Consolas'> use</span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>import</span><span
style='font-family:宋体'>即可。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>不在类路径下的可以使用：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>load-file</span>
&quot;path/to/file.clj&quot;) ; unix</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>load-file</span>
&quot;f:\\lib\\Clojure\\file.clj&quot;) ; win</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.9.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>列出</span><span
lang=EN-US>ns</span><span style='font-family:"微软雅黑","sans-serif"'>下的所有函数</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(ns-publics
  'clojure.core)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>所有</span><span lang=EN-US
  style='font-family:Consolas'>public</span><span style='font-family:宋体'>的函数</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(ns-interns
  'clojure.core)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>所有函数（含</span><span
  lang=EN-US style='font-family:Consolas'>private</span><span style='font-family:
  宋体'>的）</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(ns-imports
  'clojure.core)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>所有从</span><span lang=EN-US
  style='font-family:Consolas'>java import</span><span style='font-family:宋体'>的东西</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(ns-map
  'clojure.core)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>含</span><span lang=EN-US
  style='font-family:Consolas'>ns-interns </span><span style='font-family:宋体'>和</span><span
  lang=EN-US style='font-family:Consolas'> ns-imports</span><span
  style='font-family:宋体'>的结果</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>一般：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(require
'wr3.clj.s)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map first (<span
style='background:yellow'>ns-publics</span> 'wr3.clj.s)</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183966"></a><a
name="_Toc281924021"></a><a name="_Toc281658859"></a><a name="_Toc281556366"></a><a
name="_Toc281556266"></a><a name="_Toc281556162"></a><a name="_Toc281555960"></a><a
name="_Toc281555803"><span lang=EN-US style='font-family:Consolas'>2.10<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>结构</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>defstruct</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>提示：推荐使用</span><span lang=EN-US
style='font-family:Consolas'>defrecord</span><span style='font-family:宋体'>替代</span><span
lang=EN-US style='font-family:Consolas'>defstruct</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>struct</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>record</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>说明：</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>实质是一个</span><span lang=EN-US
  style='font-family:Consolas'>key</span><span style='font-family:宋体'>固定的</span><span
  lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
  宋体'>，不能用</span><span lang=EN-US style='font-family:Consolas'>dissoc</span><span
  style='font-family:宋体'>来删除已有的</span><span lang=EN-US style='font-family:Consolas'>key</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>说明：</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>实质是生成和</span><span
  lang=EN-US style='font-family:Consolas'>import</span><span style='font-family:
  宋体'>一个含参数构造函数的新</span><span lang=EN-US style='font-family:Consolas'>class</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>定义：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defstruct
  person :name :age)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>定义：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defrecord
  person [name age])</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>初始化：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(struct
  person &quot;qh&quot; 30)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>初始化：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;(person.
  &quot;qh&quot; 30)</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>使用：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(:name
  (struct person &quot;qh&quot; 30))</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>使用：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(:name
  (pserson. &quot;qh&quot; 30))</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>C</span><span
style='font-family:宋体'>用结构体来自定义数据结构，</span><span lang=EN-US style='font-family:
Consolas'>Java</span><span style='font-family:宋体'>用类来自定义数据结构，</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>用</span><span lang=EN-US style='font-family:Consolas'>defstruct</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>defstruct</span>
person :first-name :last-name) <span style='color:#5B6E6E'>; </span></span><span
style='font-family:宋体;color:#5B6E6E'>声明</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>struct</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def qh (<span style='background:yellow'>struct</span>
person &quot;qiu&quot; &quot;iuh&quot;)) <span style='color:#5B6E6E'>; </span></span><span
style='font-family:宋体;color:#5B6E6E'>初始化</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>struct</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def jm (<span style='background:yellow'>struct</span>
person &quot;james&quot; &quot;qiu&quot;))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(:first-name qh) ; &quot;qiu&quot; <span
style='color:#5B6E6E'>; </span></span><span style='font-family:宋体;color:#5B6E6E'>访问</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>struct</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(:last-name jm) ; &quot;qiu&quot;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>struct-map</span>
person :age 30 :first-name &quot;qiu&quot;) <span style='color:#5B6E6E'>; </span></span><span
style='font-family:宋体;color:#5B6E6E'>初始化并新增加属性</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183967"></a><a
name="_Toc281924022"></a><a name="_Toc281658860"></a><a name="_Toc281556367"></a><a
name="_Toc281556267"></a><a name="_Toc281556163"></a><a name="_Toc281555961"></a><a
name="_Toc281555804"><span lang=EN-US style='font-family:Consolas'>2.11<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>类</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>defrecord</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>对比</span><span lang=EN-US
style='font-family:Consolas'>map</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>record</span><span style='font-family:
宋体'>：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>map</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>record</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
  lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
  </span></span><span style='font-family:宋体'>原生数据结构，不用定义，</span><span
  lang=EN-US style='font-family:Consolas'>read-string</span><span
  style='font-family:宋体'>可直接读</span></p>
  <p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
  lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
  </span></span><span style='font-family:宋体'>没有类型和结构保证，需要自己保证正确性。</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
  lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
  </span></span><span style='font-family:宋体'>生成并</span><span lang=EN-US
  style='font-family:Consolas'>import</span><span style='font-family:宋体'>一个新</span><span
  lang=EN-US style='font-family:Consolas'>java</span><span style='font-family:
  宋体'>类，有带参数的构造函数。</span><span lang=EN-US style='font-family:Consolas'>(defrecord
  r [name age])</span><span style='font-family:宋体'>相当于：</span><span lang=EN-US
  style='font-family:Consolas'>class r { public r(String name, int age) {..} }</span></p>
  <p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
  lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
  </span></span><span style='font-family:宋体'>需要先定义再使用</span></p>
  <p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
  lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
  </span></span><span style='font-family:宋体'>可使用原始类型，性能更好</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def stu
  {:fname &quot;james&quot; :lname &quot;qiu&quot;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  :address {:city &quot;beijing&quot; :zip 1001}})</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defrecord
  Stu [fname lname address])</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defrecord
  Address [city zip])</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def stu
  (Stu. &quot;james&quot; &quot;qiu&quot; </span></p>
  <p class=MsoNormal style='text-indent:89.25pt'><span lang=EN-US
  style='font-family:Consolas'>(Address. &quot;beijing&quot; 1001)))</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(:lname stu)
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(-&gt; stu
  :address :zip)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(:lname stu)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(-&gt; stu
  :address :city)</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(assoc stu
  :fname &quot;iuh&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(update-in
  stu [:address :zip] inc)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(assoc stu
  :fname &quot;iuh&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(update-in
  stu [:address :zip] inc)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>可以自由定义格式，</span><span lang=EN-US style='font-family:
Consolas'>record</span><span style='font-family:宋体'>给数据结构限定了一个格式，避免不一致引起的难以发现的</span><span
lang=EN-US style='font-family:Consolas'>bug</span><span style='font-family:
宋体'>。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>用途：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>defrecord</span><span
style='font-family:宋体'>定义</span><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>中类似</span><span lang=EN-US style='font-family:Consolas'>java</span><span
style='font-family:宋体'>的类，和</span><span lang=EN-US style='font-family:Consolas'>protocol</span><span
style='font-family:宋体'>结合便于被</span><span lang=EN-US style='font-family:Consolas'>java</span><span
style='font-family:宋体'>调用。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>写法比</span><span lang=EN-US
style='font-family:Consolas'>struct</span><span style='font-family:宋体'>更好一些。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>defrecord</span> person [name age])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def p1 (<span
style='background:yellow'>new</span> <span style='background:yellow'>person</span>
&quot;qh&quot; 20)) ; </span><span style='font-family:宋体'>形式</span><span
lang=EN-US style='font-family:Consolas'>1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def p2 (<span
style='background:yellow'>person.</span> &quot;james&quot; 30)) ; </span><span
style='font-family:宋体'>形式</span><span lang=EN-US style='font-family:Consolas'>2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(:name p1) ;
&quot;qh&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(:age p2) ; 30</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>assoc</span> p1 :name &quot;qiu&quot;) <span
style='color:#5B6E6E'>; #:user.person{:name &quot;qiu&quot;, :age 20}&nbsp; </span></span><span
style='font-family:宋体;color:#5B6E6E'>但</span><span lang=EN-US style='font-family:
Consolas;color:#5B6E6E'>p1</span><span style='font-family:宋体;color:#5B6E6E'>没有改变</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>dissoc</span> p1 :name) ; <span style='color:#5B6E6E'>{:age
20} p1</span></span><span style='font-family:宋体;color:#5B6E6E'>也没有改变，返回新</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>person</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183968"><span
lang=EN-US style='font-family:Consolas'>2.12<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>接口</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>protocol</span></u><u><span lang=EN-US
style='font-family:Consolas'> </span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure1.2</span><span
style='font-family:宋体'>新增加的功能，</span><span lang=EN-US style='font-family:Consolas'>protocol</span><span
style='font-family:宋体'>定义</span><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>中类似</span><span lang=EN-US style='font-family:Consolas'>java</span><span
style='font-family:宋体'>的接口，命名一组函数名</span><span lang=EN-US style='font-family:
Consolas'>:</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>defprotocol</span>
<b>father</b> (<i><u>upgrade</u></i> [o]))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>defprotocol</span>
<b>employer</b> (<i><u>info</u></i> [o]))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>给</span><span lang=EN-US
style='font-family:Consolas'>person</span><span style='font-family:宋体'>类增加</span><span
lang=EN-US style='font-family:Consolas'>father</span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>employer</span><span
style='font-family:宋体'>接口：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>defrecord</span> <span
style='color:#0000CC'>person</span> [name age y c]</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:10.55pt'><b><span
lang=EN-US style='font-family:Consolas'>father</span></b><span lang=EN-US
style='font-family:Consolas'> (<i><u>upgrade</u></i> [o] (str &quot;become
father at &quot; (:y o))))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>extend-type</span>
<span style='color:#0000CC'>person</span> <b>employer</b> (<i><u>info</u></i>
[o] (str &quot;work at &quot; (:c o))))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>类</span><span lang=EN-US
style='font-family:Consolas'>person</span><span style='font-family:宋体'>的实例化对象具备实现的接口函数：</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(def qh (<span style='color:#0000CC;background:
yellow'>person</span><span style='background:yellow'>.</span> &quot;qh&quot; 35
2010 &quot;nasoft&quot;))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(<i><u>upgrade</u></i> qh) ; &quot;become father
at 2010&quot;</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(<i><u>info</u></i> qh) ; &quot;work at
nasoft&quot;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.12.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>给现有类型增加接口</span><span
lang=EN-US>protocol</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以扩展</span><span lang=EN-US
style='font-family:Consolas'>protocol</span><span style='font-family:宋体'>来支持多种类型；也可以扩展一个类型实现多个</span><span
lang=EN-US style='font-family:Consolas'>protocol</span><span style='font-family:
宋体'>。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defprotocol P1 (f1 [a] &quot;..&quot;))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defrecord R1 [s] P1 (f1 [o] (str &quot;R1: &quot;
(:s o))))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(f1 (R1. &quot;hello&quot;))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(f1 &quot;hello&quot;) <span style='color:#C00000'>;
</span></span><span style='font-family:宋体;color:#C00000'>报错</span></p>

<p class=MsoNormal><span style='font-family:宋体'>为</span><span lang=EN-US
style='font-family:Consolas'>f1</span><span style='font-family:宋体'>函数参数增加</span><span
lang=EN-US style='font-family:Consolas'>nil</span><span style='font-family:
宋体'>类型和</span><span lang=EN-US style='font-family:Consolas'>string</span><span
style='font-family:宋体'>类型（注意：</span><span lang=EN-US style='font-family:Consolas'>P1</span><span
style='font-family:宋体'>放在前面）：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>extend-protocol</span>
P1 </span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; <span style='background:yellow'>nil</span>&nbsp;&nbsp;&nbsp;
(f1 [s] nil) </span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; <span style='background:yellow'>String</span>
(f1 [s] (str &quot;f1: &quot; s)))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(f1 &quot;hello&quot;) ; &quot;f1: hello&quot;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以使用</span><span lang=EN-US
style='font-family:Consolas'>extend-type</span><span style='font-family:宋体'>实现同样的效果（注意：</span><span
lang=EN-US style='font-family:Consolas'>P1</span><span style='font-family:宋体'>放在后面）：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>extend-type</span>
String P1 </span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; (f1 [s] s))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(f1 &quot;hello&quot;) ; &quot;hello&quot;</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>换个说法，同一个函数名可以用于不同类型，例如</span><span
lang=EN-US style='font-family:Consolas'>cat</span><span style='font-family:
宋体'>函数用于</span><span lang=EN-US style='font-family:Consolas'>string</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>list</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Number</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defprotocol <span style='background:yellow'>p1 </span>(<b><u>cat</u></b>
[a b] nil))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(extend-protocol <span style='background:yellow'>p1
</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>String (<b><u>cat</u></b> [a b] (apply
str (concat a b)))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>java.util.List (<b><u>cat</u></b> [a b]
(concat a b))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>Number (<b><u>cat</u></b> [a b]
(BigInteger. (str a b)))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<b><u>cat</u></b> &quot;hello&quot;
&quot;world&quot;) ; <span style='color:#5B6E6E'>&quot;helloworld&quot;</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<b><u>cat</u></b> [1 3 5] [7 9]) ; <span
style='color:#5B6E6E'>(1 3 5 7 9)</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<b><u>cat</u></b> 10 24) ; <span
style='color:#5B6E6E'>1024</span></span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>2.12.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>具体化</span><span
lang=EN-US>reify</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defprotocol P1 (f1 [a] &quot;..&quot;))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(let [v 10 o (<span style='background:yellow'>reify</span>
P1 (f1 [this] v))] (f1 o)) </span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc281924023"></a><a
name="_Toc281658861"></a><a name="_Toc281556368"></a><a name="_Toc281556268"></a><a
name="_Toc281556164"></a><a name="_Toc281555962"></a><a name="_Toc281555805"></a><a
name="_Toc306183969"><span lang=EN-US style='font-family:Consolas'>2.13<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span lang=EN-US
style='font-family:Consolas'>-&gt;</span></u></a></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=57 valign=top style='width:42.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-&gt;</span></p>
  </td>
  <td width=530 valign=top style='width:397.8pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>后面的函数迭代使用之前的函数结果作为<b><u>第一个</u></b>参数，返回最后一次函数调用的值</span></p>
  </td>
 </tr>
 <tr>
  <td width=57 valign=top style='width:42.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-&gt;&gt;</span></p>
  </td>
  <td width=530 valign=top style='width:397.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>后面的函数迭代使用之前的函数结果作为<b><u>最后一个</u></b>参数，返回最后一次函数调用的值</span></p>
  </td>
 </tr>
 <tr>
  <td width=57 valign=top style='width:42.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>doto</span></p>
  </td>
  <td width=530 valign=top style='width:397.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>所有的函数始终用最初的那个对象值，最后还是返回最初的那个对象</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>-&gt;</span> <i><u>(Math/sqrt 25)</u></i> int list)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(list (int <i><u>(Math/sqrt
25)</u></i>))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>好处在于：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>接近于</span><span lang=EN-US
style='font-family:Consolas'>(Math/sqrt 25).int.list</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>调用习惯</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>更少的</span><span lang=EN-US
style='font-family:Consolas'>((()))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对比：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>doto</span> <i><u>(Math/sqrt 25)</u></i> int list)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let [o
(Math/sqrt 25)] (int o) (list o) o)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>所以</span><span lang=EN-US
style='font-family:Consolas'>doto</span><span style='font-family:宋体'>适用于</span><span
lang=EN-US style='font-family:Consolas'>o</span><span style='font-family:宋体'>是可变对象的情况：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(doto
(java.util.HashMap.) (.put 1 100) (.put 2 200))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let [o
(java.util.HashMap.)] (.put o 1 100) (.put o 2 200) o)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>当然也可以用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(java.util.HashMap.
{1 100 2 200})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(-&gt; (/ 144
12) (/ 2 3) str keyword list) ; (:2)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(-&gt; (/ 144
12) (/ ,,, 2 3) str keyword list)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(list (keyword
(str (/ <span style='background:yellow'>(/ 144 12)</span> 2 3)))) ; </span><span
style='font-family:宋体'>第一个结果</span><span lang=EN-US style='font-family:Consolas'>(/
144 12)</span><span style='font-family:宋体'>是作为后面函数的<b><u>第一个参数</u></b></span></p>

<p class=MsoNormal><b><u><span lang=EN-US style='font-family:Consolas'><span
 style='text-decoration:none'>&nbsp;</span></span></u></b></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def m
{:address {:city 'beijing :state 'china}})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(-&gt; m
:address :state) ; 'china</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>-&gt;</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>-&gt;&gt;</span><span style='font-family:
宋体'>的区别</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(-&gt; 10 (/ 3)) ; 10/3&nbsp; 10</span><span
style='font-family:宋体'>作为</span><span lang=EN-US style='font-family:Consolas'>/</span><span
style='font-family:宋体'>函数第一个参数</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(-&gt;&gt; 10 (/ 3)) ; 3/10&nbsp; 10</span><span
style='font-family:宋体'>作为</span><span lang=EN-US style='font-family:Consolas'>/</span><span
style='font-family:宋体'>函数最后一个参数</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183970"><span
lang=EN-US style='font-family:Consolas'>2.14<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>编码规范</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://dev.clojure.org/display/design/Library+Coding+Standards">http://dev.clojure.org/display/design/Library+Coding+Standards</a></span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=728
 style='width:545.7pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=645 valign=top style='width:483.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>命名</span></p>
  </td>
  <td width=645 valign=top style='width:483.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>包名：和文件名相同的小写</span><span
  lang=EN-US style='font-family:Consolas'> wr3/clj/util.clj</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>函数名：</span><span lang=EN-US
  style='font-family:Consolas'>-</span><span style='font-family:宋体'>分隔的小写</span><span
  lang=EN-US style='font-family:Consolas'> make-array</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>变量名：</span><span lang=EN-US
  style='font-family:Consolas'>-</span><span style='font-family:宋体'>分隔的小写</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
 <tr>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>常用名</span></p>
  </td>
  <td width=645 valign=top style='width:483.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f,g,h </span><span
  style='font-family:宋体'>如果传入的参数是函数</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n </span><span
  style='font-family:宋体'>一般表示</span><span lang=EN-US style='font-family:Consolas'>size</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>index </span><span
  style='font-family:宋体'>序号</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>x,y </span><span
  style='font-family:宋体'>数字</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>s </span><span
  style='font-family:宋体'>字符串</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>coll </span><span
  style='font-family:宋体'>集合</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>pred </span><span
  style='font-family:宋体'>条件表达式</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&amp; more </span><span
  style='font-family:宋体'>不定长参数</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>expr </span><span
  style='font-family:宋体'>宏中的表达式</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>body </span><span
  style='font-family:宋体'>宏的执行体</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>binding </span><span
  style='font-family:宋体'>宏的绑定表达式</span></p>
  </td>
 </tr>
 <tr>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>粒度</span></p>
  </td>
  <td width=645 valign=top style='width:483.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>尽量细颗粒化，</span><span
  lang=EN-US style='font-family:Consolas'>(source doseq)</span><span
  style='font-family:宋体'>看到的是极限了，当然，配置文件和</span><span lang=EN-US
  style='font-family:Consolas'>hiccup</span><span style='font-family:宋体'>生成</span><span
  lang=EN-US style='font-family:Consolas'>html</span><span style='font-family:
  宋体'>的代码除外</span></p>
  </td>
 </tr>
 <tr>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>私有</span></p>
  </td>
  <td width=645 valign=top style='width:483.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>如下写法可以存取到私有函数，例如在测试中</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>@#'some.ns/var</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>@#'clojure.core/assert-args</span></p>
  </td>
 </tr>
 <tr>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>hint</span></p>
  </td>
  <td width=645 valign=top style='width:483.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>只有经测试</span><span lang=EN-US
  style='font-family:Consolas'>type hint</span><span style='font-family:宋体'>确实有用再去使用</span></p>
  </td>
 </tr>
 <tr>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>命名冲突</span></p>
  </td>
  <td width=645 valign=top style='width:483.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>如果名字够好，尽量去用，不要怕冲突，</span><span
  lang=EN-US style='font-family:Consolas'>namespace</span><span
  style='font-family:宋体'>以及</span><span lang=EN-US style='font-family:Consolas'>:only</span><span
  style='font-family:宋体'>等可以解决问题</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US
  style='font-family:Consolas'>use</span><span style='font-family:宋体'>和</span><span
  lang=EN-US style='font-family:Consolas'>require</span><span style='font-family:
  宋体'>中尽量多使用</span><span lang=EN-US style='font-family:Consolas'>:only</span><span
  style='font-family:宋体'>可以避免名字冲突，实在不行还有</span><span lang=EN-US
  style='font-family:Consolas'>alias</span></p>
  </td>
 </tr>
 <tr>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>boolean</span></p>
  </td>
  <td width=645 valign=top style='width:483.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>返回</span><span lang=EN-US
  style='font-family:Consolas'>true/false</span><span style='font-family:宋体'>的函数或者</span><span
  lang=EN-US style='font-family:Consolas'>boolean</span><span style='font-family:
  宋体'>变量都用形如</span><span lang=EN-US style='font-family:Consolas'> map<span
  style='background:yellow'>?</span>, has<span style='background:yellow'>?</span></span><span
  style='font-family:宋体'>的名字</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc306183971"></a><a name="_Toc281924024"></a><a
name="_Toc281658862"></a><a name="_Toc281556369"></a><a name="_Toc281556269"></a><a
name="_Toc281556165"></a><a name="_Toc281555963"></a><a name="_Toc281555806"><span
lang=EN-US style='font-family:Consolas'>3、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>coll</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>数据结构</span></u></h1>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=56 valign=top style='width:42.15pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List</span></p>
  </td>
  <td width=334 valign=top style='width:250.7pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>单向链表，在头部增加新元素，压栈式</span></p>
  </td>
  <td width=332 valign=top style='width:248.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>'(1 2 3)
  (list 1 2 3)</span></p>
  </td>
 </tr>
 <tr>
  <td width=56 valign=top style='width:42.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Vect</span></p>
  </td>
  <td width=334 valign=top style='width:250.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>数组，下标存取，在尾部增加新元素</span></p>
  </td>
  <td width=332 valign=top style='width:248.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[1 2 3]</span></p>
  </td>
 </tr>
 <tr>
  <td width=56 valign=top style='width:42.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Map</span></p>
  </td>
  <td width=334 valign=top style='width:250.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-</span></p>
  </td>
  <td width=332 valign=top style='width:248.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>{:a 1 :b 2
  :c 3} {1 &quot;aa&quot; 2 &quot;bb&quot;}</span></p>
  </td>
 </tr>
 <tr>
  <td width=56 valign=top style='width:42.15pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set</span></p>
  </td>
  <td width=334 valign=top style='width:250.7pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-</span></p>
  </td>
  <td width=332 valign=top style='width:248.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#{1 2 3}</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183972"></a><a
name="_Toc281924025"></a><a name="_Toc281658863"></a><a name="_Toc281556370"></a><a
name="_Toc281556270"></a><a name="_Toc281556166"></a><a name="_Toc281555964"></a><a
name="_Toc281555807"><span lang=EN-US style='font-family:Consolas'>3.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>List</span></u></a></h2>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(list 1 2 3)</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(quote (1 2 3))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可简写成：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>'(</span><span lang=EN-US
style='font-family:Consolas'>1 2 3<span style='background:yellow'>)</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果是</span><span lang=EN-US
style='font-family:Consolas'>symbol</span><span style='font-family:宋体'>而不是数字或者字符串等，必须用</span><span
lang=EN-US style='font-family:Consolas'>'</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>'</span><span lang=EN-US
style='font-family:Consolas'>(a b c d)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(quote (a b c d))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(list a b c) ; </span><span style='font-family:
宋体;color:red'>报错</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
style='font-family:Consolas'>range</span><span style='font-family:宋体'>函数生成</span><span
lang=EN-US style='font-family:Consolas'>list</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(range 10) ; (0 1 2 3 4 5 6 7 8 9)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(range 1 10) ; (1 2 3 4 5 6 7 8 9)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(range 1 10 2) ; (1 3 5 7 9)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
style='font-family:Consolas'>repeat</span><span style='font-family:宋体'>函数生成相同元素的</span><span
lang=EN-US style='font-family:Consolas'>list</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(repeat 5 1) ; (1 1 1 1 1)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(repeat 0 1) ; ()</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(apply str (repeat 10 &quot;*&quot;)) ; &quot;**********&quot;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.1.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>List</span><span style='font-family:"微软雅黑","sans-serif"'>基本操作</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="96%"
 style='width:96.5%;border-collapse:collapse;border:none'>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>CRUD</span></b><b><span
  style='font-family:宋体'>操作</span></b></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>代码例子</span></b></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>R</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>读取</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>first </span>'(2
  4 6 8)) ; 2</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>second </span>'(2
  4 6 8)) ; 4</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>last </span>'(2
  4 6 8)) ; 8</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>更通用的函数：</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>nth</span> '(2
  4 6 8) 0) ; 2</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>rest</span> '(2
  4 6 8)) ; '(4 6 8)</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>butlast</span>
  '(2 4 6 8)) ; (2 4 6)</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>next</span> '(2
  4 6 8)) ; '(4 6 8) </span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>nnext</span>
  '(2 4 6 8)) ; '(6 8) </span><span style='font-family:宋体'>相当于</span><span
  lang=EN-US style='font-family:Consolas'>(next (next ..))</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>nthnext</span>
  [2 4 6 8 10] 3) ; (8 10) </span><span style='font-family:宋体'>取第</span><span
  lang=EN-US style='font-family:Consolas'>3</span><span style='font-family:
  宋体'>个及以后元素</span><span lang=EN-US style='font-family:Consolas'>&nbsp; </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>rest</span><span
  style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>next</span><span
  style='font-family:宋体'>大致相同，不同如下：</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>rest</span>
  '(3)) ; ()</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>next</span>
  '(3)) ; nil</span></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>CU</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>增加或者修改</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>加入元素（只能在前面，与</span><span
  lang=EN-US style='font-family:Consolas'>vector</span><span style='font-family:
  宋体'>不用）：</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>cons</span> 9
  l) ; '(9 2 4 6 8) </span><span style='font-family:宋体'>结果同下</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>conj</span> l
  9) ; '(9 2 4 6 8) </span><span style='font-family:宋体'>结果同上，</span><span
  style='font-family:Consolas'> <span lang=EN-US style='background:yellow'>conj</span><span
  lang=EN-US>oin</span></span></p>
  <p class=MsoNormal><span style='font-family:宋体'>如果一定要加一个元素到最后，就先把这个元素也变成单个元素的</span><span
  lang=EN-US style='font-family:Consolas'>list</span><span style='font-family:
  宋体'>后用</span><span lang=EN-US style='font-family:Consolas'>concat</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>concat</span>
  '(1 2 3) (<span style='background:yellow'>list</span> <b>4</b>)) ; (1 2 3 <b>4</b>)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>在前面加入多个元素：</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>list*</span> 1
  2 3 [4 5 6]) ; (1 2 3 4 5 6) </span><span style='font-family:宋体'>把前面的元素都当成元素</span><span
  lang=EN-US style='font-family:Consolas'>, </span><span style='font-family:
  宋体'>最后一个当成</span><span lang=EN-US style='font-family:Consolas'>List</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>apply list</span>
  1 2 3 [4 5 6]) ; </span></p>
  <p class=MsoNormal><span style='font-family:宋体'>合并</span><span lang=EN-US
  style='font-family:Consolas'>2</span><span style='font-family:宋体'>个</span><span
  lang=EN-US style='font-family:Consolas'>list</span><span style='font-family:
  宋体'>：</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>concat</span>
  '(9 7) l) ; (9 7 2 4 6 8) </span><span style='font-family:宋体'>可</span><span
  lang=EN-US style='font-family:Consolas'>2</span><span style='font-family:
  宋体'>至多个</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>into</span> '(<u>9
  7</u>) '(2 4 6 8)) ; </span><span style='font-family:宋体'>把后一个</span><span
  lang=EN-US style='font-family:Consolas'>list</span><span style='font-family:
  宋体'>的元素逐个压栈到另一个</span><span lang=EN-US style='font-family:Consolas'>list</span><span
  style='font-family:宋体'>：</span><span lang=EN-US style='font-family:Consolas'>(8
  6 4 2 <u>9 7</u>)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>对比</span><span lang=EN-US
  style='font-family:Consolas'>[]:</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(concat [9 7] [2 4 6 8]) ; <span
  style='background:yellow'>(</span>9 7 2 4 6 8<span style='background:yellow'>)</span></span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(into&nbsp;&nbsp; [9 7] [2 4 6 8]) ; <span
  style='background:yellow'>[</span>9 7 2 4 6 8<span style='background:yellow'>]</span></span></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>D</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>删除</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
  style='font-family:Consolas'>remove</span><span style='font-family:宋体'>，</span><span
  lang=EN-US style='font-family:Consolas'>filter</span><span style='font-family:
  宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>take-while, drop-while</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(remove #(&gt;= % 7) '(9 7 2 4 6 8))</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(filter #(&lt; % 7) '(9 7 2 4 6 8)) ; (2 4 6)</span></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.1.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>和</span><span
lang=EN-US>java.util.List</span><span style='font-family:"微软雅黑","sans-serif"'>互转</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=141 valign=top style='width:105.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>java.util.List
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-&gt;
  Clojure list</span></p>
  </td>
  <td width=511 valign=top style='width:383.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def l (doto
  (java.util.ArrayList.) (.add 1) (.add 3) (.add 5))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(apply list
  l) </span><span style='font-family:宋体'>或者</span><span lang=EN-US
  style='font-family:Consolas'> (concat () l)</span></p>
  </td>
 </tr>
 <tr>
  <td width=141 valign=top style='width:105.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure
  list&nbsp;&nbsp; </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-&gt;
  java.util.List</span></p>
  </td>
  <td width=511 valign=top style='width:383.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(java.util.ArrayList.
  '(1 3 5))</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183973"></a><a
name="_Toc281924026"></a><a name="_Toc281658864"></a><a name="_Toc281556371"></a><a
name="_Toc281556271"></a><a name="_Toc281556167"></a><a name="_Toc281555965"></a><a
name="_Toc281555808"><span lang=EN-US style='font-family:Consolas'>3.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Vector</span></u></a></h2>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>区别</span><span
lang=EN-US>vec</span><span style='font-family:"微软雅黑","sans-serif"'>和</span><span
lang=EN-US>vector</span><span style='font-family:"微软雅黑","sans-serif"'>函数</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>vec: </span><span style='font-family:宋体'>把其他</span><span
  lang=EN-US style='font-family:Consolas'>seq</span><span style='font-family:
  宋体'>转为</span><span lang=EN-US style='font-family:Consolas'>vector</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>vector</span><span style='font-family:宋体'>：用不定长参数构建新</span><span
  lang=EN-US style='font-family:Consolas'>vector</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(vec '(1 2
  3))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(vec
  &quot;hello&quot;) ; [\h \e \l \l \o]</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(vector 1 2
  3)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(vector
  &quot;hello&quot;) ; [&quot;hello&quot;]</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (vector
1 3 5 7)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可简写成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>[</span>1 3 5 7<span style='background:yellow'>]</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果是</span><span lang=EN-US
style='font-family:Consolas'>symbol</span><span style='font-family:宋体'>，必须加</span><span
lang=EN-US style='font-family:Consolas'>'</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>'</span>[a b c d]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>quote</span> [a b c d])</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.2.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Vector</span><span style='font-family:"微软雅黑","sans-serif"'>基本操作</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="96%"
 style='width:96.5%;border-collapse:collapse;border:none'>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>CRUD</span></b><b><span
  style='font-family:宋体'>操作</span></b></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>代码例子</span></b></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>R</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>读取</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>vector</span><span
  style='font-family:宋体'>可以定位元素</span><span lang=EN-US style='font-family:Consolas'>:</span></p>
  <p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>(def v [1 3 5 7])</span></p>
  <p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>(nth v 0) </span></p>
  <p class=MsoNormal><span style='font-family:宋体'>因为</span><span lang=EN-US
  style='font-family:Consolas'>vector</span><b><u><span style='font-family:
  宋体'>是数组</span></u></b><span style='font-family:宋体'>，也可以轻松使用下标存取，可简写如下</span></p>
  <p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>(v 0) ; </span><span style='font-family:宋体'>从</span><span
  lang=EN-US style='font-family:Consolas'>0</span><span style='font-family:
  宋体'>开始第一个元素，</span><span lang=EN-US style='font-family:Consolas'>1</span></p>
  <p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>(count v) ; 4 </span><span style='font-family:
  宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
  style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>size</span><span
  style='font-family:宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>length</span></p>
  <p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>(v (dec (count v))) ; </span><span
  style='font-family:宋体'>最后一个元素，</span><span lang=EN-US style='font-family:
  Consolas'>7</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>first, rest,
  next</span><span style='font-family:宋体'>用法与</span><span lang=EN-US
  style='font-family:Consolas'>list</span><span style='font-family:宋体'>相同，没有</span><span
  lang=EN-US style='font-family:Consolas'>secord</span><span style='font-family:
  宋体'>，但可用</span><span lang=EN-US style='font-family:Consolas'>nth</span><span
  style='font-family:宋体'>取任何位置元素。</span></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>C</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>增加</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>concat</span><span
  style='font-family:宋体'>得到</span><span lang=EN-US style='font-family:Consolas'>list</span><span
  style='font-family:宋体'>而不是</span><span lang=EN-US style='font-family:Consolas'>vector</span><span
  style='font-family:宋体'>：</span></p>
  <p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>(concat [-3 -1] [1 3 5 7]) ; (-3 -1 1 3 5 7)</span><span
  style='font-family:宋体'>而非</span><span lang=EN-US style='font-family:Consolas'>[-3
  -1 1 3 5 7]</span></p>
  <p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>into</span> [-3
  -1] [1 3 5 7]) ; </span><span style='font-family:宋体'>这个才返回：</span><span
  lang=EN-US style='font-family:Consolas'>[-3 -1 1 3 5 7]</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>增加元素，</span><span lang=EN-US
  style='font-family:Consolas'>conj</span><span style='font-family:宋体'>在后，</span><span
  lang=EN-US style='font-family:Consolas'>cons</span><span style='font-family:
  宋体'>在前（</span><span lang=EN-US style='font-family:Consolas'>list</span><span
  style='font-family:宋体'>调用</span><span lang=EN-US style='font-family:Consolas'>conj,cons</span><span
  style='font-family:宋体'>都插入在前）：</span></p>
  <p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>(conj v 0) ; [1 3 5 7 0]</span></p>
  <p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>(cons 0 v) ; [0 1 3 5 7]</span></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>U</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>修改</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>更改指定位置元素：</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>assoc</span> [1
  3 5 7] 2 0) ; [1 3 0 7] </span><span style='font-family:宋体'>注意：</span><span
  lang=EN-US style='font-family:Consolas'>list<span style='color:red'>*</span></span><span
  style='font-family:宋体;color:red'>不能</span><span lang=EN-US style='font-family:
  Consolas;color:red'>*</span><span style='font-family:宋体'>用</span><span
  lang=EN-US style='font-family:Consolas'>assoc</span><span style='font-family:
  宋体'>更改</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>assoc</span><span
  style='font-family:宋体'>可连续更改，如：交换第一个和最后一个元素</span></p>
  <p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>(let [v [1 3 5 7] n (dec (count v))]</span></p>
  <p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp; (<span style='background:yellow'>assoc</span>
  v <u>0 (v n)</u> <u>n (v 0)</u>))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>assoc-in </span><span
  style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>update-in</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>更改</span><span lang=EN-US
  style='font-family:Consolas'>[[1 <span style='background:yellow'>2</span>] [3
  4] [5 6]]</span><span style='font-family:宋体'>列表的第</span><span lang=EN-US
  style='font-family:Consolas'>[0 1]</span><span style='font-family:宋体'>个元素为</span><span
  lang=EN-US style='font-family:Consolas'>20</span><span style='font-family:
  宋体'>：</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>assoc-in</span>
  [[1 <span style='background:yellow'>2</span>] [3 4] [5 6]] [0 1] <span
  style='background:yellow'>20</span>) ; [[1 <span style='background:yellow'>20</span>]
  [3 4] [5 6]]</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>通过函数更新：</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>update-in</span>
  [[1 <span style='background:yellow'>2</span>] [3 4] [5 6]] [0 1] * 10) ; [[1 <span
  style='background:yellow'>20</span>] [3 4] [5 6]]</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>update-in</span>
  [[1 <span style='background:yellow'>2</span>] [3 4] [5 6]] [0 1] <u>(fn [i]
  (* i i i))</u>) </span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>; [[1 <span style='background:yellow'>8</span>]
  [3 4] [5 6]]</span></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>D</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>删除</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>取片段：</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>take</span> 3
  [1 3 5 7]) ; [1 3 5]</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>drop</span> 2
  [1 3 5 7]) ; [5 7]</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>subvec</span>
  [1 3 5 7] 1) ; [3 5 7]</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(subvec [1 3 5 7 9] 1 3) ; [3 5]</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(<span style='background:yellow'>take</span> 2 (<span
  style='background:yellow'>drop</span> 1 [1 3 5 7 9])) ; [3 5]</span></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>例子：把</span><span lang=EN-US
style='font-family:Consolas'>Map</span><span style='font-family:宋体'>转为</span><span
lang=EN-US style='font-family:Consolas'>Vector</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(reduce into {1 10 2 20 3 30 4 40}) ; <span
style='color:#5B6E6E'>[1 10 2 20 3 30 4 40]</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(vec (apply concat {1 10 2 20 3 30 4 40})) </span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以把</span><span lang=EN-US
style='font-family:Consolas'>Vector</span><span style='font-family:宋体'>转为</span><span
lang=EN-US style='font-family:Consolas'>Map</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v [1 10 2 20 3 30 4 40])</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(into {} (for [i (range 0 (count v) 2)] [(v i) (v
(inc i))])) ; <span style='color:#5B6E6E'>{1 10, 2 20, 3 30, 4 40}</span></span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.2.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>和</span><span
lang=EN-US>list</span><span style='font-family:"微软雅黑","sans-serif"'>互转</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>list&lt;-&gt;vector</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=148 valign=top style='width:110.7pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>list&nbsp;&nbsp;
  -&gt; vector</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><a name="OLE_LINK16"></a><a name="OLE_LINK15"><span
  lang=EN-US style='font-family:Consolas'>(<span style='background:yellow'>vec</span>
  '(1 2 3))</span></a></p>
  </td>
 </tr>
 <tr>
  <td width=148 valign=top style='width:110.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>vector
  -&gt; list</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><a name="OLE_LINK10"></a><a name="OLE_LINK9"><span
  lang=EN-US style='font-family:Consolas'>(<span style='background:yellow'>lazy-seq</span>
  [1 2 3])</span></a></p>
  <p class=MsoNormal><a name="OLE_LINK12"></a><a name="OLE_LINK11"><span
  lang=EN-US style='font-family:Consolas'>(<span style='background:yellow'>seq</span>
  [1 2 3])</span></a></p>
  <p class=MsoNormal><a name="OLE_LINK14"></a><a name="OLE_LINK13"><span
  lang=EN-US style='font-family:Consolas'>(<span style='background:yellow'>list*</span>
  [1 2 3])</span></a></p>
  </td>
 </tr>
</table>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.2.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>和</span><span
lang=EN-US>java</span><span style='font-family:"微软雅黑","sans-serif"'>数组互转</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=166 valign=top style='width:124.25pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>java</span><span
  style='font-family:宋体'>数组</span><span lang=EN-US style='font-family:Consolas'>
  -&gt; vector</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>vec</span> (into-array [1 3 5]))</span></p>
  </td>
 </tr>
 <tr>
  <td width=166 valign=top style='width:124.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>vector C&gt;
  java</span><span style='font-family:宋体'>数组</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>into-array</span> [1 3 5])</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183974"></a><a
name="_Toc281924027"></a><a name="_Toc281658865"></a><a name="_Toc281556372"></a><a
name="_Toc281556272"></a><a name="_Toc281556168"></a><a name="_Toc281555966"></a><a
name="_Toc281555809"><span lang=EN-US style='font-family:Consolas'>3.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Set</span></u></a></h2>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(set [1 3 5])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可简写成：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>#{</span><span lang=EN-US
style='font-family:Consolas'>1 3 5<span style='background:yellow'>}</span></span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>sorted-set</span>
3 5 1) ; #{1 3 5}</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(set [1 3 5 3]) ; #{1 3 5}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>set</span><span
style='font-family:宋体'>合集（加法）：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>clojure.set/union</span> #{1 2 3} #{1 2 4}) ; #{1 2 3
4}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>set</span><span
style='font-family:宋体'>交集：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>clojure.set/intersection</span> #{1 2 3} #{1 2 4}) ;
#{1 2}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>set</span><span
style='font-family:宋体'>差集（减法）：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>clojure.set/difference</span> #{1 2 3} #{1 2 4}) ;
#{3}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>增加元素：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>conj</span> #{1 3} 1 5 7) ; #{1 3 5 7}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>删除元素：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>disj</span> #{1 3 5 7} 3 7) ; <span style='color:
#595959'>#{1 5}) <span style='background:yellow'>disj</span>oin</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>筛选：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>clojure.set/select</span> even? #{1 2 3 4 5}) <span
style='color:#5B6E6E'>; #{2 4}</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意与</span><span lang=EN-US
style='font-family:Consolas'>filter</span><span style='font-family:宋体'>的区别，返回值类型不同</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>filter</span> even? #{1 2 3 4 5}) <span
style='color:#5B6E6E'>; (2 4) </span></span><span style='font-family:宋体;
color:#5B6E6E'>返回</span><span lang=EN-US style='font-family:Consolas;
color:#5B6E6E'>list</span><span style='font-family:宋体;color:#5B6E6E'>而不是</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>set</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183975"></a><a
name="_Toc281924028"></a><a name="_Toc281658866"></a><a name="_Toc281556373"></a><a
name="_Toc281556273"></a><a name="_Toc281556169"></a><a name="_Toc281555967"></a><a
name="_Toc281555810"><span lang=EN-US style='font-family:Consolas'>3.4<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Map</span></u></a></h2>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(hash-map 1 10 2 20 3 30)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可简写为：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>{1 10, 2 20, 3 30}</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>{1 10 2 20 3 30}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="96%"
 style='width:96.5%;border-collapse:collapse;border:none'>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>CRUD</span></b><b><span
  style='font-family:宋体'>操作</span></b></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>代码例子</span></b></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>R</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>读取</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
  style='font-family:Consolas'>keyword</span><span style='font-family:宋体'>类型则可前可后，其他类型做</span><span
  lang=EN-US style='font-family:Consolas'>key</span><span style='font-family:
  宋体'>只能放后面用：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>:name</span> {:name &quot;qh&quot; :age 10})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>({:name
  &quot;qh&quot; :age 10} <span style='background:yellow'>:name</span>)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>({1 100 2
  200} <span style='background:yellow'>2</span>)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>get-in</span> {:n &quot;qh&quot;, :addr {:cn {:bj
  {:hd &quot;tsinghua&quot;}}}} [:addr :cn :bj :hd])</span></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>CU</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>增加或者修改</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>没有则增加，有则修改</span><span
  lang=EN-US style='font-family:Consolas'>:</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>conj</span> {:name &quot;qh&quot; :age 20} {:age
  30} {:gender 'male})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>merge</span> {:name &quot;qh&quot; :age 20} {:age
  30} {:gender 'male})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(reduce <span
  style='background:yellow'>into</span> {} [{:name &quot;qh&quot; :age 20}
  {:age 30} {:gender 'male}])</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>assoc</span> {:name &quot;qh&quot; :age 20} :age 30
  :gender 'male)</span></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>D</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>删除</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>dissoc</span> {:name &quot;qh&quot; :age 30} :name)</span></p>
  </td>
 </tr>
 <tr>
  <td width="15%" valign=top style='width:15.82%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width="84%" valign=top style='width:84.18%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.4.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>读取、选取</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>{1 100, 2 200, 3 300} <span style='color:#5B6E6E'>;
</span></span><span style='font-family:宋体;color:#5B6E6E'>注意不是</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>(map 1 100 2 200 3 300), </span><span
style='font-family:宋体;color:#5B6E6E'>因为</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>map</span><span style='font-family:
宋体;color:#5B6E6E'>是列表操作符</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可省略分隔符</span><span lang=EN-US
style='font-family:Consolas'>&quot;,&quot;</span><span style='font-family:宋体'>简写成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>{</span>1 100 2 200 3 300<span style='background:
yellow'>}</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
m {:name &quot;qh&quot; :age 30})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>get</span> m :name) ; &quot;qh&quot; </span><span
style='font-family:宋体'>方式</span><span lang=EN-US style='font-family:Consolas'>1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (:name
m) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; &quot;qh&quot; </span><span
style='font-family:宋体'>方式</span><span lang=EN-US style='font-family:Consolas'>2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m
:name) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; &quot;qh&quot; </span><span
style='font-family:宋体'>方式</span><span lang=EN-US style='font-family:Consolas'>3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (:age
m) ; 30</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>count</span> m) ; 2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m
:mail) ; nil</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>get</span> m :mail &quot;anonymous@mail&quot;) ;
&quot;anonymous@mail&quot; </span><span style='font-family:宋体'>返回缺省值，相当于</span><span
lang=EN-US style='font-family:Consolas'>scala</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>getOrElse</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者不用</span><span lang=EN-US
style='font-family:Consolas'>&quot;<span style='background:yellow'>:</span>&quot;</span><span
style='font-family:宋体'>，用</span><span lang=EN-US style='font-family:Consolas'>&quot;<span
style='background:yellow'>'</span>&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
m <span style='background:yellow'>'</span>{name &quot;qh&quot; age 30})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m
<span style='background:yellow'>'</span>name) ; &quot;qh&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m
<span style='background:yellow'>'</span>age) ; 30</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：通过</span><span lang=EN-US
style='font-family:Consolas'>get</span><span style='font-family:宋体'>函数获取</span><span
lang=EN-US style='font-family:Consolas'>Map</span><span style='font-family:
宋体'>的元素更安全，因为能处理</span><span lang=EN-US style='font-family:Consolas'>nil</span><span
style='font-family:宋体'>的情况</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(nil :a) ; </span><span style='font-family:宋体;
color:red'>报错</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>get</span> nil
:a) ; nil</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>层层</span><span lang=EN-US
style='font-family:Consolas'>get</span><span style='font-family:宋体'>可以用</span><span
lang=EN-US style='font-family:Consolas'>get-in</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=102 valign=top style='width:76.3pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>不用</span><span lang=EN-US
  style='font-family:Consolas'>get-in</span></p>
  </td>
  <td width=621 valign=top style='width:465.5pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((((<u>{:n
  &quot;qh&quot;, :addr {:cn {:bj {:hd &quot;tsinghua&quot;}}}}</u> :addr) :cn)
  :bj) :hd)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>或者：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(-&gt; <u>{:n
  &quot;qh&quot;, :addr {:cn {:bj {:hd &quot;tsinghua&quot;}}}}</u> :addr :cn
  :bj :hd)</span></p>
  </td>
 </tr>
 <tr>
  <td width=102 valign=top style='width:76.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
  style='font-family:Consolas'>get-in</span></p>
  </td>
  <td width=621 valign=top style='width:465.5pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>get-in</span> <u>{:n &quot;qh&quot;, :addr {:cn
  {:bj {:hd &quot;tsinghua&quot;}}}}</u> [:addr :cn :bj :hd])</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>参见：</span><span lang=EN-US
style='font-family:Consolas'>assoc-in</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>destructure</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
m [<span style='background:yellow'>{a :age}</span>] (println &quot;age is:&quot;
<span style='background:yellow'>a</span>))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m
<span style='background:yellow'>{:name &quot;qh&quot; :age 30}</span>) ; &quot;age
is: 30&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：根据</span><span lang=EN-US
style='font-family:Consolas'>key</span><span style='font-family:宋体'>取</span><span
lang=EN-US style='font-family:Consolas'>value</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map1
k1) </span><span style='font-family:宋体'>或者</span><span lang=EN-US
style='font-family:Consolas'> (map1 k1 k1-default)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ({1
100 2 200} 3 -1) ; </span><span style='font-family:宋体'>有</span><span
lang=EN-US style='font-family:Consolas'>key</span><span style='font-family:
宋体'>为</span><span lang=EN-US style='font-family:Consolas'>3</span><span
style='font-family:宋体'>的就取其值，否则返回缺省值</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：取部分</span><span lang=EN-US
style='font-family:Consolas'>keys-vals</span><span style='font-family:宋体'>对：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>select-keys</span> {1 100 2 200 3 300} [1 3]) ; {3
300, 1 100}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>select-keys</span> {1 100 2 200 3 300} (reverse [1 3]))
; {1 100, 3 300}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>组合函数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((comp
vals select-keys) {1 100 2 200 3 300} [3 1]) ; {100, 300}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：按指定</span><span lang=EN-US
style='font-family:Consolas'>key</span><span style='font-family:宋体'>的顺序取出</span><span
lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
宋体'>的部分</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>conj</span> {} (<span
style='background:yellow'>select-keys</span> {1 100 2 200 3 300} [3 1])) ; {3
300, 1 100}</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：条件选择</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def m {1 100 2 200 3 300})</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>select-keys</span>
m (for [[k v] m :when (even? k)] k))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>into</span> {}
(filter #(even? (key %)) m))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：取</span><span lang=EN-US
style='font-family:Consolas'>keys</span><span style='font-family:宋体'>，</span><span
lang=EN-US style='font-family:Consolas'>vals</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>keys</span> {:name &quot;qh&quot; :age 30}) ; (:name
:age)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>vals</span> {:name &quot;qh&quot; :age 30}) ; (&quot;qh&quot;
30)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (keys
{1 100 2 200 3 300})</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
<span style='background:yellow'>key</span> {1 100 2 200 3 300})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (vals
{1 100 2 200 3 300})</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意</span><span lang=EN-US
style='font-family:Consolas'>,key</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>val</span><span style='font-family:
宋体'>函数的参数不是一个</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>，而是</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>的一个</span><span lang=EN-US style='font-family:Consolas'>Entry&lt;k,v&gt;</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>key</span> {1
100}) ; </span><span style='font-family:宋体;color:red'>报错</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>key</span> (first
{1 100 2 200})) ; 1</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(first (keys {1 100}))&nbsp; ; 1</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
<span style='background:yellow'>val</span> {1 100 2 200 3 300})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：判断</span><span lang=EN-US
style='font-family:Consolas'>key</span><span style='font-family:宋体'>是否已经存在：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>contains?</span> {:name &quot;qh&quot; :age 30} :age)
; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-family:宋体;color:red'>特别注意</span></b><span
style='font-family:宋体'>：</span><span lang=EN-US style='font-family:Consolas'>contains?</span><span
style='font-family:宋体'>对</span><span lang=EN-US style='font-family:Consolas'>list</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>vector</span><span
style='font-family:宋体'>也有效，但</span><span lang=EN-US style='font-family:Consolas'>key</span><span
style='font-family:宋体'>是下标而不是值。</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(contains? [10 20 30 40] 3) ; true </span><span
style='font-family:宋体'>表明存在下标</span><span lang=EN-US style='font-family:Consolas'>index=3</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(contains? [10 20 30 40] 40) ; false </span><span
style='font-family:宋体'>没有下标</span><span lang=EN-US style='font-family:Consolas'>40</span><span
style='font-family:宋体'>，只有</span><span lang=EN-US style='font-family:Consolas'>0,1,2,3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.4.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>修改</span></p>

<p class=MsoNormal><span style='font-family:宋体'>合并多个</span><span lang=EN-US
style='font-family:Consolas'>map</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>conj</span>
{:name &quot;qh&quot; :age 30} {:gender 'm :mail &quot;qh@mail&quot;})</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>; {:mail &quot;qh@mail&quot;,
:gender m, :name &quot;qh&quot;, :age 30}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者增加</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>个</span><span
lang=EN-US style='font-family:Consolas'>[key value]</span><span
style='font-family:宋体'>新元素</span><span lang=EN-US style='font-family:Consolas'>:</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>conj</span>
{:name &quot;qh&quot; :age 30} [:gender 'm]) ; <span style='color:#5B6E6E'>[]</span></span><span
style='font-family:宋体;color:#5B6E6E'>不能用</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>assoc</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以用</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>merge</span>
{:name &quot;qh&quot; :age 30} {:gender 'm :mail &quot;qh@mail&quot;})</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相同</span><span lang=EN-US
style='font-family:Consolas'>key</span><span style='font-family:宋体'>可以合并</span><span
lang=EN-US style='font-family:Consolas'>value</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>merge-with</span>
<span style='background:yellow'>+</span> {:name &quot;qh&quot; <b><u>:age</u></b>
<span style='background:lime'>30</span>} {:gender 'm <b><u>:age</u></b> <span
style='background:lime'>5</span>})</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>; {:gender m, :name &quot;qh&quot;, <b><u>:age</u></b>
<span style='background:lime'>35</span>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal><span style='font-family:宋体'>增加多个新元素</span><span lang=EN-US
style='font-family:Consolas'>, </span><span style='font-family:宋体'>返回新</span><span
lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
宋体'>：</span><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>assoc</span>iate</span><span style='font-family:宋体'>联合</span><span
lang=EN-US style='font-family:Consolas'>)</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>assoc</span>
{:name &quot;qh&quot; :age 30} <u>:gender 'm</u> <u>:mail &quot;qh@mail&quot;</u>)
</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>; {<u>:mail &quot;qh@mail&quot;,
:gender m</u>, :name &quot;qh&quot;, :age 30}</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>删除多个元素</span><span lang=EN-US
style='font-family:Consolas'>, </span><span style='font-family:宋体'>返回新</span><span
lang=EN-US style='font-family:Consolas'>map:</span><span style='font-family:
宋体'>（</span><span lang=EN-US style='font-family:Consolas;background:yellow'>dissoc</span><span
lang=EN-US style='font-family:Consolas'>iate</span><span style='font-family:
宋体'>分离）</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>dissoc</span>
{:name &quot;qh&quot; :age 30} :name) ; {:age 30}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>更改值（用函数）：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>update-in</span>
{:name &quot;qh&quot; :age <b>30</b>} [:age] #(inc %)) ; <span
style='color:#5B6E6E'>{:name &quot;qh&quot;, :age <b>31</b>}</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>简单设置值：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>assoc</span>
{:name &quot;qh&quot; :age <b>30</b>} :age <b>31</b>) ;<span style='color:#5B6E6E'>
{:name &quot;qh&quot;, :age <b>31</b>}</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>增加或者修改层次沈的元素：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>assoc-in</span> <u>{:name
&quot;qh&quot;, :addr {:cn {:bj {:hd &quot;tsinghua&quot;}}}}</u> <b>[:addr :cn
:bj :hd]</b> &quot;pku&quot;)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#7F7F7F'>; {:name &quot;qh&quot;, :addr {:cn
{:bj {:hd &quot;pku&quot;}}}}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>参见：</span><span lang=EN-US
style='font-family:Consolas'>get-in</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：使用</span><span lang=EN-US
style='font-family:Consolas'>-&gt;</span><span style='font-family:宋体'>进行一系列修改操作</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>-&gt;</span>
{:name &quot;qh&quot; :age 10} (<span style='background:yellow'>dissoc</span>
:age) (<span style='background:yellow'>assoc</span> :name &quot;james&quot;))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>; {:name &quot;james&quot;}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：把所有的</span><span lang=EN-US
style='font-family:Consolas'>value</span><span style='font-family:宋体'>变大写</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def m {:k1 &quot;hello&quot; :k2
&quot;world&quot; :k3 &quot;clojure&quot;})</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>zipmap</span> (keys
m) (map #(.toUpperCase %) (vals m)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：按</span><span lang=EN-US
style='font-family:Consolas'>key</span><span style='font-family:宋体'>排序：</span></p>

<p class=MsoNormal style='text-indent:9.0pt'><span lang=EN-US style='font-family:
Consolas'>(<span style='background:yellow'>into</span> (<span style='background:
yellow'>sorted-map</span>) { 1 10 3 30 2 20})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：修改</span><span lang=EN-US
style='font-family:Consolas'>key</span></p>

<p class=MsoNormal style='text-indent:9.0pt'><span lang=EN-US style='font-family:
Consolas'>(into {} (for [[k v] {1 10 2 20 3 30}] [(str &quot;k&quot; k) v])) ; <span
style='color:#5B6E6E'>{&quot;k1&quot; 10, &quot;k2&quot; 20, &quot;k3&quot; 30}</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.4.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>生成</span><span
lang=EN-US>map</span></p>

<p class=MsoNormal><span style='font-family:宋体'>通过</span><span lang=EN-US
style='font-family:Consolas'>keys</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>vals</span><span style='font-family:
宋体'>来构造</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>zipmap</span> [1
2 3] [100 200 300]) ; {3 300, 2 200, 1 100}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>list-&gt;map:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>into</span> {} (for [k [&quot;Susan&quot;
&quot;Barbara&quot; &quot;Ian&quot; &quot;Vicki&quot;]] [k (count k)]))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>结果：</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>{&quot;Susan&quot; 5,
&quot;Barbara&quot; 7, &quot;Ian&quot; 3, &quot;Vicki&quot; 5}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>比使用</span><span lang=EN-US
style='font-family:Consolas'>zipmap</span><span style='font-family:宋体'>好：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(binding [k [&quot;Susan&quot;
&quot;Barbara&quot; &quot;Ian&quot; &quot;Vicki&quot;]] (<span
style='background:yellow'>zipmap</span> k (map count k)))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>结果：</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>{&quot;Vicki&quot; 5,
&quot;Ian&quot; 3, &quot;Barbara&quot; 7, &quot;Susan&quot; 5}</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：特定</span><span lang=EN-US
style='font-family:Consolas'>list-&gt;map</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def s [1 10 2 20 3 30 4 40])</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(into {} (for [i (range (/ (count s) 2))] [(nth s
i) (nth s (+ (* 2 i) 1))]))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>; <span style='color:#5B6E6E'>{1 10, 10 20, 2 30,
20 40}</span></span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.4.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>和</span><span
lang=EN-US>vector</span><span style='font-family:"微软雅黑","sans-serif"'>互转</span></p>

<p class=MsoNormal><span style='font-family:宋体'>把长度为偶数的</span><span lang=EN-US
style='font-family:Consolas'>vector</span><span style='font-family:宋体'>转为</span><span
lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
宋体'>，例如：</span><span lang=EN-US style='font-family:Consolas'>[1 10 2 20 3 30 4
40 5 50] &lt;-&gt; {1 10 2 20 3 30 4 40}</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(def v [1 10 2 20 3 30 4 40])</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(def m {1 10 2 20 3 30 4 40})</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(defn v2m [v] (into {} (for [i (range 0 (count v)
2)] [(v i) (v (inc i))]) ))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(v2m v) ; <span style='color:#5B6E6E'>{1 10, 2 20,
3 30, 4 40}</span></span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(defn m2v [m] (reduce into m))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(m2v m) ; <span style='color:#5B6E6E'>[1 10 2 20 3
30 4 40]</span></span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.4.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>和</span><span
lang=EN-US>java.util.HashMap</span><span style='font-family:"微软雅黑","sans-serif"'>互转</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>java.util.HashMap
</span><span style='font-family:宋体'>转换成</span><span lang=EN-US
style='font-family:Consolas'> Clojure map</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def m (doto (java.util.HashMap.) (.put 1 10)
(.put 2 20) (.put 3 30)))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>into</span> {} m)
; {1 10, 2 20, 3 30}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>zipmap</span>
(keys m) (vals m)) ; {3 30, 2 20, 1 10}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure map</span><span
style='font-family:宋体'>转换成</span><span lang=EN-US style='font-family:Consolas'>java.util.HashMap</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(java.util.HashMap. {1 10 2 20 3 30}) ; #&lt;HashMap
{1=10, 2=20, 3=30}&gt;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924029"></a><a
name="_Toc281658867"></a><a name="_Toc281556374"></a><a name="_Toc281556274"></a><a
name="_Toc281556170"></a><a name="_Toc281555968"></a><a name="_Toc281555811"><span
lang=EN-US style='text-decoration:none'>3.4.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>destructure</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>destructure</span><span
style='font-family:宋体'>――</span><span lang=EN-US style='font-family:Consolas'>“</span><span
style='font-family:宋体'>结构拆分</span><span lang=EN-US style='font-family:Consolas'>”</span><span
style='font-family:宋体'>在函数定义的参数中（或者变量初始化中）把数据结构拆分出部分或者全部，方便调用，避免在函数体中拆分。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如我们只对</span><span lang=EN-US
style='font-family:Consolas'>{:name &quot;qh&quot; :age 30}</span><span
style='font-family:宋体'>中的</span><span lang=EN-US style='font-family:Consolas'>age</span><span
style='font-family:宋体'>感兴趣：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>，一般方法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
f1 [m] (:age m))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (println
(f1 {:name &quot;qh&quot; :age 30}))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>destructure</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
f2 [{<u><span style='background:yellow'>age :age</span></u>}] age)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (println
(f2 {:name &quot;qh&quot; :age 30})) </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>，再如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
f1 [m] (+ (:x m) (:y m)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f1
{:x 3 :y 5})</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>destructure</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
f1 [{<u><span style='background:yellow'>x :x</span></u> <u><span
style='background:yellow'>y :y</span></u>}] (+ x y))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f1
{:x 3 :y 5})</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
f2 [{<span style='background:yellow'>:keys</span> [x y]}] (+ x y))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f2
{:x 3 :y 5})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>，求勾股弦</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
f3 [xy] (Math/sqrt (+ (* (nth xy 0) (nth xy 0)) (* (nth xy 1) (nth xy 1)))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f3
[3 4]) ; 5.0</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>destructure</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
f4 [<span style='background:yellow'>[x y]</span>] (Math/sqrt (+ (* x x) (* y
y))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f4
[3 4]) ; 5.0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以在</span><span lang=EN-US
style='font-family:Consolas'>Map</span><span style='font-family:宋体'>之外的其他数据结构中进行</span><span
lang=EN-US style='font-family:Consolas'>destructure</span><span
style='font-family:宋体'>，例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (let
[[x <span style='background:yellow'>_</span> y] [1 2 3]] (+ x y)) ; 4</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183976"></a><a
name="_Toc281924030"></a><a name="_Toc281658868"></a><a name="_Toc281556375"></a><a
name="_Toc281556275"></a><a name="_Toc281556171"></a><a name="_Toc281555969"></a><a
name="_Toc281555812"><span lang=EN-US style='font-family:Consolas'>3.5<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>操作</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>对集合</span><span lang=EN-US
style='font-family:Consolas'>coll</span><span style='font-family:宋体'>进行操作最有意思的两个操作是</span><span
lang=EN-US style='font-family:Consolas'>MapReduce</span><span style='font-family:
宋体'>（</span><span lang=EN-US style='font-family:Consolas'>map/mapcat</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>reduce/reductions</span><span
style='font-family:宋体'>）</span></p>

<p class=MsoNormal><span style='font-family:宋体'>表</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：常用</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>操作</span></b></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>结果</span></b></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Scala</span></b><b><span
  style='font-family:宋体'>对应函数</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;n </span><span
  style='font-family:宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>
  n*m-&gt;n</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>mapcat</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;n*m</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>flatMap</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>reduce</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;1</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>reduce
  foldLeft foldRight</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>reductions</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;n</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scanLeft
  scanRight</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;n</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for..yield</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for :when</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;m</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for..if..yield</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>filter
  remove</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;m</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>filter filterNot</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>split
  split-with</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;2</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>span
  partition</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>partition</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;m*k</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>group-by</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;2</span><span
  style='font-family:宋体'>～</span><span lang=EN-US style='font-family:Consolas'>m</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>没有</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>dotimes
  doseq dorun</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;nil</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>foreach</span></p>
  </td>
 </tr>
 <tr>
  <td width=249 valign=top style='width:186.5pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>juxt</span></p>
  </td>
  <td width=246 valign=top style='width:184.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n-&gt;m1+m2+..+mi</span></p>
  </td>
  <td width=228 valign=top style='width:171.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>表</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：分类</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;border-collapse:collapse;border:none'>
 <tr>
  <td width="16%" valign=top style='width:16.36%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width="83%" valign=top style='width:83.64%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>减少长度</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m -&gt; m-</span></p>
  </td>
  <td width="83%" valign=top style='width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>distinct </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>filter/remove</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for :while/:when</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>keep/keep-indexed</span></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>增加长度</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m -&gt; m+</span></p>
  </td>
  <td width="83%" valign=top style='width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>cons</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>concat
  lazy-cat mapcat</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>cycle</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>interpose
  interleave</span></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>取一个</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m -&gt; 1</span></p>
  </td>
  <td width="83%" valign=top style='width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>first ffirst
  nfirst second last</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>nth rand-nth
  when-first</span></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>掐头</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m -&gt; 1~m-</span></p>
  </td>
  <td width="83%" valign=top style='width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>rest</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>next fnext
  nnext nthnext</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>drop/drop-while</span></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>去尾</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m -&gt; 1~m-</span></p>
  </td>
  <td width="83%" valign=top style='width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>take
  take-nth take-while</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>butlast
  drop-last</span></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>整理</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m -&gt; m~m+</span></p>
  </td>
  <td width="83%" valign=top style='width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>flatten</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>reverse sort
  sort-by shuffle</span></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>分组</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m C&gt; 2+</span></p>
  </td>
  <td width="83%" valign=top style='width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>split-at
  split-with</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>partition
  partition-all partition-by</span></p>
  </td>
 </tr>
 <tr>
  <td width="16%" valign=top style='width:16.36%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>映射</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m -&gt; m |
  n*m</span></p>
  </td>
  <td width="83%" valign=top style='width:83.64%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map pmap mapcat
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>replace reductions
  map-indexed seque</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924031"></a><a
name="_Toc281658869"></a><a name="_Toc281556376"></a><a name="_Toc281556276"></a><a
name="_Toc281556172"></a><a name="_Toc281555970"></a><a name="_Toc281555813"><span
lang=EN-US style='text-decoration:none'>3.5.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>apply</span></a></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>apply</span> <b>f</b>
[e1 e2 e3])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>apply</span> <b>f</b> e1 [e2 e3]) ; </span><span
style='font-family:宋体'>这个很有用！</span></p>

<p class=MsoNormal><span style='font-family:宋体'>都是把</span><span lang=EN-US
style='font-family:Consolas'>sequence</span><span style='font-family:宋体'>转换函数参数来用，相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<b>f</b>
e1 e2 e3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (apply
str [1 2 3 4 5]) ; &quot;12345&quot;</span><span style='font-family:宋体'>，对比</span><span
lang=EN-US style='font-family:Consolas'> (str [1 2 3 4 5]) ; &quot;[1 2 3 4
5]&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (apply
str 1 2 [3 4 5]) ; &quot;12345&quot;,</span><span style='font-family:宋体'>对比</span><span
lang=EN-US style='font-family:Consolas'> (str 1 2 [3 4 5]) ; &quot;12[3 4
5]&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (apply
str &quot;hello:&quot; [1 3 5]) ; &quot;hello:135&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (apply
+ 1 [2 3]) ; (+ 1 [2 3])</span><span style='font-family:宋体'>是不行的</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (max
[1 3 2]) ; </span><span style='font-family:宋体;color:#C00000'>错误</span><span
lang=EN-US style='font-family:Consolas;color:#C00000'> [1 3 2]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (apply
max [1 3 2]) ; 3 </span><span style='font-family:宋体'>相当于</span><span
lang=EN-US style='font-family:Consolas'> (max 1 3 2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924032"></a><a
name="_Toc281658870"></a><a name="_Toc281556377"></a><a name="_Toc281556277"></a><a
name="_Toc281556173"></a><a name="_Toc281555971"></a><a name="_Toc281555814"><span
lang=EN-US style='text-decoration:none'>3.5.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>map</span></a></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>模式</span></b><b><span lang=EN-US style='font-family:
  Consolas'>1</span></b><b><span style='font-family:宋体'>：操作一个集合</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>模式</span></b><b><span lang=EN-US style='font-family:
  Consolas'>2</span></b><b><span style='font-family:宋体'>：操作多个集合</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map <span
  style='background:yellow'>f</span> [a1 a2..an])</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
  style='background:yellow'>f</span> a1) (<span style='background:yellow'>f</span>
  a2) .. (<span style='background:yellow'>f</span> an))</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map <span
  style='background:yellow'>f</span> [a1 a2..an] [b1 b2..bn] [c1 c2..cn])</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
  style='background:yellow'>f</span> a1 b1 c1) (<span style='background:yellow'>f</span>
  a2 b2 c2) .. (<span style='background:yellow'>f</span> an bn cn))</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v [&quot;aa&quot; &quot;bbb&quot;
&quot;cccc&quot;])</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>map</span> count
v) ; (2 3 4)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以通过</span><span lang=EN-US
style='font-family:Consolas'>map</span><span style='font-family:宋体'>把</span><span
lang=EN-US style='font-family:Consolas'>symbol</span><span style='font-family:
宋体'>转换为</span><span lang=EN-US style='font-family:Consolas'>string</span><span
style='font-family:宋体'>，免得敲无数的</span><span lang=EN-US style='font-family:Consolas'>&quot;&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
str '[aa bbb cccc]) ; (&quot;aa&quot; &quot;bbb&quot; &quot;cccc&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
<span style='background:yellow'>name</span> '[aa bbb cccc])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>上例就变成</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
(comp count str) '[aa bbb cccc])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可使用匿名函数：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(map #(* % %) (range 6)) ; (0 1 4 9 16 25)</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：多个</span><span lang=EN-US
style='font-family:Consolas'>coll</span><span style='font-family:宋体'>做</span><span
lang=EN-US style='font-family:Consolas'>map</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
+ [1 2 3] [10 20 30] [100 200 300]) ; (111 222 333)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
vector [1 2 3] [100 200 300]) ; ([1 100] [2 200] [3 300])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>fib</span><span style='font-family:宋体'>数列（</span><span
lang=EN-US style='font-family:Consolas'>1 2 3 5 8 </span><span
style='font-family:宋体'>……）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
fib (lazy-cat [1 2] <u>(<span style='background:yellow'>map</span> + fib (rest
fib))</u>))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (take
10 fib) ; (1 2 3 5 8 13 21 34 55 89)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>原理说明</span><span lang=EN-US
style='font-family:Consolas'>(from SICP)</span><span style='font-family:宋体'>：</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=right style='text-align:right'><span lang=EN-US
  style='font-family:Consolas'>fib</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>2</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>3</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>5</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>8</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>13</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>21</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>..</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>..</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=right style='text-align:right'><span lang=EN-US
  style='font-family:Consolas'>(rest fib)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>2</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>3</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>5</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>8</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>13</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>21</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>34</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>..</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>..</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=right style='text-align:right'><span lang=EN-US
  style='font-family:Consolas'>[<b>1 2</b>]</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>3</span></b></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>5</span></b></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>8</span></b></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>13</span></b></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>21</span></b></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>34</span></b></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>55</span></b></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>keep</span><span
style='font-family:宋体'>和操作一个集合的</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>相似，但不保留为</span><span lang=EN-US style='font-family:Consolas'>nil</span><span
style='font-family:宋体'>的元素</span><span lang=EN-US style='font-family:Consolas'>,</span><span
style='font-family:宋体'>对比：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map first [[1
2] [] [3 4]])&nbsp; ; (1 <span style='background:yellow'>nil</span> 3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>keep</span> first [[1 2] <span style='background:
yellow'>[]</span> [3 4]]) ; (1 3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：一种有趣的写法</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(map '[a b c d e] [0 3]) ; (a d)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>解析：</span><span lang=EN-US
style='font-family:Consolas'>vector</span><span style='font-family:宋体'>数组可以直接使用下标来存取，</span><span
lang=EN-US style='font-family:Consolas'>('[a b c d e] 0)</span><span
style='font-family:宋体'>是合法的（返回</span><span lang=EN-US style='font-family:Consolas'>'a</span><span
style='font-family:宋体'>），比如下的写法简单：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(map #(nth '[a b c d e] %) [0 3])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也体现了</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>中数据（</span><span
lang=EN-US style='font-family:Consolas'>vector</span><span style='font-family:
宋体'>）即代码（函数）的说法。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：数据分段</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def c [0 60 80 100])</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>map</span> vector
(butlast c) (next c)) ; <span style='color:#5B6E6E'>([0 60] [60 80] [80 100])</span></span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281556378"></a><a
name="_Toc281556278"></a><a name="_Toc281556174"></a><a name="_Toc281555972"></a><a
name="_Toc281555815"></a><a name="_Toc281924033"></a><a name="_Toc281658871"><span
lang=EN-US style='text-decoration:none'>3.5.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>map-indexed</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map-indexed f
coll)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>其中</span><span lang=EN-US
style='font-family:Consolas'>f</span><span style='font-family:宋体'>有两个参数</span><span
lang=EN-US style='font-family:Consolas'>[i e]</span><span style='font-family:
宋体'>，</span><span lang=EN-US style='font-family:Consolas'>i</span><span
style='font-family:宋体'>为元素</span><span lang=EN-US style='font-family:Consolas'>index</span><span
style='font-family:宋体'>，从</span><span lang=EN-US style='font-family:Consolas'>0</span><span
style='font-family:宋体'>开始；</span><span lang=EN-US style='font-family:Consolas'>e</span><span
style='font-family:宋体'>为元素本身。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map-indexed
(fn [i e] (str i &quot;-&quot; e)) [10 20 30])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>;
(&quot;0-10&quot; &quot;1-20&quot; &quot;2-30&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>方法</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map (fn [i e]
(str i &quot;-&quot; e)) <span style='background:yellow'>(iterate inc 0)</span>
[10 20 30])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>(</span><span style='font-family:宋体'>只取</span><span
lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
宋体'>中的</span><span lang=EN-US style='font-family:Consolas'>val</span><span
style='font-family:宋体'>，带上</span><span lang=EN-US style='font-family:Consolas'>index)</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def m [{:name
&quot;qh&quot; :age 20} {:name &quot;james&quot; :age 30}])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map-indexed
(fn [i r] (conj (map val r) i)) m)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>;
((0 &quot;qh&quot; 20) (1 &quot;james&quot; 30))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>另有</span><span lang=EN-US
style='font-family:Consolas'>keep-indexed</span><span style='font-family:宋体'>，和</span><span
lang=EN-US style='font-family:Consolas'>map-indexed</span><span
style='font-family:宋体'>类似，但不保留为</span><span lang=EN-US style='font-family:Consolas'>nil</span><span
style='font-family:宋体'>的元素。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.5.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>lazy-cat</span><span lang=EN-US> lazy-cons</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>lazy-cat</span><span
style='font-family:宋体'>是</span><span lang=EN-US style='font-family:Consolas'>concat</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>lazy</span><span
style='font-family:宋体'>版本，有时必须使用</span><span lang=EN-US style='font-family:
Consolas'>lazy-cat</span><span style='font-family:宋体'>。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span><span lang=EN-US
style='font-family:Consolas'>fib</span><span style='font-family:宋体'>数列（</span><span
lang=EN-US style='font-family:Consolas'>1 1 2 3 5 8 </span><span
style='font-family:宋体'>……）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
fib1 [n1 n2] (<span style='background:yellow'>concat</span> [n1] (fib1 n2 (+ n1
n2))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (take
10 (fib1 1 2)) ; </span><span style='font-family:宋体;color:#C00000'>出错</span><span
style='font-family:Consolas;color:#C00000'> <span lang=EN-US>java.lang.StackOverflowError</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas'>(defn fib2 [a b] (<span
style='background:yellow'>lazy-cat</span> [a] (fib2 b (+ a b))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (take
10 (fib2 1 2)) ; </span><span style='font-family:宋体;color:#0070C0'>正确</span><span
style='font-family:Consolas;color:#0070C0'> <span lang=EN-US>(1 2 3 5 8 13 21
34 55 89)</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>这是</span><span lang=EN-US
style='font-family:Consolas'>fib</span><span style='font-family:宋体'>最自然易读的写法，和</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>对应的</span><span lang=EN-US style='font-family:Consolas;background:yellow'>Stream</span><span
style='font-family:宋体'>版本一样：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#8064A2'>&nbsp;&nbsp;&nbsp; defn
fib2(a:Int,b:Int):Stream[Int] = a #:: fib2(b,a+b) // Scala</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>fib</span><span
style='font-family:宋体'>数列的前后项之比接近黄金分割比：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
fibn [n] (nth (fib2 1 2) n))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (for
[i (range 10)] (double (/ (fibn i) (fibn (inc i))))) ; (0.5 0.666 ... 0.618)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924034"></a><a
name="_Toc281658872"><span lang=EN-US style='text-decoration:none'>3.5.5<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US>mapcat</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>用于把</span><span lang=EN-US
style='font-family:Consolas'>sequence</span><span style='font-family:宋体'>中的</span><span
lang=EN-US style='font-family:Consolas'>1</span><span style='font-family:宋体'>个元素</span><span
lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
宋体'>成集合的情况。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map + concat:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>map</span> #(repeat 3 %) [1 2 3]) ; ((1 1 1) (2 2 2)
(3 3 3))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>mapcat</span> #(repeat 3 %) [1 2 3]) ; (1 1 1 2 2 2 3
3 3)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (reduce
<span style='background:yellow'>concat </span>(<span style='background:yellow'>map
</span>#(repeat 3 %) [1 2 3]))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>中对应的是</span><span
lang=EN-US style='font-family:Consolas'>flatMap</span><span style='font-family:
宋体'>，如：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas;color:#C0504D'>1 to 3 <span style='background:yellow'>flatMap</span>
(x=&gt;List.fill(3)(x)) // Scala</span><span style='font-family:宋体;color:#C0504D'>：</span><span
lang=EN-US style='font-family:Consolas;color:#C0504D'>Vector(1, 1, 1, 2, 2, 2,
3, 3, 3)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas;color:#C0504D'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：得到多个</span><span lang=EN-US
style='font-family:Consolas'>zip</span><span style='font-family:宋体'>文件的所有文件列表</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(mapcat #(enumeration-seq (.entries (ZipFile. %)))
[&quot;1.zip&quot; &nbsp;&quot;2.zip&quot;])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：产生</span><span lang=EN-US
style='font-family:Consolas'>n&gt;=i&gt;j&gt;=1</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>(i j)</span><span
style='font-family:宋体'>序列如</span><span lang=EN-US style='font-family:Consolas'>n=4</span><span
style='font-family:宋体'>时</span><span lang=EN-US style='font-family:Consolas'>(<u>(2
1)</u> <u>(3 1) (3 2)</u> <u>(4 1) (4 2) (4 3)</u>)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(defn f1 [i] (map #(list i %) (range 1 i)))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(f1 4) ;<span style='color:#5B6E6E'> ((4 1) (4 2)
(4 3))</span></span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>;-------------- *</span><span style='font-family:
宋体'>不</span><span lang=EN-US style='font-family:Consolas'>*</span><span
style='font-family:宋体'>用</span><span lang=EN-US style='font-family:Consolas'>mapcat</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(defn f2 [n] (map f1 (range 2 (inc n))))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(f2 4) ; <span style='color:#5B6E6E'>(</span><b><u><span
style='color:#C00000'>(</span></u></b><u><span style='color:#5B6E6E'>(2 1)</span><b><span
style='color:#C00000'>)</span></b></u><span style='color:#5B6E6E'> </span><b><u><span
style='color:#C00000'>(</span></u></b><u><span style='color:#5B6E6E'>(3 1) (3
2)</span><b><span style='color:#C00000'>)</span></b></u><span style='color:
#5B6E6E'> </span><b><u><span style='color:#C00000'>(</span></u></b><u><span
style='color:#5B6E6E'>(4 1) (4 2) (4 3)</span><b><span style='color:#C00000'>)</span></b></u><span
style='color:#5B6E6E'>)</span></span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>reduce</span> <span
style='background:yellow'>concat</span> (f2 4)) ; <span style='color:#5B6E6E'>(<u>(2
1)</u> <u>(3 1) (3 2)</u> <u>(4 1) (4 2) (4 3)</u>)</span></span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>;-------------- </span><span style='font-family:
宋体'>使用</span><span lang=EN-US style='font-family:Consolas'>mapcat</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(defn f3 [n] (<span style='background:yellow'>mapcat</span>
f1 (range 2 (inc n))))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(f3 4) ; <span style='color:#5B6E6E'>(<u>(2 1)</u>
<u>(3 1) (3 2)</u> <u>(4 1) (4 2) (4 3)</u>)</span></span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>;-------------- </span><span style='font-family:
宋体'>使用</span><span lang=EN-US style='font-family:Consolas'>mapcat</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>f1
f3</span><span style='font-family:宋体'>合在一起</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(defn f4 [n] (<span style='background:yellow'>mapcat</span>
(<u>fn [i] (map #(list i %) (range 1 i))</u>) (range 2 (inc n))))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(f4 4) ; <span style='color:#5B6E6E'>(<u>(2 1)</u>
<u>(3 1) (3 2)</u> <u>(4 1) (4 2) (4 3)</u>)</span></span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>;-------------- </span><span style='font-family:
宋体'>使用</span><span lang=EN-US style='font-family:Consolas'>for, </span><b><span
style='font-family:宋体;color:#002060'>最清楚明白</span></b></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(defn f5 [n] (<span style='background:yellow'>for</span>
[i (range 2 (inc n)) j (range 1 i)] (list i j)))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(f5 4) ; <span style='color:#5B6E6E'>(<u>(2 1)</u>
<u>(3 1) (3 2)</u> <u>(4 1) (4 2) (4 3)</u>)</span></span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：求集合元素的全排列</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(defn perm [s] </span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; (defn rm [e s] (filter #(not= e %) s))</span></p>

<p class=MsoNormal style='text-indent:31.7pt'><span lang=EN-US
style='font-family:Consolas'>(if (empty? s) (list ()) </span></p>

<p class=MsoNormal style='text-indent:42.2pt'><span lang=EN-US
style='font-family:Consolas'>(mapcat <b><u><span style='color:#006600'>(</span></u></b>fn
[x] (map <b><span style='color:#C00000'>(</span></b><u>fn [p] (cons x p)</u><b><span
style='color:#C00000'>)</span></b> (perm (rm x s)))<b><u><span
style='color:#006600'>)</span></u></b> s)))</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924035"></a><a
name="_Toc281658873"></a><a name="_Toc281556379"></a><a name="_Toc281556279"></a><a
name="_Toc281556175"></a><a name="_Toc281555973"></a><a name="_Toc281555816"><span
lang=EN-US style='text-decoration:none'>3.5.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>filter</span></a></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;(<span style='background:yellow'>filter</span>
(fn [x] (= 0 (mod x 2))) (range 10)) ; (0 2 4 6 8)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可简化为：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (filter
even? (range 10))</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924036"></a><a
name="_Toc281658874"></a><a name="_Toc281556380"></a><a name="_Toc281556280"></a><a
name="_Toc281556176"></a><a name="_Toc281555974"></a><a name="_Toc281555817"><span
lang=EN-US style='text-decoration:none'>3.5.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>remove</span></a></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>remove</span>
zero? [1 2 0 2 4 0 3 5 0]) ; [1 2 2 4 3 5]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>remove</span><span
style='font-family:宋体'>的操作用</span><span lang=EN-US style='font-family:Consolas'>filter</span><span
style='font-family:宋体'>都可以完成，但更直接，对比：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(filter (complement zero?) [1 2 0 2 4 0 3 5 0]) ;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924037"></a><a
name="_Toc281658875"></a><a name="_Toc281556381"></a><a name="_Toc281556281"></a><a
name="_Toc281556177"></a><a name="_Toc281555975"></a><a name="_Toc281555818"><span
lang=EN-US style='text-decoration:none'>3.5.8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>replace</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>用法</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span><span
style='font-family:宋体'>替换</span><span lang=EN-US style='font-family:Consolas'>coll</span><span
style='font-family:宋体'>中的匹配元素，</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(replace {<span style='background:yellow'>0</span>
'zero <span style='background:aqua'>-1</span> 'neg} [1 <span style='background:
yellow'>0</span> 3 <span style='background:yellow'>0</span> <span
style='background:aqua'>-1</span>]) ; [1 zero 3 zero neg]</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
_______________&nbsp;&nbsp; __________</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-family:宋体'>替换</span><span lang=EN-US style='font-family:
Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-family:宋体'>源</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>用法</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：按照</span><span
lang=EN-US style='font-family:Consolas'>index</span><span style='font-family:
宋体'>重新排列（第二个参数是下标）</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(replace ['a 'b 'c 'd] [3 2 1 0]) ; [d c b a]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(replace ['a 'b 'c 'd] [0 0 3 3]) ; [a a d d]</span></p>

<p class=MsoNormal><span style='font-family:宋体'>和如下写法效果一样（推荐）：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(map ['a 'b 'c 'd] [3 2 1 0]) ; [d c b a]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(map ['a 'b 'c 'd] [0 0 3 3]) ; [a a d d]</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.5.9<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>peek pop</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>FIFO</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>sequence</span><span
style='font-family:宋体'>取第一个；</span><span lang=EN-US style='font-family:Consolas'>FILO</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>sequence</span><span
style='font-family:宋体'>取最后一个。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>'(1 2 3)</span><span
style='font-family:宋体'>列表是压栈在前面，所以：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(peek '(1 2
3)) ; 1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(pop '(1 2 3))
; (2 3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[1 2 3]</span><span
style='font-family:宋体'>数组是压栈在后面，所以：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(peek [1 2 3])
; 3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(pop [1 2 3])
; [1 2]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.5.10<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>drop drop-last take take-last</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>drop</span> 2 [1 2 3 4 5]) ; (3 4 5)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>drop-last</span> [1 2 3 4 5]) ; (1 2 3 4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>drop-last</span> 2&nbsp; [1 2 3 4 5]) ; (1 2 3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>take</span> 2 [1 2 3 4 5]) ; (1 2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>take-last</span> 2 [1 2 3 4 5]) ; (4 5)</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.5.11<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>reduce</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>reduce</span> <span
style='background:yellow'>f</span> [<u>a b</u> c d ... z])</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>reduce</span> <span
style='background:yellow'>f</span> <u>a</u> [<u>b</u> c d ... z])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>就是：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>f</span> (<span style='background:yellow'>f</span> ..
(<span style='background:yellow'>f</span> (<span style='background:yellow'>f</span>
(<span style='background:yellow'>f</span> <u>a b</u>) c) d) ... y) z)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>即先把</span><span lang=EN-US
style='font-family:Consolas'>seq</span><span style='font-family:宋体'>的头</span><span
lang=EN-US style='font-family:Consolas'>2</span><span style='font-family:宋体'>个元素作为</span><span
lang=EN-US style='font-family:Consolas'>f</span><span style='font-family:宋体'>函数的</span><span
lang=EN-US style='font-family:Consolas'>2</span><span style='font-family:宋体'>个参数运行，所得结果和第</span><span
lang=EN-US style='font-family:Consolas'>3</span><span style='font-family:宋体'>个元素再作为</span><span
lang=EN-US style='font-family:Consolas'>f</span><span style='font-family:宋体'>函数的</span><span
lang=EN-US style='font-family:Consolas'>2</span><span style='font-family:宋体'>个参数运行，一直到最后一个元素。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>reduce</span> +
[1 2 4 5]) ; 12</span></p>

<p class=MsoNormal><span style='font-family:宋体'>展开来就是：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (+
(+ (+ 1 2) 4) 5)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对比</span><span lang=EN-US
style='font-family:Consolas'>reduce</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>apply</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (apply
+ [1 2 4 5])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>展开就是</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(+ 1 2 4 5)</span></p>

<p class=MsoNormal><b><u><span style='font-family:宋体'>可见有时</span></u></b><b><u><span
lang=EN-US style='font-family:Consolas'>reduce</span></u></b><b><u><span
style='font-family:宋体'>和</span></u></b><b><u><span lang=EN-US style='font-family:
Consolas'>apply</span></u></b><b><u><span style='font-family:宋体'>结果一样，但过程不同</span></u></b><span
style='font-family:宋体'>。</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>又如：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(reduce * (range 1 6)) ; 120</span></p>

<p class=MsoNormal><span style='font-family:宋体'>展开为：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(* (* (* (* 1 2) 3) 4) 5)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对比</span><span lang=EN-US
style='font-family:Consolas'>apply</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(apply * (range 1 6))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>展开为：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(* 1 2 3 4 5)</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span
style='font-family:Consolas'> </span><span style='font-family:宋体'>求</span><span
lang=EN-US style='font-family:Consolas'>1000</span><span style='font-family:
宋体'>以下是</span><span lang=EN-US style='font-family:Consolas'>3</span><span
style='font-family:宋体'>或</span><span lang=EN-US style='font-family:Consolas'>5</span><span
style='font-family:宋体'>的倍数的所有数的</span><span lang=EN-US style='font-family:Consolas'>sum</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn f [n] (or (= 0 (mod n 3)) (= 0 (mod n 5))))</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>reduce</span> + (<span
style='background:yellow'>filter</span> f (range 1000))) ; </span><span
style='font-family:宋体'>用</span><span lang=EN-US style='font-family:Consolas'>apply</span><span
style='font-family:宋体'>结果一样</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：只能用</span><span lang=EN-US
style='font-family:Consolas'>reduce</span><span style='font-family:宋体'>，不能用</span><span
lang=EN-US style='font-family:Consolas'>apply</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (reduce
subs <span style='background:yellow'>[</span>&quot;hello world&quot; 1 2 3])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (reduce
subs &quot;hello world&quot; <span style='background:yellow'>[</span>1 2 3])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>展开为：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (subs
(subs (subs &quot;hello world&quot; 1) 2) 3) ; &quot;world&quot;</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：如果</span><span lang=EN-US
style='font-family:Consolas'>f</span><span style='font-family:宋体'>函数的参数不止</span><span
lang=EN-US style='font-family:Consolas'>2</span><span style='font-family:宋体'>个，可用</span><span
lang=EN-US style='font-family:Consolas'>applay</span><span style='font-family:
宋体'>展开</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>reduce</span> #(<span style='background:yellow'>apply</span>
subs %1 %2) <span style='background:yellow'>[</span>&quot;hello world&quot; [0
10] [0 8] [0 6]])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>reduce</span> #(<span style='background:yellow'>apply</span>
subs %1 %2) &quot;hello world&quot; <span style='background:yellow'>[</span>[0
10] [0 8] [0 6]])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>展开为：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>apply subs</span> (<span style='background:yellow'>apply
subs</span> (<span style='background:yellow'>apply subs</span> &quot;hello
world&quot; [0 10]) [0 8]) [0 6])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>进一步展开：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (subs
(subs (subs &quot;hello world&quot; 0 10) 0 8) 0 6)</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(reverse [1 2 3])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>就是：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(reduce conj () [1 2 3])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>展开为：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (conj
(conj (conj () 1) 2) 3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>reverse</span><span
style='font-family:宋体'>可以针对所有</span><span lang=EN-US style='font-family:Consolas'>sequence</span><span
style='font-family:宋体'>，但效率不高；为了提高效率，</span><span lang=EN-US style='font-family:
Consolas'>[]</span><span style='font-family:宋体'>和</span><span lang=EN-US
style='font-family:Consolas'>sorted-map</span><span style='font-family:宋体'>可以使用</span><span
lang=EN-US style='font-family:Consolas'>rseq</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>rseq</span> [1 2 3])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>但</span><span lang=EN-US
style='font-family:Consolas'>(list 1 2 3)</span><span style='font-family:宋体'>等不行：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (rseq
'(1 2 3)) ; </span><span style='font-family:宋体;color:red'>报错，必须是</span><span
lang=EN-US style='font-family:Consolas;color:red'>clojure.lang.Reversible</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:red'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.5.12<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>fold-left fold-right</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>foldLeft</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>foldRight</span><span
style='font-family:宋体'>可以由</span><span lang=EN-US style='font-family:Consolas'>reduce</span><span
style='font-family:宋体'>完成：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>(reduce f x coll)</span><span
style='font-family:宋体'>直接对应</span><span lang=EN-US style='font-family:Consolas'>coll.foldLeft(x)(f)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>如：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(reduce / 1 [2 4 8]) ; 1/64=</span><span
lang=EN-US> </span><span lang=EN-US style='font-family:Consolas'>0.015625</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#7030A0'>List(2,4,8).foldLeft(1.0)(_/_) ; <b><u>Scala</u></b></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>(reduce #(f %2 %1)
(reverse [x coll]))) </span><span style='font-family:宋体'>对应</span><span
lang=EN-US style='font-family:Consolas'>coll.foldRight(x)(f)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>如：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(reduce #(/ %2 %1) (reverse [1 2 4 8]) ; (/ 1 (/ 2
(/ 4 8)))=1/4=0.25</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#7030A0'>List(2,4,8).foldRight(1.0)(_/_) ; <b><u>Scala</u></b>
1.0/(2/(4/8.0))=0.25</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>所以可以定义</span><span lang=EN-US
style='font-family:Consolas'>fold-left, fold-right</span><span
style='font-family:宋体'>如下</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn <span style='background:yellow'>fold-left</span>
[f x coll] (reduce f x coll))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn <span style='background:yellow'>fold-right</span>
[f x coll] (reduce #(f %2 %1) (reverse (cons x coll))))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(fold-left / 1 [2 4 8]) ; 1/64</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(fold-right / 1 [2 4 8]) ; 1/4</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924038"></a><a
name="_Toc281658876"></a><a name="_Toc281556382"></a><a name="_Toc281556282"></a><a
name="_Toc281556178"></a><a name="_Toc281555976"></a><a name="_Toc281555819"><span
lang=EN-US style='text-decoration:none'>3.5.13<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>reductions</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(reductions f
[<u>a b</u> c d .. z])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(reductions f <u>a</u>
[<u>b</u> c d ...z])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>就是：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[<b>a</b> (<span
style='background:yellow'>reduce</span> f [<u>a b</u>]) (<span
style='background:yellow'>reduce</span> f [a b c]) (<span style='background:
yellow'>reduce</span> f [a b c d]) ... (<span style='background:yellow'>reduce</span>
f [a b c d .. z])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>scanLeft</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(reductions *
[1 2 3 4 5]) ; [1 2 6 24 120]</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对应</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>版本：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#C0504D'>List(2,3,4,5).scanLeft(1)(_*_)
; List(1, 2, 6, 24, 120) </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以用</span><span lang=EN-US
style='font-family:Consolas'>loop..recur</span><span style='font-family:宋体'>完成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn scan-left
[f i0 seq] </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; &nbsp;(loop
[<b>s</b> seq <b>r</b> [i0]] (if (empty? s) r (recur (rest s) (conj r (f (last
r) (first s)))))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(scan-left + 0
[1 2 3 4 5]) ; [0 1 3 6 10 15] </span><span style='font-family:宋体'>相当于</span><span
lang=EN-US style='font-family:Consolas;color:#C0504D'>List(1,2,3,4,5).scanLeft(0)(_+_)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(scan-left * 1
[1 2 3 4 5]) ; [1 1 2 6 24 120] </span><span style='font-family:宋体'>相当于</span><span
lang=EN-US style='font-family:Consolas;color:#C0504D'>List(1,2,3,4,5).scanLeft(1)(_*_)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.5.14<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>split</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>split-at</span> 3 (range 10)) ; [(0 1 2) (3 4 5 6 7 8
9)]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>split-with</span> neg? (range -3 3)) ; [(-3 -2 -1) (0
1 2)]</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924039"></a><a
name="_Toc281658877"></a><a name="_Toc281556383"></a><a name="_Toc281556283"></a><a
name="_Toc281556179"></a><a name="_Toc281555977"></a><a name="_Toc281555820"><span
lang=EN-US style='text-decoration:none'>3.5.15<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>partition</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>([n coll] [n
step coll] [n step pad coll])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n: </span><span
style='font-family:宋体'>每组元素的个数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>step</span><span
style='font-family:宋体'>：上下组第一个元素之间的距离，缺省</span><span lang=EN-US
style='font-family:Consolas'>step=n</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>pad</span><span
style='font-family:宋体'>：最后一组元素不够时补足的元素</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>按个数分组：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(partition 2 [1 2 3 4 5 6 7]) ; ((1 2) (3 4) (5
6))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(partition 2 1 [1 2 3 4 5 6 7]) ; ((<b>1</b> 2) (<b>2</b>
3) (<b>3</b> 4) (<b>4</b> 5) (<b>5</b> 6) (<b>6</b> 7)) ; </span><span
style='font-family:宋体'>步长</span><span lang=EN-US style='font-family:Consolas'>1</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(partition 3 3 [0 0] [1 2 3 4]) ; ((1 2 3) (4 0
0))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924040"></a><a
name="_Toc281658878"></a><a name="_Toc281556384"></a><a name="_Toc281556284"></a><a
name="_Toc281556180"></a><a name="_Toc281555978"></a><a name="_Toc281555821"><span
lang=EN-US style='text-decoration:none'>3.5.16<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>group-by</span></a></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>group-by</span>
neg? [0 1 -2 3 -4 5]) ; {false [0 1 3 5], true [-2 -4]}</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(group-by #(&lt; % 3) (range 10)) ; {true [0 1 2],
false [3 4 5 6 7 8 9]}</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可分多组</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(group-by #(<u>cond (&gt; % 0) &quot;+&quot; (= %
0) &quot;0&quot; (&lt; % 0) &quot;-&quot;</u>) [1 2 -3 -2 0 4 -1 0])</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>; <span style='color:#5B6E6E'>{&quot;+&quot; [1 2
4], &quot;-&quot; [-3 -2 -1], &quot;0&quot; [0 0]}</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(group-by <u>count</u> [&quot;aa&quot;
&quot;bbb&quot; &quot;cccc&quot; &quot;ddd&quot; &quot;ee&quot;]) ; <span
style='color:#5B6E6E'>{2 [&quot;aa&quot; &quot;ee&quot;], 3 [&quot;bbb&quot;
&quot;ddd&quot;], 4 [&quot;cccc&quot;]}</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924041"></a><a
name="_Toc281658879"></a><a name="_Toc281556385"></a><a name="_Toc281556285"></a><a
name="_Toc281556181"></a><a name="_Toc281555979"></a><a name="_Toc281555822"><span
lang=EN-US style='text-decoration:none'>3.5.17<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>juxt</span></a></p>

<p class=MsoNormal align=left style='text-align:left'><b><span lang=EN-US
style='font-family:"Tahoma","sans-serif";color:black;background:yellow'>juxt</span></b><b><span
lang=EN-US style='font-family:"Tahoma","sans-serif";color:black'>aposition</span></b><span
lang=EN-US style='font-family:"Tahoma","sans-serif";color:gray'> &nbsp;</span><span
lang=EN-US style='font-family:"Tahoma","sans-serif"'>n.</span><span
style='font-family:宋体'>并排</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:"Tahoma","sans-serif";color:gray'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:14.4pt'><span
lang=EN-US style='font-family:Consolas'>((juxt a b c) x) </span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>
[(a x) (b x) (c x)]</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
line-height:14.4pt'><span lang=EN-US style='font-family:Consolas'>((<span
style='background:yellow'>juxt</span> filter remove) even? (range 10)) ; [(0 2
4 6 8) (1 3 5 7 9)]</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:14.4pt'><span
style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
line-height:14.4pt'><span lang=EN-US style='font-family:Consolas'>[(filter
even? (range 10)) (remove even? (range 10))]</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:14.4pt'><span
style='font-family:宋体'>方法</span><span lang=EN-US style='font-family:Consolas'>2</span><span
style='font-family:宋体'>：也可以用</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
line-height:14.4pt'><span lang=EN-US style='font-family:Consolas'>(map val
(group-by even? (range 10))) ; ([0 2 4 6 8] [1 3 5 7 9])</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:14.4pt'><span
style='font-family:宋体'>方法</span><span lang=EN-US style='font-family:Consolas'>3</span><span
style='font-family:宋体'>：或者</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
line-height:14.4pt'><span lang=EN-US style='font-family:Consolas'>(use '[<span
style='background:yellow'>clojure.contrib.seq-utils</span> :only [separate]])</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
line-height:14.4pt'><span lang=EN-US style='font-family:Consolas'>(separate
even? (range 10))</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.5.18<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>sort</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>sort</span> [1 3
6 2 5]) ; (1 2 3 5 6)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>sort</span> <span
style='background:yellow'>&gt;</span> (range 10)) ; (9 8 7 6 5 4 3 2 1 0)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者写成</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(reverse (range 10)) ; (9 8 7 6 5 4 3 2 1 0)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以结合</span><span lang=EN-US
style='font-family:Consolas'>comparator(</span><span style='font-family:宋体'>实现</span><span
lang=EN-US style='font-family:Consolas'>java.util.Comparator)</span><span
style='font-family:宋体'>来用：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(sort (<span style='background:yellow'>comparator</span>
&gt;) [1 3 6 2 5]) ; [6 5 3 2 1]</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(sort (<span style='background:yellow'>comparator</span>
&lt;) [1 3 6 2 5]) ; [1 2 3 5 6]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>自定义排序函数：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>sort-by</span>
#(.toString %) (range 1 11)) ; (1 <b><u>10</u></b> 2 3 4 5 6 7 8 9)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>sort-by</span>
#(Math/abs %) [1 -3 2 9 8 -6]) ; (1 2 -3 -6 8 9)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>sort-by</span>
#(- %) [1 -3 2 9 8 -6]) ; (9 8 2 1 -3 -6) </span><span style='font-family:宋体'>倒序</span></p>

<p class=MsoNormal><span style='font-family:宋体'>排序</span><span lang=EN-US
style='font-family:Consolas'>map</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>sort-by</span>
:age [{:age 10} {:age 3} {:age 5}]) </span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>sort-by</span>
:age <span style='background:yellow'>&gt;</span> [{:age 10} {:age 3} {:age 5}])</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：按照指定顺序</span><span
lang=EN-US style='font-family:Consolas'>sort</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let [m '({:k
a :v 10} {:k c :v 30} {:k b :v 20} {:k d :v 40})</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:15.75pt'><span
lang=EN-US style='font-family:Consolas'>order '(c b a)]</span></p>

<p class=MsoNormal style='margin-left:9.0pt;text-indent:12.0pt'><span
lang=EN-US style='font-family:Consolas'>(sort-by </span></p>

<p class=MsoNormal style='margin-left:30.0pt;text-indent:12.0pt'><span
lang=EN-US style='font-family:Consolas'>#(<b><u>(into {} (map-indexed (fn [i e]
[e i]) order))</u></b> (:k %)) </span></p>

<p class=MsoNormal style='margin-left:30.0pt;text-indent:12.0pt'><span
lang=EN-US style='font-family:Consolas'>m))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>结果：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>({:k c, :v 30} {:k b, :v 20} {:k a, :v 10})</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924042"></a><a
name="_Toc281658880"></a><a name="_Toc281556386"></a><a name="_Toc281556286"></a><a
name="_Toc281556182"></a><a name="_Toc281555980"></a><a name="_Toc281555823"><span
lang=EN-US style='text-decoration:none'>3.5.19<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>min max min-key max-key</span></a></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>函数</span></b></p>
  </td>
  <td width=457 valign=top style='width:343.1pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>用法</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>min</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>max</span></p>
  </td>
  <td width=457 valign=top style='width:343.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(min 3 1 4 1
  5 9 2 7) ; 1</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(apply max
  [3 1 4 1 5 9 2 7]) ; 9</span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>min-key</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>max-key</span></p>
  </td>
  <td width=457 valign=top style='width:343.1pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(min-key
  #(Math/abs %) -3 -1 4 -1 5 -9 2 7) ; -1</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(apply
  max-key #(Math/abs %) [-3 -1 4 -1 5 -9 2 7]) ; -9</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>3.5.20<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>for</span></p>

<p class=MsoNormal><span style='font-family:宋体'>类似于</span><span lang=EN-US
style='font-family:Consolas'>scala</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>for..yield:</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>for</span> <span
style='background:yellow'>[</span>i (range 10)<span style='background:yellow'>]</span>
(* i i)) ; (0 1 4 9 16 25 36 49 64 81)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>for</span> <span
style='background:yellow'>[</span>i (range 10) <span style='background:yellow'>:when</span>
(&gt; 20 (* i i))<span style='background:yellow'>]</span> (* i i)) ; (0 1 4 9
16)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：上例中</span><span lang=EN-US
style='font-family:Consolas'>(* i i)</span><span style='font-family:宋体'>算了两次没有必要，可用</span><span
lang=EN-US style='font-family:Consolas'>:let</span><span style='font-family:
宋体'>来解决</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(for [i (range 10) <span style='background:yellow'>:let</span>
[ii (* i i)] :when (&gt; 20 ii)] ii)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>对单个集合的操作基本都可以用</span><span lang=EN-US style='font-family:
Consolas'>for</span><span style='font-family:宋体'>来代替：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>map</span> (comp
count str) '[aa bbb cccc])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; (2 3 4)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>for</span> [i
'[aa bbb cccc]] (count (str i)))&nbsp;&nbsp; ; (2 3 4)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>map</span> #(* %
%) [1 2 3 4 5]))&nbsp; ; (1 4 9 16 25)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>for</span> [i [1
2 3 4 5]] (* i i))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for</span><span
style='font-family:宋体'>比</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>少的功能：不能操作多个集合如</span><span lang=EN-US style='font-family:
Consolas'>(map + [1 2] [10 20] [100 200])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for</span><span
style='font-family:宋体'>比</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>多出来的功能：可用多个变量，还可加</span><span lang=EN-US
style='font-family:Consolas'>when</span><span style='font-family:宋体'>。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：乘法口诀表</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>for</span> [<span
style='background:yellow'>i</span> (range 1 10) <span style='background:yellow'>j</span>
(range 1 10) <span style='background:yellow'>:when</span> (&gt;= i j)] (str j
&quot;x&quot; i &quot;=&quot; (* i j)))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>for</span> [<span
style='background:yellow'>i</span> (range 1 10) <span style='background:yellow'>j</span>
(range 1 (inc <span style='background:yellow'>i</span>))] (str j &quot;x&quot;
i &quot;=&quot; (* i j)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924043"></a><a
name="_Toc281658881"></a><a name="_Toc281556387"></a><a name="_Toc281556287"></a><a
name="_Toc281556183"></a><a name="_Toc281555981"></a><a name="_Toc281555824"><span
lang=EN-US style='text-decoration:none'>3.5.21<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>every? some</span></a></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>条件</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(erery? cond
  seq)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>每个都符合</span><span lang=EN-US
  style='font-family:Consolas'>cond</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(some cond
  seq)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>返回第一个符合</span><span
  lang=EN-US style='font-family:Consolas'>cond</span><span style='font-family:
  宋体'>的结果，或者</span><span lang=EN-US style='font-family:Consolas'>nil</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>和</span><span lang=EN-US
  style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>的</span><span
  lang=EN-US style='font-family:Consolas'>find</span><span style='font-family:
  宋体'>不一样</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(not-every?
  cond seq)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>不是每个都符合</span><span
  lang=EN-US style='font-family:Consolas'>cond</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(not-any?
  cond seq)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>没有任何一个符合</span><span
  lang=EN-US style='font-family:Consolas'>cond</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>注意：没有</span><span lang=EN-US
style='font-family:Consolas'>exists?</span><span style='font-family:宋体'>，可用</span><span
lang=EN-US style='font-family:Consolas'>some</span><span style='font-family:
宋体'>来模拟</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：判断字符串是否仅仅包含空格字符</span><span
lang=EN-US style='font-family:Consolas'>(&quot; &quot;, &quot;\n&quot;,
&quot;\t&quot;)</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn blank? [s] (<span style='background:yellow'>every?</span>
#(Character/isWhitespace %) s))</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：判断是否质数</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn prime? [n] (<span style='background:yellow'>not-any?</span>
#(zero? (rem n %)) (range 2 n)))</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(filter prime? (range 2 100))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：</span><span lang=EN-US
style='font-family:Consolas'>contrib</span><span style='font-family:宋体'>中的惰性质数序列</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(use '[<u>clojure.contrib.lazy-seqs</u>
:only (<span style='background:yellow'>primes</span>)])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(take 10
primes)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(nth primes
1000)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183977"></a><a
name="_Toc281924044"></a><a name="_Toc281658882"></a><a name="_Toc281556388"></a><a
name="_Toc281556288"></a><a name="_Toc281556184"></a><a name="_Toc281555982"></a><a
name="_Toc281555825"><span lang=EN-US style='font-family:Consolas'>3.6<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>序列</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>seq</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>中几乎所有东西都可以抽象成序列</span><span lang=EN-US style='font-family:
Consolas'>seq</span><span style='font-family:宋体'>。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
'(1 2 3 4)) ; (1 2 3 4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
[1 2 3 4]) ; (1 2 3 4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
#{1 2 3 4}) ; (1 2 3 4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
{1 2 3 4}) ; ([1 2] [3 4])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>所有可序列化的数据结构都可以使用相同的函数来处理：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (first
seq1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (rest
seq1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (cons
e seq1) ; </span><span style='font-family:宋体'>插前</span><span lang=EN-US
style='font-family:Consolas;background:yellow'>cons</span><span lang=EN-US
style='font-family:Consolas'>truct</span><span style='font-family:宋体'>，构造</span><span
lang=EN-US style='font-family:Consolas'>List</span><span style='font-family:
宋体'>，也说明该数据结构的不可变性</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (conj
seq1 e) ; </span><span style='font-family:宋体'>加后</span><span lang=EN-US
style='font-family:Consolas;background:yellow'>j</span><span lang=EN-US
style='font-family:Consolas'>oin</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (concat
seq1 seq2) ; </span><span style='font-family:宋体'>连接前后</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (into
seq1 seq2) ; </span><span style='font-family:宋体'>压栈</span><span lang=EN-US
style='font-family:Consolas'>seq2</span><span style='font-family:宋体'>元素到</span><span
lang=EN-US style='font-family:Consolas'>seq1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>distinct</span> seq1) ; </span><span
style='font-family:宋体'>去重复</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>distinct?</span> 1 2 3) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>distinct?</span> 1 2 1 3) ; false</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：原始的</span><span lang=EN-US
style='font-family:Consolas'>Lisp</span><span style='font-family:宋体'>使用</span><span
lang=EN-US style='font-family:Consolas'>cons</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>car</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>cdr</span><span
style='font-family:宋体'>作为</span><span lang=EN-US style='font-family:Consolas'>List</span><span
style='font-family:宋体'>的基本操作函数</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>cons</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
  style='font-family:Consolas'>2</span><span style='font-family:宋体'>个元素构造一个</span><span
  lang=EN-US style='font-family:Consolas'>list</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>car</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>相当于</span><span lang=EN-US
  style='font-family:Consolas'>first</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>cdr</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>相当于</span><span lang=EN-US
  style='font-family:Consolas'>rest</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>常用函数：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn p &quot;</span><span style='font-family:
宋体'>打印一个</span><span lang=EN-US style='font-family:Consolas'>sequence&quot;
[seq] (<span style='background:yellow'>dorun</span> (<span style='background:
yellow'>map</span> println seq)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn p &quot;</span><span style='font-family:
宋体'>打印一个</span><span lang=EN-US style='font-family:Consolas'>sequence&quot;
[seq] (<span style='background:yellow'>doseq</span> [i seq] (println i)))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc306183978"></a><a name="_Toc281924045"></a><a
name="_Toc281658883"></a><a name="_Toc281556389"></a><a name="_Toc281556289"></a><a
name="_Toc281556185"></a><a name="_Toc281555983"></a><a name="_Toc281555826"><span
lang=EN-US style='font-family:Consolas'>4、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>函数</span></u></a></h1>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>中函数也是</span><span lang=EN-US style='font-family:Consolas'>list</span><span
style='font-family:宋体'>列表：第</span><span lang=EN-US style='font-family:Consolas'>1</span><span
style='font-family:宋体'>个元素是函数名，后面是函数参数的列表</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183979"></a><a
name="_Toc281924046"></a><a name="_Toc281658884"></a><a name="_Toc281556390"></a><a
name="_Toc281556290"></a><a name="_Toc281556186"></a><a name="_Toc281555984"></a><a
name="_Toc281555827"><span lang=EN-US style='font-family:Consolas'>4.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>函数帮助</span></u></a></h2>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(doc method-name)</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(find-doc &quot;foo&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>doc </span>print) ; </span><span style='font-family:
宋体'>准确查找</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>find-doc</span> &quot;print&quot;) ; </span><span
style='font-family:宋体'>模糊（</span><span lang=EN-US style='font-family:Consolas'>regex</span><span
style='font-family:宋体'>）查找</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (source
print) ; </span><span style='font-family:宋体'>查看源码</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183980"></a><a
name="_Toc281924047"></a><a name="_Toc281658885"></a><a name="_Toc281556391"></a><a
name="_Toc281556291"></a><a name="_Toc281556187"></a><a name="_Toc281555985"></a><a
name="_Toc281555828"><span lang=EN-US style='font-family:Consolas'>4.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>调用函数</span></u></a></h2>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(method-name param1 param2 ...)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>count</span> &quot;hello&quot;) ; 5</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>println</span> &quot;hello&quot; &quot;world&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>返回值为</span><span lang=EN-US
style='font-family:Consolas'>true/false</span><span style='font-family:宋体'>的函数名一般带一个</span><span
lang=EN-US style='font-family:Consolas'>&quot;?&quot;:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (string<span
style='background:yellow'>?</span> &quot;hello&quot;) ; true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (string<span
style='background:yellow'>?</span> 10) ; false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (keyword?
:foo)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (symbol?
'boo)</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc281924048"></a><a
name="_Toc281658886"></a><a name="_Toc281556392"></a><a name="_Toc281556292"></a><a
name="_Toc281556188"></a><a name="_Toc281555986"></a><a name="_Toc281555829"></a><a
name="_Toc306183981"><span lang=EN-US style='font-family:Consolas'>4.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>以“函数名”调用</span></u></a></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=180 valign=top style='width:135.3pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>ns-resolve *ns*</span> 'f)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>可指定</span><span lang=EN-US
  style='font-family:Consolas'>ns</span><span style='font-family:宋体'>；只查找，不创建，使用中安全些</span></p>
  </td>
 </tr>
 <tr>
  <td width=180 valign=top style='width:135.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>intern *ns*</span> 'f)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>可指定</span><span lang=EN-US
  style='font-family:Consolas'>ns</span><span style='font-family:宋体'>；有则查找，没有则创建</span></p>
  </td>
 </tr>
 <tr>
  <td width=180 valign=top style='width:135.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>eval</span> 'f)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>使用当前</span><span lang=EN-US
  style='font-family:Consolas'>ns</span></p>
  </td>
 </tr>
 <tr>
  <td width=180 valign=top style='width:135.3pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>resolve</span> 'f)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>使用当前</span><span lang=EN-US
  style='font-family:Consolas'>ns</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f [n] (*
n n n))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
style='background:yellow'>ns-resolve</span> *ns* (symbol &quot;<span
style='background:yellow'>f</span>&quot;)) 10) ; 1000</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：</span><span lang=EN-US
style='font-family:Consolas'>*ns* </span><span style='font-family:宋体'>取得当前</span><span
lang=EN-US style='font-family:Consolas'>namespace</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者使用</span><span lang=EN-US
style='font-family:Consolas'>intern</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>intern</span> *ns* (symbol &quot;f2&quot;)) ; </span><span
style='font-family:宋体'>没有</span><span lang=EN-US style='font-family:Consolas'>f2</span><span
style='font-family:宋体'>函数就创建一个，但不绑定</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>intern</span> *ns* (symbol &quot;f2&quot;) f) ; </span><span
style='font-family:宋体'>绑定到</span><span lang=EN-US style='font-family:Consolas'>f2</span><span
style='font-family:宋体'>到</span><span lang=EN-US style='font-family:Consolas'>f</span><span
style='font-family:宋体'>，相当于别名</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以使用</span><span lang=EN-US
style='font-family:Consolas'>eval</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
style='background:yellow'>eval</span> (symbol &quot;f&quot;)) 10) ; 1000</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>还可以使用</span><span lang=EN-US
style='font-family:Consolas'>resolve</span><span style='font-family:宋体'>（相当于</span><span
lang=EN-US style='font-family:Consolas'>ns-resolve *ns*</span><span
style='font-family:宋体'>）：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
style='background:yellow'>resolve</span> (symbol &quot;f&quot;)) 10)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>通过字符串</span><span lang=EN-US
style='font-family:Consolas'>use</span><span style='font-family:宋体'>包：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(use (symbol
&quot;<i><u>wr3.clj.stringx</u></i>&quot;))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>等同于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(use '<i><u>wr3.clj.stringx</u></i>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((<span
style='background:yellow'>ns-resolve</span> (<span style='background:yellow'>the-ns</span>
(symbol &quot;wr3.clj.stringx&quot;)) (symbol &quot;left&quot;))
&quot;hello-world&quot; &quot;-&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let [n (symbol
&quot;<i><u>wr3.clj.stringx</u></i>&quot;) f (symbol &quot;<i><u>left</u></i>&quot;)]</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>require</span> n)</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>((<span style='background:yellow'>ns-resolve</span>
(the-ns n) f) &quot;hello-world&quot; &quot;-&quot;))</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183982"><span
lang=EN-US style='font-family:Consolas'>4.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>运行时动态创建函数</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn gen-fn</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>[n as b]</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(let [n (symbol n)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; as (vec (map symbol
as))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fn-value (<span
style='background:yellow'>eval</span> `(fn ~n ~as ~b))]</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; (<span style='background:yellow'>intern
*ns*</span> n fn-value)))</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(gen-fn
&quot;foo&quot; [&quot;x&quot;] '(do (println x) (println (inc x))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(foo 5)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(gen-fn &quot;f1&quot;
[&quot;x&quot; &quot;y&quot;] '(* x y) )</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f1 3 5)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以直接使用</span><span lang=EN-US
style='font-family:Consolas'>read-string</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>eval</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def f1 (<span
style='background:yellow'>eval</span> (<span style='background:yellow'>read-string</span>
&quot;<span style='color:#632423'>(fn [x y] (* x y)) (f1 3 5)</span>&quot;)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f1 3 5)</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183983"><span
lang=EN-US style='font-family:Consolas'>4.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>meta</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>得到函数的</span><span lang=EN-US
style='font-family:Consolas'>meta</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(meta map)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>得到函数参数列表：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((meta map)
:arglists)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>得到函数缺省参数个数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(-&gt; map var
meta :arglists first count)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(use
'wr3.clj.s)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(meta (var
left))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>设置和获取对象（基本对象不行）的</span><span
lang=EN-US style='font-family:Consolas'>meta</span><span style='font-family:
宋体'>（类型为</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>）：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(def v1 (<b>with-meta</b> [1 3 5] <span
style='background:yellow'>{:type &quot;int&quot;}</span>))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(meta v1) ; <span style='background:yellow'>{:type
&quot;int&quot;}</span> </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183984"><span
lang=EN-US style='font-family:Consolas'>4.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>定义函数</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>defn</span></u></h2>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924049"></a><a
name="_Toc281658887"></a><a name="_Toc281556393"></a><a name="_Toc281556293"></a><a
name="_Toc281556189"></a><a name="_Toc281555987"></a><a name="_Toc281555830"><span
lang=EN-US style='text-decoration:none'>4.6.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>基本用法</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>函数名也可以是未使用的字符，如：</span><span
lang=EN-US style='font-family:Consolas'>** !</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>不带参数：</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>defn</span> m1 <span
style='background:yellow'>[]</span> &quot;hello&quot;)</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(m1)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>带参数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
m2 [x] (format &quot;hello %s&quot; x))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m2
&quot;world&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
m3 [x y] (format &quot;hello %s (%d)&quot; x y))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m3
&quot;world&quot; 108)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>带函数</span><span lang=EN-US
style='font-family:Consolas'>doc</span><span style='font-family:宋体'>注释：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
m <span style='background:yellow'>&quot;</span></span><span style='font-family:
宋体;background:yellow'>这是</span><span lang=EN-US style='font-family:Consolas;
background:yellow'>doc</span><span style='font-family:宋体;background:yellow'>注释</span><span
lang=EN-US style='font-family:Consolas;background:yellow'>&quot;</span><span
lang=EN-US style='font-family:Consolas'> [] (&quot;</span><span
style='font-family:宋体'>函数体</span><span lang=EN-US style='font-family:Consolas'>&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (doc
m) ; </span><span style='font-family:宋体'>查看</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：函数注释只能是一个</span><span
lang=EN-US style='font-family:Consolas'>string</span><span style='font-family:
宋体'>，而</span><span lang=EN-US style='font-family:Consolas;color:#C00000'>*</span><span
style='font-family:宋体;color:#C00000'>不能</span><span lang=EN-US
style='font-family:Consolas;color:#C00000'>*</span><span style='font-family:
宋体'>是多个：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
m</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>&quot;</span>comment 111<span style='background:yellow'>&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>&quot;</span>comment 222<span style='background:yellow'>&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; []
(..))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>应该是：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
m</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>&quot;</span>comment 111</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;comment
222<span style='background:yellow'>&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; []
(..))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>defn-</span><span lang=EN-US style='font-family:Consolas'> </span><span
style='font-family:宋体'>用来定义</span><span lang=EN-US style='font-family:Consolas'>private</span><span
style='font-family:宋体'>的函数</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924050"></a><a
name="_Toc281658888"></a><a name="_Toc281556394"></a><a name="_Toc281556294"></a><a
name="_Toc281556190"></a><a name="_Toc281555988"></a><a name="_Toc281555831"><span
lang=EN-US style='text-decoration:none'>4.6.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>子函数</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>函数内部定义和使用的函数</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如，定义</span><span lang=EN-US
style='font-family:Consolas'>f(x y) = x*x + y*y</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn x2y2 [x
y]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (<span
style='background:yellow'>defn</span> <b>f</b> [x] (* x x))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (+ (<b>f</b>
x) (<b>f</b> y)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(x2y2 3 4) ;
25</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>4.6.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>函数重载</span></p>

<p class=MsoNormal><span style='font-family:宋体'>类似于构造方法重载：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
m1 </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>[]</span> (<span style='background:yellow'>m1</span>
&quot;anonymous&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>[name]</span> (str &quot;my name is &quot; name)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>调用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m1)
; &quot;my name is anonymous&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m1
&quot;qh&quot;) <span style='color:#7F7F7F'>; &quot;my name is qh&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924051"></a><a
name="_Toc281658889"></a><a name="_Toc281556395"></a><a name="_Toc281556295"></a><a
name="_Toc281556191"></a><a name="_Toc281555989"></a><a name="_Toc281555832"><span
lang=EN-US style='text-decoration:none'>4.6.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>变长参数</span><span
lang=EN-US>&amp;</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f [a b <span
style='background:yellow'>&amp;</span> c] (list a b c))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(= (f 1 2 3 4)
&nbsp;'(1 2 (3 4)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f2 [a b <span
style='background:yellow'>&amp;</span> c] (list* a b c))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f3 [a b <span
style='background:yellow'>&amp;</span> c] (apply list a b c))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(= (f2 1 2 3
4) (f3 1 2 3 4) '(1 2 3 4))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>&amp;</span><span
style='font-family:宋体'>不能紧挨参数，</span><span lang=EN-US style='font-family:Consolas;
color:red;background:yellow'>&amp;c</span><span style='font-family:宋体'>的写法是<b><u><span
style='color:red'>错误</span></u></b>的；</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>&amp; c </span><span
style='font-family:宋体'>是作为一个</span><span lang=EN-US style='font-family:Consolas'>list</span><span
style='font-family:宋体'>出现的，一般要用</span><span lang=EN-US style='font-family:Consolas'>apply</span><span
style='font-family:宋体'>展开</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：全变长</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn m [<span style='background:yellow'>&amp;</span>
arg] (str arg &quot;, size=&quot; (count arg)))</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(m 2 3 4 5) <span style='color:#7F7F7F'>; &quot;(2
3 4 5), size=4&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：固定</span><span
lang=EN-US style='font-family:Consolas'>+</span><span style='font-family:宋体'>变长</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
team [leader <span style='background:yellow'>&amp;</span> persons]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (format
&quot;%s has %d persons: %s&quot; leader (count persons) persons))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (team
&quot;qh&quot; '</span><span style='font-family:宋体'>张三</span><span lang=EN-US
style='font-family:Consolas'> '</span><span style='font-family:宋体'>李四</span><span
lang=EN-US style='font-family:Consolas'> '</span><span style='font-family:宋体'>王二</span><span
lang=EN-US style='font-family:Consolas'>) <span style='color:#7F7F7F'>; &quot;qh
has 3 persons: (</span></span><span style='font-family:宋体;color:#7F7F7F'>张三</span><span
style='font-family:Consolas;color:#7F7F7F'> </span><span style='font-family:
宋体;color:#7F7F7F'>李四</span><span style='font-family:Consolas;color:#7F7F7F'> </span><span
style='font-family:宋体;color:#7F7F7F'>王二</span><span lang=EN-US
style='font-family:Consolas;color:#7F7F7F'>)&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924052"></a><a
name="_Toc281658890"></a><a name="_Toc281556396"></a><a name="_Toc281556296"></a><a
name="_Toc281556192"></a><a name="_Toc281555990"></a><a name="_Toc281555833"><span
lang=EN-US style='text-decoration:none'>4.6.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>函数作为参数</span></a></p>

<p class=MsoNormal style='margin-left:1.35pt'><span style='font-family:宋体'>定义</span><span
lang=EN-US style='font-family:Consolas'>C/Java</span><span style='font-family:
宋体'>类型的运算：</span></p>

<p class=MsoNormal style='margin-left:11.85pt'><span lang=EN-US
style='font-family:Consolas'>(defn exp [a f1 b f2 c] (f2 (f1 a b) c))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(exp 5 - 2 + 3) ; 6</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>4.6.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>函数作为返回值</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用匿名函数：</span></p>

<p class=MsoNormal style='margin-left:11.85pt'><span lang=EN-US
style='font-family:Consolas'>(defn f [a] (<span style='background:yellow'>fn</span>
[b] (- a b)))</span></p>

<p class=MsoNormal style='margin-left:11.85pt'><span lang=EN-US
style='font-family:Consolas'>((f 7) 4) ; 3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc281658891"></a><a
name="_Toc281556397"></a><a name="_Toc281556297"></a><a name="_Toc281556193"></a><a
name="_Toc281555991"></a><a name="_Toc281555834"></a><a name="_Toc306183985"></a><a
name="_Toc281924053"><span lang=EN-US style='font-family:Consolas'>4.7<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>defmutil</span></u></a><u><span
lang=EN-US style='font-family:Consolas'> </span></u><u><span style='font-family:
"微软雅黑","sans-serif"'>函数名重载</span></u></h2>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924054"><span
lang=EN-US style='text-decoration:none'>4.7.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>by</span></a><span style='font-family:"微软雅黑","sans-serif"'>参数个数</span></p>

<p class=MsoNormal><span style='font-family:宋体'>根据参数个数来决定调用的函数，函数重载的加强版：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmulti</span> f <u>(fn [&amp; args] (count args))</u>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod</span> f <b>0 </b>[&amp; args] &quot;000&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod</span> f <b>1</b> [&amp; args]
&quot;111&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod</span> f <b>2</b> [&amp; args]
&quot;222&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod</span> f <span style='background:yellow'>:default</span>
[&amp; args] (str &quot;argn=&quot; (count args) &quot;&gt;3&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f)
; &quot;000&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f
'foo) ; &quot;111&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f
5 8) ; &quot;222&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f
'a 'b 'c 'd) ; &quot;argn=4&gt;3&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924055"><span
lang=EN-US style='text-decoration:none'>4.7.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>by</span></a><span style='font-family:"微软雅黑","sans-serif"'>参数类型</span></p>

<p class=MsoNormal><span style='font-family:宋体'>根据参数类型来决定调用的函数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmulti</span> f1 <u>class</u>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod</span> f1 <b>Integer</b> [x] (double x))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod</span> f1 <b>Double</b> [x] (int x))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod</span> f1 <span style='background:yellow'>:default</span>
[x] &quot;unknown&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f1
2) ; 2.0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f1
3.14) ; 3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f1
&quot;abc&quot;) ; &quot;unknown&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果是多个参数的类型：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmulti</span> f2 <u>(fn [x y] [(class x) (class
y)])</u>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod</span> f2 [<b>Integer</b> <b>Integer</b>]
[x y] (* x y))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod</span> f2 [<b>Double</b> <b>Double</b>] [x
y] (+ x y))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod</span> f2 <span style='background:yellow'>:default</span>
[x y] &quot;others&quot;)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(f2 2 3) ; 6</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(f2 2.0 3.0) ; 5.0</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(f2 2 3.0) ; &quot;others&quot;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924056"><span
lang=EN-US style='text-decoration:none'>4.7.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>by</span></a><span style='font-family:"微软雅黑","sans-serif"'>参数值</span></p>

<p class=MsoNormal><span style='font-family:宋体'>由单个参数的值来判断：</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>defmulti </span>f3
<u>(fn [x] x)</u>)</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>defmethod </span>f3
<b>0</b> [x] (repeat 3 x))</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>defmethod </span>f3
<b>1</b> [x] (repeat 5 x))</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>defmethod </span>f3
<span style='background:yellow'>:default</span> [x] &quot;not 0 or 1&quot;)</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(f3 0) ; (0 0 0)</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(f3 1) ; (1 1 1 1 1)</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(f3 7) ; &quot;not 0 or 1&quot;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>单个参数的值条件：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmulti </span>f5 <u>(fn [x] (&lt;= 0 x 5))</u>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod </span>f5 <b>true</b> [x] (str x &quot; in
[0,5]&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod </span>f5 <b>false</b> [x] (rem x 10))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f5
3) ; &quot;3 in [0,5]&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f5
107) ; 7</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果是多个参数的值：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmulti </span>f4 <u>(fn [x y] (and (&gt; x 0) (&gt;
y 0)))</u>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod </span>f4 <b>true</b> [x y] (- (+ x y)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod </span>f4 <b>false</b> [x y] (+ (Math/abs
x) (Math/abs y)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f4
2 3) ; -5</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f4
-2 3) ; 5</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>由参数值</span><span lang=EN-US
style='font-family:Consolas'>destructure</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmulti </span>f6 <b>:name</b>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod </span>f6 <b>&quot;qh&quot;</b> [arg] (str
&quot;qh: &quot; arg))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod </span>f6 <b>&quot;james&quot;</b> [arg]
(str &quot;james: &quot; arg))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>defmethod </span>f6 <span style='background:yellow'>:default</span>
[arg] (str &quot;unknown: &quot; arg))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f6
{<b>:name</b> &quot;qh&quot; :age 20})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f6
{<b>:name</b> &quot;james&quot; :age 30})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f6
{<b>:name</b> &quot;rich&quot; :age 40})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>fib</span><span style='font-family:宋体'>数列的</span><span
lang=EN-US style='font-family:Consolas'>multi-methods</span><span
style='font-family:宋体'>版本</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(defmulti fib int) </span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(defmethod fib 0 [n] 1)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(defmethod fib 1 [n] 2)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(defmethod fib :default [n] (+ (fib (- n 2)) (fib
(- n 1))))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(map fib (range 10))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>;
(1 2 3 5 8 13 21 34 55 89)</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183986"></a><a
name="_Toc281924057"><span lang=EN-US style='font-family:Consolas'>4.8<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>匿名函数</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>fn</span></u><u><span lang=EN-US style='font-family:
Consolas'> #()</span></u></h2>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>fn</span> []
&quot;hello&quot;) ; </span><span style='font-family:宋体'>仅定义</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>(fn []
&quot;hello&quot;)</span>) ; </span><span style='font-family:宋体'>定义并调用</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>(fn [x] x)</span>
&quot;hello&quot;) ; </span><span style='font-family:宋体'>带参数</span></p>

<p class=MsoNormal><span style='font-family:宋体'>很简短的函数可以使用匿名</span><span
lang=EN-US style='font-family:Consolas'>#()</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def add #(+ %1 %2))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(= 7 (add 3 4))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span><span
lang=EN-US style='font-family:Consolas'>1</span><span style='font-family:宋体'>个参数</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>(fn [x] (* 2 x))</span>
12) ; 24</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以简写成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>#(* 2 %)</span> 12) </span></p>

<p class=MsoNormal><span style='font-family:宋体'>改成偏函数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((partial
* 2) 12)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：多个参数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((fn
[x y] (* x y)) 3 4) ; 12</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以简写成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (#(*
%1 %2) 3 4)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>改写成偏函数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((partial
* 1) 3 4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(map <span style='background:yellow'>#(</span>.toUpperCase
%<span style='background:yellow'>)</span> [&quot;ab&quot; &quot;cd&quot;
&quot;ef&quot;]) ; (&quot;AB&quot; &quot;CD&quot; &quot;EF&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
ma #(.toUpperCase %))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
ma [&quot;ab&quot; &quot;cd&quot; &quot;ef&quot;])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>没有匿名函数之前有个函数叫</span><span
lang=EN-US style='font-family:Consolas'>memfn</span><span style='font-family:
宋体'>，功能差不多，但有个匿名函数后基本就被替代不用了：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
(<span style='background:yellow'>memfn</span> toUpperCase) [&quot;hello&quot;
&quot;world&quot;])&nbsp; <span style='color:#5B6E6E'>; (&quot;HELLO&quot;
&quot;WORLD&quot;)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
#(.toUpperCase %) [&quot;hello&quot; &quot;world&quot;])&nbsp;&nbsp;&nbsp; <span
style='color:#5B6E6E'>; </span></span><span style='font-family:宋体;color:#5B6E6E'>对应的匿名函数版本</span></p>

<p class=MsoNormal><span style='font-family:宋体'>又如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
(<span style='background:yellow'>memfn</span> charAt i) [&quot;hello&quot;
&quot;world&quot;] [1 2]) <span style='color:#5B6E6E'>; (\e \r)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
#(.charAt %1 %2) [&quot;hello&quot; &quot;world&quot;] [1 2]) <span
style='color:#5B6E6E'>; </span></span><span style='font-family:宋体;color:#5B6E6E'>对应的匿名函数版本</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：使用</span><span lang=EN-US
style='font-family:Consolas'>memfn</span><span style='font-family:宋体'>可以把</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>的对象方法临时变成</span><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>的函数</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>memfn</span><span style='font-family:
宋体'>版本：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
mb (<span style='background:yellow'>memfn</span> toUpperCase))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (map
mb [&quot;ab&quot; &quot;cd&quot; &quot;ef&quot;])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>4</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (filter
#(&gt; % 5) (range 10)) ; (6 7 8 9)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>改成偏函数形式：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (filter
(partial &lt; 5) (range 10)) ; (6 7 8 9)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>5</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <a
name="OLE_LINK8"></a><a name="OLE_LINK7">(filter #(&gt; (count %) 2)
[&quot;a&quot; &quot;bb&quot; &quot;ccc&quot; &quot;dddd&quot;])</a></span></p>

<p class=MsoNormal><span style='font-family:宋体'>对比</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#C0504D'>&nbsp;&nbsp;&nbsp; List(&quot;a&quot;,
&quot;bb&quot;, &quot;ccc&quot;, &quot;dddd&quot;) filter (_.size&gt;2) //
Scala</span></p>

<p class=MsoNormal><span style='font-family:宋体'>改写成</span><span lang=EN-US
style='font-family:Consolas'>comp + partial</span><span style='font-family:
宋体'>版本：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (filter
(comp (partial &lt; 2) count) [&quot;a&quot; &quot;bb&quot; &quot;ccc&quot;
&quot;dddd&quot;])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>6</span><span style='font-family:宋体'>：使用</span><span
lang=EN-US style='font-family:Consolas'>fn</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>AtomicInteger</span><span
style='font-family:宋体'>来跟踪状态变化</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def amount (let
[a (<i>java.util.concurrent.atomic.AtomicInteger</i>. 100)]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (fn [x]
(.addAndGet a x))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(amount 50) ;
150</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(amount -80) ;
70</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>匿名函数的使用场合：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>函数体言简意赅，要起个名字都难于下笔</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>在函数内部创建和使用的函数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183987"></a><a
name="_Toc281924058"></a><a name="_Toc281658892"></a><a name="_Toc281556398"></a><a
name="_Toc281556298"></a><a name="_Toc281556194"></a><a name="_Toc281555992"></a><a
name="_Toc281555835"><span lang=EN-US style='font-family:Consolas'>4.9<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>偏函数</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>partial</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>形如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((<b>partial</b>&nbsp;
<span style='background:yellow'>f&nbsp; <u>arg1 arg2 .. argn</u></span>)&nbsp; <u><span
style='background:lime'>arga argb .. argz</span></u>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>就是执行：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>f&nbsp; <u>arg1 arg2 .. argn</u></span>&nbsp; <u><span
style='background:lime'>arga argb .. argz</span></u>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>从名字以及上面可以看出，</span><span
lang=EN-US style='font-family:Consolas'>partial</span><span style='font-family:
宋体'>就是整个完整函数执行的前面一部分。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：偏函数的第一个参数是一个函数，后面至少有</span><span
lang=EN-US style='font-family:Consolas'>1</span><span style='font-family:宋体'>个其他参数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>部分形式的匿名函数可以改写成偏函数。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>partial</span><span
style='font-family:宋体'>函数称为“偏函数”或者“部分完整函数”，因为它是不完整的，定义也用</span><span
lang=EN-US style='font-family:Consolas'>def</span><span style='font-family:
宋体'>而不是</span><span lang=EN-US style='font-family:Consolas'>defn</span><span
style='font-family:宋体'>。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
f [n] (* n 10)) ; </span><span style='font-family:宋体'>正常函数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
fp <span style='background:yellow'>(partial * 10)</span>) ; </span><span
style='font-family:宋体'>偏函数</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以直接调用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((partial
<span style='background:yellow'>* 10</span>) 5) ; 50</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>* 10</span> 5)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>多个参数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((partial
<span style='background:yellow'>* 10</span>) 2 3 4) ; 240</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>* 10</span> 2 3 4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(map #(apply str &quot;=&quot; %&amp;) [1 2 3]
[&quot;+&quot; &quot;+&quot; &quot;+&quot;] [10 20 30])</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>; (&quot;=1+10&quot;
&quot;=2+20&quot; &quot;=3+30&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>partial</span><span style='font-family:宋体'>的版本：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(map (partial str &quot;=&quot;) [1 2 3] (repeat
&quot;+&quot;) [10 20 30])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对比：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>fn</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map (fn [x]
  (* 10 x)) [1 3 5])</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(10 30 50)</span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#()</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map #(* 10
  %) [1 3 5])</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(10 30 50)</span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>partial</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map
  (partial * 10) [1 3 5])</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(10 30 50)</span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>comp</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map (comp -
  *) [1 3 5] [2 4 6])</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(-2 -12 -30)</span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>complement</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map (<span
  style='background:yellow'>complement</span> odd?) [1 2 3]) </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>;complement </span><span
  style='font-family:宋体'>后面的函数需返回</span><span lang=EN-US style='font-family:
  Consolas'>bool</span><span style='font-family:宋体'>值</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(false true
  false) </span></p>
  <p class=MsoNormal><span style='font-family:宋体;background:yellow'>逻辑补</span><span
  style='font-family:宋体'>函数，取反，相当于：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map (<span
  style='background:yellow'>comp not</span> odd?) [1 2 3])</span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>constantly</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map
  (constantly 0) [1 2 3])</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(0 0 0) ; </span><span
  style='font-family:宋体;background:yellow'>常数</span><span style='font-family:
  宋体'>函数</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>补函数例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(filter
(complement zero?) [-1 1 2 0 3 4 0 0 5 6 0]) ;</span><span lang=EN-US> </span><span
lang=EN-US style='font-family:Consolas'>(-1 1 2 3 4 5 6)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>同下：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(remove zero?
[[-1 1 2 0 3 4 0 0 5 6 0])</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183988"></a><a
name="_Toc281924059"></a><a name="_Toc281658893"></a><a name="_Toc281556399"></a><a
name="_Toc281556299"></a><a name="_Toc281556195"></a><a name="_Toc281555993"></a><a
name="_Toc281555836"><span lang=EN-US style='font-family:Consolas'>4.10<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>组合函数</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>形如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((<span
style='background:yellow'>comp</span> f1 f2 .. fn) <u>arg1 arg2 .. argn</u>) ; <span
style='background:yellow'>comp</span>osite</span></p>

<p class=MsoNormal><span style='font-family:宋体'>就是对参数<b><u>从右到左</u></b>组合执行所有函数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (f1
(f2 (.. (fn <u>arg1 arg2 .. argn</u>))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:3.0pt'><span
lang=EN-US style='font-family:Consolas'>(defn f [x y] (- (* x y)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以用组合函数：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def fc <span style='background:yellow'>(comp - *)</span>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (fc
3 5) ; -15</span></p>

<p class=MsoNormal><span style='font-family:宋体'>组合函数按照<b><u>从右到左</u></b>的顺序执行。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以直接调用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((comp
- *) 2 4 6) ; -48</span></p>

<p class=MsoNormal><span style='font-family:宋体'>这个不用</span><span lang=EN-US
style='font-family:Consolas'>comp</span><span style='font-family:宋体'>，需要定义变长参数如下：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
f [&amp; x] (- (apply * x))) ; (f 2 4 6)=-48</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：得到长度的</span><span
lang=EN-US style='font-family:Consolas'>10</span><span style='font-family:宋体'>倍</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>((<span style='background:yellow'>comp</span> (<span
style='background:yellow'>partial</span> * 10) count) &quot;hello&quot;) ; 50</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：函数当数据来计算</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>((apply <span style='background:yellow'>comp</span>
(repeat 3 <span style='background:yellow'>rest</span>)) [1 2 3 4 5 6]) ; (4 5
6)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(rest (rest (rest [1 2 3 4 5 6])))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>但调用</span><span lang=EN-US
style='font-family:Consolas'>rest</span><span style='font-family:宋体'>的次数不事先确定的时候，只能用</span><span
lang=EN-US style='font-family:Consolas'>comp</span><span style='font-family:
宋体'>来处理。</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183989"></a><a
name="_Toc281924060"></a><a name="_Toc281658894"></a><a name="_Toc281556400"></a><a
name="_Toc281556300"></a><a name="_Toc281556196"></a><a name="_Toc281555994"></a><a
name="_Toc281555837"><span lang=EN-US style='font-family:Consolas'>4.11<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>递归函数</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：阶乘</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn <span style='background:yellow'>fac </span>[n]
(if (= n 0) 1 (* n (<span style='background:yellow'>fac </span>(dec n))))) ;
(fac 5) = 120</span></p>

<p class=MsoNormal><span style='font-family:宋体'>自递归写法：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(defn fac [n] <i><span style='background:#D9D9D9'>(defn
<b>f</b> [i r] (if (zero? i) r (<span style='background:yellow'>recur</span>
(dec i) (* r i))))</span></i> (<b>f</b> n 1))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>非递归写法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
fac1 [n] (reduce * (range 1 (inc n))))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
! [n] (reduce * (range 1 (inc n)))) ; (! 5)=120</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span><span
lang=EN-US style='font-family:Consolas'>fib</span><span style='font-family:
宋体'>数列</span><span lang=EN-US style='font-family:Consolas'>(1 1 2 3 5 8 13 ...)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
fib [n] (if (&lt; n 3) 1 (+ (fib (- n 1)) (fib (- n 2)))))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>自递归的</span><span lang=EN-US
style='font-family:Consolas'>fib</span><span style='font-family:宋体'>数列：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
fib2 [n1 n2 n] (if (= 1 n) n1 (recur n2 (+ n1 n2) (dec n))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (fib2
1 1 100) ; 354224848179261915075</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：定义</span><span
lang=EN-US style='font-family:Consolas'>pow</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
pow0 [n m r] (if (zero? m) r (p n (dec m) (* r n)))) ; </span><span
style='font-family:宋体'>尾递归</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn pow1 [n m] (if (zero? m) 1 (* n (pow1 n (dec
m))))) ; </span><span style='font-family:宋体'>递归</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
pow2 [n m] (reduce * (repeat m n))) ; reduce</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
pow3 [n m] (Math/pow n m)) ; </span><span style='font-family:宋体'>利用库</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
pow4 [n m] (.pow (bigint n) m) ; </span><b><span style='font-family:宋体;
color:#0070C0'>首选，最快（</span></b><b><span lang=EN-US style='font-family:Consolas;
color:#0070C0'>1.3</span></b><b><span style='font-family:宋体;color:#0070C0'>要用</span></b><b><span
lang=EN-US style='font-family:Consolas;color:#0070C0'>(BigInteger/valueOf n) </span></b><b><span
style='font-family:宋体;color:#0070C0'>）</span></b></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (=
(pow0 2 10 1) (pow1 2 10) (pow2 2 10) (pow3 2 10))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：快速排序</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn <span
style='background:yellow'>qsort </span>[s]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (if
(&lt;= (count s) 1) s</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
(let [m (nth s (int (/ (count s) 2)))]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(concat</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(<span style='background:yellow'>qsort </span>(filter #(&lt; % m) s))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(filter #(= % m) s)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(<span style='background:yellow'>qsort </span>(filter #(&gt; % m) s))))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(qsort [1 5 2
1 4 3 7 2]) ; (1 1 2 2 3 4 5 7)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc306183990"></a><a name="_Toc281924061"></a><a
name="_Toc281658895"></a><a name="_Toc281556401"></a><a name="_Toc281556301"></a><a
name="_Toc281556197"></a><a name="_Toc281555995"></a><a name="_Toc281555838"><span
lang=EN-US style='font-family:Consolas'>5、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>宏</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>macro</span></u></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183991"></a><a
name="_Toc281924062"></a><a name="_Toc281658896"></a><a name="_Toc281556402"></a><a
name="_Toc281556302"></a><a name="_Toc281556198"></a><a name="_Toc281555996"></a><a
name="_Toc281555839"><span lang=EN-US style='font-family:Consolas'>5.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>概念</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>macro</span><span
style='font-family:宋体'>宏在运行之前机械展开；定义宏相当于给语言增加新特性。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>写宏的</span><b><u><span
lang=EN-US style='font-family:Consolas'>*</span></u></b><b><u><span
style='font-family:宋体'>原则</span></u></b><b><u><span lang=EN-US
style='font-family:Consolas'>*</span></u></b><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>能写成函数就不要用宏（因为写宏没有写函数简单直观，容易写错，需要先在</span><span
lang=EN-US style='font-family:Consolas'>REPL</span><span style='font-family:
宋体'>中测试一番）</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>只有不得不用时才用宏（性能要求高时比函数调用快，或者需要“代码</span><span
lang=EN-US style='font-family:Consolas'>&lt;-&gt;</span><span style='font-family:
宋体'>数据”相互转换）</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>精心设计的宏调用比函数调用更</span><span
lang=EN-US style='font-family:Consolas'>DSL</span><span style='font-family:
宋体'>（如实现控制结构、传递</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>方法）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>使用宏</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>不使用宏</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defmacro op
  [x f1 y f2 z] </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas;background:yellow'>(list f2 z (list f1 x y)))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(op 3 + 2 *
  10) ; 50</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn op [x
  f1 y f2 z] </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas;background:yellow'>(f2 z (f1 x y)))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(op 3 + 2 *
  10) ; 50</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>注：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1</span><span
style='font-family:宋体'>、可用</span><span style='font-family:Consolas'> <span
lang=EN-US>(<span style='background:yellow'>macroexpand</span> '(op 3 + 2 *
10))</span></span><span style='font-family:宋体'>来检测展开情况为：</span><span
lang=EN-US style='font-family:Consolas'>(* 10 (+ 3 2))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>2</span><span
style='font-family:宋体'>、若错误地写成</span><span lang=EN-US style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>(defmacro op [x f1 y f2 z] (f2 z (f1 x
y)))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>用</span><span
lang=EN-US style='font-family:Consolas'>REPL</span><span style='font-family:
宋体'>测试一下</span><span lang=EN-US style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>user=&gt; ('f2 'z ('f1 'x 'y))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>结果为</span><span
style='font-family:Consolas'> <span lang=EN-US>y</span></span><span
style='font-family:宋体'>，所以这时</span><span lang=EN-US style='font-family:Consolas'>
</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>(op 3 + 2 * 10) ; </span><span
style='font-family:宋体'>输出</span><span lang=EN-US style='font-family:Consolas'>2</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183992"></a><a
name="_Toc281924063"></a><a name="_Toc281658897"></a><a name="_Toc281556403"></a><a
name="_Toc281556303"></a><a name="_Toc281556199"></a><a name="_Toc281555997"></a><a
name="_Toc281555840"><span lang=EN-US style='font-family:Consolas'>5.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>设计方法</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>例子：实现</span><span lang=EN-US
style='font-family:Consolas'> (do f f f)</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:16.0pt;font-family:
Consolas;color:red'>X</span></b><b><span style='font-family:宋体'>不正确写法：</span></b></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-------------------------------------------------</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US
style='font-family:Consolas'>REPL</span><span style='font-family:宋体'>中写：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>user=&gt; <span style='background:yellow'>(do 'fun
'fun 'fun)</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><b><u><span lang=EN-US
style='font-family:Consolas'>fun</span></u></b></p>

<p class=MsoNormal><span style='font-family:宋体'>所以一旦套上</span><span lang=EN-US
style='font-family:Consolas'>(defmacro macro-name [args] <span
style='background:yellow'>...</span> )</span><span style='font-family:宋体'>的外衣如下：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defmacro
m [fun] <span style='background:yellow'>(do fun fun fun)</span>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>那就只会执行一次</span><span
lang=EN-US style='font-family:Consolas'>fun</span><span style='font-family:
宋体'>，例如</span><span lang=EN-US style='font-family:Consolas'>:</span></p>

<div style='border:none;border-bottom:solid windowtext 1.0pt;padding:0cm 0cm 1.0pt 0cm'>

<p class=MsoNormal style='border:none;padding:0cm'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m (println &quot;hello&quot;))
; </span><span style='font-family:宋体'>仅仅打印</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>次</span><span
lang=EN-US style='font-family:Consolas'>&quot;hello&quot;</span></p>

</div>

<p class=MsoNormal><b><span lang=EN-US style='font-size:16.0pt;font-family:
Consolas;color:#00B050'>V</span></b><b><span style='font-family:宋体'>正确写法：</span></b></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-------------------------------------------------</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果你写：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>user=&gt; <span style='background:lime'>(list 'do
'f 'f 'f)</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><b><u><span lang=EN-US
style='font-family:Consolas'>(do f f f)</span></u></b></p>

<p class=MsoNormal><span style='font-family:宋体'>如果套上</span><span lang=EN-US
style='font-family:Consolas'>(defmacro macro-name [&amp; args] <span
style='background:lime'>...</span> )</span><span style='font-family:宋体'>的外衣如下：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defmacro
m [f] <span style='background:lime'>(list 'do f f f)</span>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>那就执行多次了，例如：</span></p>

<div style='border:none;border-bottom:solid windowtext 1.0pt;padding:0cm 0cm 1.0pt 0cm'>

<p class=MsoNormal style='border:none;padding:0cm'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (m (println &quot;hello&quot;))
; </span><span style='font-family:宋体'>如愿打印</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>次</span><span
lang=EN-US style='font-family:Consolas'>&quot;hello&quot;</span></p>

</div>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183993"><span
lang=EN-US style='font-family:Consolas'>5.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>调试宏</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>macroexpand</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>macroexpand-1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>clojure.walk/macroexpand-all</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183994"><span
lang=EN-US style='font-family:Consolas'>5.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas;background:yellow'>`</span></u></a><u><span
lang=EN-US style='font-family:Consolas'> &nbsp;<span style='background:yellow'>~'</span>
<span style='background:yellow'>'~</span> <span style='background:yellow'>~@</span></span></u><u><span
lang=EN-US style='font-family:Consolas'> &nbsp;</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:red'>(</span><span lang=EN-US
style='font-family:Consolas;color:#096BF3'>defmacro</span><span lang=EN-US
style='font-family:Consolas;color:black'> with-dict</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
text-autospace:none'><span lang=EN-US style='font-family:Consolas;color:rosybrown'>&quot;</span><span
style='font-family:宋体;color:rosybrown'>连接到</span><span lang=EN-US
style='font-family:Consolas;color:rosybrown'>meta</span><span style='font-family:
宋体;color:rosybrown'>库的</span><span lang=EN-US style='font-family:Consolas;
color:rosybrown'>dict</span><span style='font-family:宋体;color:rosybrown'>表进行操作</span><span
lang=EN-US style='font-family:Consolas;color:rosybrown'>&quot;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
text-autospace:none'><span lang=EN-US style='font-family:Consolas;color:black'>[&amp;
body]</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
text-autospace:none'><span lang=EN-US style='font-family:Consolas;color:black;
background:yellow'>`</span><span lang=EN-US style='font-family:Consolas;
color:#00CC00'>(</span><span lang=EN-US style='font-family:Consolas;color:#A020F0'>let</span><span
lang=EN-US style='font-family:Consolas;color:black'> [<span style='background:
yellow'>~'</span>dbname </span><span lang=EN-US style='font-family:Consolas;
color:rosybrown'>&quot;meta&quot;</span></p>

<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt;text-autospace:none'><span lang=EN-US style='font-family:
Consolas;color:black;background:yellow'>~'</span><span lang=EN-US
style='font-family:Consolas;color:black'>tbname </span><span lang=EN-US
style='font-family:Consolas;color:orchid'>:dict</span></p>

<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt;text-autospace:none'><span lang=EN-US style='font-family:
Consolas;color:black;background:yellow'>~'</span><span lang=EN-US
style='font-family:Consolas;color:black'>conn </span><span lang=EN-US
style='font-family:Consolas;color:silver'>(</span><span lang=EN-US
style='font-family:Consolas;color:black'>make-connection <span
style='background:yellow'>~'</span>dbname</span><span lang=EN-US
style='font-family:Consolas;color:silver'>)</span><span lang=EN-US
style='font-family:Consolas;color:black'>]</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt;text-autospace:none'><span lang=EN-US style='font-family:
Consolas;color:black'>with-mongo <span style='background:yellow'>~'</span>conn</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas;color:black;background:yellow'>~@</span><span
lang=EN-US style='font-family:Consolas;color:black'>body</span><span
lang=EN-US style='font-family:Consolas;color:silver'>)</span><span lang=EN-US
style='font-family:Consolas;color:#00CC00'>)</span><span lang=EN-US
style='font-family:Consolas;color:red'>)</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas;color:red'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>说明：</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=34 valign=top style='width:25.6pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>`</span></p>
  </td>
  <td width=409 valign=top style='width:306.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>使用就会原原本本地直译过去，不用</span><span
  lang=EN-US style='font-family:Consolas'>`,let</span><span style='font-family:
  宋体'>语句不被翻译</span></p>
  </td>
 </tr>
 <tr>
  <td width=34 valign=top style='width:25.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>~'</span></p>
  </td>
  <td width=409 valign=top style='width:306.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>使用则后面的变量被直接翻译过去，否则翻译成</span><span
  lang=EN-US style='font-family:Consolas'>user/dbname</span><span
  style='font-family:宋体'>等</span></p>
  </td>
 </tr>
 <tr>
  <td width=34 valign=top style='width:25.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>~@</span></p>
  </td>
  <td width=409 valign=top style='width:306.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>表示多条语句</span></p>
  </td>
 </tr>
 <tr>
  <td width=34 valign=top style='width:25.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>'~</span></p>
  </td>
  <td width=409 valign=top style='width:306.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>变量名本身而非值</span></p>
  </td>
 </tr>
 <tr>
  <td width=34 valign=top style='width:25.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=409 valign=top style='width:306.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defmacro debug [x] <span style='background:yellow'>`</span>(println
&quot;------&quot; <span style='background:yellow'>'~</span>x &quot;:&quot; <span
style='background:yellow'>~</span>x))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(let [a 10] (debug a)) ; &quot;------ a : 10&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc306183995"></a><a name="_Toc281924064"></a><a
name="_Toc281658899"></a><a name="_Toc281556405"></a><a name="_Toc281556305"></a><a
name="_Toc281556201"></a><a name="_Toc281555999"></a><a name="_Toc281555842"><span
lang=EN-US style='font-family:Consolas'>6、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>调用</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>Java</span></u><u><span
style='font-family:"微软雅黑","sans-serif"'>的类和方法</span></u></h1>

<p class=MsoNormal><span style='font-family:宋体'>和</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>的直接对应更甚于</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>String</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Number</span><span
style='font-family:宋体'>直接对应</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Collection</span><span
style='font-family:宋体'>实现</span><span lang=EN-US style='font-family:Consolas'>java
Collection</span><span style='font-family:宋体'>接口</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>函数实现</span><span lang=EN-US
style='font-family:Consolas'>java Runnable</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>Callable</span><span style='font-family:
宋体'>接口</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>可以继承</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>类，实现</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>接口</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>sequence</span><span
style='font-family:宋体'>函数可操作</span><span lang=EN-US style='font-family:Consolas'>java</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>String</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Array</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Iterable</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183996"></a><a
name="_Toc281924065"></a><a name="_Toc281658900"></a><a name="_Toc281556406"></a><a
name="_Toc281556306"></a><a name="_Toc281556202"></a><a name="_Toc281556000"></a><a
name="_Toc281555843"><span lang=EN-US style='font-family:Consolas'>6.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>基本用法</span></u></a></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>内容</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>写法</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>简写</span></b></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>构造新对象</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(new
  java.util.Date)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(new
  StringBuffer &quot;hi&quot;)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(java.util.Date<span
  style='background:yellow'>.</span>)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(StringBuffer<span
  style='background:yellow'>.</span> &quot;hi&quot;) ; </span><span
  style='font-family:宋体'>构造方法带参数</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>对象方法调用</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(.
  &quot;Hello&quot; toUpperCase)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>.toUpperCase</span> &quot;Hello&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(.toLocaleString
  (java.util.Date.)) </span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>带参数方法调用</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(.&quot;hello&quot;
  replace &quot;l&quot; &quot;L&quot;)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>.replace</span> &quot;hello&quot; <span
  style='background:yellow'>&quot;l&quot; &quot;L&quot;</span>)</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>静态类方法调用</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(. System currentTimeMillis)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(. Math PI)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(. Math pow
  2 10) ; 1024.0</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(System<span
  style='background:yellow'>/</span>currentTimeMillis)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(Math<span
  style='background:yellow'>/</span>PI) ; </span><span style='font-family:宋体'>注意不是</span><span
  lang=EN-US style='font-family:Consolas'>(Math.PI)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(Math<span
  style='background:yellow'>/</span>pow 2 10) ; </span><span style='font-family:
  宋体'>注意不是</span><span lang=EN-US style='font-family:Consolas'>(Math.pow 2 10)</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>连续方法调用</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(. (. (.
  System </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>currentTimeMillis) </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>getClass) toString)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>..</span> System currentTimeMillis getClass
  toString)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>..</span> Runtime getRuntime availableProcessors)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>..</span> &quot;hello&quot; toUpperCase <span
  style='background:yellow'>(substring 1 4)</span>)</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>多次方法调用</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(</span><span
  style='font-family:宋体'>无返回值的方法</span><span lang=EN-US style='font-family:
  Consolas'>)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let [m
  (java.util.HashMap.)]</span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>(.put m 1 100) (.put m 2 200) </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas;background:yellow'>m</span><span lang=EN-US
  style='font-family:Consolas'>)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>doto</span> </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>(java.util.HashMap.) (.put 1 100) (.put 2 200))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; doto</span><span
  style='font-family:宋体'>的意思：</span><span lang=EN-US style='font-family:Consolas;
  background:yellow'>do</span><span lang=EN-US style='font-family:Consolas'>
  something <span style='background:yellow'>to</span> it (m)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>import</span> java.io.File) ; </span><span
style='font-family:宋体'>单个</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>import</span> '(<u>java.io</u> File InputStream)) ; '</span><span
style='font-family:宋体'>可以省略</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>import</span> '(<u>java.io</u> File InputStream) '(<u>java.util</u>
Random))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
rdm (java.util.Random.))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (.nextInt
rdm)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (.nextInt
rdm 10)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>种形式，结果一样</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (Math<span
style='background:yellow'>/</span>PI)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>.</span> Math PI)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>..</span> Math PI)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>Math/PI</span><span style='font-family:宋体'>的形式更普遍：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(= (Math/toRadians 180) Math/PI) ; true</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><a name="OLE_LINK4"></a><a
name="OLE_LINK3"><span lang=EN-US style='font-family:Consolas'>(=
(Math/toDegrees Math/PI) 180) ; true</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; </span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc281658901"></a><a
name="_Toc281556407"></a><a name="_Toc281556307"></a><a name="_Toc281556203"></a><a
name="_Toc281556001"></a><a name="_Toc281555844"></a><a name="_Toc306183997"></a><a
name="_Toc281924066"><span lang=EN-US style='font-family:Consolas'>6.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>得到所有</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>Java</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>类方法</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map
#(.getName %) (.getMethods java.util.Date))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map
#(.getName %) (.. &quot;hello&quot; getClass getMethods))</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183998"></a><a
name="_Toc281924067"><span lang=EN-US style='font-family:Consolas'>6.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Java</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>数组</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>可查阅：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (find-doc
&quot;<span style='background:yellow'>-array</span>&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>按类型有：</span></p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>函数</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>用法</span></b></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>object-array</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(object-array
  [10.3 &quot;hello&quot; 10])</span></p>
  </td>
 </tr>
 <tr style='height:140.9pt'>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt;height:140.9pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>boolean-array</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>byte-array</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>char-array</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>double-array</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>float-array</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>int-array</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>long-array</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>short-array</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt;height:140.9pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(boolean-array
  5)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(boolean-array
  [false true])</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(boolean-array
  5 [false true])</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>二维数组：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(into-array
  (map int-array [[1 2 3] [4 5 6]]))</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>into-array</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>make-array</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>其他非基本类型，如</span><span
  lang=EN-US style='font-family:Consolas'>String</span><span style='font-family:
  宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Integer</span><span
  style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Double</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>to-array</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>to-array2d</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>byte-array-type</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>char-array-type</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
<u>(object-array [10.3 &quot;hello&quot; 10])</u>) ; (10.3 &quot;hello&quot;
10)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>不够数目的用缺省值填充：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
<u>(boolean-array 5)</u>) ; (false false false false false)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
<u>(boolean-array [false <b>true</b> false]</u>) ; (false <b>true</b> false)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
<u>(boolean-array 5 [<i>false</i> <b>true</b>])</u>) ;</span><span lang=EN-US> &nbsp;</span><span
lang=EN-US style='font-family:Consolas'>(<i>false</i><b> true </b><i>false
false false</i>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
<u>(int-array 5)</u>) ; (0 0 0 0 0)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
<u>(int-array [2 4 6]</u>) ; (2 4 6)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
<u>(int-array 5 [<i>2 4</i>])</u>) ;</span><span lang=EN-US> &nbsp;</span><span
lang=EN-US style='font-family:Consolas'>(<i>2 4 0 0 0</i>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>创建</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>类型的数组：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>make-array</span>
<b>String</b> 5) ; </span><span style='font-family:宋体'>创建</span><span
lang=EN-US style='font-family:Consolas'>new String[5]</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(make-array String 5 3) ; </span><span
style='font-family:宋体'>创建</span><span lang=EN-US style='font-family:Consolas'>new
String[5][3]</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(seq (make-array String 5)) ; (nil nil nil nil
nil)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>set/get</span><span
style='font-family:宋体'>数组元素：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
a (make-array String 3))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>aset</span> a 0 &quot;hello&quot;) ; aset</span><span
style='font-family:宋体'>：</span><span style='font-family:Consolas'> <span
lang=EN-US style='color:#5B6E6E;background:yellow'>a</span><span lang=EN-US>rray
<span style='background:yellow'>set</span>ting</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>aset</span> a 2 &quot;world&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (seq
a) <span style='color:#5B6E6E'>; (&quot;hello&quot; nil &quot;world&quot;)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>aget</span> a 0) ; &quot;hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>alength</span> a) ; 3</span><span style='font-family:
宋体'>，和</span><span lang=EN-US style='font-family:Consolas'> (count a) </span><span
style='font-family:宋体'>一样</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>list</span><span
style='font-family:宋体'>转换为</span><span lang=EN-US style='font-family:Consolas'>Object</span><span
style='font-family:宋体'>数组：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>to-array</span> [1 2 3 4]) ; java.lang.Object[] </span><span
style='font-family:宋体'>注意不会转为</span><span lang=EN-US style='font-family:Consolas'>int[]</span><span
style='font-family:宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>Integer[]</span></p>

<p class=MsoNormal><span style='font-family:宋体'>主要用于调用</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>的方法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (String/format
&quot;%s*%s=%d&quot; (<span style='background:yellow'>to-array</span> [2 3 6]))
; &quot;2*3=6&quot;</span><span style='font-family:宋体'>，</span></p>

<p class=MsoNormal><span style='font-family:宋体'>当然，上例使用</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>format</span><span style='font-family:
宋体'>函数更方便：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (format
&quot;%s*%s=%d&quot; 2 3 6)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果需要明确指定类型，可以使用</span><span
lang=EN-US style='font-family:Consolas'>into-array</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>into-array</span> [1 2 3]) ; java.lang.Integer[]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (import
'(wr3.util Stringx))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(Stringx/join (<span style='background:yellow'>into-array</span>
String [&quot;1&quot; &quot;2&quot; &quot;3&quot;]) &quot;+&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果是字符串数组等，会智能转换类型，不需要</span><span
lang=EN-US style='font-family:Consolas'>into-array</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (Stringx/join
[1 2 3] &quot;+&quot;) ; &quot;1+2+3&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306183999"><span
lang=EN-US style='font-family:Consolas'>6.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>reflect</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>调用</span></u><u><span lang=EN-US
style='font-family:Consolas'>Java</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>方法</span></u></h2>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>clojure.lang.Reflector/invokeInstanceMethod</span>
&quot;hello-world&quot; &quot;substring&quot; (to-array [1 4]))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><a name="OLE_LINK2"></a><a name="OLE_LINK1"><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (.substring
&quot;hello-world&quot; 1 4) ; &quot;ell&quot;</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc281924068"></a><a
name="_Toc281658902"></a><a name="_Toc281556408"></a><a name="_Toc281556308"></a><a
name="_Toc281556204"></a><a name="_Toc281556002"></a><a name="_Toc281555845"></a><a
name="_Toc306184000"><span lang=EN-US style='font-family:Consolas'>6.5<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Java</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>方法作为函数参数</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defmacro f
[g] <span style='background:yellow'>`</span>(.. &quot;Hello&quot; <span
style='background:yellow'>~</span>g))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f
toUpperCase) ; &quot;HELLO&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f
toLowerCase) ; &quot;hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：更复杂的情况，可变参数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defmacro f [g
&amp; args] <span style='background:yellow'>`</span>(.. &quot;Hello&quot; (<span
style='background:yellow'>~</span>g <span style='background:yellow'>~@</span>args)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f substring 0
3) ; &quot;Hel&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f substring
3)&nbsp;&nbsp; ; &quot;lo&quot;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184001"><span
lang=EN-US style='font-family:Consolas'>6.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>设置属性值</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>set!</span> (. obj f1) v1)</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184002"><span
lang=EN-US style='font-family:Consolas'>6.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>JavaBean</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>bean</span><span
style='font-family:宋体'>得到</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>对象的所有</span><span lang=EN-US style='font-family:Consolas'>JavaBean
properties</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>bean</span>
(java.util.Date.))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(import '(java.security MessageDigest))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>bean</span> (MessageDigest/getInstance
&quot;SHA&quot;)) </span></p>

<p class=MsoNormal><span style='font-family:宋体'>返回：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>{:provider #&lt;Sun SUN version 1.6&gt;, </span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>:digestLength 20, </span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>:class java.security.MessageDigest$Delegate, </span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>:algorithm &quot;SHA&quot;}</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184003"></a><a
name="_Toc281924069"></a><a name="_Toc281658903"></a><a name="_Toc281556409"></a><a
name="_Toc281556309"></a><a name="_Toc281556205"></a><a name="_Toc281556003"></a><a
name="_Toc281555846"><span lang=EN-US style='font-family:Consolas'>6.8<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>提升性能</span></u></a></h2>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>6.8.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>类型提示</span></p>

<p class=MsoNormal><span style='font-family:宋体'>正常版本：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn f0 [n] (reduce + (range (inc n)))) ;&nbsp; 1
to n sum</span></p>

<p class=MsoNormal><span style='font-family:宋体'>性能版本：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f1 [n] </span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(let [n (<span style='background:yellow'>int</span>
n)] </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(loop [i (<span style='background:yellow'>int</span>
1) s (<span style='background:yellow'>int</span> 0)] </span></p>

<p class=MsoNormal style='text-indent:31.5pt'><span lang=EN-US
style='font-family:Consolas'>(if (&lt;= i n) (recur (inc i) (+ i s)) s))))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>测试：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>time</span> (<span style='background:yellow'>dotimes</span>
[_ 5] (f0 10000)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>time</span> (<span style='background:yellow'>dotimes</span>
[_ 5] (f1 10000)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>6.8.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>使用</span><span
lang=EN-US>Java</span><span style='font-family:"微软雅黑","sans-serif"'>数组</span></p>

<p class=MsoNormal><span style='font-family:宋体'>毫无疑问，</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>数组比</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>list</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>vect</span><span
style='font-family:宋体'>都要快。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def a (<span
style='background:yellow'>int-array</span> 10000 (int 5)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(time (<span
style='background:yellow'>amap</span> a idx ret (+ (int 1) (aget a idx)))) &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;
795.653779 msecs</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(time (<span
style='background:yellow'>amap</span> <span style='background:yellow'>^ints</span>
a idx ret (+ (int 1) (aget <span style='background:yellow'>^ints</span> a
idx)))) ; 3.49667 msecs</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184004"></a><a
name="_Toc281924070"></a><a name="_Toc281658904"></a><a name="_Toc281556410"></a><a
name="_Toc281556310"></a><a name="_Toc281556206"></a><a name="_Toc281556004"></a><a
name="_Toc281555847"><span lang=EN-US style='font-family:Consolas'>6.9<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>proxy</span></u></a><u><span
lang=EN-US style='font-family:Consolas'> </span></u><u><span style='font-family:
"微软雅黑","sans-serif"'>实现接口</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>继承</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>父类或者实现</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>接口：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='color:red'>(def t1 (Thread. (run [] (println &quot;hello&quot;))))</span>
; </span><b><span lang=EN-US style='font-size:18.0pt;font-family:Consolas;
color:red'>X</span></b><b><span lang=EN-US style='font-family:Consolas;
color:red'> </span></b><b><span style='font-family:宋体;color:red'>不能直接如此</span></b></p>

<p class=MsoNormal><span style='font-family:宋体'>而应该：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def t1 (Thread. (<span style='background:yellow'>proxy</span>
<span style='color:#C00000'>[Runnable]</span> <span style='color:#7030A0'>[]</span>
(run [] (println &quot;hello&quot;)))))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>; <span style='color:#C00000'>[Runnable]</span></span><span
style='font-family:宋体'>是接口类列表</span><span style='font-family:Consolas'> <span
lang=EN-US style='color:#7030A0'>[]</span></span><span style='font-family:宋体'>是接口构造函数的参数</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(.start t1)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可直接：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def t1 (Thread. #(println &quot;hello&quot;)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>运行多次：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>dotimes</span> [i
5] (.start (Thread. (proxy [Runnable] [] (run [] (println
(System/nanoTime)))))))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：调用</span><span lang=EN-US
style='font-family:Consolas'>java</span><span style='font-family:宋体'>对</span><span
lang=EN-US style='font-family:Consolas'>Vector</span><span style='font-family:
宋体'>进行排序</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def jcoll (java.util.Vector.))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(doto jcoll (.add &quot;hello&quot;) (.add
&quot;clojure&quot;) (.add &quot;language&quot;))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn comp1 [f] (<span style='background:yellow'>proxy</span>
[java.util.Comparator] [] (compare [a b] (f a b))))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(java.util.Collections/sort jcoll (comp1 #(. %1
compareTo %2)))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>jcoll ;<span style='color:#5B6E6E'> #&lt;Vector
[clojure, hello, language]&gt;</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>实现接口的匿名类中有类变量的解决方法（使用</span><span
lang=EN-US style='font-family:Consolas'>let</span><span style='font-family:
宋体'>进行</span><span lang=EN-US style='font-family:Consolas'>binding</span><span
style='font-family:宋体'>）：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>(let [con (jdbc &quot;postgre&quot;)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
dbs (<i>DbServer/create</i> con)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<span style='background:yellow'>i (atom 0)</span> ; </span><span
style='font-family:宋体'>计算有正常身份证的用户数目</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>row-filter</b> (<span style='background:yellow'>proxy</span> [<i>RowFilter</i>]
[]</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(process [row]</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(let [id (.toString (.get row 0))</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pid0
(.toString (.get row 1))</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
name (.toString (.get row 2))</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
pid (<i>IDUtil/to18</i> pid0)]</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(do</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(when pid (do (<span style='background:yellow'>swap! i inc</span>) (println
(line id pid name))))</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
true) )))]</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (doto dbs</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(.process sql <b>row-filter</b>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(.close))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
(println &quot;i=&quot; @i)&nbsp;&nbsp;&nbsp; )</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184005"></a><a
name="_Toc281924071"></a><a name="_Toc281658905"></a><a name="_Toc281556411"></a><a
name="_Toc281556311"></a><a name="_Toc281556207"></a><a name="_Toc281556005"></a><a
name="_Toc281555848"><span lang=EN-US style='font-family:Consolas'>6.10<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span lang=EN-US
style='font-family:Consolas'>Exception</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>形如：</span><span lang=EN-US
style='font-family:Consolas'> (<span style='background:yellow'>try </span>(<span
style='background:yellow'>throw </span>..) (<span style='background:yellow'>finally
</span>..))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:gray'>(</span><span lang=EN-US
style='font-family:Consolas;background:yellow'>try</span><span lang=EN-US
style='font-family:Consolas'> <span style='background:lime'>(</span><span
style='background:yellow'>throw</span> (Exception. &quot;--error--&quot;)<span
style='background:lime'>)</span> <span style='background:aqua'>(</span><span
style='background:yellow'>finally</span> (println &quot;--final--&quot;)<span
style='background:aqua'>)</span><span style='background:gray'>)</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>输出：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>--final--</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:red'>java.lang.Exception: --error--</span><span
lang=EN-US style='font-family:Consolas'> (NO_SOURCE_FILE:0)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn f [cls] </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>(<span style='background:yellow'>try</span>
(Class/forName cls) true (<span style='background:yellow'>catch</span>
ClassNotFoundException e false)))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>try </span>(/ 3
0) (<span style='background:yellow'>catch </span>Exception e (println e)))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184006"></a><a
name="_Toc281924072"><span lang=EN-US style='font-family:Consolas'>6.11<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span lang=EN-US
style='font-family:Consolas'>Java</span></u></a><u><span style='font-family:
"微软雅黑","sans-serif"'>调</span></u><u><span lang=EN-US style='font-family:Consolas'>Clojure</span></u></h2>

<pre style='line-height:14.4pt;vertical-align:top'><span class=kw1><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>import</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=co2><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#006699'>clojure.lang.<span style='background:yellow'>RT</span></span></span><span
class=sy0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#339933'>;</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span class=kw1><b><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas;color:black'>import</span></b></span><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=co2><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#006699'>clojure.lang.<span style='background:yellow'>Var</span></span></span><span
class=sy0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#339933'>;</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span class=kw1><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>public</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> <span
class=kw1><b>class</b></span> Foo </span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#009900'>{</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; <span
class=kw1><b>public</b></span> <span class=kw1><b>static</b></span> </span><span
class=kw4><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#000066'>void</span></b></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> main</span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#009900'>(</span></span><span
class=kw3><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#003399'>String</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#009900'>[]</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> args</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#009900'>)</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> <span class=kw1><b>throws</b></span> </span><span
class=kw3><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#003399'>Exception</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#009900'>{</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=co1><i><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>// Load the Clojure script -- as a side effect this initializes the runtime.</span></i></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RT.</span><span
class=me1><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#006633'>loadResourceScript</span></span><span class=br0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#009900'>(</span></span><span
class=st0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:blue'>&quot;foo.clj&quot;</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#009900'>)</span></span><span
class=sy0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#339933'>;</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=co1><i><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>// Get a reference to the foo function.</span></i></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Var foo </span><span
class=sy0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#339933'>=</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> RT.</span><span class=me1><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#006633'>var</span></span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#009900'>(</span></span><span class=st0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:blue'>&quot;user&quot;</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>, </span><span
class=st0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:blue'>&quot;foo&quot;</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#009900'>)</span></span><span
class=sy0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#339933'>;</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=co1><i><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>// Call it!</span></i></span></pre><pre style='line-height:14.4pt;
vertical-align:top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span class=kw3><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#003399'>Object</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> result </span><span
class=sy0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#339933'>=</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> foo.</span><span class=me1><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#006633'>invoke</span></span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#009900'>(</span></span><span class=st0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:blue'>&quot;Hi&quot;</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>, </span><span
class=st0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:blue'>&quot;there&quot;</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#009900'>)</span></span><span
class=sy0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#339933'>;</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=kw3><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#003399'>System</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>.</span><span class=me1><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#006633'>out</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>.</span><span
class=me1><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#006633'>println</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#009900'>(</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>result</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#009900'>)</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#339933'>;</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#009900'>}</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#009900'>}</span></span></pre>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184007"><span
lang=EN-US style='font-family:Consolas'>6.12<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>编译</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>如果不发布</span><span lang=EN-US
style='font-family:Consolas'>.clj</span><span style='font-family:宋体'>代码，则需要编译，如果是可执行类，需要如下的函数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>test1.clj:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (ns
<b><u>test1</u></b> (<span style='background:yellow'>:gen-class</span>))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:red'>(</span><span lang=EN-US
style='font-family:Consolas;color:#096BF3'>defn</span><span lang=EN-US
style='font-family:Consolas;color:black'> <span style='background:yellow'>-main</span>
[&amp; args] </span><span lang=EN-US style='font-family:Consolas;color:#00CC00'>(</span><span
lang=EN-US style='font-family:Consolas;color:blue'>println</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:rosybrown'>&quot;hello main&quot;</span><span
lang=EN-US style='font-family:Consolas;color:#00CC00'>)</span><span lang=EN-US
style='font-family:Consolas;color:red'>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US
style='font-family:Consolas'>REPL</span><span style='font-family:宋体'>中编译：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(binding [clojure.core/*compile-path* &quot;<u>.</u>&quot;]
(<span style='background:yellow'>clojure.core/compile</span> <b><u>'test1</u></b>))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>运行：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>java Ccp clojure.jar;. test1</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用命令行编译：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:9.0pt;font-family:Consolas'>java
-D<u><span style='background:yellow'>clojure.compile.path</span></u>=. -cp <u>.:clojure.jar:clojure-contrib-1.2.0.jar</u>
<span style='background:yellow'>clojure.lang.Compile</span> <b><u>test1</u></b></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184008"><span
lang=EN-US style='font-family:Consolas'>6.13<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>调用</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>OS</span></u><u><span style='font-family:
"微软雅黑","sans-serif"'>系统功能</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>从</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>中调用系统</span><span
lang=EN-US style='font-family:Consolas'>shell</span><span style='font-family:
宋体'>命令：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(use '[<span style='background:yellow'>clojure.java.shell</span>
:only [sh]])<br>
(<span style='background:yellow'>sh</span> &quot;java&quot;)<br>
(<span style='background:yellow'>sh</span> &quot;java&quot; &quot;-version&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>从</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>中调用</span><span
lang=EN-US style='font-family:Consolas'>web</span><span style='font-family:
宋体'>浏览器访问指定</span><span lang=EN-US style='font-family:Consolas'>url</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(use 'clojure.java.browse)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>browse-url</span>
&quot;http://clojuredocs.org&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>调用</span><span lang=EN-US
style='font-family:Consolas'>web</span><span style='font-family:宋体'>浏览器查看在线</span><span
lang=EN-US style='font-family:Consolas'>java</span><span style='font-family:
宋体'>类或者对象的</span><span lang=EN-US style='font-family:Consolas'>javadoc</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>javadoc</span> String)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def d (java.util.Date.))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>javadoc</span> d)</span></p>

<h1><a name="_Toc306184009"></a><a name="_Toc281924073"></a><a
name="_Toc281658906"></a><a name="_Toc281556412"></a><a name="_Toc281556312"></a><a
name="_Toc281556208"></a><a name="_Toc281556006"></a><a name="_Toc281555849"><span
lang=EN-US style='font-family:Consolas'>7、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>正则表达式</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>regex</span></u><u><span lang=EN-US
style='font-family:Consolas'> </span></u></h1>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(re-pattern &quot;\\d+&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可简写成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; #&quot;\d+&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>进行完全匹配：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>re-matches</span> <u>#&quot;\d+&quot;</u>
&quot;1920&quot;) ; &quot;1920&quot; </span><span style='font-family:宋体'>注意不是返回</span><span
lang=EN-US style='font-family:Consolas'>true</span><span style='font-family:
宋体'>，不为</span><span lang=EN-US style='font-family:Consolas'>nil</span><span
style='font-family:宋体'>就是匹配</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (re-matches
<u>#&quot;\d+&quot;</u> &quot;19-20&quot;) ; nil</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>逐步列出所有匹配项：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
m (<span style='background:yellow'>re-matcher</span> <u>#&quot;\d+&quot;</u>
&quot;from 1900 to 2010&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>re-find</span> m) ; &quot;1900&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (re-find
m) ; &quot;2010&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (re-find
m) ; nil</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def m (<span
style='background:yellow'>re-matcher</span> <u>#&quot;\d+&quot;</u> &quot;from
1900 to 2010&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(loop [e
(re-find m)] (<span style='background:yellow'>if</span> e (<span
style='background:yellow'>do</span> (println e) (recur (re-find m)))))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
style='font-family:Consolas'>when</span><span style='font-family:宋体'>更好：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def m (<span
style='background:yellow'>re-matcher</span> <u>#&quot;\d+&quot;</u> &quot;from
1900 to 2010&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(loop [e
(re-find m)] (<span style='background:yellow'>when</span> e (println e) (recur
(re-find m))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>找到第一个匹配项：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>re-find</span> <u>#&quot;\d+&quot;</u> &quot;from
1900 to 2010&quot;) ; &quot;1900&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>一次列出所有匹配项：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>re-seq</span> <u>#&quot;\d+&quot;</u>
&quot;from 1900 to 2010&quot;) ; (&quot;1900&quot; &quot;2010&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>re-seq</span> <u>#&quot;\w+&quot;</u> &quot;get all
words list&quot;) ; (&quot;get&quot; &quot;all&quot; &quot;words&quot;
&quot;list&quot;)</span></p>

<h1><a name="_Toc306184010"></a><a name="_Toc281924074"></a><a
name="_Toc281658907"></a><a name="_Toc281556413"></a><a name="_Toc281556313"></a><a
name="_Toc281556209"></a><a name="_Toc281556007"></a><a name="_Toc281555850"><span
lang=EN-US style='font-family:Consolas'>8、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>并发</span></u></a><u><span
lang=EN-US style='font-family:Consolas'> STM</span></u></h1>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Erlang</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>解决多台机器之间的并发控制</span></p>
  </td>
 </tr>
 <tr>
  <td width=80 valign=top style='width:60.25pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>解决单台机器上多线程之间的并发控制</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184011"></a><a
name="_Toc281924075"></a><a name="_Toc281658908"></a><a name="_Toc281556414"></a><a
name="_Toc281556314"></a><a name="_Toc281556210"></a><a name="_Toc281556008"></a><a
name="_Toc281555851"><span lang=EN-US style='font-family:Consolas'>8.1<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>基本概念</span></u></a></h2>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>ref</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>引用</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>管理对一个状态或多个状态的协同、同步更新。</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>采用</span><span lang=EN-US
  style='font-family:Consolas'>STM</span><span style='font-family:宋体'>的交易管理。</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>atom</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>原子</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>管理对单个状态的非协同同步更新</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>agent</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>代理</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>管理对状态的异步更新</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>可采用</span><span lang=EN-US
  style='font-family:Consolas'>STM</span><span style='font-family:宋体'>的交易管理。</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>变量</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>本地线程变量，参看</span><span
  lang=EN-US style='font-family:Consolas'>def let binding</span></p>
  </td>
 </tr>
</table>

</div>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>STM</span><span
style='font-family:宋体'>的基本原理：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>STM</span><span
style='font-family:宋体'>采用</span><span lang=EN-US style='font-family:Consolas'>MVCC</span><span
style='font-family:宋体'>（</span><span lang=EN-US style='font-family:Consolas'>Multiversion
Concurrency Controll</span><span style='font-family:宋体'>）</span><span
lang=EN-US style='font-family:Consolas'>,</span><span style='font-family:宋体'>和一般</span><span
lang=EN-US style='font-family:Consolas'>RDB</span><span style='font-family:
宋体'>用的概念是相同的。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>交易</span><span lang=EN-US
style='font-family:Consolas'>A</span><span style='font-family:宋体'>以</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>唯一的时间戳来标识，交易</span><span lang=EN-US style='font-family:Consolas'>A</span><span
style='font-family:宋体'>通过该时间戳标识。</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184012"></a><a
name="_Toc281924076"></a><a name="_Toc281658909"></a><a name="_Toc281556415"></a><a
name="_Toc281556315"></a><a name="_Toc281556211"></a><a name="_Toc281556009"></a><a
name="_Toc281555852"><span lang=EN-US style='font-family:Consolas'>8.2<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>ref</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>定义：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v1 (<span style='background:yellow'>ref</span>
10))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>引用：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>deref</span> v1)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可简化为：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>@</span><span lang=EN-US
style='font-family:Consolas'>v1</span></p>

<p class=MsoNormal><span style='font-family:宋体'>改变：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>dosync</span> (<span style='background:yellow'>ref-set</span>
v1 0))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>dosync</span> (<span style='background:yellow'>ref-set</span>
v1 (inc @v1))) ; </span><span style='font-family:宋体'>这个写法</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用函数改变值，可简化为：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>dosync</span> (<span style='background:yellow'>alter</span>
v1 inc))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>dosync</span> (<span style='background:yellow'>alter</span>
v1 + 10))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>dosync</span> (<span style='background:yellow'>commute</span>
v1 + 100)) ; commutative </span><span style='font-family:宋体'>交替的</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>改变多次：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def cu (ref 10))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (dotimes
[i 5] (dosync (alert cu inc))) ; @cu = 15</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>中</span><span lang=EN-US style='font-family:Consolas'>STM</span><span
style='font-family:宋体'>的特性和</span><span lang=EN-US style='font-family:Consolas'>RDB</span><span
style='font-family:宋体'>类似：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>更新操作是原子操作</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>ref</span><span
style='font-family:宋体'>可以指定</span><span lang=EN-US style='font-family:Consolas'>validation</span><span
style='font-family:宋体'>函数，失败可完全回滚</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>多个更新操作之间是无关的，一个更新操作不能读取另一个更新操作的中间结果</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义一组原子操作：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
v1 (ref 10))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
v2 (ref 100))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (dosync
</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>(ref-set v1 20) </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>(ref-set v2 200)) ; @v1=20 @v2=200</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
c (ref []))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
next1 [] (dosync (alter c conj (System/nanoTime))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
next2 [] (dosync (commute c conj (System/nanoTime))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (dotimes
[i 10] (next1))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (dotimes
[i 10] (next2))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：转账</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def a1 (ref
100))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def a2 (ref
0))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn transfer
[from n to] (dosync (when (&gt;= @from n) (alter from - n) (alter to + n))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(transfer a1
60 a2) ; @a1=40 @a2=60</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(transfer a1
60 a2) ; @a1=40 @a2=60</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(dotimes [_
10] (transfer a1 10 a2)) ; @a1=0 @a2=100</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(dotimes [_ 10]
(transfer a2 10 a1)) ; @a1=100 @a2=0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; </span><span
style='font-family:宋体'>并发转</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(use
'wr3.clj.numberx)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(dotimes [i 110]
(future (do (Thread/sleep (* 10 (random))) (transfer a1 1 a2)))) ; </span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924077"></a><a
name="_Toc281658910"></a><a name="_Toc281556416"></a><a name="_Toc281556316"></a><a
name="_Toc281556212"></a><a name="_Toc281556010"></a><a name="_Toc281555853"><span
lang=EN-US style='text-decoration:none'>8.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>validator</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：聊天室</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
<span style='background:lime'>notnull?</span> <u>(partial every? #(and (:from
%) (:text %)))</u> ) ; </span><span style='font-family:宋体'>判断是否都有值的</span><span
lang=EN-US style='font-family:Consolas'>partial</span><span style='font-family:
宋体'>函数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
board (ref [] <span style='background:yellow'>:validator</span> <span
style='background:lime'>notnull?</span>)) ; </span><span style='font-family:
宋体'>定义黑板</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
board (ref []))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>set-validator!</span> board notnull?)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
add2 [m] (dosync (<span style='background:yellow'>alter</span> board conj m))) </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defstruct
msg :from :text) ; </span><span style='font-family:宋体'>定义消息</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def m1 (struct msg &quot;qh&quot; &quot;qh
here&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
m2 (struct msg &quot;james&quot; &quot;james here&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (do
(add2 m1) (add2 m2))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (add2
(struct msg &quot;xx&quot; &quot;hello world&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (add2
&quot;some unknow&quot;) <span style='color:red'>; </span></span><span
style='font-family:宋体;color:red'>失败</span><span lang=EN-US style='font-family:
Consolas;color:red'>, </span><span style='font-family:宋体;color:red'>找不到非</span><span
lang=EN-US style='font-family:Consolas;color:red'>nil</span><span
style='font-family:宋体;color:red'>的</span><span lang=EN-US style='font-family:
Consolas;color:red'>:from</span><span style='font-family:宋体;color:red'>和</span><span
lang=EN-US style='font-family:Consolas;color:red'>:text</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (add2
(struct msg <span style='color:red'>nil</span> &quot;hello world&quot;)) <span
style='color:red'>; </span></span><span style='font-family:宋体;color:red'>失败</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (add2
(struct msg &quot;xx&quot; <span style='color:red'>nil</span>)) <span
style='color:red'>; </span></span><span style='font-family:宋体;color:red'>失败</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_Toc281924078"></a><a
name="_Toc281658911"></a><a name="_Toc281556417"></a><a name="_Toc281556317"></a><a
name="_Toc281556213"></a><a name="_Toc281556011"></a><a name="_Toc281555854"><span
lang=EN-US style='text-decoration:none'>8.2.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>watch</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>watch</span><span
style='font-family:宋体'>是在</span><span lang=EN-US style='font-family:Consolas'>ref</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>atom</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>agent</span><span
style='font-family:宋体'>状态改变时会被调用的函数，可以设置多个</span><span lang=EN-US
style='font-family:Consolas'>watch:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
v (ref 10))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
w0 [key id old new] (println &quot;key =&quot; key &quot;id =&quot; id))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (defn
w1 [key id old new] (println &quot;old =&quot; old &quot;new =&quot; new))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>add-watch</span> v &quot;watch1&quot; w1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>add-watch</span> v &quot;watch2&quot; w0)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (dosync
(alter v inc)) ; <span style='color:#5B6E6E'>old = 10 new = 11 \n key = watch2
id = #&lt;Ref@560932fe: 11&gt;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; @v
; 11</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (remove-watch
v &quot;watch2&quot;)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(dosync (alter v inc)) ; <span style='color:#5B6E6E'>old
= 11 new = 12</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184013"></a><a
name="_Toc281924079"></a><a name="_Toc281658912"></a><a name="_Toc281556418"></a><a
name="_Toc281556318"></a><a name="_Toc281556214"></a><a name="_Toc281556012"></a><a
name="_Toc281555855"><span lang=EN-US style='font-family:Consolas'>8.3<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>atom</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>atom</span><span
style='font-family:宋体'>基于</span><u><span lang=EN-US style='font-family:Consolas'>java.util.concurrent.atomic.*</span></u><span
style='font-family:宋体'>实现。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>atom</span><span
style='font-family:宋体'>比</span><span lang=EN-US style='font-family:Consolas'>ref</span><span
style='font-family:宋体'>更轻量级，</span><span lang=EN-US style='font-family:Consolas'>atom</span><span
style='font-family:宋体'>不能同时改变多个变量的值，但存取速度更快。</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v1 (<span style='background:yellow'>atom</span>
10))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>@</span><span lang=EN-US
style='font-family:Consolas'>v1 ; 10</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>reset!</span> v1
20) ; @v1=20</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>swap!</span> v1 +
3) ; @v1=23</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果</span><span lang=EN-US
style='font-family:Consolas'>atom</span><span style='font-family:宋体'>要同时改变多个变量的值，可以把多个变量组合成一个数据结构，如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
v2 (<span style='background:yellow'>atom</span> {:name &quot;qh&quot; :age
30}))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>@</span>v2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>reset!</span> v2 {:name &quot;james&quot; :age 20}) ;
@v2={:name &quot;james&quot;, :age 20}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>swap!</span> v2 assoc :age 25) ; @v2={:name
&quot;james&quot; :age 25</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184014"></a><a
name="_Toc281924080"></a><a name="_Toc281658913"></a><a name="_Toc281556419"></a><a
name="_Toc281556319"></a><a name="_Toc281556215"></a><a name="_Toc281556013"></a><a
name="_Toc281555856"><span lang=EN-US style='font-family:Consolas'>8.4<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>agent</span></u></a></h2>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def v (<span style='background:yellow'>agent</span>
3))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>@v <span style='color:#5B6E6E'>; 3</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>send</span> v
inc) <span style='color:#5B6E6E'>; </span></span><span style='font-family:宋体;
color:#5B6E6E'>发出指令后马上返回，让</span><span lang=EN-US style='font-family:Consolas;
color:#5B6E6E'>agent</span><span style='font-family:宋体;color:#5B6E6E'>把指令排入队列中在合适的时候执行</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>@v <span style='color:#5B6E6E'>; 4</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(send v * 10)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>@v <span style='color:#5B6E6E'>; 40</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>等待</span><span lang=EN-US
style='font-family:Consolas'>agent</span><span style='font-family:宋体'>执行结果：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>await</span> v)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>await-for</span>
100 v)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>validator</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
v1 (agent 3 <span style='background:yellow'>:validator</span> number?))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (send
v1 (fn [_] &quot;abc&quot;)) <span style='color:#5B6E6E'>; #&lt;Agent@786c1a82:
3&gt;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; @v1
; 3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (send
v1 inc) ; <span style='color:#C00000'>java.lang.RuntimeException: Agent is
failed, needs restart (NO_SOURCE_FILE:0)</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>agent-errors</span>
v1) ; </span><span lang=EN-US style='font-size:8.0pt;font-family:Consolas;
color:#C00000'>(#&lt;IllegalStateException java.lang.IllegalStateException:
Invalid reference state&gt;)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>clear-agent-errors</span>
v1) ; 3</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(send v1 inc) ; @v1=4</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc281658914"></a><a
name="_Toc281556420"></a><a name="_Toc281556320"></a><a name="_Toc281556216"></a><a
name="_Toc281556014"></a><a name="_Toc281555857"></a><a name="_Toc306184015"></a><a
name="_Toc281924081"><span lang=EN-US style='font-family:Consolas'>8.5<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>var</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>def</span> v 0)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>binding</span> <b>[v 10]</b> (println v) (<span
style='background:yellow'>set!</span> v 100) (println v))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(println v) ;
0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>lazy</span><span
style='font-family:宋体'>变量</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (def
v1 (<span style='background:yellow'>delay</span> (System/nanoTime))) ; </span><span
style='font-family:宋体'>定义但不求值</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (System/nanoTime)&nbsp;&nbsp;&nbsp;&nbsp;
; 14870352 <u>36144105</u></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>force</span>
v1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;;
14870352 <u>39977365</u> </span><span style='font-family:宋体'>第一次使用时求值</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; @v1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;; 14870352 <u>39977365</u> </span><span style='font-family:
宋体'>之后保持不变</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (System/nanoTime)&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;; 14870352 <u>46999304</u></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184016"></a><a
name="_Toc281924082"><span lang=EN-US style='font-family:Consolas'>8.6<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>状态更新对比</span></u></a></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>更新机制</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>更新手段</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>ref</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>atom</span></b></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>agent</span></b></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>常用方式</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>通过一个函数</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(dosync (<span
  style='background:yellow'>alter</span> v1 inc))</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>swap!</span> v1 inc)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>send-off</span> v inc)</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>通信方式</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>通过一个函数</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(dosync (<span
  style='background:yellow'>commute</span> v1 inc))</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#8CA0A0;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#8CA0A0;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>非阻塞方式</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>通过一个函数</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#8CA0A0;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#8CA0A0;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>send</span> v inc)</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>简单设值方式</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>通过一个值</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(dosysc (<span
  style='background:yellow'>ref-set</span> v1 0))</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>reset!</span> v1 10)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;background:#8CA0A0;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184017"><span
lang=EN-US style='font-family:Consolas'>8.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>多线程</span></u></a></h2>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(.start (Thread. #(do (Thread/sleep 3000) (println
10))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; </span><span
style='font-family:宋体'>注：上述语句马上返回，</span><span lang=EN-US style='font-family:
Consolas'>3s</span><span style='font-family:宋体'>后在控制台打印</span><span lang=EN-US
style='font-family:Consolas'>10</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>future</span><span style='font-family:
宋体'>版本如下：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (<span
style='background:yellow'>future</span> (do (Thread/sleep 3000) (println 10)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(dotimes [i 5] (<span style='background:yellow'>future</span>
(do (Thread/sleep 3000) (println 10))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-family:Consolas;color:black'>(doseq [msg [&quot;one&quot; &quot;two&quot;
&quot;three&quot; &quot;four&quot;]]</span></span><span lang=EN-US
style='font-family:Consolas;color:black'> <span class=apple-style-span>(<span
style='background:yellow'>future</span> (println &quot;Thread&quot; msg
&quot;says Hello World!&quot;)))</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184018"><span
lang=EN-US style='font-family:Consolas'>8.8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>pmap</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>的多线程版本，对比：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f [n]
(when (pos? n) (recur (dec n)))) ; </span><span style='font-family:宋体'>一个啥也不做的耗时操作</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(time f
100000000) ; 1150ms</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(time (dotimes
[i 2] (f 100000000))) ; </span><span style='font-family:宋体'>单线程版本</span><span
lang=EN-US style='font-family:Consolas'> 2321ms</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(time (doall
(pmap f (repeat 2 100000000)))) ; </span><span style='font-family:宋体'>多线程版本</span><span
lang=EN-US style='font-family:Consolas'> 2091ms</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：查看文件夹大小（字节数）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn <b>psize</b>
[f]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (if
(.isDirectory f)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
(apply + (<span style='background:yellow'>pmap</span> <b>psize</b> (.listFiles
f)))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(.length f)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(import
java.io.File)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(psize (File.
&quot;f:/lib/clojure&quot;))</span></p>

<h1><a name="_Toc281658915"></a><a name="_Toc281556421"></a><a
name="_Toc281556321"></a><a name="_Toc281556217"></a><a name="_Toc281556015"></a><a
name="_Toc281555858"></a><a name="_Toc306184019"></a><a name="_Toc281924083"><span
lang=EN-US style='font-family:Consolas'>9、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>GUI</span></u></a></h1>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(import
'javax.swing.JFrame)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(doto (JFrame.
&quot;hello world&quot;) (.setSize 200 200) (.setVisible true))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(doto
(javax.swing.JFrame.)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
(.setLayout (java.awt.GridLayout. 2 2 3 3))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (.add
(javax.swing.JTextField.))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (.add
(javax.swing.JLabel. &quot;Enter some text&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
(.setSize 300 80)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
(.setVisible true))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(ns gui-demo <u>(:import
[javax.swing JPanel JFrame] [java.awt Dimension])</u>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn panel2
[]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (let
[panel (<span style='background:yellow'>proxy</span> [JPanel] [] (paintComponent
[g] (.drawLine g 0 0 100 100)))]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
(<span style='background:yellow'>doto</span> panel (.setPreferredSize (Dimension.
400 400)))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn frame2
[panel]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (<span
style='background:yellow'>doto</span> (JFrame.) (.add panel) .pack .show))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(frame2 (panel2))
; </span><span style='font-family:宋体'>调用</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：摄氏度转换为华氏度</span></p>

<pre style='line-height:14.4pt;vertical-align:top'><span class=br0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>(</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>import '</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>javax</span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>swing JFrame JLabel JTextField JButton</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>)</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>java</span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>awt</span><span
class=sy0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>.</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>event ActionListener</span><span class=br0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>)</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; '</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>java</span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>awt GridLayout</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>))</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>(</span></span><span
class=kw1><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#B1B100'>let</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>[</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>frame </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>new JFrame </span><span class=st0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:red'>&quot;Celsius Converter (</span></span><span
class=st0><span style='font-size:10.5pt;color:red'>摄氏度转华氏度</span></span><span
class=st0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:red'>)&quot;</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>)</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; temp-text </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>new JTextField</span><span class=br0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>)</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; celsius-label </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>new JLabel </span><span class=st0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:red'>&quot;Celsius (</span></span><span
class=st0><span style='font-size:10.5pt;color:red'>摄氏度</span></span><span
class=st0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:red'>)&quot;</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>)</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; convert-button </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>new JButton </span><span class=st0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:red'>&quot;Convert (</span></span><span
class=st0><span style='font-size:10.5pt;color:red'>进行转换</span></span><span
class=st0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:red'>)&quot;</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>)</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; fahrenheit-label </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>new JLabel </span><span class=st0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:red'>&quot;Fahrenheit (</span></span><span
class=st0><span style='font-size:10.5pt;color:red'>华氏度</span></span><span
class=st0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:red'>)&quot;</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>)]</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> convert-button</span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>addActionListener</span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>proxy </span><span class=br0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>[</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>ActionListener</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>]</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>[]</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>actionPerformed </span><span class=br0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>[</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>evt</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>]</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=kw1><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#B1B100'>let</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>[</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>c </span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>(</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>Double/parseDouble </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> temp-text </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>getText</span><span class=br0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>)))]</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> fahrenheit-label</span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>setText </span><span class=br0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>(</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>str </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>+ </span><span class=nu0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#CC66CC'>32</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>* </span><span class=nu0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#CC66CC'>1.8</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> c</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>))</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=st0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:red'>&quot; Fahrenheit (</span></span><span
class=st0><span style='font-size:10.5pt;color:red'>华氏度</span></span><span
class=st0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:red'>)&quot;</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>))))))))</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>doto frame </span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span class=co1><i><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:gray'>;(.setDefaultCloseOperation (JFrame/EXIT_ON_CLOSE)) ; uncomment this to quit app on frame close</span></i></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>setLayout </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>new GridLayout </span><span class=nu0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#CC66CC'>2</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nu0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#CC66CC'>2</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=nu0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#CC66CC'>3</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nu0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#CC66CC'>3</span></span><span class=br0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>))</span></span></pre><pre
style='line-height:14.4pt;vertical-align:top'><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>add temp-text</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>)</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>add celsius-label</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>)</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>add convert-button</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>)</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>add fahrenheit-label</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>)</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>setSize </span><span
class=nu0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#CC66CC'>300</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=nu0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#CC66CC'>80</span></span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>)</span></span></pre><pre style='line-height:14.4pt;vertical-align:
top'><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>(</span></span><span class=sy0><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#66CC66'>.</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>setVisible true</span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#66CC66'>)))</span></span></pre>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc306184020"></a><a name="_Toc281924084"><span lang=EN-US
style='font-family:Consolas'>10、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>IO JDBC</span></u></a></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184021"></a><a
name="_Toc281924085"><span lang=EN-US style='font-family:Consolas'>10.1<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>文件</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>IO</span></u></h2>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>10.1.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>全部读</span></p>

<p class=MsoNormal><span style='font-family:宋体'>一次读入全部内容：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(use '<u>clojure.contrib.duck-streams</u>)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>slurp</span>
&quot;somefile.txt&quot;) ; </span><span style='font-family:宋体'>把文件内容读入字符串</span><span
lang=EN-US style='font-family:Consolas'>&nbsp; slurp</span><span
style='font-family:宋体'>：咔咔吃</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def s (slurp &quot;somefile.txt&quot;))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以指明</span><span lang=EN-US
style='font-family:Consolas'>encoding</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>slurp</span>
&quot;gbk.txt&quot; <span style='background:yellow'>:encoding</span>
&quot;gbk&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>写字符串到文件：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>spit</span>
&quot;output.txt&quot; &quot;some output text&quot;) ; </span><span
style='font-family:宋体'>写字符串内容入文件。</span><span lang=EN-US style='font-family:
Consolas'>spit</span><span style='font-family:宋体'>原意：吐口水</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>append-spit</span>
&quot;output.txt&quot; &quot;\nmore text with spit append&quot;) ; </span><span
style='font-family:宋体'>追加文件内容</span></p>

<p class=MsoNormal><span style='font-family:宋体'>参数：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>:<span style='background:yellow'>append</span>
true</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>:<span style='background:yellow'>encoding</span>
&quot;UTF-8&quot;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>10.1.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>逐行读</span></p>

<p class=MsoNormal><span style='font-family:宋体'>每次读入一行：</span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-family:Consolas'>(0)<span style='font:7.0pt "Times New Roman"'>
</span></span><span style='font-family:宋体'>使用</span><b><u><span lang=EN-US
style='font-family:Consolas'>java.io.*</span></u></b></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(with-open [r (java.io.BufferedReader. (java.io.FileReader.
&quot;gbk.txt&quot;))]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; (let [seq (line-seq r)]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>(count seq)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-family:Consolas'>(1)<span style='font:7.0pt "Times New Roman"'>
</span></span><span style='font-family:宋体'>使用</span><b><u><span lang=EN-US
style='font-family:Consolas'>clojure.java.io/reader</span></u></b></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-family:宋体'>例子：打印短行</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(with-open [rdr (<span style='background:yellow'>clojure.java.io/reader</span>
&quot;gbk.txt&quot; :encoding &quot;gbk&quot;)]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(doseq [line (<span style='background:
yellow'>line-seq</span> rdr)] (when (&lt; (count line) 10) (println line))))</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-family:宋体'>例子：所有行放入</span><span
lang=EN-US style='font-family:Consolas'>vector</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(with-open [rdr (<span style='background:yellow'>clojure.java.io/reader</span>
&quot;gbk.txt&quot; :encoding &quot;gbk&quot;)]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(reduce conj [] (line-seq rdr)))</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-family:宋体'>例子：计算特定行的数目</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>(def n (atom 0))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(with-open [rdr (<span style='background:yellow'>clojure.java.io/reader</span>
&quot;gbk.txt&quot; :encoding &quot;gbk&quot;)]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(doseq [line (<span style='background:
yellow'>line-seq</span> rdr)] (when (&lt; (count line) 10) (swap! n inc))))</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>@n</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:18.0pt'><span style='font-family:宋体'>例子：简单实现</span><span
lang=EN-US style='font-family:Consolas'>wc Cl cust.txt</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(with-open [rdr (<span style='background:yellow'>clojure.java.io/reader</span>
&quot;cust.txt&quot; :encoding &quot;gbk&quot;)]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(count (<span style='background:yellow'>line-seq</span>
rdr)))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>例子：标记行号</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(use '[clojure.contrib.seq-utils :only (<b><span
style='background:yellow'>indexed</span></b>)])</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(with-open [r (<span style='background:yellow'>clojure.java.io/reader</span>
&quot;gbk.txt&quot; :encoding &quot;gbk&quot;)]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(doseq [[i line] (<b><span
style='background:yellow'>indexed</span></b> (<span style='background:yellow'>line-seq</span>
r))] (println i &quot;:&quot; line)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(2)</span><span
style='font-family:宋体'>使用</span><b><u><span lang=EN-US style='font-family:Consolas'>clojure.contrib.duck-streams</span></u></b></p>

<p class=MsoNormal style='margin-left:21.0pt'><a name="OLE_LINK6"></a><a
name="OLE_LINK5"><span lang=EN-US style='font-family:Consolas'>(use '[<u>clojure.contrib.duck-streams</u>
:only (<u>reader</u>)])</span></a></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>line-seq</span> (<span
style='background:yellow'>reader</span> &quot;output.txt&quot;))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>with-open</span>
[l (reader &quot;output.txt&quot;)] (vec (line-seq l)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(with-open [ r (reader &quot;output.txt&quot;)]
(doseq [l (line-seq r)] (println l)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：</span><span lang=EN-US
style='font-family:Consolas'>with-open</span><span style='font-family:宋体'>会自动关闭</span><span
lang=EN-US style='font-family:Consolas'>[]</span><span style='font-family:宋体'>内的每个值。</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>10.1.3<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>文件树</span></p>

<p class=MsoNormal><span style='font-family:宋体'>得到文件树：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>file-seq</span>
(java.io.File. &quot;.&quot;))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(count (file-seq (java.io.File. &quot;.&quot;)))</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc281924086"></a><a
name="_Toc306184022"><span lang=EN-US style='font-family:Consolas'>10.2<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>网络</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>IO</span></u></h2>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>10.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>读文本</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;(with-open [s (.openStream (java.net.URL. &quot;<u>http://g.cn</u>&quot;))]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(let [buf (java.io.BufferedReader.
(java.io.InputStreamReader. s))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:42.0pt'><span
lang=EN-US style='font-family:Consolas'>seq (<span style='background:yellow'>line-seq</span>
buf)]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>(apply str seq)))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>10.2.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>读二进制</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(let [con (-&gt; &quot;<u>http://g.cn</u>&quot;
java.net.URL. .openConnection)</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:31.5pt'><span
lang=EN-US style='font-family:Consolas'>fields (reduce (fn [h v] (assoc h
(.getKey v) (into [] (.getValue v))))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:115.5pt'><span
lang=EN-US style='font-family:Consolas'>{} (.getHeaderFields con))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:31.5pt'><span
lang=EN-US style='font-family:Consolas'>in (java.io.BufferedInputStream.
(.getInputStream con))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:31.5pt'><span
lang=EN-US style='font-family:Consolas'>out (java.io.BufferedOutputStream.
(java.io.FileOutputStream. &quot;<b><u>out.file</u></b>&quot;))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:31.5pt'><span
lang=EN-US style='font-family:Consolas'>buffer (make-array Byte/TYPE 1024)]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(loop [g (.read in buffer) r 0]</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>(if-not (= g -1)</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:31.5pt'><span
lang=EN-US style='font-family:Consolas'>(do</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>(println (String. buffer
&quot;UTF-8&quot;))</span></p>

<p class=MsoNormal style='margin-left:63.0pt'><span lang=EN-US
style='font-family:Consolas'>(.write out buffer 0 g)</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>(recur (.read in buffer) (+ r g)))))</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(.close in)</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(.close out)</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>(.disconnect con))</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184023"><span
lang=EN-US style='font-family:Consolas'>10.3<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>配置、数据文件</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>不用象其他语言一样使用</span><span lang=EN-US style='font-family:
Consolas'>xml</span><span style='font-family:宋体'>、</span><span lang=EN-US
style='font-family:Consolas'>json</span><span style='font-family:宋体'>、</span><span
lang=EN-US style='font-family:Consolas'>yaml</span><span style='font-family:
宋体'>之类的外部格式来存储数据，使用</span><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>代码即数据就能很地完成。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>把代码结构写入文件：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def dbs '[oracle mssql sybase db2 mysql informix
postgresql])</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>spit</span>
&quot;<u>conf3.clj</u>&quot; dbs)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>文件内容为：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:silver'>[oracle mssql sybase db2 mysql
informix postgresql]</span></p>

<p class=MsoNormal><span style='font-family:宋体'>读出使用：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def c (<span style='background:yellow'>read-string</span>
(<span style='background:yellow'>slurp</span> &quot;<u>conf3.clj</u>&quot;)))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>凡是</span><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>表达出来的数据结构都可以进行存储，如：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def m {:name &quot;</span><span style='font-family:
宋体'>qiujj</span><span lang=EN-US style='font-family:Consolas'>&quot; :gender 'male
:age 20 :mail [&quot;qh@mail&quot; &quot;james@msn.com&quot;]})</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:silver'>; </span><span style='font-family:
宋体;background:silver'>注意：在</span><span lang=EN-US style='font-family:Consolas;
background:silver'>1.conf</span><span style='font-family:宋体;background:silver'>中</span><span
lang=EN-US style='font-family:Consolas;background:silver'>'male</span><span
style='font-family:宋体;background:silver'>是没有</span><span lang=EN-US
style='font-family:Consolas;background:silver'>'</span><span style='font-family:
宋体;background:silver'>的</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(spit &quot;1.conf&quot; m) ; spit</span><span
style='font-family:宋体'>写入可能会乱码，自行编辑改成</span><span lang=EN-US style='font-family:
Consolas'>utf8</span><span style='font-family:宋体'>即可</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def c (read-string (slurp &quot;1.conf&quot;)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果</span><span lang=EN-US
style='font-family:Consolas'>2.conf</span><span style='font-family:宋体'>内容为：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(* 2 3 4)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>需要配合</span><span lang=EN-US
style='font-family:Consolas'>eval</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(eval (read-string (slurp &quot;2.conf&quot;)))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><a name="_读写json"></a><span
lang=EN-US style='text-decoration:none'>10.3.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>读写</span><span
lang=EN-US>json</span></p>

<p class=MsoNormal><span style='font-family:宋体'>需要使用</span><span lang=EN-US
style='font-family:Consolas'>json</span><span style='font-family:宋体'>与</span><span
lang=EN-US style='font-family:Consolas'>js</span><span style='font-family:宋体'>或者其他语言交换数据时：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(use '<span style='background:yellow'>clojure.contrib.json</span>)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>json-str</span> [1
2 3 4]) ; &quot;[1,2,3,4]&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>read-json</span>
&quot;[1,2,3,4]&quot;) ; [1 2 3 4]</span></p>

<p class=MsoNormal><span style='font-family:宋体'>其他：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:21.0pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=165 valign=top style='width:123.75pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>pprint-json</span></p>
  </td>
  <td width=184 valign=top style='width:137.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>打印</span><span lang=EN-US
  style='font-family:Consolas'>pretty</span><span style='font-family:宋体'>格式的</span><span
  lang=EN-US style='font-family:Consolas'>json</span></p>
  </td>
 </tr>
 <tr>
  <td width=165 valign=top style='width:123.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>print-json</span></p>
  </td>
  <td width=184 valign=top style='width:137.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>打印</span><span lang=EN-US
  style='font-family:Consolas'>json</span></p>
  </td>
 </tr>
 <tr>
  <td width=165 valign=top style='width:123.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(write-json
  o out)</span></p>
  </td>
  <td width=184 valign=top style='width:137.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>输出到</span><span lang=EN-US
  style='font-family:Consolas'>out</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>10.3.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>读写</span><span
lang=EN-US>xml</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>clojure.xml</span><span style='font-family:宋体'>来解析</span><span
lang=EN-US style='font-family:Consolas'>xml</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如</span><span lang=EN-US
style='font-family:Consolas'>a.xml</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>DDDDDDDDDDDDDDDDDDDDDDDDDDD</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;?xml
version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;<span
style='background:yellow'>persons </span>meta=&quot;</span><span
style='font-family:宋体'>测试</span><span lang=EN-US style='font-family:Consolas'>clojure.xml&quot;&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &lt;<span
style='background:yellow'>count</span>&gt;3&lt;/count&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &lt;<span
style='background:yellow'>person </span>id=&quot;qh&quot;&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;qh&lt;/name&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;age&gt;16&lt;/age&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;email&gt;qh@mail&lt;/email&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &lt;/<span
style='background:yellow'>person</span>&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &lt;<span
style='background:yellow'>person </span>id=&quot;james&quot;&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;james&lt;/name&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;age&gt;26&lt;/age&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;email&gt;james@mail&lt;/email&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &lt;/<span
style='background:yellow'>person</span>&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &lt;<span
style='background:yellow'>person </span>id=&quot;qiuiuh&quot;&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;name&gt;</span><span
style='font-family:宋体'>qiujj</span><span lang=EN-US style='font-family:Consolas'>&lt;/name&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;age&gt;36&lt;/age&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;email&gt;qiuiuh@mail&lt;/email&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &lt;/<span
style='background:yellow'>person</span>&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/<span
style='background:yellow'>persons</span>&gt;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>DDDDDDDDDDDDDDDDDDDDDDDDDDD</span></p>

<p class=MsoNormal><span style='font-family:宋体'>代码：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(use 'clojure.xml)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(def p (<span style='background:yellow'>parse</span>
(java.io.File. &quot;a.xml&quot;)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>每个节点会被解释为含</span><span
lang=EN-US style='font-family:Consolas'>{:tag .. :attr .. :content ..}</span><span
style='font-family:宋体'>三部分的</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>，例如</span><span lang=EN-US style='font-family:Consolas'>persons</span><span
style='font-family:宋体'>根节点</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=97 valign=top style='width:72.55pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>每部分标识</span></b></p>
  </td>
  <td width=346 valign=top style='width:259.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>值</span></b></p>
  </td>
  <td width=233 valign=top style='width:174.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>说明</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.55pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:tag</span></p>
  </td>
  <td width=346 valign=top style='width:259.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:persons</span></p>
  </td>
  <td width=233 valign=top style='width:174.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>总是一个</span><span lang=EN-US
  style='font-family:Consolas'>key</span><span style='font-family:宋体'>类型变量</span></p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.55pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:attr</span></p>
  </td>
  <td width=346 valign=top style='width:259.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>{:meta
  &quot;</span><span style='font-family:宋体'>测试</span><span lang=EN-US
  style='font-family:Consolas'>clojure.xml&quot;}</span></p>
  </td>
  <td width=233 valign=top style='width:174.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>一个</span><span lang=EN-US
  style='font-family:Consolas'>map</span><span style='font-family:宋体'>，属性名为</span><span
  lang=EN-US style='font-family:Consolas'>key</span><span style='font-family:
  宋体'>类型</span></p>
  </td>
 </tr>
 <tr>
  <td width=97 valign=top style='width:72.55pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:content</span></p>
  </td>
  <td width=346 valign=top style='width:259.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[{:tag
  :name,</span><span lang=EN-US> </span><span lang=EN-US style='font-family:
  Consolas'>:attrs nil, :content [&quot;qh&quot;]}</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>{:tag :age, :attrs nil, :content
  [&quot;16&quot;]}</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>...]</span></p>
  </td>
  <td width=233 valign=top style='width:174.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>一个节点</span><span lang=EN-US
  style='font-family:Consolas'>/</span><span style='font-family:宋体'>字符串数组，每个节点又被递归解析。</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>xml-seq</span><span style='font-family:宋体'>来处理每个节点（本例是对有属性的节点打印其属性）：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(doseq [n (<span style='background:yellow'>xml-seq</span>
p) :when (:attrs n)] (println&nbsp; (:attrs n)))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>结果：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>{:meta </span><span style='font-family:宋体'>测试</span><span
lang=EN-US style='font-family:Consolas'>clojure.xml}</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>{:id qh}</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>{:id james}</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>{:id qiuiuh}</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184024"><span
lang=EN-US style='font-family:Consolas'>10.4<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>JDBC</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>数据库</span></u><u><span lang=EN-US
style='font-family:Consolas'>IO</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>参考：</span><a
href="http://en.wikibooks.org/wiki/Clojure_Programming/Examples/JDBC_Examples"><span
lang=EN-US style='font-family:Consolas'>http://en.wikibooks.org/wiki/Clojure_Programming/Examples/JDBC_Examples</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; </span><span
style='font-family:宋体'>引用</span><span lang=EN-US style='font-family:Consolas'>contrib</span><span
style='font-family:宋体'>包</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(use '<u><span style='background:yellow'>clojure.contrib.sql</span></u>)
; open &quot;<u>test_sql.clj</u>&quot; for examples.</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; </span><span
style='font-family:宋体'>定义</span><span lang=EN-US style='font-family:Consolas'>DataSource</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def db {</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>:classname &quot;org.h2.Driver&quot;, </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>:subprotocol &quot;h2&quot;, </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>:subname &quot;mem:testdb&quot;, </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>:user &quot;sa&quot;,</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>:password &quot;&quot;})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; </span><span
style='font-family:宋体'>查询</span><span lang=EN-US style='font-family:Consolas'>sql</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>with-connection</span>
db </span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; (<span style='background:yellow'>with-query-results</span>
rs [&quot;select 'qh' name,20 age&quot;] </span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp; (doseq [r rs] (println r))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; </span><span
style='font-family:宋体'>创建</span><span lang=EN-US style='font-family:Consolas'>,</span><span
style='font-family:宋体'>删除</span><span lang=EN-US style='font-family:Consolas'>Table</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>with-connection</span> db (<span style='background:
yellow'>transaction</span> (<span style='background:yellow'>create-table</span>
:t1 [:name1 :varchar] [:age1 :int])))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(with-connection
db (transaction&nbsp;&nbsp; (try (<span style='background:yellow'>drop-table</span>
:t1) (catch Exception _))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; </span><span
style='font-family:宋体'>增加插入数据</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (with-connection
db (transaction (<span style='background:yellow'>insert-values</span> :t1
[:name :age] [&quot;qh&quot; 20])))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; </span><span
style='font-family:宋体'>查询数据</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>with-connection</span> db (<span style='background:
yellow'>with-query-results</span> rs [&quot;select * from t1&quot;] (dorun (map
#(println %) rs))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; update</span><span
style='font-family:宋体'>数据</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (with-connection
db (transaction (<span style='background:yellow'>update-values</span> :t1
[&quot;name=?&quot; &quot;qh&quot;] {:age 35})))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>; </span><span
style='font-family:宋体'>删除数据</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (with-connection
db (transaction (<span style='background:yellow'>delete-rows</span> :t1
[&quot;name=?&quot; &quot;qh&quot;])))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184025"><span
lang=EN-US style='font-family:Consolas'>10.5<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>ClojureQL</span></u></a></h2>

<p class=MsoNormal><a href="http://www.clojureql.org/"><span lang=EN-US
style='font-family:Consolas'>http://www.clojureql.org/</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>用更</span><span lang=EN-US
style='font-family:Consolas'>DSL</span><span style='font-family:宋体'>的方式书写</span><span
lang=EN-US style='font-family:Consolas'>SQL</span><span style='font-family:
宋体'>语句，自动转化为</span><span lang=EN-US style='font-family:Consolas'>SQL92</span><span
style='font-family:宋体'>，支持</span><span lang=EN-US style='font-family:Consolas'>MySQL</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Postgresql</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184026"><span
lang=EN-US style='font-family:Consolas'>10.6<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>MongoDB</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>操作</span></u></h2>

<p class=MsoNormal><a href="https://github.com/somnium/congomongo"><span
lang=EN-US style='font-family:Consolas'>https://github.com/somnium/congomongo</span></a></p>

<p class=MsoNormal><a href="Nasoft内部手册（DB）.doc"><span lang=EN-US
style='font-family:Consolas'>MongoDB</span><span style='font-family:宋体'>文档</span></a><span
lang=EN-US style='font-family:Consolas'> </span></p>

<p class=MsoNormal><span style='font-family:宋体'>驱动源码：</span><a
href="file:///F:\data\__DB\MongoDB\clojure驱动\somnium-congomongo-0.1.3\src\somnium"><span
lang=EN-US style='font-family:Consolas'>congomongo.clj</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>测试源码：</span><a
href="file:///F:\data\__DB\MongoDB\clojure驱动\somnium-congomongo-0.1.3\test\"><span
lang=EN-US style='font-family:Consolas'>congomongo_test.clj</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>10.6.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:"微软雅黑","sans-serif"'>创建连接</span></p>

<p class=MsoNormal><span style='font-family:宋体'>初始化：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(use <b><u>'somnium.congomongo</u></b>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>mongo!</span> :db &quot;<b><u>cbs400</u></b>&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>set-database!</span> &quot;<b><u>test</u></b>&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者更正规：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>with-mongo</span>
(<span style='background:yellow'>make-connection</span> &quot;<b><u>cbs400</u></b>&quot;))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>...)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以连接多个</span><span lang=EN-US
style='font-family:Consolas'>mongodb</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(def db (make-connection :example </span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>{:host &quot;server1&quot;}</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>{:host &quot;server2&quot; :port 25017}))</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>10.6.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>CRUD</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=77 valign=top style='width:57.6pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>CRUD </span></b></p>
  </td>
  <td width=336 valign=top style='width:251.95pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>代码示例</span></b></p>
  </td>
  <td width=270 valign=top style='width:202.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>MongoDB</span></b><b><span
  style='font-family:宋体'>命令</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=77 valign=top style='width:57.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas;
  background:yellow'>C</span></b><span lang=EN-US style='font-family:Consolas'>reate
  </span></p>
  <p class=MsoNormal><span style='font-family:宋体'>增</span></p>
  </td>
  <td width=336 valign=top style='width:251.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>insert!</span> :cust </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>{:name &quot;qh&quot; :age 30})</span></p>
  </td>
  <td width=270 valign=top style='width:202.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.save(</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>{name:&quot;qh&quot;,age:30})</span></p>
  </td>
 </tr>
 <tr>
  <td width=77 valign=top style='width:57.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas;
  background:yellow'>R</span></b><span lang=EN-US style='font-family:Consolas'>ead</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>查</span></p>
  </td>
  <td width=336 valign=top style='width:251.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>fetch-one</span> :cust) <span style='color:#5B6E6E'>;
  p1</span></span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>fetch</span> :cust :limit 10)</span></p>
  </td>
  <td width=270 valign=top style='width:202.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.findOne()</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find().limit(10)</span></p>
  </td>
 </tr>
 <tr>
  <td width=77 valign=top style='width:57.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas;
  background:yellow'>U</span></b><span lang=EN-US style='font-family:Consolas'>pdate
  </span><span style='font-family:宋体'>改</span></p>
  </td>
  <td width=336 valign=top style='width:251.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>update!</span> :cust <span style='color:#5B6E6E'>p1</span>
  (merge p1 {:name &quot;james&quot;}))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>update!</span> :cust {:_id &quot;01&quot;} {:name
  &quot;james&quot;})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>update!</span> :cust {:_id &quot;01&quot;} </span></p>
  <p class=MsoNormal style='text-indent:15.75pt'><span lang=EN-US
  style='font-family:Consolas'>{&quot;$set&quot; {:name &quot;james&quot;}}) ; </span><span
  style='font-family:宋体'>更新单个字段</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>存在则更新，没有则增加</span></p>
  <pre><span lang=EN-US style='font-family:Consolas'>(update! :coll </span></pre><pre
  style='text-indent:12.0pt'><span lang=EN-US style='font-family:Consolas'>{:_id x}</span></pre><pre
  style='text-indent:12.0pt'><span lang=EN-US style='font-family:Consolas'>{:_id x :name &quot;Joe&quot; :age 20})</span></pre></td>
  <td width=270 valign=top style='width:202.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.update({name:&quot;qh&quot;},</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>{$set:{name:&quot;james&quot;}}, true)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>存在则更新，没有则增加</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>coll.update(
  </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>{ _id: X }, </span></p>
  <p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>{ _id: X, name: &quot;Joe&quot;, age: 20 },
  true);</span></p>
  </td>
 </tr>
 <tr>
  <td width=77 valign=top style='width:57.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas;
  background:yellow'>D</span></b><span lang=EN-US style='font-family:Consolas'>elete</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>删</span></p>
  </td>
  <td width=336 valign=top style='width:251.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>destroy!</span> :cust <span style='color:#5B6E6E'>p1</span>)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>destroy!</span> :cust {:name 'QH' :age 30})</span></p>
  </td>
  <td width=270 valign=top style='width:202.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.remove({name:&quot;qh&quot;})</span></p>
  </td>
 </tr>
 <tr>
  <td width=77 valign=top style='width:57.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=336 valign=top style='width:251.95pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=270 valign=top style='width:202.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width=724
 style='width:543.1pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>高级操作</span></b></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>代码示例</span></b></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>MongoDB</span></b><b><span
  style='font-family:宋体'>命令</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>插入多条</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>mass-insert!</span> :cust </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>[{:name &quot;a&quot;} {:name &quot;b&quot;}
  {:name &quot;c&quot;}])</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>条件查询</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:where</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fetch :cust
  </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas;background:yellow'>:where</span><span lang=EN-US
  style='font-family:Consolas'> {:name &quot;a&quot; :age {&quot;&amp;gt&quot;
  30}})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fetch :cust
  <span style='background:yellow'>:where</span> {:age {&quot;$exists&quot;
  true}})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fetch :cust
  :<span style='background:yellow'>where</span> </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>{:name {&quot;$in&quot; [&quot;qh&quot;
  &quot;qiu]}})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fetch :cust
  :<span style='background:yellow'>where</span> </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>{:age {&quot;$gt&quot; 30 &quot;$lt&quot; 50}})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fetch :cust
  :<span style='background:yellow'>where</span> {&quot;<span style='background:
  yellow'>$or</span>&quot; </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>[{:name &quot;qh&quot;} {:age 30}]})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fetch :cust
  :<span style='background:yellow'>where</span> {:name #&quot;^q&quot;})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;; </span><span
  style='font-family:宋体'>用正则表达式相当于</span><span lang=EN-US style='font-family:
  Consolas'>sql</span><span style='font-family:宋体'>中的</span><span lang=EN-US
  style='font-family:Consolas'>like</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find(</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>{name:&quot;a&quot;,age:{$gt:30}})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find({age:{$exists:true}</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find(</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>{name:{$in:['qh','qiu']}})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find(</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>{age:{$gt:30,$lt:50})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find({&quot;$or&quot;</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>[{name:'qh'},{age:30}]})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find({name:
  /^q/})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find().min(</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>查询范围</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fetch :cust
  :<span style='background:yellow'>skip</span> 10 :<span style='background:
  yellow'>limit</span> 3)</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find.skip(10).limit(3)</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>选择指定列</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:only</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fetch :cust
  :only [&quot;name&quot; &quot;age&quot;])</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find({},</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>{name:1, age:1}</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>排序</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fetch :cust
  :<span style='background:yellow'>sort</span> {:name 1})</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find().sort({name:1})</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>count</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>fetch-count</span> :cust)</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.find().count()</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>distinct</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>distinct-values</span> :cust &quot;ptype&quot;)&nbsp;
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>;
  </span><span style='font-family:宋体;color:#5B6E6E'>注意列名用</span><span
  lang=EN-US style='font-family:Consolas;color:#5B6E6E'>str</span><span
  style='font-family:宋体;color:#5B6E6E'>类型</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.distinct(&quot;ptype&quot;)</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>index</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>add-index!</span> :cust </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>[:org :sex] :name &quot;myIndex2&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>get-indexes</span> :cust)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>drop-index!</span> :cust [:org [:sex -1]])</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.ensureIndex(</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>{org:1,age:1})</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>db.cust.dropIndexes()</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>插入文件</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>fetch-files</span> :cust)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>insert-file!</span> :cust (.getBytes
  &quot;blah..&quot;) </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>:filename &quot;f1&quot; :contentType
  &quot;dir1/file1&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>fetch-one-file</span> :cust </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>:where {:filename &quot;f1&quot;})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>destroy-file!</span> :cust {:filename
  &quot;f1&quot;})</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>insert-file!</span> :cust (.getBytes
  &quot;blah..&quot;))</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map-reduce</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>server-eval</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>删除库</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>drop-database!</span> &quot;test1&quot;)</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=99 valign=top style='width:74.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>删除集合</span></p>
  </td>
  <td width=352 valign=top style='width:264.2pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>drop-coll!</span> :cust)</span></p>
  </td>
  <td width=273 valign=top style='width:204.55pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>10.6.3<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>object-id</span></p>

<p class=MsoNormal><span style='font-family:宋体'>每条记录都有内置</span><span
lang=EN-US style='font-family:Consolas'>mongodb</span><span style='font-family:
宋体'>自动生成</span><span style='font-family:宋体'>的</span><span style='font-family:
Consolas'> </span><span lang=EN-US style='font-family:Consolas'>:_id </span><span
style='font-family:宋体'>字段，用户可以自行制定但需要自行保证唯一性。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>objectId
&lt;--&gt; </span><span style='font-family:宋体'>字符串：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(-&gt; p :id
str)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(object-id &quot;</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#408080'>4de706a71da3906ba3240b83</span><span
lang=EN-US style='font-family:Consolas'>&quot;) ; </span><span
style='font-family:宋体'>必须是</span><span lang=EN-US style='font-family:Consolas'>24</span><span
style='font-family:宋体'>位</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc281924087"></a><a name="_Toc306184027"><span lang=EN-US
style='font-family:Consolas'>11、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>Unit Test</span></u></a></h1>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(use '<span
style='background:yellow'>clojure.contrib.test-is</span>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>deftest</span> f1 [] (<span style='background:yellow'>is</span>
(= 10 (+ 7 3))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(deftest f2 []
(is (= 10 (+ 7 13))))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(deftest f3 []
</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (<span
style='background:yellow'>are</span> (= <span style='background:yellow'>_1</span>
<span style='background:yellow'>_2</span>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
2 (+ 1 1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
4 (* 2 2)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f1) ; nil</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(f2) ; </span><span
style='font-family:宋体'>打印出错信息</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：</span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-family:Consolas;color:black'>(<span style='background:yellow'>are</span>
(= _1 _2)</span></span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span class=apple-style-span><span
lang=EN-US style='font-family:Consolas;color:black'>2 (+ 1 1)</span></span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span class=apple-style-span><span
lang=EN-US style='font-family:Consolas;color:black'>4 (* 2 2))</span></span></p>

<p class=MsoNormal><span class=apple-style-span><span style='font-family:宋体;
color:black'>模板会按照变量</span></span><span class=apple-style-span><span
lang=EN-US style='font-family:Consolas;color:black'>_1, _2</span></span><span
class=apple-style-span><span style='font-family:宋体;color:black'>展开为：</span></span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-family:Consolas;color:black'>(do </span></span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span class=apple-style-span><span
lang=EN-US style='font-family:Consolas;color:black'>(<span style='background:
yellow'>is</span> (= 2 (+ 1 1)))</span></span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span class=apple-style-span><span
lang=EN-US style='font-family:Consolas;color:black'>(<span style='background:
yellow'>is</span> (= 4 (* 2 2))))</span></span></p>

<h1><a name="_Toc306184028"><span lang=EN-US style='font-family:Consolas'>12、<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>web</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>开发</span></u></h1>

<p class=MsoNormal><span style='font-family:宋体'>一些新的趋势：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>精通</span><span lang=EN-US
style='font-family:Consolas'>JavaScript</span><span style='font-family:宋体'>，使用</span><span
lang=EN-US style='font-family:Consolas'>jQuery</span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Google Closure</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Mobile First</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Html5</span><span
style='font-family:宋体'>应用：可离线运行</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>使用函数式编程和</span><span lang=EN-US
style='font-family:Consolas'>key-value</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>n<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Server</span><span
style='font-family:宋体'>端</span><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>：函数式，</span><span lang=EN-US style='font-family:Consolas'>key-value</span><span
style='font-family:宋体'>（</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>）</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>n<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Client</span><span
style='font-family:宋体'>端</span><span lang=EN-US style='font-family:Consolas'>JavaScript</span><span
style='font-family:宋体'>：函数式，</span><span lang=EN-US style='font-family:Consolas'>key-value</span><span
style='font-family:宋体'>（</span><span lang=EN-US style='font-family:Consolas'>json</span><span
style='font-family:宋体'>）</span></p>

<p class=MsoNormal style='margin-left:42.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>n<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>DB</span><span
style='font-family:宋体'>端</span><span lang=EN-US style='font-family:Consolas'>NoSQL</span><span
style='font-family:宋体'>：函数式，</span><span lang=EN-US style='font-family:Consolas'>key-value</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184029"><span
lang=EN-US style='font-family:Consolas'>12.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>Ring</span></u></a></h2>

<p class=MsoNormal><span class=apple-style-span><span style='font-family:宋体;
color:black'>类似于</span></span><span class=apple-style-span><span lang=EN-US
style='font-family:Consolas;color:black'>Python's WSGI and Ruby's Rack</span></span></p>

<p class=MsoNormal><a href="https://github.com/mmcgrana/ring"><span lang=EN-US
style='font-family:Consolas'>https://github.com/mmcgrana/ring</span></a><span
lang=EN-US style='font-family:Consolas'> (</span><span style='font-family:宋体'>主页</span><span
lang=EN-US style='font-family:Consolas'>)</span></p>

<p class=MsoNormal><a href="https://github.com/laurentpetit/ring-java-servlet"><span
lang=EN-US style='font-family:Consolas'>https://github.com/laurentpetit/ring-java-servlet</span></a><span
lang=EN-US style='font-family:Consolas'> (Servlet)</span></p>

<p class=MsoNormal><a
href="http://mmcgrana.github.com/2010/03/clojure-web-development-ring.html"><span
lang=EN-US style='font-family:Consolas'>http://mmcgrana.github.com/2010/03/clojure-web-development-ring.html</span></a><span
lang=EN-US style='font-family:Consolas'> (</span><span style='font-family:宋体'>教程</span><span
lang=EN-US style='font-family:Consolas'>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>步骤：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>下载项目工具</span><span lang=EN-US
style='font-family:Consolas'>lein.bat (</span><a
href="https://github.com/technomancy/leiningen"><span lang=EN-US
style='font-family:Consolas'>https://github.com/technomancy/leiningen</span></a><span
lang=EN-US style='font-family:Consolas'>)</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>运行（下载</span><span lang=EN-US
style='font-family:Consolas'>jar</span><span style='font-family:宋体'>包）：</span><span
lang=EN-US style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>lein self-install</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>从下载</span><span lang=EN-US
style='font-family:Consolas'>Ring</span><span style='font-family:宋体'>解压（版本</span><span
lang=EN-US style='font-family:Consolas'>0.3.5</span><span style='font-family:
宋体'>）</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>在</span><span lang=EN-US
style='font-family:Consolas'>Ring</span><span style='font-family:宋体'>解压后的目录下运行（下载</span><span
lang=EN-US style='font-family:Consolas'>jar</span><span style='font-family:
宋体'>包到</span><span lang=EN-US style='font-family:Consolas'>lib</span><span
style='font-family:宋体'>目录及</span><span lang=EN-US style='font-family:Consolas'>maven</span><span
style='font-family:宋体'>目录下）：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>lein deps</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>创建应用</span><span lang=EN-US
style='font-family:Consolas'>hello_world.clj</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>------------------------------------</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(use '<span style='background:yellow'>ring.adapter.jetty</span>)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn <b>app</b> [req]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; {<span style='background:yellow'>:status</span>&nbsp;
200</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; <span style='background:yellow'>:headers</span>
{&quot;Content-Type&quot; &quot;text/html; charset=utf-8&quot;}</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; <span style='background:yellow'>:body</span>&nbsp;&nbsp;&nbsp;
&quot;Hello World from Ring (cn</span><span style='font-family:宋体'>中文</span><span
lang=EN-US style='font-family:Consolas'>)&quot;})</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(<span style='background:yellow'>run-jetty</span> <b>app</b>
{:port 8080})</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>------------------------------------</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>运行：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>java -cp &quot;lib/*&quot; clojure.main
hello_world.clj</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span><span
lang=EN-US style='font-family:Consolas'>wrapping.clj:</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>------------------------------------</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(use 'ring.adapter.jetty)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn <span style='background:yellow'>app</span>
[req]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; {:status&nbsp; 200</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; :headers {&quot;Content-Type&quot;
&quot;text/html&quot;}</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp; :body&nbsp;&nbsp;&nbsp; &quot;Hello
World from Ring&quot;})</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(defn wrap-upcase [app]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; (fn [req]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; (let [orig-resp (<span
style='background:yellow'>app</span> req)]</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (assoc orig-resp
:body (.toUpperCase (:body orig-resp))))))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(def <b>upcase-app</b> (wrap-upcase app))</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(run-jetty <b>upcase-app</b> {:port 8080})</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>------------------------------------</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>运行：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>java -cp &quot;lib/*&quot; clojure.main wrapping.clj</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>Request Map</span><span style='font-family:宋体'>中有如下内容：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="97%"
 style='width:97.4%;border-collapse:collapse;border:none'>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;padding:
  0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:server-port</span></p>
  </td>
  <td width="75%" style='width:75.84%;border:solid windowtext 1.0pt;border-left:
  none;padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>8080</span></p>
  </td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:server-name</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>&quot;localhost&quot;</span></p>
  </td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:remote-addr</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>&quot;0:0:0:0:0:0:0:1&quot;</span></p>
  </td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:uri</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>&quot;/&quot;</span></p>
  </td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:query-string</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>nil</span></p>
  </td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:scheme</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:http</span></p>
  </td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:request-method</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'><pre style='line-height:16.8pt'><span lang=EN-US
  style='font-size:10.5pt;font-family:Consolas'>:get </span><span
  style='font-size:10.5pt'>（可以是</span><span lang=EN-US style='font-size:10.5pt;
  font-family:Consolas;color:black'>:get, :head, :options, :put, :post, :delete</span><span
  style='font-size:10.5pt;color:black'>）</span></pre></td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:content-type</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>nil</span></p>
  </td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:content-length</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>nil</span></p>
  </td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:character-encoding</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>nil</span></p>
  </td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:headers</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>{</span></p>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>&quot;<b>accept-charset</b>&quot;
  &quot;GBK,utf-8;q=0.7,*;q=0.3&quot;, </span></p>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>&quot;<b>accept-language</b>&quot;
  &quot;zh-CN,zh;q=0.8&quot;, </span></p>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>&quot;<b>accept-encoding</b>&quot;
  &quot;gzip,deflate,sdch&quot;, </span></p>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>&quot;<b>user-agent</b>&quot;
  &quot;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) ..&quot;, </span></p>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>&quot;<b>accept</b>&quot; &quot;application/xml,
  text/html;q=0.9,text/plain;..&quot;, </span></p>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>&quot;<b>connection</b>&quot;
  &quot;keep-alive&quot;, </span></p>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>&quot;<b>host</b>&quot;
  &quot;localhost:8080&quot;</span></p>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>}</span></p>
  </td>
 </tr>
 <tr>
  <td width="24%" style='width:24.16%;border:solid windowtext 1.0pt;border-top:
  none;padding:0cm 0cm 0cm 6.0pt'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>:body</span></p>
  </td>
  <td width="75%" style='width:75.84%;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 0cm 0cm 0cm'>
  <p class=MsoNormal align=left style='text-align:left;line-height:16.8pt'><span
  lang=EN-US style='font-family:Consolas'>#&lt;Input
  org.mortbay.jetty.HttpParser$Input@87b7b11&gt;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>Response Map</span><span style='font-family:宋体'>中的内容</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=88 valign=top style='width:66.0pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:status</span></p>
  </td>
  <td width=357 valign=top style='width:268.05pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&gt;=100</span></p>
  </td>
 </tr>
 <tr>
  <td width=88 valign=top style='width:66.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:headers</span></p>
  </td>
  <td width=357 valign=top style='width:268.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>{&quot;Content-Type&quot;
  &quot;text/html; charset=utf-8&quot;}</span></p>
  </td>
 </tr>
 <tr>
  <td width=88 valign=top style='width:66.0pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:body</span></p>
  </td>
  <td width=357 valign=top style='width:268.05pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>String</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>ISeq</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>File</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>InputStream</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184030"><span
lang=EN-US style='font-family:Consolas'>12.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>Compojure</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>对</span><span lang=EN-US
style='font-family:Consolas'>Ring</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>DSL</span><span style='font-family:
宋体'>化包装</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>12.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>session</span></p>

<pre style='line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000'>ns</span></b></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=nv><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:teal'>pkg1 </span></span><span
class=p><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>(</span></span><span class=nf><b><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#990000'>:use</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>compojure</span></span><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>))</span></span></pre><pre
style='line-height:12.9pt'><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas;color:black'>&nbsp;</span></pre><pre style='line-height:12.9pt'><span
class=p><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>(</span></span><span class=nf><b><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#990000;background:yellow'>defroutes</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>helloworld-routes</span></span></pre><pre style='text-indent:10.5pt;
line-height:12.9pt'><span class=p><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>(</span></span><span class=nf><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#990000'>GET</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=s><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#DD1144'>&quot;/login/:user&quot;</span></span></pre><pre
style='text-indent:21.0pt;line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>[(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000;background:yellow'>session-assoc</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>:loggedin</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> <span class=p>(</span></span><span class=nf><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#990000'>:user</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>params</span></span><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>))</span></span></pre><pre
style='text-indent:21.0pt;line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000'>html</span></b></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> <span class=p>[</span></span><span class=nv><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:teal'>:html</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> <span
class=p>[</span></span><span class=nv><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:teal'>:body</span></span><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> <span class=p>[</span></span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>:p</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=s><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#DD1144'>&quot;You are now logged in as &quot;</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> <span
class=p>(</span></span><span class=nf><b><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#990000'>:user</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>params</span></span><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>)]]])])</span></span></pre><pre
style='text-indent:10.5pt;line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000'>GET</span></b></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=s><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#DD1144'>&quot;/logout&quot;</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></pre><pre
style='text-indent:21.0pt;line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=k><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>if </span></b></span><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=nb><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#0086B3'>contains? </span></span><span class=nv><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:teal;background:yellow'>session</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>:loggedin</span></span><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>)</span></span></pre><pre
style='text-indent:31.5pt;line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>[(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000;background:yellow'>session-dissoc</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>:loggedin</span></span><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>)</span></span></pre><pre
style='text-indent:36.75pt;line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000'>html</span></b></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> <span class=p>[</span></span><span class=nv><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:teal'>:html</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> <span
class=p>[</span></span><span class=nv><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:teal'>:body</span></span><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> <span class=p>[</span></span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>:p</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=s><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#DD1144'>&quot;Logged out&quot;</span></span><span
class=p><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>]]])]</span></span></pre><pre style='text-indent:36.75pt;
line-height:12.9pt'><span class=p><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>(</span></span><span class=nf><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#990000'>html</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> <span
class=p>[</span></span><span class=nv><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:teal'>:html</span></span><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> <span class=p>[</span></span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>:body</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> <span class=p>[</span></span><span class=nv><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:teal'>:p</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=s><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#DD1144'>&quot;You are not logged in&quot;</span></span><span class=p><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>]]])))</span></span></pre><pre
style='text-indent:10.5pt;line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000'>GET</span></b></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=s><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#DD1144'>&quot;/*&quot;</span></span></pre><pre
style='text-indent:21.0pt;line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=k><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>if </span></b></span><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=nb><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#0086B3'>contains? </span></span><span class=nv><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:teal;background:yellow'>session</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>:loggedin</span></span><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>)</span></span></pre><pre
style='text-indent:36.75pt;line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000'>html</span></b></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> <span class=p>[</span></span><span class=nv><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:teal'>:html</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> <span
class=p>[</span></span><span class=nv><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:teal'>:body</span></span><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> <span class=p>[</span></span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>:p</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=s><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#DD1144'>&quot;Welcome back &quot;</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> <span
class=p>[</span></span><span class=nv><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:teal'>:b</span></span><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> <span class=p>(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000'>:loggedin</span></b></span><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'> </span><span class=nv><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:teal;background:
yellow'>session</span></span><span class=p><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>)]]]])</span></span></pre><pre
style='text-indent:36.75pt;line-height:12.9pt'><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000'>html</span></b></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> <span class=p>[</span></span><span class=nv><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:teal'>:html</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> <span
class=p>[</span></span><span class=nv><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:teal'>:body</span></span><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> <span class=p>[</span></span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>:p</span></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=s><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#DD1144'>&quot;Hello World&quot;</span></span><span
class=p><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>]]]))))</span></span></pre><pre style='line-height:12.9pt'><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;</span></pre><pre
style='line-height:12.9pt'><span class=p><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>(</span></span><span class=nf><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#990000;
background:yellow'>decorate</span></b></span><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'> </span><span class=nv><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:teal'>helloworld-routes</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> <span
class=p>(</span></span><span class=nf><b><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#990000;background:yellow'>with-session</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=nv><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:teal'>:memory</span></span><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>))</span></span></pre><pre
style='line-height:12.9pt'><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas;color:black'>&nbsp;</span></pre><pre style='line-height:12.9pt'><span
class=p><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>(</span></span><span class=nf><b><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#990000;background:yellow'>run-server</span></b></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> <span
class=p>{</span></span><span class=nv><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:teal'>:port</span></span><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=mi><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#009999'>8080</span></span><span class=p><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>}</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span><span
class=s><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#DD1144'>&quot;/*&quot;</span></span><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'> <span class=p>(</span></span><span
class=nf><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#990000'>servlet</span></b></span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span><span class=nv><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:teal'>helloworld-routes</span></span><span
class=p><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>))</span></span></pre>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184031"><span
lang=EN-US style='font-family:Consolas'>12.3<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>Conjure</span></u></a></h2>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184032"><span
lang=EN-US style='font-family:Consolas'>12.4<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>Weld</span></u></a></h2>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184033"><span
lang=EN-US style='font-family:Consolas'>12.5<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>hiccup</span></u></a></h2>

<p class=MsoNormal><a href="https://github.com/weavejester/hiccup"><span
lang=EN-US style='font-family:Consolas'>https://github.com/weavejester/hiccup</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>clj-html</span><span
style='font-family:宋体'>的加强版，用法相同：</span><span lang=EN-US style='font-family:
Consolas'>vector</span><span style='font-family:宋体'>来对应</span><span lang=EN-US
style='font-family:Consolas'>tag</span><span style='font-family:宋体'>，</span><span
lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
宋体'>来对应</span><span lang=EN-US style='font-family:Consolas'>tag</span><span
style='font-family:宋体'>的属性</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<pre><code><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>(use 'hiccup.core)</span></code></pre><pre><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>(html [:span {:class &quot;foo&quot;} &quot;bar&quot;])</span></code></pre>

<p class=MsoNormal><span style='font-family:宋体'>输出：</span></p>

<pre><code><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>&lt;span class=&quot;foo&quot;&gt;bar&lt;/span&gt;</span></code></pre>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(html [:html
[:head [:style &quot;h1 {color:red}&quot;]] [:body [:h1 &quot;hello
world&quot;]]] )</span></p>

<p class=MsoNormal><span style='font-family:宋体'>输出：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;&lt;html&gt;&lt;head&gt;&lt;style&gt;h1
{color:red}&lt;/style&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;hello
world&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：用</span><span lang=EN-US
style='font-family:Consolas'>#</span><span style='font-family:宋体'>表示</span><span
lang=EN-US style='font-family:Consolas'>id</span><span style='font-family:宋体'>，用</span><span
lang=EN-US style='font-family:Consolas'>.foo</span><span style='font-family:
宋体'>表示</span><span lang=EN-US style='font-family:Consolas'>class</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(html
[:div#id1.cls2 &quot;...&quot;])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>输出：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;div
class=&quot;cls2&quot; id=&quot;id1&quot;&gt;...&lt;/div&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：循环</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(html [:table <span
style='background:yellow'>(for [tr (range 3)] [:tr </span><span
style='background:aqua'>(<u>for [td (range 2)] [:td (str tr td)]</u>)</span><span
style='background:yellow'>])</span> ])</span></p>

<p class=MsoNormal><span style='font-family:宋体'>输出：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;table&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;tr&gt;&lt;td&gt;00&lt;/td&gt;&lt;td&gt;01&lt;/td&gt;&lt;/tr&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;tr&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;11&lt;/td&gt;&lt;/tr&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;tr&gt;&lt;td&gt;20&lt;/td&gt;&lt;td&gt;21&lt;/td&gt;&lt;/tr&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/table&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><u><span lang=EN-US style='font-family:Consolas'>hiccup.core</span></u></b></p>

<table class=MsoNormalTable border=0 cellpadding=0 width=724 style='width:542.75pt'>
 <tr>
  <td width=129 style='width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span style='font-family:宋体'>简单</span><span lang=EN-US
  style='font-family:Consolas'>tags</span></p>
  </td>
  <td width=314 style='width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[:br]</span></p>
  </td>
  <td width=273 style='width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;br /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 style='width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span style='font-family:宋体'>带</span><span lang=EN-US
  style='font-family:Consolas'>content</span><span style='font-family:宋体'>的</span><span
  lang=EN-US style='font-family:Consolas'>tag</span></p>
  </td>
  <td width=314 style='width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[:span
  &quot;baz&quot;]</span></p>
  </td>
  <td width=273 style='width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;span&gt;baz&lt;/span&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 style='width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span style='font-family:宋体'>带</span><span lang=EN-US
  style='font-family:Consolas'>attr</span><span style='font-family:宋体'>的</span><span
  lang=EN-US style='font-family:Consolas'>tag</span></p>
  </td>
  <td width=314 style='width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[:span {:id
  &quot;foo&quot;, :class &quot;bar&quot;} &quot;baz&quot;]</span></p>
  </td>
  <td width=273 style='width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;span
  class=&quot;bar&quot; id=&quot;foo&quot;&gt;baz</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/span&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 style='width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>id</span><span
  style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>class</span></p>
  </td>
  <td width=314 style='width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[:span#foo.bar
  &quot;baz&quot;]</span></p>
  </td>
  <td width=273 style='width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;span
  class=&quot;bar&quot; id=&quot;foo&quot;&gt;baz</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/span&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 style='width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>html</span><span
  style='font-family:宋体'>转码</span></p>
  </td>
  <td width=314 style='width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(escape-html
  &quot;&lt;\&quot;foo\&quot;&amp;\&quot;bar\&quot;&gt;&quot;)</span></p>
  </td>
  <td width=273 style='width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&amp;lt;&amp;quot;foo&amp;quot;&amp;amp;&amp;quot;bar&amp;quot;&amp;gt;</span></p>
  </td>
 </tr>
 <tr>
  <td width=129 style='width:96.4pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span style='font-family:宋体'>以上简写</span></p>
  </td>
  <td width=314 style='width:235.65pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(h
  &quot;&lt;\&quot;foo\&quot;&amp;\&quot;bar\&quot;&gt;&quot;)</span></p>
  </td>
  <td width=273 style='width:204.7pt;border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&amp;lt;&amp;quot;foo&amp;quot;&amp;amp;&amp;quot;bar&amp;quot;&amp;gt;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><u><span lang=EN-US style='font-family:Consolas'>hiccup.page-helpers</span></u></b></p>

<table class=MsoNormalTable border=0 cellpadding=0>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Doctypes: </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>html4/5,
  xhtml-strict, xhtml-transitional</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(doctype
  :html4)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;!DOCTYPE
  html PUBLIC </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;-//W3C//DTD
  HTML 4.01//EN&quot; </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>XHTML tag</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(xhtml-tag
  &quot;en&quot; &quot;foo&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;html
  lang=&quot;en&quot; xml:lang=&quot;en&quot; </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;foo&lt;/html&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>JavaScript</span><span
  style='font-family:宋体'>包含</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(include-js </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;foo.js&quot;
  &quot;bar.js&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;script
  src=&quot;foo.js&quot; type=&quot;text/javascript&quot;&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/script&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;script
  src=&quot;bar.js&quot; type=&quot;text/javascript&quot;&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/script&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>CSS</span><span
  style='font-family:宋体'>包含</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(include-js </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;foo.css&quot;
  &quot;bar.css&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;script
  src=&quot;foo.css&quot; type=&quot;text/javascript&quot;&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/script&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;script
  src=&quot;bar.css&quot; type=&quot;text/javascript&quot;&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/script&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>JavaScript</span><span
  style='font-family:宋体'>嵌入</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(javascript-tag
  &quot;document.write('hello world');&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;script
  type=&quot;text/javascript&quot;&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>//&lt;![CDATA[
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>document.write('hello
  world'); </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>//]]&gt;&lt;/script&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span style='font-family:宋体'>超连接</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(link-to
  &quot;http://foo.bar&quot; &quot;baz&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;a
  href=&quot;http://foo.bar&quot;&gt;baz&lt;/a&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;ul&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(unordered-list
  [&quot;foo&quot; &quot;bar&quot; &quot;baz&quot;])</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;ul&gt;</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>&lt;li&gt;foo&lt;/li&gt;&lt;li&gt;bar&lt;/li&gt;&lt;li&gt;baz&lt;/li&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/ul&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;ol&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(ordered-list
  [&quot;foo&quot; &quot;bar&quot; &quot;baz&quot;])</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;ol&gt;</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>&lt;li&gt;foo&lt;/li&gt;&lt;li&gt;bar&lt;/li&gt;&lt;li&gt;baz&lt;/li&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/ol&gt;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><u><span lang=EN-US style='font-family:Consolas'>hiccup.form-helpers</span></u></b></p>

<table class=MsoNormalTable border=0 cellpadding=0>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;form&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(form-to </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[:POST
  &quot;/foo&quot;] &quot;...&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;form
  action=&quot;/foo&quot; method=&quot;POST&quot;&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;input
  id=&quot;_method&quot; name=&quot;_method&quot; </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>type=&quot;hidden&quot; value=&quot;POST&quot;
  /&gt;...&lt;/form&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;label&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(label :foo
  &quot;bar&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;label
  for=&quot;foo&quot;&gt;bar&lt;/label&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;hidden&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(hidden-field
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:foo
  &quot;bar&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;input
  id=&quot;foo&quot; name=&quot;foo&quot; type=&quot;hidden&quot;
  value=&quot;bar&quot; /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;text&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(text-field
  :foo &quot;bar&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;input
  id=&quot;foo&quot; name=&quot;foo&quot; type=&quot;text&quot;
  value=&quot;bar&quot; /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;password&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(password-field
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:foo
  &quot;bar&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;input
  id=&quot;foo&quot; name=&quot;foo&quot; type=&quot;password&quot;
  value=&quot;bar&quot; /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;checkbox&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(check-box </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:foo true
  &quot;bar&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;input
  checked=&quot;checked&quot; id=&quot;foo&quot; name=&quot;foo&quot;</span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;type=&quot;checkbox&quot;
  value=&quot;bar&quot; /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;radio&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(radio-button
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:foo true
  &quot;bar&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;input
  checked=&quot;checked&quot; id=&quot;foo-bar&quot; </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>name=&quot;foo&quot; type=&quot;radio&quot;
  value=&quot;bar&quot; /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;option&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(select-options
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[:foo :bar
  :baz] :bar)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;option&gt;foo&lt;/option&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;option
  selected=&quot;selected&quot;&gt;bar&lt;/option&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;option&gt;baz&lt;/option&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;select&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(drop-down </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:foo [:bar
  :baz] :baz)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;select
  id=&quot;foo&quot; name=&quot;foo&quot;&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;option&gt;bar&lt;/option&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;option
  selected=&quot;selected&quot;&gt;baz&lt;/option&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/select&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;text&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(text-area </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>:foo
  &quot;bar&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;textarea
  id=&quot;foo&quot; name=&quot;foo&quot;&gt;bar&lt;/textarea&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;file&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(file-upload
  :foo)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;input
  id=&quot;foo&quot; name=&quot;foo&quot; type=&quot;file&quot; /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;submit&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(submit-button</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&quot;submit&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;input
  type=&quot;submit&quot; value=&quot;submit&quot; /&gt;</span></p>
  </td>
 </tr>
 <tr>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;reset&gt;</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(submit-button
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;reset&quot;)</span></p>
  </td>
  <td style='border:solid #666666 1.0pt;padding:3.6pt 3.6pt 3.6pt 3.6pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;input
  type=&quot;submit&quot; value=&quot;reset&quot; /&gt;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184034"><span
lang=EN-US style='font-family:Consolas'>12.6<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>Enlive</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>模板引擎</span></u></h2>

<p class=MsoNormal><a href="https://github.com/cgrand/enlive"><span lang=EN-US
style='font-family:Consolas'>https://github.com/cgrand/enlive</span></a></p>

<p class=MsoNormal><a href="https://github.com/swannodette/enlive-tutorial/"><span
lang=EN-US style='font-family:Consolas'>https://github.com/swannodette/enlive-tutorial/</span></a></p>

<h1><a name="_Toc306184035"><span lang=EN-US style='font-family:Consolas'>13、<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>网络资源</span></u></a></h1>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://clojuredocs.org/">http://clojuredocs.org/</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://www.clojure-toolbox.com/">http://www.clojure-toolbox.com/</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>常用</span><span
lang=EN-US style='font-family:Consolas'>lib</span><span style='font-family:
宋体'>分类列表</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://clojure-examples.appspot.com/">http://clojure-examples.appspot.com/</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://java.ociweb.com/mark/clojure/article.html">http://java.ociweb.com/mark/clojure/article.html</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>在线教程：</span><span
lang=EN-US style='font-family:Consolas'>Clojure - Functional Programming for
the JVM</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://clojure-euler.wikispaces.com/">http://clojure-euler.wikispaces.com/</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>ProjectEuler</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>解答</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://en.wikibooks.org/wiki/Clojure_Programming/Examples/Cookbook">http://en.wikibooks.org/wiki/Clojure_Programming/Examples/Cookbook</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>Clojure Programming/Examples/Cookbook</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://www.gettingclojure.com/cookbook:clojure-cookbook">http://www.gettingclojure.com/cookbook:clojure-cookbook</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>Clojure cookbook</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://alexott.net/en/clojure/video.html">http://alexott.net/en/clojure/video.html</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>Video lectures &amp; presentations about Clojure</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://langref.org/">http://langref.org/</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>几个语言的常用功能代码对比</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://clojars.org/">http://clojars.org/</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>Clojure</span><span style='font-family:宋体'>的库</span><span
lang=EN-US style='font-family:Consolas'>repo</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://www.glenstampoultzis.net/blog/clojure-web-infrastructure/">http://www.glenstampoultzis.net/blog/clojure-web-infrastructure/</a>
</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'><a
href="http://www.glenstampoultzis.net/blog/clojure-web-infrastructure/"><span
style='color:windowtext;text-decoration:none'>Clojure Web Infrastructure</span></a></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://thegeektalk.com/">http://thegeektalk.com/</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>Geek Talks</span><span style='font-family:宋体'>，使用</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>geek</span><span
style='font-family:宋体'>挺多</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://nakkaya.com/">http://nakkaya.com/</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>个人</span><span
lang=EN-US style='font-family:Consolas'>blog</span><span style='font-family:
宋体'>，使用</span><span lang=EN-US style='font-family:Consolas'>Clojure</span><span
style='font-family:宋体'>处理摄像头、图像等</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'><a
href="http://www.ic.unicamp.br/~meidanis/courses/mc336/2006s2/funcional/L-99_Ninety-Nine_Lisp_Problems.html">http://www.ic.unicamp.br/~meidanis/courses/mc336/2006s2/funcional/L-99_Ninety-Nine_Lisp_Problems.html</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>99</span><span style='font-family:宋体'>个</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>练习题，对应的</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>网站</span><span style='font-family:宋体'>：</span><span
lang=EN-US style='font-family:Consolas'><a
href="http://aperiodic.net/phil/scala/s-99/">http://aperiodic.net/phil/scala/s-99/</a></span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc306184036"></a><a name="_Toc281924088"></a><a
name="_Toc281658916"></a><a name="_Toc281556422"></a><a name="_Toc281556322"></a><a
name="_Toc281556218"></a><a name="_Toc281556016"></a><a name="_Toc281555859"><span
lang=EN-US style='font-family:Consolas'>14、<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>临时</span></u></a></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184037"><span
lang=EN-US style='font-family:Consolas'>14.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>InfoQ</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>采访</span></u><u><span lang=EN-US
style='font-family:Consolas'>Clojure</span></u><u><span style='font-family:
"微软雅黑","sans-serif"'>实用</span></u></h2>

<p class=MsoNormal align=left style='text-align:left;line-height:12.75pt'><b><span
lang=EN-US style='font-family:"Arial","sans-serif";color:black'>InfoQ</span></b><span
style='font-family:宋体;color:black'>：你能简要介绍一下你们的</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:black'>Clojure</span><span
style='font-family:宋体;color:black'>代码是如何组织的吗？比如，如何使用命名空间、</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:black'>muti-methods</span><span
style='font-family:宋体;color:black'>（多重分派）、</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:black'>macros</span><span
style='font-family:宋体;color:black'>（宏）等等。</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:12.75pt;
background:#FAFAFA'><span style='font-family:宋体;color:#333333'>过往函数式编程的经验使我们能够将代码组织成非常</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>“</span><span
style='font-family:宋体;color:#333333'>函数</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>”</span><span
style='font-family:宋体;color:#333333'>的形式。我们使用命名空间的方式与在其它语言中使用命名空间的方式相同。我们<b><u>尽量少用</u></b></span><b><u><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'> macros</span></u></b><b><u><span
style='font-family:宋体;color:#333333'>和</span></u></b><b><u><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>muti-methods</span></u></b><span
style='font-family:宋体;color:#333333'>，就算用也只是在适合的地方使用。人们对</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Lisp</span><span
style='font-family:宋体;color:#333333'>的所有印象就是其有大量的</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>macros</span><span
style='font-family:宋体;color:#333333'>和</span><span lang=EN-US style='font-family:
"Arial","sans-serif";color:#333333'>meta-sauce</span><span style='font-family:
宋体;color:#333333'>。</span><span style='font-family:"Arial","sans-serif";
color:#333333'> </span><span style='font-family:宋体;color:#333333'>尽管从某些方面来说这是对的，但是用</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>FP</span><span
style='font-family:宋体;color:#333333'>基础构建块，你能走得更远；如</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>lambdas</span><span
style='font-family:宋体;color:#333333'>、</span><span lang=EN-US style='font-family:
"Arial","sans-serif";color:#333333'>HOFs</span><span style='font-family:宋体;
color:#333333'>、</span><span lang=EN-US style='font-family:"Arial","sans-serif";
color:#333333'>currying</span><span style='font-family:宋体;color:#333333'>、</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>partial
application</span><span style='font-family:宋体;color:#333333'>等等。</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'><br>
<br>
</span><span style='font-family:宋体;color:#333333'>我不能算是精通</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>monad</span><span
style='font-family:宋体;color:#333333'>，但是我觉得</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>mondads</span><span
style='font-family:宋体;color:#333333'>和</span><span lang=EN-US style='font-family:
"Arial","sans-serif";color:#333333'>multi-methods</span><span style='font-family:
宋体;color:#333333'>及</span><span lang=EN-US style='font-family:"Arial","sans-serif";
color:#333333'>macros</span><span style='font-family:宋体;color:#333333'>都差不多。这些抽象概念不但功能强大，而且也很酷，吸引了不少眼球。当这些抽象概念有助于简化开发时，我就会设法使用这些工具。<b><u>但是这要求思维缜密</u></b>，使用原始的函数编程方式及数据结构你也能做得很好。</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'><br>
<br>
</span><span style='font-family:宋体;color:#333333'>最后谈一下</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span><span
style='font-family:宋体;color:#333333'>中的</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>monads</span><span
style='font-family:宋体;color:#333333'>，有些人认为</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>monads</span><span
style='font-family:宋体;color:#333333'>是用于状态的，可是</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span><span
style='font-family:宋体;color:#333333'>已经有了许多有效方法来处理状态，为什么还要用</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'> monads</span><span
style='font-family:宋体;color:#333333'>。我们没有使用过</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>state monad</span><span
style='font-family:宋体;color:#333333'>，但是用过许多其他很有用的</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>monads</span><span
style='font-family:宋体;color:#333333'>。我很欣赏</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Brian Beckman</span><span
style='font-family:宋体;color:#333333'>对</span><span lang=EN-US style='font-family:
"Arial","sans-serif";color:#333333'>monads</span><span style='font-family:宋体;
color:#333333'>的描述：他们<b><u>只是伪装的函数合成物而已</u></b>。使用这一概念的最大好处是，能够安全构造出中间可能失败或碰到空值的多阶段计算。</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'><br>
<br>
</span><span style='font-family:宋体;color:#333333'>虽然</span><b><u><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Destructuring
bind</span></u></b><span style='font-family:宋体;color:#333333'>看起来并不像</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>macros</span><span
style='font-family:宋体;color:#333333'>和</span><span lang=EN-US style='font-family:
"Arial","sans-serif";color:#333333'>monads</span><span style='font-family:宋体;
color:#333333'>那样引人注目，但在实践中它实际上是一个非常强大的抽象概念。</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Rich</span><span
style='font-family:宋体;color:#333333'>选择从模式匹配中解耦</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'> destructuring bind</span><span
style='font-family:宋体;color:#333333'>的方法非常聪明。我相信很快在</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span><span
style='font-family:宋体;color:#333333'>里就会有</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>ML</span><span
style='font-family:宋体;color:#333333'>风格的模式匹配，这一切正在实现中。</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:12.75pt'><b><span
lang=EN-US style='font-family:"Arial","sans-serif";color:black'>InfoQ</span></b><span
style='font-family:宋体;color:black'>：你提到过用于将数据格式输入到</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:black'>Clojure</span><span
style='font-family:宋体;color:black'>数据结构的</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:black'>Clojure reader</span><span
style='font-family:宋体;color:black'>：你在使用</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:black'>Reader macros</span><span
style='font-family:宋体;color:black'>吗？</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:12.75pt;
background:#FAFAFA'><span lang=EN-US style='font-family:"Arial","sans-serif";
color:#333333'>Clojure</span><span style='font-family:宋体;color:#333333'>没有</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>reader macros</span><span
style='font-family:宋体;color:#333333'>，我们也压根不需要。<b><u>要读写</u></b></span><b><u><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span></u></b><b><u><span
style='font-family:宋体;color:#333333'>数据结构，我们只需使用</span></u></b><b><u><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>print-dup</span></u></b><b><u><span
style='font-family:宋体;color:#333333'>语句即可</span></u></b><span style='font-family:
宋体;color:#333333'>，它可以让我们定义</span><span lang=EN-US style='font-family:"Arial","sans-serif";
color:#333333'>multimethods</span><span style='font-family:宋体;color:#333333'>来</span><span
style='font-family:"Arial","sans-serif";color:#333333'> </span><span
style='font-family:宋体;color:#333333'>分派</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>printers</span><span
style='font-family:宋体;color:#333333'>。只有在你需要读写没有内建的类型时，才真正需要实现</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Printer</span><span
style='font-family:宋体;color:#333333'>。例如，我们有一个针对</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>joda-time</span><span
style='font-family:宋体;color:#333333'>日期的特殊</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'> printer</span><span
style='font-family:宋体;color:#333333'>，那么我们也将以一种特殊的方式将他们读回。</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:12.75pt'><b><span
lang=EN-US style='font-family:"Arial","sans-serif";color:black'>InfoQ</span></b><span
style='font-family:宋体;color:black'>：你提到过编写</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:black'>Clojure</span><span
style='font-family:宋体;color:black'>数据结构</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:black'>――</span><span
style='font-family:宋体;color:black'>你是用其来序列化传输、存储或其它用途的数据吗？</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:12.75pt;
background:#FAFAFA'><span style='font-family:宋体;color:#333333'>我们<b><u>将</u></b></span><b><u><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span></u></b><b><u><span
style='font-family:宋体;color:#333333'>数据结构用作通信和存储的中间表示</span></u></b><span
style='font-family:宋体;color:#333333'>。例如，我们所有数据转换工作的输出都是</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span><span
style='font-family:宋体;color:#333333'>数据结构形式，这种中间表示遍布于我们所有</span><span
style='font-family:"Arial","sans-serif";color:#333333'> </span><span
style='font-family:宋体;color:#333333'>的</span><span lang=EN-US style='font-family:
"Arial","sans-serif";color:#333333'>Hadoop</span><span style='font-family:宋体;
color:#333333'>工作中。这是我们置于</span><span lang=EN-US style='font-family:"Arial","sans-serif";
color:#333333'>Cascading</span><span style='font-family:宋体;color:#333333'>和</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Haooop</span><span
style='font-family:宋体;color:#333333'>之上的那一层东西的关键，可以让我们免于处理</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Hadoop</span><span
style='font-family:宋体;color:#333333'>输入格式。</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:12.75pt'><b><span
lang=EN-US style='font-family:"Arial","sans-serif";color:black'>InfoQ</span></b><span
style='font-family:宋体;color:black'>：你们有什么想加到</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:black'>Clojure</span><span
style='font-family:宋体;color:black'>或</span><span lang=EN-US style='font-family:
"Arial","sans-serif";color:black'>Clojure</span><span style='font-family:宋体;
color:black'>生态系统中的东西么（类库、工具</span><span lang=EN-US style='font-family:"Arial","sans-serif";
color:black'>……</span><span style='font-family:宋体;color:black'>）？</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:12.75pt;
background:#FAFAFA'><span style='font-family:宋体;color:#333333'>有人提议<b><u>加个高质量的</u></b></span><b><u><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>destructuring</span></u></b><b><u><span
style='font-family:宋体;color:#333333'>模式匹配工具</span></u></b><span
style='font-family:宋体;color:#333333'>，这个东西挺有用。但我对局部改进更感兴趣。我们没有用模式匹配，而且</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span><span
style='font-family:宋体;color:#333333'>有许多很好的抽象概念，因而并不会缺失太多模式匹配，但是我认为它还是让很多地方的代码更加整洁了。</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'><br>
<br>
</span><span style='font-family:宋体;color:#333333'>如果</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Rich</span><span
style='font-family:宋体;color:#333333'>开放该</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>reader</span><span
style='font-family:宋体;color:#333333'>，我想一定很酷，或许这将帮助为模式匹配和</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>monad</span><span
style='font-family:宋体;color:#333333'>实现创建良好的语法。其次，</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span><span
style='font-family:宋体;color:#333333'>是我第一次使用</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Lisp</span><span
style='font-family:宋体;color:#333333'>，因此我并没有使用</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>reader macros</span><span
style='font-family:宋体;color:#333333'>的经验，因此，在这方面我并不在行。</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'><br>
<br>
</span><span style='font-family:宋体;color:#333333'>如果</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Rich</span><span
style='font-family:宋体;color:#333333'>不保留竖线也挺好，这样我们可以将它作为我们核心</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>DSL</span><span
style='font-family:宋体;color:#333333'>的一部分，用来作为条件概率记号。</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'> :-)</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:12.75pt'><b><span
lang=EN-US style='font-family:"Arial","sans-serif";color:black'>InfoQ</span></b><span
style='font-family:宋体;color:black'>：对于你所使用的</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:black'>Clojure</span><span
style='font-family:宋体;color:black'>类库，你有什么建议？</span></p>

<p class=MsoNormal align=left style='text-align:left;line-height:12.75pt;
background:#FAFAFA'><span style='font-family:宋体;color:#333333'>使用</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span><span
style='font-family:宋体;color:#333333'>的第一个建议是：</span><b><u><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Clojure-core </span></u></b><b><u><span
style='font-family:宋体;color:#333333'>和</span></u></b><b><u><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'> Clojure-contrib</span></u></b><b><u><span
style='font-family:宋体;color:#333333'>都很小，因此最好通读全部代码</span></u></b><span
style='font-family:宋体;color:#333333'>。从中你将发现非常好的东西。留意所有神奇的数据结构及数据结构处理函数。例</span><span
style='font-family:"Arial","sans-serif";color:#333333'> </span><span
style='font-family:宋体;color:#333333'>如，</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span><span
style='font-family:宋体;color:#333333'>有一个友好的</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Set</span><span
style='font-family:宋体;color:#333333'>及</span><span lang=EN-US style='font-family:
"Arial","sans-serif";color:#333333'>Set</span><span style='font-family:宋体;
color:#333333'>操作实现，以及一些准关系代数实现。</span><span lang=EN-US style='font-family:
"Arial","sans-serif";color:#333333'><br>
<br>
</span><span style='font-family:宋体;color:#333333'>我把</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span><span
style='font-family:宋体;color:#333333'>看作是一种面向函数编程的数据结构。</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'><br>
<br>
Clojure</span><span style='font-family:宋体;color:#333333'>拥有一套神奇的数据结构。此外，所有这些数据结构都有书面陈述，因此</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>reader</span><span
style='font-family:宋体;color:#333333'>和</span><span lang=EN-US style='font-family:
"Arial","sans-serif";color:#333333'>destructuring</span><span style='font-family:
宋体;color:#333333'>都很自然。所有这些结合在一起让人非常愉快。</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>&nbsp;</span><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'><br>
<br>
</span><span style='font-family:宋体;color:#333333'>传承自</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>ML</span><span
style='font-family:宋体;color:#333333'>的函数语言中，函数是类型签名。而在</span><span lang=EN-US
style='font-family:"Arial","sans-serif";color:#333333'>Clojure</span><span
style='font-family:宋体;color:#333333'>中，函数是数据结构拓扑签名。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184038"><span
lang=EN-US style='font-family:Consolas'>14.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>Lisp</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>用户的问题</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://www.lambdassociates.org/blog/bipolar.htm">http://www.lambdassociates.org/blog/bipolar.htm</a></span></p>

<p class=MsoNormal><span style='font-family:宋体'>进行</span><span lang=EN-US
style='font-family:Consolas'>Lisp</span><span style='font-family:宋体'>相关编程</span><span
lang=EN-US style='font-family:Consolas'>20</span><span style='font-family:宋体'>年，并参看了</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>程序员在</span><span lang=EN-US style='font-family:Consolas'>Usenet</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>blog</span><span
style='font-family:宋体'>上的诸多发言，我常想获知是否存在形如人种特征的某种“</span><span lang=EN-US
style='font-family:Consolas'>Lisp</span><span style='font-family:宋体'>特征”。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>经过思量，我觉得</span><span
lang=EN-US style='font-family:Consolas'>Lisper</span><span style='font-family:
宋体'>身上确实有一些反应</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>趣史及其优缺点的特征存在。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>毫无疑问，本文会引发持不同意见者的恼怒和争论：</span></p>

<p class=MsoNormal align=center style='text-align:center'><b><span lang=EN-US
style='font-family:Consolas'>Lisper</span></b><b><span style='font-family:宋体'>的两面性</span></b></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>每位大学老师在教学生涯中都带毕业过数百数千名学生，大部分印象模糊与你见面打招呼聊半天也记不起来这是那届的大哥大姐。但有些你一定能记住：在你手下做过项目混了脸熟的，班上特别优秀的和特别差劲的。最好的和最差的都能印象深刻地留在脑子里，这确实挺奇妙的，这也是本文写“两面性”这个标题的原因。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>中学生中，处于中间的，能力差的，聪明但不优秀的那些学生我另文讨论。我现在想讨论那部分以聪明且成绩优异的中学生，这些娃有两特征：聪明敏感、但有点二。他们有点二对事不严肃是因为事情对他们来说太过简单乏味。这些人的另一个特征是接触一项工作之初很有热情，但短时间之后便厌烦，并在事情完全完工之前撒手不管，之后他</span><span
lang=EN-US style='font-family:Consolas'>/</span><span style='font-family:宋体'>她会无所事事地躺在床上弹吉它。这种人一般有人格的两面性：有时很忧郁，有时又很激昂。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>这些中学生上了大学之后，可能有两种境遇：一种是在所选专业上大有所为，证实了自己的天才；一种是发现大学和中学一样无趣，并非随处是大师以及和他一样聪明的同学。和中学不同的是，大学没人来管束，他就从此不振作了，但大学没有中学那么容易念，仅靠聪明是得不了</span><span
lang=EN-US style='font-family:Consolas'>A</span><span style='font-family:宋体'>的，不努力的后果是只能得</span><span
lang=EN-US style='font-family:Consolas'>B+</span><span style='font-family:宋体'>甚至</span><span
lang=EN-US style='font-family:Consolas'>B</span><span style='font-family:宋体'>、</span><span
lang=EN-US style='font-family:Consolas'>C</span><span style='font-family:宋体'>。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>这种聪明但成绩垫底的学生在大学里比比皆是。他们如果能在最后学期呈上一份优秀的毕设还好，否则大部分教授不会给他们很好的毕业评价。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>当然这类学生是不会无所事事消停的，他们的时间基本都花在阅读和学习新东西上，因为天生聪明的脑袋瓜如饥似渴，需要不断往里塞东西。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>现在回到</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>上来，我很早就发现</span><span lang=EN-US style='font-family:
Consolas'>Lisp</span><span style='font-family:宋体'>真的对这类学生很有吸引力。理解这点就能理解是些什么样思维的人对</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>文化做了贡献，也就了解了</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>和他的拥磊一样，是个聪明的失败者。</span><span lang=EN-US
style='font-family:Consolas'>Lisp</span><span style='font-family:宋体'>和聪明的两面性格者（</span><span
lang=EN-US style='font-family:Consolas'>brilliant bipolar mind</span><span
style='font-family:宋体'>――</span><span lang=EN-US style='font-family:Consolas'>BBM</span><span
style='font-family:宋体'>）都有独特的优点和缺点。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>BBM</span><span style='font-family:
宋体'>们喜欢做抱负远大的事情，并认为这些事情需要巨大的资源，而资源总是不够。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>作为工具，就像是手中的杠杆，他比更低级的语言如</span><span lang=EN-US style='font-family:Consolas'>C</span><span
style='font-family:宋体'>语言等更能放大使用者的构想和设计，使用</span><span lang=EN-US
style='font-family:Consolas'>Lisp</span><span style='font-family:宋体'>的人喜欢嘲笑使用其他语言的程序员。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>BBM</span><span style='font-family:
宋体'>们热爱</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>。</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>极富魅力的独创性反映了</span><span lang=EN-US style='font-family:
Consolas'>BBM</span><span style='font-family:宋体'>的创造力。</span><span lang=EN-US
style='font-family:Consolas'>Lisper</span><span style='font-family:宋体'>们有很多先驱性的原创：</span><span
lang=EN-US style='font-family:Consolas'>GC</span><span style='font-family:宋体'>垃圾回收、</span><span
lang=EN-US style='font-family:Consolas'>list</span><span style='font-family:
宋体'>列表处理、</span><span lang=EN-US style='font-family:Consolas'>PC</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Window</span><span
style='font-family:宋体'>等。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>BBM</span><span style='font-family:
宋体'>们作为原创者，在拥有巨大创造力的同时也有其弱点，那就是不能把一个事做到最后完工，不能把先驱概念做到完善可用。“可抛弃的设计”一词绝对来自</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>社区的</span><span lang=EN-US style='font-family:Consolas'>BBM</span><span
style='font-family:宋体'>。因为用</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>构建新东西很容易，所以摒弃已有系统自造轮子就成了常事。</span><span lang=EN-US
style='font-family:Consolas'>10</span><span style='font-family:宋体'>年前当我需要在</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>中找一个</span><span lang=EN-US style='font-family:Consolas'>GUI</span><span
style='font-family:宋体'>库来用的时候，一下子发现</span><span lang=EN-US style='font-family:
Consolas'>9</span><span style='font-family:宋体'>个不同的，但没有一个提供合适的文档和完善无</span><span
lang=EN-US style='font-family:Consolas'>bug</span><span style='font-family:
宋体'>，每个作者都有自己的实现，在他自己那里运行良好。这就是</span><span lang=EN-US style='font-family:Consolas'>BBM</span><span
style='font-family:宋体'>的态度：在我这里没问题，我清楚这东西。这是不需要也不想要他人来协助的产品。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>C/C++</span><span style='font-family:
宋体'>的方式与此大相径庭。由于做出点东西来不容易，就会敝帚自珍仔细文档化。在大型</span><span lang=EN-US
style='font-family:Consolas'>C</span><span style='font-family:宋体'>项目中要依赖社区他人的帮助，要和他人协同工作。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>从雇主的角度来看，后者更有吸引力。</span><span lang=EN-US
style='font-family:Consolas'>10</span><span style='font-family:宋体'>人共同工作交流，有完善的文档，这比雇佣一个玩</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>BBM</span><span
style='font-family:宋体'>黑客更好，后者走人了只能再找另一个</span><span lang=EN-US
style='font-family:Consolas'>BBM</span><span style='font-family:宋体'>（如果有幸能找到的话），并且他一般不会同意接手别人的工作，而更愿意重头再来一套。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>BBM</span><span style='font-family:
宋体'>们的另一方面的特点是对技巧的敏感性，他们能一针见血地看到现有事物的荒谬性，并知道该如何弄好它。而且他们也不喜欢折中方案。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>机器是这种思维的产物，他们拒绝为市场而进行妥协。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>BBM</span><span style='font-family:
宋体'>们的最后一个特点是：在逆境中容易悲观。如果你读过大量关于</span><span lang=EN-US style='font-family:
Consolas'>Lisp</span><span style='font-family:宋体'>的讨论话题（包括</span><span
lang=EN-US style='font-family:Consolas'>comp.lang.lisp</span><span
style='font-family:宋体'>上那些说“</span><span lang=EN-US style='font-family:Consolas'>Common
Lisp Sucks</span><span style='font-family:宋体'>”的话题），就会发现此言不虚。编程老鸟也对他们所钟情的</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>语言的不足之处倍感忧伤。而这些问题是可解决的（</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>方言</span><span lang=EN-US style='font-family:Consolas'>Qi</span><span
style='font-family:宋体'>就是一个例子），但你仅沉沦于悲观就啥也解决不了。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>佐证以上所述的最佳材料是经典文章：</span><span lang=EN-US
style='font-family:Consolas'>Lisp</span><span style='font-family:宋体'>：</span><span
lang=EN-US style='font-family:Consolas'>Good News</span><span style='font-family:
宋体'>，</span><span lang=EN-US style='font-family:Consolas'>Bad News</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>How
to Win Big</span><span style='font-family:宋体'>。如果读了这篇文章，你就能感觉到</span><span
lang=EN-US style='font-family:Consolas'>BBM</span><span style='font-family:
宋体'>的性格。这边文章的不同之处在于作者同时把</span><span lang=EN-US style='font-family:Consolas'>BBM</span><span
style='font-family:宋体'>的两面都真实展现了出来。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>基本上存在</span><span lang=EN-US style='font-family:Consolas'>2</span><span
style='font-family:宋体'>个问题：</span><span lang=EN-US style='font-family:Consolas'>Lisper</span><span
style='font-family:宋体'>的问题和</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>语言的问题。</span><span lang=EN-US style='font-family:Consolas'>Lisper</span><span
style='font-family:宋体'>的问题就是</span><span lang=EN-US style='font-family:Consolas'>BBM</span><span
style='font-family:宋体'>的问题。</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>的问题是</span><span lang=EN-US style='font-family:Consolas'>Lisper</span><span
style='font-family:宋体'>引起的。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>问题的答案是：</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>本身没有问题，因为</span><span lang=EN-US style='font-family:
Consolas'>Lisp</span><span style='font-family:宋体'>就和</span><span lang=EN-US
style='font-family:Consolas'>Life</span><span style='font-family:宋体'>一样，看你怎么过。</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184039"><span
lang=EN-US style='font-family:Consolas'>14.3<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>Rich Hickey</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>访谈</span></u></h2>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'><a
href="http://www.simple-talk.com/opinion/geek-of-the-week/rich-hickey-geek-of-the-week/">http://www.simple-talk.com/opinion/geek-of-the-week/rich-hickey-geek-of-the-week/</a></span></p>

<p class=MsoNormal align=left style='margin-top:6.8pt;text-align:left'><b><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>RM: </span></b><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>Rich, plenty
of people must have been tired of programming in C++/Java/C# as you did but
simply put up with it. What was the trigger to develop Clojure? Was it a matter
of waking up in the middle of the night and realising what the problem was?</span></p>

<p class=MsoNormal align=left style='margin-top:6.8pt;text-align:left'><b><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>RH: </span></b><span
lang=EN-US style='font-family:"Arial","sans-serif";color:#333333'>One watershed
moment for me was when I designed and implemented a new system from scratch in
Common Lisp, which was a new language for me at the time, only to have the
client require it be rewritten in C++, with which I was quite proficient. The
port to C++ took three times as long as the original work, was much more code,
and wasn't significantly faster. I knew then that I wanted to work in a Lisp,
but realized that it had to be client-compatible. I worked on bridging Common
Lisp and Java, while doing functional-style programming for clients in C#, for
a couple of years, then bit the bullet and wrote Clojure.</span></p>

<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>对我来说，这事的分水岭是：当时，有一个我用刚了解的</span><span lang=EN-US style='font-family:Consolas'>Common
Lisp</span><span style='font-family:宋体'>语言来设计和实现的新系统，由于用户的需要改用我精通的</span><span
lang=EN-US style='font-family:Consolas'>C++</span><span style='font-family:
宋体'>来改写，整个改写耗费了</span><span lang=EN-US style='font-family:Consolas'>3</span><span
style='font-family:宋体'>倍的时间以及多得多的代码量，但性能却没有明显的提升。通过此事我就觉得必须用</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>来干活，但我又得保证客户兼容性，很多时候这需要桥接</span><span lang=EN-US style='font-family:Consolas'>Common
Lisp</span><span style='font-family:宋体'>和</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>，还需要为客户用</span><span
lang=EN-US style='font-family:Consolas'>C#</span><span style='font-family:宋体'>写函数式风格的代码，几年后，当我有了足够的储备，开发</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>就水到渠成了。</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US><img
border=0 width=266 height=348 src="ClojureHandbook.files/image007.jpg"></span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184040"><span
lang=EN-US style='font-family:Consolas'>14.4<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>语言结构决定人类思维方式及行动方法</span></u></a></h2>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'><a
href="http://nklein.com/2009/02/sapir-whorf-wit-programming-languages/">http://nklein.com/2009/02/sapir-whorf-wit-programming-languages/</a></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>作者对比了</span><span lang=EN-US style='font-family:Consolas'>Objective-C</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>，认为</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>为进行功能的函数化分离提供了更多的便利，使编程者更愿意进行此类重构，而</span><span
lang=EN-US style='font-family:Consolas'>Objective-C/C++/Java/Perl</span><span
style='font-family:宋体'>的使用者维护几处相同的代码的可能性更大。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>用</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>构建新函数，不用为起函数名发愁，不用为参数列表太多而发愁，不用为</span><span lang=EN-US
style='font-family:Consolas'>.h</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>.c</span><span style='font-family:宋体'>中重复定义而发愁，不用为区分函数和方法而发愁，不用为返回多个值发愁。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184041"><span
lang=EN-US style='font-family:Consolas'>14.5<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>The Joy of
Clojure</span></u></a><u><span style='font-family:"微软雅黑","sans-serif"'>笔记</span></u></h2>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>：</span><span lang=EN-US style='font-family:Consolas'>beautiful and
practical design principles</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184042"><span
lang=EN-US style='font-family:Consolas'>14.6<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>On Lisp</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>笔记</span></u></h2>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>Lisp-1</span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Lisp-2</span><span
style='font-family:宋体'>的区别：</span></p>

<p class=MsoNormal align=left style='margin-left:10.5pt;text-align:left;
text-indent:21.0pt'><span lang=EN-US style='font-family:Consolas'>Lisp-1</span><span
style='font-family:宋体'>的变量和函数名在同一个空间</span></p>

<p class=MsoNormal align=left style='margin-left:10.5pt;text-align:left;
text-indent:21.0pt'><span lang=EN-US style='font-family:Consolas'>Lisp-2</span><span
style='font-family:宋体'>的变量和函数名在</span><span lang=EN-US style='font-family:Consolas'>2</span><span
style='font-family:宋体'>个空间，可以同时有一个变量</span><span lang=EN-US style='font-family:
Consolas'>f</span><span style='font-family:宋体'>和一个函数</span><span lang=EN-US
style='font-family:Consolas'>f</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Scheme</span><span
style='font-family:宋体'>是</span><span lang=EN-US style='font-family:Consolas'>Lisp-1</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>CLisp</span><span
style='font-family:宋体'>是</span><span lang=EN-US style='font-family:Consolas'>Lisp-2</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184043"><span
lang=EN-US style='font-family:Consolas'>14.7<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>Clojure on
Heroku</span></u></a></h2>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'><a
href="http://blog.heroku.com/archives/2011/7/5/clojure_on_heroku/">http://blog.heroku.com/archives/2011/7/5/clojure_on_heroku/</a></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184044"><span
lang=EN-US style='font-family:Consolas'>14.8<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>Clojure 1.3
changelog</span></u></a></h2>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'><a
href="https://github.com/clojure/clojure/blob/1.3.x/changes.txt">https://github.com/clojure/clojure/blob/1.3.x/changes.txt</a></span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style='font-family:宋体'>要点：</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US
style='font-family:Consolas'>Clojure1.2</span><span style='font-family:宋体'>编译出来的</span><span
lang=EN-US style='font-family:Consolas'>.class</span><span style='font-family:
宋体'>不能用</span><span lang=EN-US style='font-family:Consolas'>Clojure1.3</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>jar</span><span
style='font-family:宋体'>来执行</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US
style='font-family:Consolas'>clojure.set, clojure.xml, clojure.zip </span><span
style='font-family:宋体'>需要手动引入才能用</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US
style='font-family:Consolas'>replicate</span><span style='font-family:宋体'>函数和</span><span
lang=EN-US style='font-family:Consolas'>repeat</span><span style='font-family:
宋体'>重复，被去除</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:宋体'>增加</span><span lang=EN-US style='font-family:Consolas'>clojure.data/diff</span><span
style='font-family:宋体'>，比较两个</span><span lang=EN-US style='font-family:Consolas'>map</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(use 'clojure.data)</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(diff {:a 10 :b 20} {:b 20 :c 30}) ; ({:a
10} {:c 30} {:b 20})</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
style='font-family:宋体'>得到</span><span lang=EN-US style='font-family:Consolas'>[<u>things-only-in-param1</u>
&nbsp;<u>things-only-in-param2</u> &nbsp;<u>things-in-both</u>]</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:宋体'>增加</span><span lang=EN-US style='font-family:Consolas'>every-pred</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>some-fn</span><span
style='font-family:宋体'>函数</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>((every-pred even?) 2 4 6) ; true</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>((some-fn even?) 2 4 5)</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:宋体'>增加</span><span lang=EN-US style='font-family:Consolas'>realized?</span><span
style='font-family:宋体'>函数，判断是否已经由一个</span><span lang=EN-US style='font-family:
Consolas'>lazy</span><span style='font-family:宋体'>、</span><span lang=EN-US
style='font-family:Consolas'>delay</span><span style='font-family:宋体'>的变量被真正生成了</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(def r (range 10)) ; </span><span
style='font-family:宋体'>仅定义，</span><span lang=EN-US style='font-family:Consolas'>lazy</span><span
style='font-family:宋体'>，尚未真正生成</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(realized? r) ; <span style='background:
yellow'>false</span></span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(count r) ; </span><span
style='font-family:宋体'>随便用一下，在此过程中被真正生成了</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(realized? r) ; <span style='background:
yellow'>true</span></span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:宋体'>增加</span><span lang=EN-US style='font-family:Consolas'>with-redefs-fn
</span><span style='font-family:宋体'>和</span><span style='font-family:Consolas'>
<span lang=EN-US>with-redefs </span></span><span style='font-family:宋体'>临时改变函数定义</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(println nil?) ; #&lt;core$nil_QMARK_
clojure.core$nil_QMARK_@7b283052&gt;</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(with-redefs [nil? &quot;hello&quot;]
(println nil?)) ; &quot;hello&quot;</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span
style='font-family:宋体'>增加</span><span lang=EN-US style='font-family:Consolas'>find-keyword</span><span
style='font-family:宋体'>看函数名和</span><span lang=EN-US style='font-family:Consolas'>namespace</span><span
style='font-family:宋体'>是否已经被用了</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US style='font-family:Consolas'>(find-keyword map)</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:-21.0pt'><span lang=EN-US style='font-family:Wingdings'>l<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><span lang=EN-US
style='font-family:Consolas'>clojure-contrib.jar</span><span style='font-family:
宋体'>已经被分成小块</span><span lang=EN-US style='font-family:Consolas'>module</span><span
style='font-family:宋体'>，不再打包发布，需要的各自下载</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc306184045"><span lang=EN-US style='font-family:Consolas'>15、<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>对照表</span></u></a></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184046"><span
lang=EN-US style='font-family:Consolas'>15.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>和</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>clisp</span></u><u><span
style='font-family:"微软雅黑","sans-serif"'>、</span></u><u><span lang=EN-US
style='font-family:Consolas'>scheme</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>的区别</span></u></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Lisp</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Clojure</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn m1
  (args) args)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn m1
  [args] args)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[]</span><span
  style='font-family:宋体'>使函数参数看上去一目了然</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[1, 2, 3, 4]</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[1 2 3 4]</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>减少</span><span lang=EN-US
  style='font-family:Consolas'>,</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(cond ((&lt;
  x 10) &quot;less&quot;)</span></p>
  <p class=MsoNormal style='text-indent:36.75pt'><span lang=EN-US
  style='font-family:Consolas'>((&gt; x 10) &quot;more&quot;))</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(cond (&lt;
  x 10) &quot;less&quot;</span></p>
  <p class=MsoNormal style='text-indent:36.75pt'><span lang=EN-US
  style='font-family:Consolas'>(&gt; x 10) &quot;more&quot;)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>减少不必要的</span><span
  lang=EN-US style='font-family:Consolas'>()</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>car cdr</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>first rest</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>函数名更人性化</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>clisp scheme
clojure</span><span style='font-family:宋体'>语法</span><span style='font-family:
宋体'>对比</span><span lang=EN-US style='font-family:Consolas'> (</span><span
lang=EN-US style='font-family:Consolas'><a href="http://hyperpolyglot.org/lisp">http://hyperpolyglot.org/lisp</a></span><span
lang=EN-US style='font-family:Consolas'>)</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Clojure (2007)</span></b></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-left:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>clisp (1984)</span></b></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-left:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Scheme (1975)</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def v 10)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defvar v)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(setf v 10)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(setq v 10)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(set 'v 10)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(define v
  10)</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f [x
  y] (+ x y))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defun f (x
  y) (+ x y))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(define (f x
  y) (+ x y))</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(vector 2 4
  6)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[2 4 6]</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(vector 2 4
  6)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#(2 4 6)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(vector 2 4
  6)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#(2 4 6)</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fn [x y] (+
  x y))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#(+ %1 %2)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(#(+ %1 %2)
  3 4)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(lambda (x
  y) (+ x y))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(<span
  style='background:yellow'>funcall</span> (lambda (x y) (+ x y)) 3 4)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(lambda (x
  y) (+ x y))</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>first </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>rest</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>first car</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>rest cdr</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>car</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>cdr</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>true false</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>T NIL</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#t #f</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map (fn [x]
  (* x x)) '(2 3))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(mapcar </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>(lambda (x) (* x x)) '(2 3))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map (lambda
  (x) (* x x)) '(2 3))</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(reduce + 0
  '(1 2 3))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(reduce <span
  style='background:yellow'>'</span>+</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;'(1
  2 3) :initial-value 0)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(reduce + 0
  '(1 2 3))</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let [x 3 y
  4] (+ x y))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let [x 3 y
  (inc x)] (* x y)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let ((x 3)
  (y 4)) (+ x y))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let<span
  style='background:yellow'>*</span> ((x 3) (y (incf x))) </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>(* x y))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(let ((x 3)
  (y 4)) (+ x y))</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(str
  &quot;hello&quot; &quot;world&quot;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(concatenate
  'string </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>&quot;hello&quot; &quot;world&quot;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(nth
  &quot;hello&quot; 4)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(aref
  &quot;hello&quot; 4)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(printf
  &quot;hello&quot;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(write-line
  &quot;hello&quot;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(type
  &quot;hello&quot;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(type-of
  &quot;hello&quot;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Clojure (2007)</span></b></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>clisp (1984)</span></b></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Scheme (1975)</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(cond (int?
  i) 0 :else -1)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(cond ((int?
  i) 0) (:else -1))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>number?
  integer? float?</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>numberp
  integerp floatp</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Math/pow
  Math/log</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>expt log</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(Integer/parseInt
  &quot;107&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(Double/parseDouble
  &quot;3.14&quot;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(parse-integer
  &quot;10&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(read-from-string
  &quot;3.14&quot;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(quot 10 3)
  ; 3</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(rem 10 3) ;
  </span><span style='font-family:宋体'>余数</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(truncate 10
  3) ; </span><span style='font-family:宋体'>整除</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(rem 10 3) ;
  </span><span style='font-family:宋体'>余数</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(rand 10.0)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(int (rand
  10))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(random
  10.0)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(random 10)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>\e</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(.charAt
  &quot;hello&quot; 1)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(.indexOf
  &quot;hello&quot; &quot;e&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(.substring
  &quot;hello&quot; 1)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(count
  &quot;hello&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(.equals
  &quot;hello&quot; &quot;heLLo&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(.compareTo
  &quot;ab&quot; &quot;ac&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(.toLowerCase
  &quot;Hello&quot;)</span></p>
  <p class=MsoNormal><span class=apple-style-span><span lang=EN-US
  style='font-size:10.0pt;font-family:"Verdana","sans-serif";color:black'>(.trim
  &quot; foo &quot;)</span></span></p>
  <p class=MsoNormal><span class=apple-style-span><span lang=EN-US
  style='font-size:10.0pt;font-family:"Verdana","sans-serif";color:black'>&nbsp;</span></span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(str
  &quot;hello &quot; 10)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(seq (.split
  &quot;a b&quot;&nbsp; &quot;[ \t]+&quot;))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(format
  &quot;%s %d %.1f&quot; </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>&quot;a&quot; 7 3.14)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#\e</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(char
  &quot;hello&quot; 1)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(search
  &quot;e&quot; &quot;hello&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(subseq
  &quot;hello&quot; 1)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(length
  &quot;hello&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(string=
  &quot;hello&quot; &quot;heLLo&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(string&gt;
  &quot;ab&quot; &quot;ac&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(string-downcase
  &quot;Hello&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(string-trim
  '(#\Space #\Tab #\NewLine) &quot; foo &quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(concatenate
  'string </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;hello &quot;
  (princ-to-string 10))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(regexp:regexp-split
  &quot;[ \t]+&quot; &quot;a b&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(format nil
  &quot;~a ~a ~,1F&quot; </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>&quot;a&quot; 7 3.14)</span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Clojure (2007)</span></b></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>clisp (1984)</span></b></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Scheme (1975)</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(concat [1
  2] [3 4])</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(append '(1
  2) '(3 4))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(nth '(10 20
  30) 1)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(nth 1 '(10
  20 30))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(position 3
  '(5 3 7))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(wr3.clj.s/position
  3 '(5 3 7))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(last '(1 3
  5))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(first (last
  '(1 3 5)))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def a '(1 3
  5))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(cons 10
  (rest a))</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>或者</span><span lang=EN-US
  style='font-family:Consolas'>&nbsp; (assoc [1 3 5] 0 10)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(setq a '(1
  3 5))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(setf (first
  a) 10); (10 3 5)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(sort '(2 3
  1) '&lt;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(sort &lt;
  '(2 3 1))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(find '{a 10
  b 20} 'a)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(assoc 'a
  '((a 3) (b 5)))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>('{a 10 b 20
  c 30} 'a)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(getf '(a 10
  b 20 c 30) 'a)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def
  #^{:macro true} lambda</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;#'fn)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defmacro fn
  (&amp;rest args)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;`(lambda&nbsp;
  ,@args))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(map #(* %
  %) '(1 2 3))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(mapcar
  (lambda (x) (* x x)) </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;'(1 2
  3))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(filter
  #(&gt; % 2) '(1 2 3))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(remove-if-not
  </span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>(lambda (x) (&gt; x 2)) '(1 2 3))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(reduce - 0
  '(1 2 3 4))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(reduce '- '(1
  2 3 4)</span></p>
  <p class=MsoNormal style='text-indent:5.25pt'><span lang=EN-US
  style='font-family:Consolas'>:initial-value 0)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(doseq [x
  '(1 2 3)] (println x))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(dolist (x
  '(1 2 3)) (print x))</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span class=apple-style-span><span lang=EN-US
  style='font-size:10.0pt;font-family:"Verdana","sans-serif";color:black'>(nth
  [1 2 3] 0)</span></span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(aref #(1 2
  3) 0)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span class=apple-style-span><span lang=EN-US
  style='font-size:10.0pt;font-family:"Verdana","sans-serif";color:black'>(replace
  {2 20} [1 2 3])</span></span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(setq v #(1
  2 3))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(setf (aref
  v 1) 20)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span class=apple-style-span><span lang=EN-US
  style='font-size:10.0pt;font-family:"Verdana","sans-serif";color:black'>(seq
  [1 2 3])</span></span></p>
  <p class=MsoNormal><span class=apple-style-span><span lang=EN-US
  style='font-size:10.0pt;font-family:"Verdana","sans-serif";color:black'>(vec
  '(1 2 3))</span></span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(coerce #(1
  2 3) 'list)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(coerce '(1
  2 3) 'vector)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span class=apple-style-span><span lang=EN-US
  style='font-size:10.0pt;font-family:"Verdana","sans-serif";color:black'>(seq?
  '(1 2 3))</span></span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(typep '(1 2
  3) 'list)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(load-file
  &quot;a.clj&quot;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(load
  &quot;a.lisp&quot;)</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=241 valign=top style='width:180.6pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span class=apple-style-span><span lang=EN-US
  style='font-size:10.0pt;font-family:"Verdana","sans-serif";color:black'>&nbsp;</span></span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=241 valign=top style='width:180.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306184047"><span
lang=EN-US style='font-family:Consolas'>15.2<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>和</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>newlisp</span></u><u><span
style='font-family:"微软雅黑","sans-serif"'>的区别</span></u></h2>

<p class=MsoNormal align=center style='text-align:center'><span
class=apple-style-span><span lang=EN-US style='font-family:Consolas;color:#444444;
background:white'>newLISP for little jobs and Clojure for the heavy stuff</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>newlisp</span><span
style='font-family:宋体'>也是一个现代的</span><span lang=EN-US style='font-family:Consolas'>lisp</span><span
style='font-family:宋体'>方言，特别适合用于快速启动的脚本以及调用</span><span lang=EN-US
style='font-family:Consolas'>C</span><span style='font-family:宋体'>函数库，和</span><span
lang=EN-US style='font-family:Consolas'>Clojure</span><span style='font-family:
宋体'>优势互补。</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;border-collapse:collapse;border:none'>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Clojure</span></b></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-left:none;background:#FDE9D9;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>newlisp</span></b></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(def v 10)</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(setq v 10)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(define v
  10)</span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f [x
  y] (+ x y))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(defn f []
  nil)</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(define (f x
  y) (+ x y))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(define (f)
  nil)</span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(vector 2 4
  6)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>[2 4 6]</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fn [x y] (+
  x y))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>#(+ %1 %2)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(#(+ %1 %2)
  3 4)</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(fn (x y) (+
  x y))</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>((fn (x y)
  (+ x y)) 3 4)</span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(range 5)</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(sequence 0
  4)</span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(import
  &quot;msvcr71.dll&quot; &quot;printf&quot;)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(printf
  &quot;hello\n&quot;)</span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(slice '(a b
  c d e f) 2 -1)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(slice '(a b
  c d e f) 2 4)</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(2 '(a b c d
  e f)) ; (c d e f)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(2 3 '(a b c
  d e f)) ; (c d e)</span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(copy coll)
  ; </span><span style='font-family:宋体'>一个新的</span><span lang=EN-US
  style='font-family:Consolas'>clone</span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(doseq [[i
  e] (map-indexed (fn [i e] [i e]) '(a b c d e f))] (printf &quot;%s:
  %s\n&quot; i e))</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(dolist (x
  '(a b c d e f)) </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (println
  <b><u>$idx</u></b> &quot;: &quot; x))</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=3Consolas style='margin-right:10.5pt'><span lang=EN-US
style='text-decoration:none'>15.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US>newlisp</span><span style='font-family:"微软雅黑","sans-serif"'>常用模式</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=138 valign=top style='width:103.8pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>功能</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>代码示例</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=138 valign=top style='width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span style='font-family:
  宋体'>得到命令行参数</span></p>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>newlisp Cm 10</span></p>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>(main-args) ; <span style='color:#5B6E6E'>(&quot;newlisp&quot;
  &quot;-m&quot; &quot;10&quot;)</span></span></p>
  </td>
 </tr>
 <tr>
  <td width=138 valign=top style='width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span style='font-family:
  宋体'>执行脚本</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span style='font-family:
  宋体'>注意：在最后必须写</span><span lang=EN-US style='font-family:Consolas;background:
  yellow'>(exit)</span><span style='font-family:宋体'>，如</span></p>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>(println (main-args))</span></p>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>(exit)</span></p>
  </td>
 </tr>
 <tr>
  <td width=138 valign=top style='width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span style='font-family:
  宋体'>不装载</span><span lang=EN-US style='font-family:Consolas'>init.lsp</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>newlisp <span style='background:yellow'>Cn</span>
  test1.lsp</span></p>
  </td>
 </tr>
 <tr>
  <td width=138 valign=top style='width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span style='font-family:
  宋体'>处理每行</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>$newlisp -n t1.lsp &lt; t1.lsp</span></p>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>;------------------- t1.lsp</span></p>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>(while (read-line)</span></p>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>&nbsp; (println (current-line)))</span></p>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>(exit)</span></p>
  </td>
 </tr>
 <tr>
  <td width=138 valign=top style='width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=138 valign=top style='width:103.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>-------------------------------------- The End
-----------------------------------</span></p>

<p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

</div>

</body>

</html>
