<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<title>Scala Handbook by jamesqiu</title>
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Helvetica;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Courier;
	panose-1:2 7 4 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Tms Rmn";
	panose-1:2 2 6 3 4 5 5 2 3 4;}
@font-face
	{font-family:Helv;
	panose-1:2 11 6 4 2 2 2 3 2 4;}
@font-face
	{font-family:"New York";
	panose-1:2 4 5 3 6 5 6 2 3 4;}
@font-face
	{font-family:System;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:Batang;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:PMingLiU;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:Dotum;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:黑体;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:MingLiU;
	panose-1:2 2 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:Mincho;
	panose-1:2 2 6 9 4 3 5 8 3 5;}
@font-face
	{font-family:Gulim;
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:Century;
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Angsana New";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Cordia New";
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:Mangal;
	panose-1:2 4 5 3 5 2 3 3 2 2;}
@font-face
	{font-family:Latha;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Sylfaen;
	panose-1:1 10 5 2 5 3 6 3 3 3;}
@font-face
	{font-family:Vrinda;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Raavi;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Shruti;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Sendnya;
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gautami;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Tunga;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Estrangelo Edessa";
	panose-1:3 8 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:"Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Consolas;
	panose-1:2 11 6 9 2 2 4 3 2 4;}
@font-face
	{font-family:微软雅黑;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:Fixedsys;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Verdana;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:Marlett;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@Batang";
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:BatangChe;
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@BatangChe";
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Gungsuh;
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:"\@Gungsuh";
	panose-1:2 3 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:GungsuhChe;
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@GungsuhChe";
	panose-1:2 3 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:DaunPenh;
	panose-1:1 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:DokChampa;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Euphemia;
	panose-1:2 11 5 3 4 1 2 2 1 4;}
@font-face
	{font-family:Vani;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@Gulim";
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:GulimChe;
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@GulimChe";
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@Dotum";
	panose-1:2 11 6 0 0 1 1 1 1 1;}
@font-face
	{font-family:DotumChe;
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@DotumChe";
	panose-1:2 11 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:Impact;
	panose-1:2 11 8 6 3 9 2 5 2 4;}
@font-face
	{font-family:"Iskoola Pota";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Kalinga;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Kartika;
	panose-1:2 2 5 3 3 4 4 6 2 3;}
@font-face
	{font-family:"Khmer UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lao UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Lucida Console";
	panose-1:2 11 6 9 4 5 4 2 2 4;}
@font-face
	{font-family:"Malgun Gothic";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:"\@Malgun Gothic";
	panose-1:2 11 5 3 2 0 0 2 0 4;}
@font-face
	{font-family:Meiryo;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Meiryo";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Meiryo UI";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Meiryo UI";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Microsoft Himalaya";
	panose-1:1 1 1 0 1 1 1 1 1 1;}
@font-face
	{font-family:"Microsoft JhengHei";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@Microsoft JhengHei";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"\@微软雅黑";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@MingLiU";
	panose-1:2 2 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@PMingLiU";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU_HKSCS;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU_HKSCS";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:PMingLiU-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@PMingLiU-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:MingLiU_HKSCS-ExtB;
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MingLiU_HKSCS-ExtB";
	panose-1:2 2 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Mongolian Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"\@MS Gothic";
	panose-1:2 11 6 9 7 2 5 8 2 4;}
@font-face
	{font-family:"MS PGothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS PGothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"MS UI Gothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS UI Gothic";
	panose-1:2 11 6 0 7 2 5 8 2 4;}
@font-face
	{font-family:"\@MS Mincho";
	panose-1:2 2 6 9 4 2 5 8 3 4;}
@font-face
	{font-family:"MS PMincho";
	panose-1:2 2 6 0 4 2 5 8 3 4;}
@font-face
	{font-family:"\@MS PMincho";
	panose-1:2 2 6 0 4 2 5 8 3 4;}
@font-face
	{font-family:"MV Boli";
	panose-1:2 0 5 0 3 2 0 9 0 0;}
@font-face
	{font-family:"Microsoft New Tai Lue";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Nyala;
	panose-1:2 0 5 4 7 3 0 2 0 3;}
@font-face
	{font-family:"Microsoft PhagsPa";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Plantagenet Cherokee";
	panose-1:2 2 6 2 7 1 0 0 0 0;}
@font-face
	{font-family:"Segoe Script";
	panose-1:2 11 5 4 2 0 0 0 0 3;}
@font-face
	{font-family:"Segoe UI";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Semibold";
	panose-1:2 11 7 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Light";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Segoe UI Symbol";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:新宋体;
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:"\@新宋体";
	panose-1:2 1 6 9 3 1 1 1 1 1;}
@font-face
	{font-family:SimSun-ExtB;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@SimSun-ExtB";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"Microsoft Tai Le";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Shonar Bangla";
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Yi Baiti";
	panose-1:3 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Microsoft Sans Serif";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Aparajita;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Ebrima;
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Gisha;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:Kokila;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Leelawadee;
	panose-1:2 11 5 2 4 2 4 2 2 3;}
@font-face
	{font-family:"Microsoft Uighur";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:MoolBoran;
	panose-1:2 11 1 0 1 1 1 1 1 1;}
@font-face
	{font-family:Utsaah;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Vijaya;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:Andalus;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Arabic Typesetting";
	panose-1:3 2 4 2 4 4 6 3 2 3;}
@font-face
	{font-family:"Simplified Arabic";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Simplified Arabic Fixed";
	panose-1:2 7 3 9 2 2 5 2 4 4;}
@font-face
	{font-family:"Sakkal Majalla";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Traditional Arabic";
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:Aharoni;
	panose-1:2 1 8 3 2 1 4 3 2 3;}
@font-face
	{font-family:David;
	panose-1:2 14 5 2 6 4 1 1 1 1;}
@font-face
	{font-family:FrankRuehl;
	panose-1:2 14 5 3 6 1 1 1 1 1;}
@font-face
	{font-family:"Levenim MT";
	panose-1:2 1 5 2 6 1 1 1 1 1;}
@font-face
	{font-family:Miriam;
	panose-1:2 11 5 2 5 1 1 1 1 1;}
@font-face
	{font-family:"Miriam Fixed";
	panose-1:2 11 5 9 5 1 1 1 1 1;}
@font-face
	{font-family:Narkisim;
	panose-1:2 14 5 2 5 1 1 1 1 1;}
@font-face
	{font-family:Rod;
	panose-1:2 3 5 9 5 1 1 1 1 1;}
@font-face
	{font-family:仿宋;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@仿宋";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@黑体";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:楷体;
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@楷体";
	panose-1:2 1 6 9 6 1 1 1 1 1;}
@font-face
	{font-family:AngsanaUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:"Browallia New";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:BrowalliaUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:CordiaUPC;
	panose-1:2 11 3 4 2 2 2 2 2 4;}
@font-face
	{font-family:DilleniaUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:EucrosiaUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:FreesiaUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:IrisUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:JasmineUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:KodchiangUPC;
	panose-1:2 2 6 3 5 4 5 2 3 4;}
@font-face
	{font-family:LilyUPC;
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:DFKai-SB;
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@DFKai-SB";
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"Lucida Sans Unicode";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Arial Black";
	panose-1:2 11 10 4 2 1 2 2 2 4;}
@font-face
	{font-family:Candara;
	panose-1:2 14 5 2 3 3 3 2 2 4;}
@font-face
	{font-family:"Comic Sans MS";
	panose-1:3 15 7 2 3 3 2 2 2 4;}
@font-face
	{font-family:Constantia;
	panose-1:2 3 6 2 5 3 6 3 3 3;}
@font-face
	{font-family:Corbel;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Medium";
	panose-1:2 11 6 3 2 1 2 2 2 4;}
@font-face
	{font-family:Gabriola;
	panose-1:4 4 6 5 5 16 2 2 13 2;}
@font-face
	{font-family:Georgia;
	panose-1:2 4 5 2 5 4 5 2 3 3;}
@font-face
	{font-family:"Palatino Linotype";
	panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
	{font-family:"Segoe Print";
	panose-1:2 0 6 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Trebuchet MS";
	panose-1:2 11 6 3 2 2 2 2 2 4;}
@font-face
	{font-family:Webdings;
	panose-1:5 3 1 2 1 5 9 6 7 3;}
@font-face
	{font-family:方正舒体;
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:"\@方正舒体";
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:方正姚体;
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:"\@方正姚体";
	panose-1:2 1 6 1 3 1 1 1 1 1;}
@font-face
	{font-family:隶书;
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@隶书";
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:华文彩云;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文彩云";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文仿宋;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文仿宋";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文琥珀;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文琥珀";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文楷体;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文楷体";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文隶书;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文隶书";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文宋体;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文宋体";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文细黑;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文细黑";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文行楷;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文行楷";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文新魏;
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文新魏";
	panose-1:2 1 8 0 4 1 1 1 1 1;}
@font-face
	{font-family:华文中宋;
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:"\@华文中宋";
	panose-1:2 1 6 0 4 1 1 1 1 1;}
@font-face
	{font-family:幼圆;
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:"\@幼圆";
	panose-1:2 1 5 9 6 1 1 1 1 1;}
@font-face
	{font-family:"MT Extra";
	panose-1:5 5 1 2 1 2 5 2 2 2;}
@font-face
	{font-family:Haettenschweiler;
	panose-1:2 11 7 6 4 9 2 6 2 4;}
@font-face
	{font-family:"MS Outlook";
	panose-1:5 1 1 0 1 0 0 0 0 0;}
@font-face
	{font-family:"Book Antiqua";
	panose-1:2 4 6 2 5 3 5 3 3 4;}
@font-face
	{font-family:"Century Gothic";
	panose-1:2 11 5 2 2 2 2 2 2 4;}
@font-face
	{font-family:"Bookshelf Symbol 7";
	panose-1:5 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"MS Reference Sans Serif";
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"MS Reference Specialty";
	panose-1:5 0 5 0 0 0 0 0 0 0;}
@font-face
	{font-family:"Bradley Hand ITC";
	panose-1:3 7 4 2 5 3 2 3 2 3;}
@font-face
	{font-family:"Freestyle Script";
	panose-1:3 8 4 2 3 2 5 11 4 4;}
@font-face
	{font-family:"French Script MT";
	panose-1:3 2 4 2 4 6 7 4 6 5;}
@font-face
	{font-family:"Juice ITC";
	panose-1:4 4 4 3 4 10 2 2 2 2;}
@font-face
	{font-family:"Kristen ITC";
	panose-1:3 5 5 2 4 2 2 3 2 2;}
@font-face
	{font-family:"Lucida Handwriting";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:Mistral;
	panose-1:3 9 7 2 3 4 7 2 4 3;}
@font-face
	{font-family:Papyrus;
	panose-1:3 7 5 2 6 5 2 3 2 5;}
@font-face
	{font-family:Pristina;
	panose-1:3 6 4 2 4 4 6 8 2 4;}
@font-face
	{font-family:"Tempus Sans ITC";
	panose-1:4 2 4 4 3 13 7 2 2 2;}
@font-face
	{font-family:Garamond;
	panose-1:2 2 4 4 3 3 1 1 8 3;}
@font-face
	{font-family:"Monotype Corsiva";
	panose-1:3 1 1 1 1 2 1 1 1 1;}
@font-face
	{font-family:"Agency FB";
	panose-1:2 11 5 3 2 2 2 2 2 4;}
@font-face
	{font-family:"Arial Rounded MT Bold";
	panose-1:2 15 7 4 3 5 4 3 2 4;}
@font-face
	{font-family:"Blackadder ITC";
	panose-1:4 2 5 5 5 16 7 2 13 2;}
@font-face
	{font-family:"Bodoni MT";
	panose-1:2 7 6 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Black";
	panose-1:2 7 10 3 8 6 6 2 2 3;}
@font-face
	{font-family:"Bodoni MT Condensed";
	panose-1:2 7 6 6 8 6 6 2 2 3;}
@font-face
	{font-family:"Bookman Old Style";
	panose-1:2 5 6 4 5 5 5 2 2 4;}
@font-face
	{font-family:"Calisto MT";
	panose-1:2 4 6 3 5 5 5 3 3 4;}
@font-face
	{font-family:Castellar;
	panose-1:2 10 4 2 6 4 6 1 3 1;}
@font-face
	{font-family:"Century Schoolbook";
	panose-1:2 4 6 4 5 5 5 2 3 4;}
@font-face
	{font-family:"Copperplate Gothic Bold";
	panose-1:2 14 7 5 2 2 6 2 4 4;}
@font-face
	{font-family:"Copperplate Gothic Light";
	panose-1:2 14 5 7 2 2 6 2 4 4;}
@font-face
	{font-family:"Curlz MT";
	panose-1:4 4 4 4 5 7 2 2 2 2;}
@font-face
	{font-family:"Edwardian Script ITC";
	panose-1:3 3 3 2 4 7 7 13 8 4;}
@font-face
	{font-family:Elephant;
	panose-1:2 2 9 4 9 5 5 2 3 3;}
@font-face
	{font-family:"Engravers MT";
	panose-1:2 9 7 7 8 5 5 2 3 4;}
@font-face
	{font-family:"Eras Bold ITC";
	panose-1:2 11 9 7 3 5 4 2 2 4;}
@font-face
	{font-family:"Eras Demi ITC";
	panose-1:2 11 8 5 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Light ITC";
	panose-1:2 11 4 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Eras Medium ITC";
	panose-1:2 11 6 2 3 5 4 2 8 4;}
@font-face
	{font-family:"Felix Titling";
	panose-1:4 6 5 5 6 2 2 2 10 4;}
@font-face
	{font-family:Forte;
	panose-1:3 6 9 2 4 5 2 7 2 3;}
@font-face
	{font-family:"Franklin Gothic Book";
	panose-1:2 11 5 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi Cond";
	panose-1:2 11 7 6 3 4 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Heavy";
	panose-1:2 11 9 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Franklin Gothic Medium Cond";
	panose-1:2 11 6 6 3 4 2 2 2 4;}
@font-face
	{font-family:Gigi;
	panose-1:4 4 5 4 6 16 7 2 13 2;}
@font-face
	{font-family:"Gill Sans MT";
	panose-1:2 11 5 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT Condensed";
	panose-1:2 11 5 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold";
	panose-1:2 11 10 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans Ultra Bold Condensed";
	panose-1:2 11 10 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Gill Sans MT Ext Condensed Bold";
	panose-1:2 11 9 2 2 1 4 2 2 3;}
@font-face
	{font-family:"Gloucester MT Extra Condensed";
	panose-1:2 3 8 8 2 6 1 1 1 1;}
@font-face
	{font-family:"Goudy Old Style";
	panose-1:2 2 5 2 5 3 5 2 3 3;}
@font-face
	{font-family:"Goudy Stout";
	panose-1:2 2 9 4 7 3 11 2 4 1;}
@font-face
	{font-family:"Imprint MT Shadow";
	panose-1:4 2 6 5 6 3 3 3 2 2;}
@font-face
	{font-family:"Lucida Sans";
	panose-1:2 11 6 2 3 5 4 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
@font-face
	{font-family:"Maiandra GD";
	panose-1:2 14 5 2 3 3 8 2 2 4;}
@font-face
	{font-family:"OCR A Extended";
	panose-1:2 1 5 9 2 1 2 1 3 3;}
@font-face
	{font-family:"Palace Script MT";
	panose-1:3 3 3 2 2 6 7 12 11 5;}
@font-face
	{font-family:Perpetua;
	panose-1:2 2 5 2 6 4 1 2 3 3;}
@font-face
	{font-family:"Perpetua Titling MT";
	panose-1:2 2 5 2 6 5 5 2 8 4;}
@font-face
	{font-family:"Rage Italic";
	panose-1:3 7 5 2 4 5 7 7 3 4;}
@font-face
	{font-family:Rockwell;
	panose-1:2 6 6 3 2 2 5 2 4 3;}
@font-face
	{font-family:"Rockwell Condensed";
	panose-1:2 6 6 3 5 4 5 2 1 4;}
@font-face
	{font-family:"Rockwell Extra Bold";
	panose-1:2 6 9 3 4 5 5 2 4 3;}
@font-face
	{font-family:"Script MT Bold";
	panose-1:3 4 6 2 4 6 7 8 9 4;}
@font-face
	{font-family:"Tw Cen MT";
	panose-1:2 11 6 2 2 1 4 2 6 3;}
@font-face
	{font-family:"Tw Cen MT Condensed";
	panose-1:2 11 6 6 2 1 4 2 2 3;}
@font-face
	{font-family:"Tw Cen MT Condensed Extra Bold";
	panose-1:2 11 8 3 2 2 2 2 2 4;}
@font-face
	{font-family:Algerian;
	panose-1:4 2 7 5 4 10 2 6 7 2;}
@font-face
	{font-family:"Baskerville Old Face";
	panose-1:2 2 6 2 8 5 5 2 3 3;}
@font-face
	{font-family:"Bauhaus 93";
	panose-1:4 3 9 5 2 11 2 2 12 2;}
@font-face
	{font-family:"Bell MT";
	panose-1:2 2 5 3 6 3 5 2 3 3;}
@font-face
	{font-family:"Berlin Sans FB";
	panose-1:2 14 6 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Berlin Sans FB Demi";
	panose-1:2 14 8 2 2 5 2 2 3 6;}
@font-face
	{font-family:"Bernard MT Condensed";
	panose-1:2 5 8 6 6 9 5 2 4 4;}
@font-face
	{font-family:"Bodoni MT Poster Compressed";
	panose-1:2 7 7 6 8 6 1 5 2 4;}
@font-face
	{font-family:"Britannic Bold";
	panose-1:2 11 9 3 6 7 3 2 2 4;}
@font-face
	{font-family:Broadway;
	panose-1:4 4 9 5 8 11 2 2 5 2;}
@font-face
	{font-family:"Brush Script MT";
	panose-1:3 6 8 2 4 4 6 7 3 4;}
@font-face
	{font-family:"Californian FB";
	panose-1:2 7 4 3 6 8 11 3 2 4;}
@font-face
	{font-family:Centaur;
	panose-1:2 3 5 4 5 2 5 2 3 4;}
@font-face
	{font-family:Chiller;
	panose-1:4 2 4 4 3 16 7 2 6 2;}
@font-face
	{font-family:"Colonna MT";
	panose-1:4 2 8 5 6 2 2 3 2 3;}
@font-face
	{font-family:"Cooper Black";
	panose-1:2 8 9 4 4 3 11 2 4 4;}
@font-face
	{font-family:"Footlight MT Light";
	panose-1:2 4 6 2 6 3 10 2 3 4;}
@font-face
	{font-family:"Harlow Solid Italic";
	panose-1:4 3 6 4 2 15 2 2 13 2;}
@font-face
	{font-family:Harrington;
	panose-1:4 4 5 5 5 10 2 2 7 2;}
@font-face
	{font-family:"High Tower Text";
	panose-1:2 4 5 2 5 5 6 3 3 3;}
@font-face
	{font-family:Jokerman;
	panose-1:4 9 6 5 6 13 6 2 7 2;}
@font-face
	{font-family:"Kunstler Script";
	panose-1:3 3 4 2 2 6 7 13 13 6;}
@font-face
	{font-family:"Lucida Bright";
	panose-1:2 4 6 2 5 5 5 2 3 4;}
@font-face
	{font-family:"Lucida Calligraphy";
	panose-1:3 1 1 1 1 1 1 1 1 1;}
@font-face
	{font-family:"Lucida Fax";
	panose-1:2 6 6 2 5 5 5 2 2 4;}
@font-face
	{font-family:Magneto;
	panose-1:4 3 8 5 5 8 2 2 13 2;}
@font-face
	{font-family:"Matura MT Script Capitals";
	panose-1:3 2 8 2 6 6 2 7 2 2;}
@font-face
	{font-family:"Modern No\. 20";
	panose-1:2 7 7 4 7 5 5 2 3 3;}
@font-face
	{font-family:"Niagara Engraved";
	panose-1:4 2 5 2 7 7 3 3 2 2;}
@font-face
	{font-family:"Niagara Solid";
	panose-1:4 2 5 2 7 7 2 2 2 2;}
@font-face
	{font-family:"Old English Text MT";
	panose-1:3 4 9 2 4 5 8 3 8 6;}
@font-face
	{font-family:Onyx;
	panose-1:4 5 6 2 8 7 2 2 2 3;}
@font-face
	{font-family:Parchment;
	panose-1:3 4 6 2 4 7 8 4 8 4;}
@font-face
	{font-family:Playbill;
	panose-1:4 5 6 3 10 6 2 2 2 2;}
@font-face
	{font-family:"Poor Richard";
	panose-1:2 8 5 2 5 5 5 2 7 2;}
@font-face
	{font-family:Ravie;
	panose-1:4 4 8 5 5 8 9 2 6 2;}
@font-face
	{font-family:"Informal Roman";
	panose-1:3 6 4 2 3 4 6 11 2 4;}
@font-face
	{font-family:"Showcard Gothic";
	panose-1:4 2 9 4 2 1 2 2 6 4;}
@font-face
	{font-family:"Snap ITC";
	panose-1:4 4 10 7 6 10 2 2 2 2;}
@font-face
	{font-family:Stencil;
	panose-1:4 4 9 5 13 8 2 2 4 4;}
@font-face
	{font-family:"Viner Hand ITC";
	panose-1:3 7 5 2 3 5 2 2 2 3;}
@font-face
	{font-family:Vivaldi;
	panose-1:3 2 6 2 5 5 6 9 8 4;}
@font-face
	{font-family:"Vladimir Script";
	panose-1:3 5 4 2 4 4 7 7 3 5;}
@font-face
	{font-family:"Wide Latin";
	panose-1:2 10 10 7 5 5 5 2 4 4;}
@font-face
	{font-family:"Wingdings 2";
	panose-1:5 2 1 2 1 5 7 7 7 7;}
@font-face
	{font-family:"Wingdings 3";
	panose-1:5 4 1 2 1 8 7 7 7 7;}
@font-face
	{font-family:"\@Arial Unicode MS";
	panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
	{font-family:"Arial Narrow";
	panose-1:2 11 6 6 2 2 2 3 2 4;}
@font-face
	{font-family:"ESRI MilSym 02";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI US MUTCD 2";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI US Forestry 2";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Default Marker";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI IGL Font24";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Fire Incident NFPA";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI NIMA DNC LN";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Pipeline US 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Caves 2";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Dimensioning";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilSym 05";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI SDS 2\.00 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI SDS 2\.00 2";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Weather";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Enviro Hazard Incident";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI ERS Infrastructures S1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI IGL Font23";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI NIMA VMAP1&2 PT";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI North";
	panose-1:2 0 5 8 0 0 0 2 0 3;}
@font-face
	{font-family:"ESRI IGL Font25";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Crime Analysis";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI SDS 1\.95 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Business";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Arrowhead";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI ERS Operations S1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilMod 01";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Surveyor";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Telecom";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Geology USGS 95-525";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Cartography";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Enviro Hazard Analysis";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Oil\, Gas\, & Water";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI NIMA City Graphic PT";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI Transportation & Civic";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Geology";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI AMFM Water";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilMod 02";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI ArcPad";
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Ordnance Survey";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI NIMA DNC PT";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilSym 03";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Environmental & Icons";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI IGL Font20";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI Hazardous Materials";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI NIMA City Graphic LN";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI NIMA VMAP1&2 LN";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Shields";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI SDS 1\.95 2";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Caves 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Hydrants";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Public1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI IGL Font22";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Conservation";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilSym 04";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilSym 01";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI AMFM Electric";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Elements";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Caves 3";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Climate & Precipitation";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI US MUTCD 3";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Commodities";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Geology AGSO 1";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:"ESRI IGL Font16";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI US Forestry 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI IGL Font21";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI MilRed 01";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI AMFM Gas";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI US MUTCD 1";
	panose-1:2 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Enviro Hazard Sites";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI Geometric Symbols";
	panose-1:2 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:"ESRI AMFM Sewer";
	panose-1:2 0 5 9 0 0 0 2 0 4;}
@font-face
	{font-family:汉仪菱心体简;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@汉仪菱心体简";
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"Vera Sans YuanTi Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
@font-face
	{font-family:"\@Vera Sans YuanTi Mono";
	panose-1:2 11 6 9 3 8 4 2 2 4;}
@font-face
	{font-family:汉鼎繁印篆;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@汉鼎繁印篆";
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:金梅毛草;
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:"\@金梅毛草";
	panose-1:2 1 6 9 0 1 1 1 1 1;}
@font-face
	{font-family:文泉驿微米黑;
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:"\@文泉驿微米黑";
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:文泉驿等宽微米黑;
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:"\@文泉驿等宽微米黑";
	panose-1:2 11 6 6 3 8 4 2 2 4;}
@font-face
	{font-family:"Fixedsys Excelsior 3\.01";
	panose-1:2 11 6 0 7 7 2 4 2 4;}
@font-face
	{font-family:"\@Fixedsys Excelsior 3\.01";
	panose-1:2 11 6 0 7 7 2 4 2 4;}
@font-face
	{font-family:"ChickenScratch AOE";
	panose-1:0 0 4 0 0 0 0 0 0 0;}
@font-face
	{font-family:迷你简启体;
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@迷你简启体";
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:迷你繁启体;
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:"\@迷你繁启体";
	panose-1:3 0 5 9 0 0 0 0 0 0;}
@font-face
	{font-family:-;
	panose-1:0 0 0 0 0 0 0 0 0 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"标题 1 Char";
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:21.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-21.6pt;
	line-height:240%;
	page-break-after:avoid;
	font-size:22.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h2
	{mso-style-link:"标题 2 Char";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:28.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-14.6pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h3
	{mso-style-link:"标题 3 Char";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:36.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-7.65pt;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h4
	{mso-style-link:"标题 4 Char";
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:43.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-.65pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
h5
	{mso-style-link:"标题 5 Char";
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:50.4pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:6.3pt;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
h6
	{mso-style-link:"标题 6 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:57.6pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-57.6pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"标题 7 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:64.8pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-64.8pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-link:"标题 8 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:72.0pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-72.0pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"标题 9 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.2pt;
	margin-left:79.2pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-79.2pt;
	line-height:133%;
	page-break-after:avoid;
	font-size:10.5pt;
	font-family:"Arial","sans-serif";}
p.MsoIndex1, li.MsoIndex1, div.MsoIndex1
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex2, li.MsoIndex2, div.MsoIndex2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:10.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex3, li.MsoIndex3, div.MsoIndex3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:20.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex4, li.MsoIndex4, div.MsoIndex4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:30.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex5, li.MsoIndex5, div.MsoIndex5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:40.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex6, li.MsoIndex6, div.MsoIndex6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:50.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex7, li.MsoIndex7, div.MsoIndex7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:60.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex8, li.MsoIndex8, div.MsoIndex8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:70.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoIndex9, li.MsoIndex9, div.MsoIndex9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:80.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:42.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:63.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:84.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:105.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:126.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:147.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:168.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"页眉 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	layout-grid-mode:char;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"页脚 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoIndexHeading, li.MsoIndexHeading, div.MsoIndexHeading
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Arial","sans-serif";
	font-weight:bold;}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";}
p.MsoTof, li.MsoTof, div.MsoTof
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:-10.0pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
span.MsoFootnoteReference
	{vertical-align:super;}
span.MsoEndnoteReference
	{vertical-align:super;}
p.MsoEndnoteText, li.MsoEndnoteText, div.MsoEndnoteText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoToa, li.MsoToa, div.MsoToa
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.0pt;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";}
p.MsoMacroText, li.MsoMacroText, div.MsoMacroText
	{margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	punctuation-wrap:simple;
	text-autospace:none;
	font-size:12.0pt;
	font-family:"Courier New";}
p.MsoToaHeading, li.MsoToaHeading, div.MsoToaHeading
	{margin-top:6.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:12.0pt;
	font-family:"Arial","sans-serif";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"标题 Char";
	margin-top:12.0pt;
	margin-right:0cm;
	margin-bottom:3.0pt;
	margin-left:0cm;
	text-align:center;
	font-size:16.0pt;
	font-family:"Cambria","serif";
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoDocumentMap, li.MsoDocumentMap, div.MsoDocumentMap
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	background:navy;
	font-size:9.0pt;
	font-family:"Tahoma","sans-serif";}
p
	{margin-right:0cm;
	margin-left:0cm;
	font-size:12.0pt;
	font-family:宋体;}
code
	{font-family:宋体;}
pre
	{mso-style-link:"HTML 预设格式 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:宋体;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	font-size:10.5pt;
	font-family:"Calibri","sans-serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.kw1
	{mso-style-name:kw1;}
span.br0
	{mso-style-name:br0;}
span.kw3
	{mso-style-name:kw3;}
span.nu0
	{mso-style-name:nu0;}
span.me1
	{mso-style-name:me1;}
span.kw2
	{mso-style-name:kw2;}
span.keyword
	{mso-style-name:keyword;}
span.string
	{mso-style-name:string;}
span.number
	{mso-style-name:number;}
span.Char
	{mso-style-name:"页眉 Char";
	mso-style-link:页眉;}
span.Char0
	{mso-style-name:"页脚 Char";
	mso-style-link:页脚;}
span.dct-tt
	{mso-style-name:dct-tt;}
span.dct-elb
	{mso-style-name:dct-elb;}
span.comment
	{mso-style-name:comment;}
span.HTMLChar
	{mso-style-name:"HTML 预设格式 Char";
	mso-style-link:"HTML 预设格式";
	font-family:宋体;}
span.sy0
	{mso-style-name:sy0;}
span.st0
	{mso-style-name:st0;}
span.es0
	{mso-style-name:es0;}
span.co1
	{mso-style-name:co1;}
span.apple-style-span
	{mso-style-name:apple-style-span;}
span.apple-converted-space
	{mso-style-name:apple-converted-space;}
span.Char1
	{mso-style-name:"标题 Char";
	mso-style-link:标题;
	font-family:"Cambria","serif";
	font-weight:bold;}
span.k
	{mso-style-name:k;}
span.nn
	{mso-style-name:nn;}
span.n
	{mso-style-name:n;}
span.nc
	{mso-style-name:nc;}
span.o
	{mso-style-name:o;}
span.mi
	{mso-style-name:mi;}
span.c1
	{mso-style-name:c1;}
span.kt
	{mso-style-name:kt;}
span.s
	{mso-style-name:s;}
span.sc
	{mso-style-name:sc;}
span.1Char
	{mso-style-name:"标题 1 Char";
	mso-style-link:"标题 1";
	font-weight:bold;}
span.2Char
	{mso-style-name:"标题 2 Char";
	mso-style-link:"标题 2";
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.3Char
	{mso-style-name:"标题 3 Char";
	mso-style-link:"标题 3";
	font-weight:bold;}
span.4Char
	{mso-style-name:"标题 4 Char";
	mso-style-link:"标题 4";
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.5Char
	{mso-style-name:"标题 5 Char";
	mso-style-link:"标题 5";
	font-weight:bold;}
span.6Char
	{mso-style-name:"标题 6 Char";
	mso-style-link:"标题 6";
	font-family:"Arial","sans-serif";
	font-weight:bold;}
span.7Char
	{mso-style-name:"标题 7 Char";
	mso-style-link:"标题 7";
	font-weight:bold;}
span.8Char
	{mso-style-name:"标题 8 Char";
	mso-style-link:"标题 8";
	font-family:"Arial","sans-serif";}
span.9Char
	{mso-style-name:"标题 9 Char";
	mso-style-link:"标题 9";
	font-family:"Arial","sans-serif";}
span.msoIns
	{mso-style-name:"";
	text-decoration:underline;
	color:teal;}
span.msoDel
	{mso-style-name:"";
	text-decoration:line-through;
	color:red;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 28.3pt 72.0pt 36.0pt;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ZH-CN link=blue vlink=purple style='text-justify-trim:punctuation; padding: 20px'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<p class=MsoDocumentMap align=center style='text-align:center'><a
name="_Toc306132177"></a><a name="_Toc282027443"><b><span lang=EN-US
style='font-size:26.0pt;color:yellow'>Scala 2.8<sup>+</sup> Handbook</span></b></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的向后兼容性没有</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>那么谨慎，</span><span lang=EN-US style='font-family:Consolas'>2.8+</span><span
style='font-family:宋体'>相对于</span><span lang=EN-US style='font-family:Consolas'>2.7</span><span
style='font-family:宋体'>有很大变化，本文档针对</span><span lang=EN-US style='font-family:
Consolas'>2.8+</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></b></p>

<p class=MsoNormal align=center style='text-align:center'><b><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></b><b><span style='font-family:宋体'>“<i>和别人分享你的知识，那才是永恒之道</i>”――</span></b><b><span
lang=EN-US style='font-family:Consolas'>somebody</span></b></p>

<p class=MsoNormal align=center style='text-align:center'><b><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></b></p>

<p class=MsoNormal><b><span style='font-family:宋体'>前言：</span></b></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>这只是份简单的笔记，本不应敝履自珍，但手痒难耐还是写点废话在前面。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>书籍浩如烟海，技术方面的书也汗牛充栋，可惜我们的阅读速度和理解力、记忆力太有限，往往费力学懂的知识转眼就变得非常陌生，“博闻强志、过目不忘”者毕竟罕见。对于大部分人来说，即便昔日信手拈来的东西，时间久了也会毫无头绪。所以知识不在于曾经学过多少，而在于你记住并还能运用多少。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>“好记性不如烂笔头”――近年来我慢慢习惯把费力学习的东西都做一个笔记，一是在学习的过程中加深印象，毕竟技术学习不同于欣赏娱乐大片和浏览娱乐新闻看个过眼烟云；二是便于学而“时习之”，书上的东西一般是针对不同技术背景的读者，有很多作者费力用墨之处对你来说纯属废话，而他一笔带过的地方恰恰让你困惑不已。一本读书笔记相当于你对书的“注解”。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>很好玩很有趣，但绝对不是一门简单易懂的编程语言（</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>从</span><span lang=EN-US style='font-family:Consolas'>1.0</span><span
style='font-family:宋体'>到</span><span lang=EN-US style='font-family:Consolas'>7.0</span><span
style='font-family:宋体'>，一直做</span><span lang=EN-US style='font-family:Consolas'>++</span><span
style='font-family:宋体'>；而</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>不光做</span><span lang=EN-US style='font-family:Consolas'>++</span><span
style='font-family:宋体'>，也做</span><span lang=EN-US style='font-family:Consolas'>--</span><span
style='font-family:宋体'>）。对于从</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>或者其他</span><span lang=EN-US style='font-family:Consolas'>FP</span><span
style='font-family:宋体'>走过来的人，</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>有很多“别扭”的用法，很难记清楚用正确。学</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>，最佳的做法是把它用到日常的应用开发中，不断加深记忆。但即便你准备这么做了，手头没有一份方便的备查材料，刚开始也会步履艰难。我在使用的过程中也有这个体会，所以才不怨其烦地把一些学来并尝试过的东西记在本文档中备查，以便之后能行云流水地“玩转”它。整个写笔记的过程，没有孤寂，而是沉浸在学习新知的兴奋和快意中，希望这种快乐也能放大传递给更多的人。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>个人认为，对于一门编程语言使用中的查阅，大致有几个阶段：查教程（</span><span
lang=EN-US style='font-family:Consolas'>tutorial</span><span style='font-family:
宋体'>）――》查手册（</span><span lang=EN-US style='font-family:Consolas'>handbook</span><span
style='font-family:宋体'>）――》查自己写的库。这个材料，不是严格的教程，或手册，而是介于这两者间。</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>目前已经出版了几本书，这些书从各自的角度解读</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>，比如</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>作者的“</span><i><span lang=EN-US style='font-family:Consolas'>Programming
Scala</span></i><span style='font-family:宋体'>”，应该是最权威的</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>书。但好书不一定好读，一是太厚，二是无趣，不如自制的来得贴心。正如数学问题要用公式表达最清楚，编程问题得用<b><u>图表和代码</u></b>表示才最清楚，这二者也是本文中使用最多的表达方式，我尽量采用简短的代码来说明问题（简短代码也能说明很多事情，广受赞誉的</span><span
lang=EN-US style='font-family:Consolas'>Effective Java</span><span
style='font-family:宋体'>基本没有超过一页的程序代码）。能够熟练使用</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>的程序员，参考本笔记，应该可以自如地开始着手写</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>程序。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>若能给同样对</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>感兴趣的</span><span lang=EN-US style='font-family:Consolas'>IT</span><span
style='font-family:宋体'>人一些帮助，本人必感欣慰。</span></p>

<p class=MsoNormal align=right style='text-align:right;text-indent:21.0pt'><span
style='font-family:宋体'>――</span><span lang=EN-US style='font-family:Consolas'>JamesQiu</span></p>

<p class=MsoNormal align=right style='text-align:right;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'><a href="mailto:jamesqiu@sina.com">jamesqiu@sina.com</a></span></p>

<p class=MsoNormal align=right style='text-align:right;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'><a href="http://qiujj.com">http://qiujj.com</a></span></p>

<p class=MsoTocHeading style='margin-top:0cm;line-height:150%'><span
style='font-family:"微软雅黑","sans-serif"'>目录</span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span
lang=EN-US style='font-family:"Arial","sans-serif"'><span class=MsoHyperlink><a
href="#_Toc306132177"><b>Scala 2.8<sup>+</sup> Handbook</b><span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>1</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132178">1.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Scala<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>有多</span></span>cool<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132179">1.1.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>速度！</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132180">1.2.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>易用的数据结构</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132181">1.3.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>OOP+FP<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132182">1.4.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>动态</span></span>+<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>静态</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132183">1.5.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>DSL<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132184">1.6.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>够复杂</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132185">1.7.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>够有趣</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132186">1.8.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>开发社区</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132187">2.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>lang<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132188">2.1.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>和</span></span>Java<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>的异同</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132189">2.2.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>变量</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132190">2.3.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>基本类型</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>10</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132191">2.4.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>BigInt<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>12</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132192">2.5.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>字符串</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>12</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132193">2.6.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Null,
None, Nil, Nothing<span style='color:windowtext;display:none;text-decoration:
none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>13</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132194">2.7.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>==<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>和</span></span>eq<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>14</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132195">2.8.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Option[T]<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>14</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132196">2.9.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>区分</span></span>&lt;-,=&gt;,-&gt;<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>16</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132197"><span
lang=DE>2.10.</span><span style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=DE>match..case(switch)</span><span style='color:windowtext;display:none;
text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>16</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132198">2.11.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>try..catch..finally<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>19</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132199">2.12.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>require<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>19</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132200">2.13.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>main<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>方法</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>19</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132201">2.14.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>package,
import<span style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>20</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132202">2.15.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if..else<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>21</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132203">2.16.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>循环操作</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>21</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132204">2.17.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>操作符重载</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>27</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132205">2.18.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>系统定义</span></span>scala._<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>27</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132206">2.19.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>implicit<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>隐式转换</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>27</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132207">2.20.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>type<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>做</span></span>alias<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>29</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132208">2.21.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>泛型</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>30</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132209">2.22.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>枚举</span></span>Enum<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>32</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132210">3.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>FP<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>32</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132211">3.1.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>函数</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>32</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132212">3.2.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>函数式编程</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>40</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132213">4.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>OOP<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>44</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132214">4.1.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>类</span></span>class<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>44</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132215">4.2.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>trait<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>超级接口</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>49</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132216">4.3.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>协变和逆变</span></span>(co-|contra-)variance<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>50</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132217">5.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>util<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>包</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>52</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132218">5.1.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>架构</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>52</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132219">5.2.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>集合</span></span>Array,List,Tuple<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>54</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132220">5.3.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Map<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>65</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132221">5.4.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Set<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>68</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132222">5.5.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Iterator<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>69</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132223">5.6.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Paralllel
collection<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>69</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132224">6.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>io<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>70</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132225">6.1.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>文件</span></span>I/O<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>70</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132226">6.2.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>网络</span></span>I/O<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>71</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132227">7.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>actor<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>71</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132228">7.1.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>actor<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>模型</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>72</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132229">7.2.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>多核计算</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>72</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132230">7.3.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Actor<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>用法</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>73</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132231">7.4.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>方式</span></span>1<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>：接受</span></span>receive<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>73</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132232">7.5.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>方式</span></span>2<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>：接受</span></span>react,
loop<span style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>74</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132233">7.6.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>REPL<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>接受消息</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>75</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132234">7.7.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>actor<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>最佳实践</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>75</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132235">7.8.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>不同</span></span>jvm<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>间的消息访问</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>77</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132236">7.9.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>STM<span
style='color:windowtext;display:none;text-decoration:none'>.. </span><span
style='color:windowtext;display:none;text-decoration:none'>78</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132237">8.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>misc<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>79</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132238">8.1.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>xml<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>79</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132239">8.2.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>json<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>80</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132240">8.3.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Configgy<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>81</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132241">8.4.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>正则表达式</span></span>regex<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>81</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132242">8.5.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>GUI<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>83</span></a></span></span></p>

<p class=MsoToc1 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132243">9.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>附录</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>83</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132244">9.1.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>stackoverflow<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>的</span></span>scala<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>教程</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>83</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132245">9.2.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ProjectEuler<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>84</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132246">9.3.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Scala<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>问答</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>84</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132247">9.4.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>rosettacode<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>84</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132248">9.5.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>编译、</span></span>mvn<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>、</span></span>SBT<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>84</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132249">9.6.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Scala<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>水平划分</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>85</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132250">9.7.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Scala<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>适合的领域</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>86</span></a></span></span></p>

<p class=MsoToc2 style='line-height:11.0pt'><span class=MsoHyperlink><span
lang=EN-US style='font-family:"Arial","sans-serif"'><a href="#_Toc306132251">9.8.<span
style='color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Twitter<span
lang=EN-US style='font-family:"微软雅黑","sans-serif"'><span lang=EN-US>的</span></span>Scala
School<span style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>86</span></a></span></span></p>

<p class=MsoNormal style='line-height:10.0pt'><span lang=EN-US
style='font-family:"Arial","sans-serif"'>&nbsp;</span></p>

<p class=MsoNormal align=right style='margin-right:5.25pt;text-align:right;
text-indent:21.0pt'><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc306132178"></a><a name="_Ref306131900"></a><a
name="_Ref306131894"></a><a name="_Toc282027446"></a><a name="_Toc281659929"><span
lang=EN-US style='font-size:10.5pt;line-height:240%;font-family:Consolas;
font-weight:normal'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Scala</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>有多</span></u><u><span lang=EN-US
style='font-family:Consolas'>cool</span></u><a name="_Toc282027447"></a></h1>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='font-family:Consolas'>“Put productivity &amp; creativity back in the
hands of developers”</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
class=apple-style-span><span lang=EN-US style='font-size:11.5pt;font-family:
Consolas;color:black'>Scala is a tour de force of language design.</span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132179"></a><a
name="_Toc282027448"></a><a name="_Toc281659930"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>1.1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>速度！</span></u></a></h2>

<p class=MsoNormal><a name="_Toc282027449"><b><span lang=EN-US
style='font-family:Consolas'>Java</span></b></a><b><span style='font-family:
宋体'>的运行速度</span></b></p>

<p class=MsoNormal><span style='font-family:宋体'>――基于</span><span lang=EN-US
style='font-family:Consolas'>JVM</span><span style='font-family:宋体'>，和</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>运行速度相当。看看</span><span lang=EN-US style='font-family:Consolas'>Ruby</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Perl</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Python</span><span
style='font-family:宋体'>对大项目运行效率的无奈，就知道有个好的编译器（</span><span lang=EN-US
style='font-family:Consolas'>Scalac</span><span style='font-family:宋体'>）和运行时（</span><span
lang=EN-US style='font-family:Consolas'>JVM</span><span style='font-family:
宋体'>）是多么美好。</span></p>

<p class=MsoNormal><a name="_Toc282027450"><b><span lang=EN-US
style='font-family:Consolas'>Python/Ruby</span></b></a><b><span
style='font-family:宋体'>的编程速度</span></b></p>

<p class=MsoNormal><span style='font-family:宋体'>――有更多的内建库和数据结构，编程就更快，</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>在完全继承</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>.NET</span><span
style='font-family:宋体'>的标准库的基础上，还扩展了更丰富有用的函数库。</span><span style='font-family:
宋体'>看看</span><span lang=EN-US style='font-family:Consolas'>C++</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>D</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Go</span><span
style='font-family:宋体'>等语言</span><span style='font-family:宋体'>库的发展情况（不是匮乏就是混乱），就知道从头创建如</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>.NET</span><span
style='font-family:宋体'>这般庞大全面的类库并非易事；</span></p>

<p class=MsoNormal><span style='font-family:宋体'>类库和运行速度有关系吗？――很大程度上有，众多专家已经在类库中准备了充分优化的稳定算法，</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>对</span><span lang=EN-US style='font-family:Consolas'>Java Collection</span><span
style='font-family:宋体'>算法进行直接包装或者直接调用，如果没有丰富的类库，你在项目周期内免不了摘抄一些不一定靠谱的算法和功能代码，这些代码极有可能在运行时给你带来麻烦。使用类库算法，不用担忧自造轮子的运行效率。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>是静态语言，</span><span lang=EN-US style='font-family:Consolas'>Scalac</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Javac</span><span
style='font-family:宋体'>是同一作者，编译成</span><span lang=EN-US style='font-family:
Consolas'>.class</span><span style='font-family:宋体'>后运行于</span><span
lang=EN-US style='font-family:Consolas'>JVM</span><span style='font-family:
宋体'>平台，近</span><span lang=EN-US style='font-family:Consolas'>20</span><span
style='font-family:宋体'>年那么多大公司投入进行的优化也不是白搭。对于大部分的应用来说，使用</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>不用再顾虑运行速度，它可能不是最快，但至少逼近</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>，而不像</span><span lang=EN-US style='font-family:Consolas'>Groovy</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>JRuby</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Jython</span><span
style='font-family:宋体'>那般与</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>有高达数十倍的效率差距。</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132180"></a><a
name="_Toc282027451"></a><a name="_Toc281659931"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>1.2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>易用的数据结构</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List-Map-Tuple</span><span
style='font-family:宋体'>及其丰富特性支持让你解决数据结构问题时游刃有余。</span></p>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'>List(1,31,4,3,53,4,234) <span
style='background:yellow'>filter</span> (10&lt;) <span style='background:yellow'>filter</span> (100&gt;)&nbsp; <span
style='color:#5B6E6E'>// List(31, 53)</span></span></pre><pre><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'>val (a,b) = List(1, 31,4,3,53,4,234) <span
style='background:yellow'>partition</span> (10&gt;) <span style='color:#5B6E6E'>// a=List(1,4,3,4), b=List(31,53,234)</span></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>def info(p:Person) = (name, age, email) <span
style='color:#5B6E6E'>// info._1, info._2, info._3</span></span></pre>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132181"></a><a
name="_Toc282027452"></a><a name="_Toc281659932"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>1.3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>OOP+FP</span></u></a></h2>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>适当地选用</span><span lang=EN-US
style='font-family:Consolas'>OOP</span><span style='font-family:宋体'>或者</span><span
lang=EN-US style='font-family:Consolas'>FP</span><span style='font-family:宋体'>，能够使表达相对另一种更加清晰准确。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>实际可见的生产力在于：一个应用中的部分代码尤其是高知识凝聚的代码如数学函数和设计模式，一般来说不会自己编写，而是会来自于现成的</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>库，或者其他语言，或者伪代码。我们可以很容易地把过程语言、面向对象语言、函数式语言中的代码“翻译”成</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>代码。试想如果我们要把</span><span
lang=EN-US style='font-family:Consolas'>Haskell</span><span style='font-family:
宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>的某个尾递归算法翻译成</span><span lang=EN-US style='font-family:
Consolas'>Java</span><span style='font-family:宋体'>代码，还得多花点时间；而要把</span><span
lang=EN-US style='font-family:Consolas'>C++</span><span style='font-family:
宋体'>的代码翻译成</span><span lang=EN-US style='font-family:Consolas'>Hashkell</span><span
style='font-family:宋体'>，同样也不简单。</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的混血性给我们的实际使用提供了便利。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>语言特色能够塑造编程者的思维：</span><span
lang=EN-US style='font-family:Consolas'> C++</span><span style='font-family:
宋体'>也能使用抽象基类设计多重继承，但</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>的接口引导你走得更远；</span><span lang=EN-US style='font-family:
Consolas'>Java</span><span style='font-family:宋体'>也能设计类型安全的静态方法</span><span
lang=EN-US style='font-family:Consolas'>(final static)</span><span
style='font-family:宋体'>，但</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>鼓励你这样做并逐步从</span><span lang=EN-US style='font-family:
Consolas'>OOP</span><span style='font-family:宋体'>到达</span><span lang=EN-US
style='font-family:Consolas'>FP</span><span style='font-family:宋体'>的彼岸，而且来去自如。</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132182"></a><a
name="_Toc282027453"></a><a name="_Toc281659933"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>1.4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>动态</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>+</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>静态</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>虽然是一门彻头彻底的静态语言，但又具备了现代动态语言的很多方便和灵活：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>不需要冗余的类型声明</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>可以在已有类上增加新方法（</span><span
lang=EN-US style='font-family:Consolas'>implicit</span><span style='font-family:
宋体'>转换和</span><span lang=EN-US style='font-family:Consolas'>Dynamic trait</span><span
style='font-family:宋体'>）</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>可以把不继承共同父类的不同类型对象传到方法中</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>可以做静态语言的</span><span lang=EN-US
style='font-family:Consolas'>Refactoring</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>不用象动态语言那样测试代码比业务代码还多</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>代码自动完成（</span><span lang=EN-US
style='font-family:Consolas'>REPL</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>IDE</span><span style='font-family:
宋体'>）</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>编译静态语言的性能</span><span
style='font-family:Consolas'> </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Read-Eval-Print
Loop</span><span style='font-family:宋体'>交互解释器（注：</span><span lang=EN-US
style='font-family:Consolas'>Linux</span><span style='font-family:宋体'>下的用户体验远好于</span><span
lang=EN-US style='font-family:Consolas'>Windows</span><span style='font-family:
宋体'>下）</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132183"></a><a
name="_Toc282027454"></a><a name="_Toc281659934"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>1.5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>DSL</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>可以把</span><span lang=EN-US style='font-family:Consolas'>xml/html</span><span
style='font-family:宋体'>处理、数学公式表达、</span><span lang=EN-US style='font-family:
Consolas'>SQL</span><span style='font-family:宋体'>查询等包装的更优雅、更合理，为使用者提供更好的</span><span
lang=EN-US style='font-family:Consolas'>API</span><span style='font-family:
宋体'>。这也使</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的程序也更可读，从而更易于维护。</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132184"></a><a
name="_Toc282027455"></a><a name="_Toc281659935"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>1.6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>够复杂</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>不同的思考模式：</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>是先写后想，</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>是先想后写（其实</span><span lang=EN-US style='font-family:Consolas'>FP</span><span
style='font-family:宋体'>大都如此）。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>相比于</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>，可能达不到</span><span lang=EN-US style='font-family:Consolas'>10</span><span
style='font-family:宋体'>倍的代码精简；但读</span><span lang=EN-US style='font-family:
Consolas'>Scala</span><span style='font-family:宋体'>代码的效率一般只有</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>1/10</span><span
style='font-family:宋体'>――可见</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>是一门没有多少特例的简单语言，而</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>则不然。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>你不要指望把</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>作为初学者的第一门编程语言，这门语言甚至不是初级程序员能够掌控的――换句话说，能够读懂和写</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>代码，说明你是一个不折不扣的资深程序员，或者更准确一点，是资深</span><span lang=EN-US style='font-family:
Consolas'>Java</span><span style='font-family:宋体'>程序员。</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><img width=311 height=216
  src="Scala-Handbook.files/image001.jpg"></span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><img width=285 height=219
  src="Scala-Handbook.files/image002.jpg"></span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><img width=300 height=206
  src="Scala-Handbook.files/image003.jpg"></span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><img width=274 height=206
  src="Scala-Handbook.files/image004.jpg"></span></p>
  <p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt'><span
  lang=EN-US style='font-family:Wingdings'>&eth;<span style='font:7.0pt "Times New Roman"'>&nbsp;
  </span></span><span lang=EN-US><img width=139 height=75
  src="Scala-Handbook.files/image005.jpg">&nbsp;<img width=122 height=97
  src="Scala-Handbook.files/image006.jpg"></span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>简单的</span><span lang=EN-US
  style='font-family:Consolas'>Java</span><span style='font-family:宋体'>（</span><span
  class=apple-style-span><span lang=EN-US style='font-size:10.0pt;font-family:
  "Arial","sans-serif";color:black'>Morse</span></span><span
  class=apple-converted-space><span style='font-size:10.0pt;font-family:宋体;
  color:black'>码，定型的玩具车）</span></span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>复杂的</span><span lang=EN-US
  style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>（智能机，乐高积木）</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132185"></a><a
name="_Toc282027456"></a><a name="_Toc281659936"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>1.7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>够有趣</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>还看这句话：</span><span lang=EN-US
style='font-family:Consolas'>“Put <b><u>productivity &amp; creativity</u></b>
back in the hands of developers”</span><span style='font-family:宋体'>。其实不仅限于</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>，对于所有的编程语言来说，一门语言是否“好玩”有趣，能否激起创作欲，才是最关键的，这比语言风格、运行速度、工具支持、社区文化都来得重要。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>回想我使用过的语言，</span><span
lang=EN-US style='font-family:Consolas'>C</span><span style='font-family:宋体'>、</span><span
lang=EN-US style='font-family:Consolas'>C++</span><span style='font-family:
宋体'>，只有在学习“图形学”课程做作业的时候给我“好玩”和编程过瘾的感觉；</span><span lang=EN-US style='font-family:
Consolas'>VB</span><span style='font-family:宋体'>、</span><span lang=EN-US
style='font-family:Consolas'>Delphi</span><span style='font-family:宋体'>、</span><span
lang=EN-US style='font-family:Consolas'>Lotus Script/Formular</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>JavaScript</span><span
style='font-family:宋体'>，重来没有给过我“好玩”的感觉，而</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>是在之前很长一段时间内让我觉得最“好玩”的语言，用它编游戏、做模式识别的作业、做产品……，乐在其中。但是</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>也许久没有再给我这种编程过瘾的感觉了。之前发现</span><span lang=EN-US style='font-family:Consolas'>Groovy</span><span
style='font-family:宋体'>的时候，我以为又找到一门好玩的语言了，但我一段时间使用之后，发现不是我的菜（</span><span
lang=EN-US style='font-family:Consolas'>Perl</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Python</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Ruby</span><span
style='font-family:宋体'>也如此）；我不是说那些我不觉得好玩的语言不好，有其他很多人觉得他们非常“好玩”，并且用它们创建了无数杀手级的、伟大的、有用的程序。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>有些人对一门语言会玩一辈子，就像</span><span
lang=EN-US style='font-family:Consolas'>Lisp</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Haskell</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Smalltalk</span><span
style='font-family:宋体'>的拥趸；而有些人会不断寻找下一个玩意儿，就像原来玩</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>的一些人发现更好玩的</span><span
lang=EN-US style='font-family:Consolas'>Ruby</span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Python</span><span
style='font-family:宋体'>之后，倒戈狂喷</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>，力挺后者；</span><span lang=EN-US style='font-family:Consolas'>Groovy/Grails</span><span
style='font-family:宋体'>的玩家在很短的时间里面，写了无数的扩展和</span><span lang=EN-US
style='font-family:Consolas'>Plugin</span><span style='font-family:宋体'>应用；学习</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>，能很多好玩的地方，能用它有激情地去写一些振奋人心的应用出来！</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132186"></a><a
name="_Toc282027457"></a><a name="_Toc281659937"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>1.8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>开发社区</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>开发</span><span lang=EN-US style='font-family:Consolas'>/</span><span
style='font-family:宋体'>用户社区气氛良好，基本都是资深开发者以及有一定经验的用户，不会碰到太弱智的事（提问、争吵），除了语言和工具开源免费，最权威和最好的书也都是免费的（包括</span><span
lang=EN-US style='font-family:Consolas'>Lift</span><span style='font-family:
宋体'>社区）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc306132187"></a><a name="_Toc282027458"></a><a
name="_Toc281659938"><span lang=EN-US style='font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>lang</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>  </span></u></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132188"></a><a
name="_Toc282027459"></a><a name="_Toc281659939"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>和</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>Java</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>的异同</span></u></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027460"></a><a
name="_Toc281659940"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.1.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>语法</span></u></a></h3>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Java++</span></b><b><span
  style='font-family:宋体'>：增加的语法</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Java--</span></b><b><span
  style='font-family:宋体'>：删减的语法</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>纯</span><span lang=EN-US
  style='font-family:Consolas'>OO</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>静态成员</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>操作符重载</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>原生数据类型</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>closure</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>break</span><span
  style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>continue</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
  style='font-family:Consolas'>trait</span><span style='font-family:宋体'>进行</span><span
  lang=EN-US style='font-family:Consolas'>mixin</span><span style='font-family:
  宋体'>组合</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>接口</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>existential
  type</span><span style='font-family:宋体'>（</span><span lang=EN-US
  style='font-family:Consolas'>_</span><span style='font-family:宋体'>）</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>通配符</span><span lang=EN-US
  style='font-family:Consolas'>List&lt;<span style='background:yellow'>?</span>&gt;,
  import pkg.<span style='background:yellow'>*</span>;</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>抽象类型</span><span
  style='font-family:Consolas'> </span><span style='font-family:宋体'>（</span><span
  lang=EN-US style='font-family:Consolas'>type T</span><span style='font-family:
  宋体'>）</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>原始类型</span><span lang=EN-US
  style='font-family:Consolas'> class C1&lt;<span style='background:yellow'>T</span>&gt;
  {...}</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>模式匹配</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>enum</span><span
  style='font-family:宋体'>枚举</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>注：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>existential
type</span><span style='font-family:宋体'>――和</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>互操作时进行对应</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Iterator&lt;?
extends Component&gt;&nbsp; --&gt;&nbsp; Iterator[T] { type T &lt;: Component }</span><span
style='font-family:宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>Iterator[_]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027461"></a><a
name="_Toc281659941"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.1.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>库</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>以下功能通过库的形式提供：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>assert</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>enum</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>property</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>event</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>actor</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>resource control</span><span
style='font-family:宋体'>（自动释放）</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>def <span style='background:yellow'>using</span>[T
&lt;: { def close() }] (res:T)(block:T=&gt;Unit) = {</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp; try { block(res) } finally {
if(res!=null) res.close }}</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas;background:yellow'>using</span><span
lang=EN-US style='font-family:Consolas'> (new BufferedReader(new
FileReader(path))) { f=&gt; println(f.readLine) }</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>不用每次使用</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>中的</span><span lang=EN-US style='font-family:Consolas'>finally</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>val f = new BufferedReader(new
FileReader(path)</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>try { println(f.readLine) } finally {
if (f!=null) f.close }</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>query</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132189"></a><a
name="_Toc282027462"></a><a name="_Toc281659942"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>变量</span></u></a></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027463"></a><a
name="_Toc281659943"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.2.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>保留字</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>abstract &nbsp; case
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch &nbsp;&nbsp;&nbsp;&nbsp; class &nbsp;&nbsp;&nbsp;&nbsp; def</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>do&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; extends &nbsp;&nbsp; false &nbsp;&nbsp;&nbsp;&nbsp; final</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>finally &nbsp;&nbsp; for
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>implicit</span> &nbsp; import</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>match &nbsp;&nbsp;&nbsp;&nbsp; new
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; null &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; object
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; override</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>package &nbsp;&nbsp; private
&nbsp;&nbsp; protected  <span style='background:yellow'>requires</span> &nbsp; return</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>sealed</span><span lang=EN-US style='font-family:Consolas'> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; super
&nbsp;&nbsp;&nbsp;&nbsp; this &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw &nbsp;&nbsp;&nbsp;&nbsp; trait</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>try &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; true
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; type &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; val &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; var</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>while &nbsp;&nbsp;&nbsp;&nbsp; with
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style='background:lime'>yield</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>_ &nbsp;&nbsp;&nbsp;&nbsp; :
&nbsp;&nbsp;&nbsp;&nbsp; = &nbsp;&nbsp;&nbsp;&nbsp; =&gt; &nbsp;&nbsp;&nbsp; &lt;-
&nbsp;&nbsp;&nbsp; <span style='background:yellow'>&lt;:</span> &nbsp;&nbsp;&nbsp; &lt;%
&nbsp;&nbsp;&nbsp; <span style='background:yellow'>&gt;:</span> &nbsp;&nbsp;&nbsp; <span
style='background:yellow'>#</span> &nbsp;&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>@</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>调用</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>的方法时，会碰到有</span><span lang=EN-US style='font-family:
Consolas'>Scala</span><span style='font-family:宋体'>的保留字，如</span><span
lang=EN-US style='font-family:Consolas'>Thread.<span style='background:lime'>yield</span>()</span></p>

<p class=MsoNormal><span style='font-family:宋体'>这在</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>中是非法的，专门有个解决办法，写成：</span><span
lang=EN-US style='font-family:Consolas'> Thread.<span style='background:lime'>`yield`</span>()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：<b><u>没有</u></b></span><span
lang=EN-US style='font-family:Consolas'>break</span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>continue</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027464"></a><a
name="_Toc281659944"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.2.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>变量标识</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>这些标识在</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>中是非法的，在</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>中是合法的，可以当作函数名使用，使接口更加</span><span lang=EN-US style='font-family:Consolas'>DSL</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val empty_? =
true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val + =
&quot;hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val `yield` =
10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val ** =
&quot;power&quot;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027465"></a><a
name="_Toc281659945"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.2.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>变量定义</span></u></a></h3>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>2.2.3.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>val, var</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var </span><span
style='font-family:宋体'>可变，可重新赋值，赋值为</span><span lang=EN-US style='font-family:
Consolas'>&quot;_&quot;</span><span style='font-family:宋体'>表示缺省值</span><span
lang=EN-US style='font-family:Consolas'>(0, false, null)</span><span
style='font-family:宋体'>，例如：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>var d:Double = _ // d = 0.0</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>var i:Int = _ // i = 0</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>var s:String = _ // s = null</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>var t:T = _&nbsp; // </span><span
style='font-family:宋体'>泛型</span><span lang=EN-US style='font-family:Consolas'>T</span><span
style='font-family:宋体'>对应的默认值</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val </span><span
style='font-family:宋体'>不可变，相当于</span><span lang=EN-US style='font-family:Consolas'>const/final</span><span
style='font-family:宋体'>，但如果</span><span lang=EN-US style='font-family:Consolas'>val</span><span
style='font-family:宋体'>为数组或者</span><span lang=EN-US style='font-family:Consolas'>List</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>val</span><span
style='font-family:宋体'>的元素可以赋值；</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val pi = 3. //
</span><span style='font-family:宋体'>相当于</span><span lang=EN-US
style='font-family:Consolas'>3.0d</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val pi = 3.f
// </span><span style='font-family:宋体'>相当于</span><span lang=EN-US
style='font-family:Consolas'>3.0f</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>提示：向函数式风格推进的一个方式，就是尝试<b><u>不用</u></b>任何</span><span
lang=EN-US style='font-family:Consolas'>var</span><span style='font-family:
宋体'>来定义变量。</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>2.2.3.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:10.5pt;line-height:156%;font-family:
"微软雅黑","sans-serif"'>花样定义</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>和</span><span lang=EN-US
style='font-family:Consolas'>Python</span><span style='font-family:宋体'>一样方便的赋值方式：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val x,y = 0 //
</span><span style='font-family:宋体'>赋同一初始值</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val (x,y) =
(10, &quot;hello&quot;) // </span><span style='font-family:宋体'>同时定义多个变量，注意：</span><span
lang=EN-US style='font-family:Consolas'>val x,y=10,&quot;hello&quot; </span><span
style='font-family:宋体'>是<b><u>错误</u></b>的</span></p>

<p class=MsoNormal><span style='font-family:宋体'>更花：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val x::y =
List(1,2,3,4)&nbsp; // x = 1, y = List(2,3,4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
List(a,b,c) = List(1,2,3) // a = 1, b = 2, c = 3</span></p>

<p class=MsoNormal><span style='font-family:宋体'>进一步花样：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val Array(<span
style='background:lime'>a</span>, <span style='background:aqua'>b</span>, <span
style='background:silver'>_, _,</span> <span style='background:yellow'>c</span>
<span style='background:yellow'>@</span> <span style='background:yellow'>_*</span>)
= Array(<span class=number><span style='background:lime'>1</span></span>, <span
class=number><span style='background:aqua'>2</span></span>, <span class=number><span
style='background:silver'>3</span></span><span style='background:silver'>, <span
class=number>4</span>,</span> <span class=number><span style='background:yellow'>5</span></span><span
style='background:yellow'>, <span class=number>6</span>, <span class=number>7</span></span>)&nbsp;
// </span><span style='font-family:宋体'>也可以用</span><span lang=EN-US
style='font-family:Consolas'>List</span><span style='font-family:宋体'>，</span><span
lang=EN-US style='font-family:Consolas'>Seq</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a // 1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>b // 2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>c // Array(5,
6, 7), _*</span><span style='font-family:宋体'>匹配</span><span lang=EN-US
style='font-family:Consolas'>0</span><span style='font-family:宋体'>个到多个</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用正则表达式定义：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val regex =
&quot;(\\d+)/(\\d+)/(\\d+)&quot;.r</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
regex(year, month, day) = &quot;2010/1/13&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
year: String = 2010</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
month: String = 1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
day: String = 13</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>2.2.3.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>lazy, val, def</span></u><u><span style='font-size:10.5pt;
line-height:156%;font-family:"微软雅黑","sans-serif"'>的区别</span></u></h4>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>定义时就一次求值完成，保持不变</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val f =
  10+20 // 30&nbsp; </span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>lazy</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>定义时不求值，第一次使用时完成求值，保持不变</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>lazy f =
  10+20 // &lt;lazy&gt;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f // 30</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>定义时不求值，每次使用时都重新求值</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f =
  10+20 // 30</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def t =
  System.</span><span lang=EN-US> </span><span lang=EN-US style='font-family:
  Consolas'>currentTimeMillis // </span><span style='font-family:宋体'>每次不一样</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#F3F5F5;
background:black'>scala&gt;</span><span lang=EN-US style='font-family:Consolas'>
val f1 = System.currentTimeMillis</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f1: Long =
1279682740376&nbsp; &nbsp;&nbsp;// </span><span style='font-family:宋体'>马上求值</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#F3F5F5;
background:black'>scala&gt;</span><span lang=EN-US style='font-family:Consolas'>
f1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>res94: Long =
1279682740376 // </span><span style='font-family:宋体'>之后保持不变</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#F3F5F5;
background:black'>scala&gt;</span><span lang=EN-US style='font-family:Consolas'>
lazy val f2 = System.currentTimeMillis</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f2: Long =
&lt;lazy&gt;&nbsp; // </span><span style='font-family:宋体'>定义时不求值</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#F3F5F5;
background:black'>scala&gt;</span><span lang=EN-US style='font-family:Consolas'>
System.currentTimeMillis</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>res95: Long =
127968276<span style='background:yellow'>4297</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#F3F5F5;
background:black'>scala&gt;</span><span lang=EN-US style='font-family:Consolas'>
f2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>res96: Long =
127968276<span style='background:yellow'>6545</span> // </span><span
style='font-family:宋体'>第一次使用时求值，注意：</span><span lang=EN-US style='font-family:
Consolas'>6545 &gt; 4297</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#F3F5F5;
background:black'>scala&gt;</span><span lang=EN-US style='font-family:Consolas'>
f2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>res97: Long =
127968276<span style='background:yellow'>6545</span> // </span><span
style='font-family:宋体'>之后保持不变</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#F3F5F5;
background:black'>scala&gt;</span><span lang=EN-US style='font-family:Consolas'>
def f3 = System.currentTimeMillis</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f3: Long</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#F3F5F5;
background:black'>scala&gt;</span><span lang=EN-US style='font-family:Consolas'>
f3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>res98: Long =
127968278<span style='background:yellow'>4478</span> // </span><span
style='font-family:宋体'>每次求值</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#F3F5F5;
background:black'>scala&gt;</span><span lang=EN-US style='font-family:Consolas'>
f3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>res99: Long =
127968278<span style='background:yellow'>5352</span> // </span><span
style='font-family:宋体'>每次求值</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132190"></a><a
name="_Toc282027466"></a><a name="_Toc281659946"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>基本类型</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>尽量使用大写形式：</span><span
lang=EN-US style='font-family:Consolas'> Int, Long, Double, Byte, Short, Char,
Float, Double, Boolean</span></p>

<p class=MsoNormal><span style='font-family:宋体'>编译时</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>自动对应到</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>原始类型，提高运行效率。</span><span lang=EN-US style='font-family:Consolas'>Unit</span><span
style='font-family:宋体'>对应</span><span lang=EN-US style='font-family:Consolas'>java</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>void</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
style='font-family:Consolas'> asInstanseOf[T]</span><span style='font-family:
宋体'>方法来强制转换类型：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def i =
10.asInstanceOf[Double] // i: Double = 10.0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List('A','B','C').map(c=&gt;(c+32).asInstanceOf[Char])
// List('a','b','c')</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
style='font-family:Consolas'>isInstanceOf[T]</span><span style='font-family:
宋体'>方法来判断类型：</span><span style='font-family:Consolas'> </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val b =
10.isInstanceOf[Int] // true</span></p>

<p class=MsoNormal><span style='font-family:宋体'>而在</span><span lang=EN-US
style='font-family:Consolas'>match ... case </span><span style='font-family:
宋体'>中可以直接判断而不用此方法。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>用</span><span lang=EN-US
style='font-family:Consolas'>Any</span><span style='font-family:宋体'>统一了原生类型和引用类型。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><img
width=707 height=323 src="Scala-Handbook.files/image007.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027467"></a><a
name="_Toc281659947"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.3.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>Int</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-3 <span
style='background:yellow'>abs</span> // 3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-3 <span
style='background:yellow'>max</span> -2 // -2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-3 <span
style='background:yellow'>min</span> -2 // -3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1.4 <span
style='background:yellow'>round</span> // 1 </span><span style='font-family:
宋体'>四舍五入</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1.6 <span
style='background:yellow'>round</span> // 2 </span><span style='font-family:
宋体'>四舍五入</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1.1 <span
style='background:yellow'>ceil</span> // 2.0 </span><span style='font-family:
宋体'>天花板</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1.1 <span
style='background:yellow'>floor</span> // 1.0 </span><span style='font-family:
宋体'>地板</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>无</span><span lang=EN-US
style='font-family:Consolas'>++</span><span style='font-family:宋体'>，</span><span
lang=EN-US style='font-family:Consolas'>--</span><span style='font-family:宋体'>操作，但可以</span><span
lang=EN-US style='font-family:Consolas'>+=, -=, </span><span style='font-family:
宋体'>如下：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var i = 0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>i++ &nbsp;// </span><span
style='font-family:宋体;color:red'>报错</span><span style='font-family:宋体'>，无此操作</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>i+=1 // 1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>i--&nbsp; // </span><span
style='font-family:宋体;color:red'>报错</span><span style='font-family:宋体'>，无此操作</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>i-=1 // 0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
even(n:Int) = 0==(n &amp; 1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def odd(n:Int)
= !even(n)</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027468"></a><a
name="_Toc281659948"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.3.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>Char</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>String</span><span
style='font-family:宋体'>可以转化为</span><span lang=EN-US style='font-family:Consolas'>List[Char]</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US
style='font-family:Consolas'>String</span><span style='font-family:宋体'>上做循环，其实就是对</span><span
lang=EN-US style='font-family:Consolas'>String</span><span style='font-family:
宋体'>中的每一个</span><span lang=EN-US style='font-family:Consolas'>Char</span><span
style='font-family:宋体'>做操作，如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;12345&quot;
map (toInt) // (49,50,51,52,53)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;jamesqiu&quot;
max // 'u'</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;jamesqiu&quot;
min // 'a'</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>('a' to 'f')
map (_.toString*3) // (aaa, bbb, ccc, ddd, eee, fff)</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132191"></a><a
name="_Toc282027469"></a><a name="_Toc281659949"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>BigInt</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>可以表示很大的整数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>BigInt(10000000000000000000000000)
// </span><span style='font-family:宋体'>报错</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>BigInt(&quot;10000000000000000000000000&quot;)
// scala.math.BigInt = 10000000000000000000000000</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>def&nbsp; fac(n:Int):BigInt = if (n==0) 1 else
fac(n-1)*n</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>fac(1000)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者写成：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>def fac2(n:Int) = ((1:BigInt) to n).product</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.2pt'><span
lang=EN-US style='font-family:Consolas;background:#D9D9D9'>// res1: BigInt =
9332621544394415268169923885626670049071596826438......000000000000000000</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132192"></a><a
name="_Toc282027471"></a><a name="_Toc281659950"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>字符串</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;...&quot;
</span><span style='font-family:宋体'>或者</span><span lang=EN-US style='font-family:
Consolas'> &quot;&quot;&quot;...&quot;&quot;&quot;&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>println(&quot;&quot;&quot;<span
style='background:yellow'>|</span>Welcome&nbsp;to&nbsp;Ultamix&nbsp;3000.
&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
style='background:yellow'>|</span>Type&nbsp;&quot;HELP&quot;&nbsp;for&nbsp;help.&quot;&quot;&quot;.<span
style='background:yellow'>stripMargin</span>) </span></p>

<p class=MsoNormal><span style='font-family:宋体'>输出：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Welcome&nbsp;to&nbsp;Ultamix&nbsp;3000.
&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Type&nbsp;&quot;HELP&quot;&nbsp;for&nbsp;help.</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala</span><span
style='font-family:宋体'>中，字符串除了可以</span><span lang=EN-US style='font-family:
Consolas'>+</span><span style='font-family:宋体'>，也可以</span><span lang=EN-US
style='font-family:Consolas'>*</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;abc&quot;
* 3 <span style='color:#5B6E6E'>// &quot;abcabcabc&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;abc&quot;
* 0 <span style='color:#5B6E6E'>// &quot;&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;google&quot;.reverse
// &quot;elgoog&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;abc&quot;.reverse.reverse==&quot;abc&quot;
// true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;Hello&quot;
map (_.toUpper) // </span><span style='font-family:宋体'>相当于</span><span
lang=EN-US style='font-family:Consolas'> &quot;Hello&quot;.toUpperCase</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027472"></a><a
name="_Toc281659951"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.5.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>类型转换</span></u></a></h3>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&quot;101&quot;.toInt // 101</span><span
style='font-family:宋体'>，无需</span><span lang=EN-US style='font-family:Consolas'>
Integer.parseInt(&quot;101&quot;);</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&quot;3.14&quot;.toFloat // 3.14f</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>101.toString</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>3.14.toString</span></p>

<p class=MsoNormal><span style='font-family:宋体'>转换整个列表：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>List(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;)
map (_.toInt) // List(1,2,3)</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>List(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;)
map Integer.parseInt // List(1,2,3)</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027473"></a><a
name="_Toc281659952"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.5.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>StringBuilder</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val sb = new
StringBuilder</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>sb += 'H'</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>sb ++=
&quot;ello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>sb.toString //
&quot;Hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>sb clear //
StringBuilder()</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027474"></a><a
name="_Toc281659953"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.5.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>文本格式化</span></u></a></h3>

<p class=MsoNormal style='text-indent:18.0pt'><span style='font-family:宋体'>使用</span><u><span
lang=EN-US style='font-family:Consolas'>java.text.MessageFormat.format</span></u><span
lang=EN-US style='font-family:Consolas'>:</span></p>

<pre><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'>val</span></b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'> msg = java.text.MessageFormat.format(</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='color:red'>&quot;At <span style='background:yellow'>{1,time}</span> on <span
style='background:lime'>{1,date}</span>, there was <span style='background:
aqua'>{2}</span> on planet <b><span style='background:silver'>{0}</span></b>.&quot;</span>,</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='color:red'>&quot;<b><span style='background:silver'>Hoth</span></b>&quot;</span>, <b>new</b> java.util.Date(), <span
style='color:red'>&quot;<u>a disturbance in the Force</u>&quot;</span>)</span></pre>

<p class=MsoNormal><span style='font-size:9.0pt;font-family:宋体'>输出</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>At <span style='background:yellow'>17:50:34</span>
on <span style='background:lime'>2010-7-20</span>, there was <u><span
style='background:aqua'>a disturbance in the Force</span></u> on planet <b><span
style='color:#5B6E6E;background:silver'>Hoth</span></b>.</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>方法</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&quot;<u><span style='color:#C00000'>my name is
%s, age is %d.</span></u>&quot; <span style='background:yellow'>format</span>
(&quot;<span style='color:#C00000'>james</span>&quot;, 30) <span
style='color:#5B6E6E'>// <u>my name is james, age is 30.</u></span></span></p>

<p class=MsoNormal style='text-indent:18.0pt'><u><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'><span style='text-decoration:none'>&nbsp;</span></span></u></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span><span lang=EN-US
style='font-family:Consolas'>format</span><span style='font-family:宋体'>还可以这么用</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'> </span><span lang=EN-US style='font-family:Consolas'>&quot;<u><span
style='color:#C00000'>%s-%d</span></u></span><u><span style='font-family:宋体;
color:#C00000'>：</span></u><u><span lang=EN-US style='font-family:Consolas;
color:#C00000'>%<span style='background:yellow'>1$</span>s is %<span
style='background:yellow'>2$</span>d.</span></u><span lang=EN-US
style='font-family:Consolas'>&quot; <span style='background:yellow'>format</span>
(&quot;<span style='color:#C00000'>james</span>&quot;, 30) <span
style='color:#5B6E6E'>// <u>james-30</u></span></span><u><span
style='font-family:宋体;color:#5B6E6E'>：</span></u><u><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>james is 30.</span></u></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas'>&quot;<u><span style='color:#C00000'>%<span
style='background:yellow'>2$</span>d age's man %<span style='background:yellow'>1$</span>s:
%<span style='background:yellow'>2$</span>d</span></u>&quot; <span
style='background:yellow'>format</span> (&quot;<span style='color:#C00000'>james</span>&quot;,
30) // <span style='color:#5B6E6E'>30 age's man james: 30</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132193"></a><a
name="_Toc282027475"></a><a name="_Toc281659954"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Null, None, Nil, Nothing</span></u></a></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Null</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Trait</span><span
  style='font-family:宋体'>，其唯一实例为</span><span lang=EN-US style='font-family:
  Consolas'>null</span><span style='font-family:宋体'>，是</span><span lang=EN-US
  style='font-family:Consolas'>AnyRef</span><span style='font-family:宋体'>的子类，</span><u><span
  lang=EN-US style='font-family:Consolas'>*</span></u><b><u><span
  style='font-family:宋体'>不是</span></u></b><u><span lang=EN-US style='font-family:
  Consolas'>*</span></u><span lang=EN-US style='font-family:Consolas'> AnyVal</span><span
  style='font-family:宋体'>的子类</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Nothing</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Trait</span><span
  style='font-family:宋体'>，所有类型（包括</span><span lang=EN-US style='font-family:
  Consolas'>AnyRef</span><span style='font-family:宋体'>和</span><span lang=EN-US
  style='font-family:Consolas'>AnyVal</span><span style='font-family:宋体'>）的子类，没有实例</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>None</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Option</span><span
  style='font-family:宋体'>的两个子类之一，另一个是</span><span lang=EN-US style='font-family:
  Consolas'>Some</span><span style='font-family:宋体'>，用于安全的函数返回值</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Unit</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>无返回值的函数的类型，和</span><span
  lang=EN-US style='font-family:Consolas'>java</span><span style='font-family:
  宋体'>的</span><span lang=EN-US style='font-family:Consolas'>void</span><span
  style='font-family:宋体'>对应</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Nil</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>长度为</span><span lang=EN-US
  style='font-family:Consolas'>0</span><span style='font-family:宋体'>的</span><span
  lang=EN-US style='font-family:Consolas'>List</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132194"></a><a
name="_Toc282027476"></a><a name="_Toc281659955"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>==</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>和</span></u><u><span lang=EN-US
style='font-family:Consolas'>eq</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>==</span><span
style='font-family:宋体'>很智能，他知道对于数值类型要调用</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>中的</span><span
lang=EN-US style='font-family:Consolas'>==</span><span style='font-family:宋体'>，</span><span
lang=EN-US style='font-family:Consolas'>ref</span><span style='font-family:
宋体'>类型要调用</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>equals()</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-family:Consolas'>&quot;hello&quot;==&quot;Hello&quot;.toLowerCase()</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US
style='font-family:Consolas'>java</span><span style='font-family:宋体'>中为</span><span
lang=EN-US style='font-family:Consolas'>false</span><span style='font-family:
宋体'>，在</span><span lang=EN-US style='font-family:Consolas'>scala</span><span
style='font-family:宋体'>中为</span><span lang=EN-US style='font-family:Consolas'>true<a
name="_Toc282027477"></a></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>==</span><span
style='font-family:宋体'>总是内容对比</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>基本类型</span><span lang=EN-US
  style='font-family:Consolas'>Int</span><span style='font-family:宋体'>，</span><span
  lang=EN-US style='font-family:Consolas'>Double</span><span style='font-family:
  宋体'>，</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>比值</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>其他类型</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>相当于</span><span lang=EN-US
  style='font-family:Consolas'>A.equals(B)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>eq</span><span
style='font-family:宋体'>才是引用对比</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val s1,s2 =
&quot;hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val s3 = new
String(&quot;hello&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>s1==s2 // true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>s1 eq s2 //
true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>s1==s3 // true
</span><span style='font-family:宋体'>值相同</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>s1 eq s3 //
false </span><span style='font-family:宋体'>不是同一个引用</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132195"></a><a
name="_Toc282027478"></a><a name="_Toc281659956"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Option[T]</span></u></a></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027479"></a><a
name="_Toc281659957"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.8.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>概念</span></u></a></h3>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Option[T]</span><span
style='font-family:宋体'>可以是任意类型或者空，但一旦声明类型就不能改变；</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Option[T]</span><span
style='font-family:宋体'>可完美替代</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>中的</span><span lang=EN-US style='font-family:Consolas'>null</span><span
style='font-family:宋体'>，可以是</span><span lang=EN-US style='font-family:Consolas'>Some[T]</span><span
style='font-family:宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>None</span><span
style='font-family:宋体'>；</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Option</span><span
style='font-family:宋体'>实现了</span><span lang=EN-US style='font-family:Consolas'>map,
flatMap, and filter </span><span style='font-family:宋体'>接口，允许在</span><span
lang=EN-US style='font-family:Consolas'> 'for'</span><span style='font-family:
宋体'>循环里使用它；</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><u><span style='font-family:宋体'>函数返回值</span></u></b><span
style='font-family:宋体'>能被统一处理了：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>没有</span></b><b><span lang=EN-US style='font-family:
  Consolas'>Option</span></b><b><span style='font-family:宋体'>的日子</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>现在</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
  find(id:Long):Person = ...</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def find(id:Long):<span
  style='background:yellow'>Option</span>[Person] = ...</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>返回</span><span lang=EN-US
  style='font-family:Consolas'>Person</span><span style='font-family:宋体'>或者</span><span
  lang=EN-US style='font-family:Consolas'>null</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>返回</span><span lang=EN-US
  style='font-family:Consolas'>Some[Person]</span><span style='font-family:
  宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>None</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span style='font-family:
  宋体'>返回</span><span lang=EN-US style='font-family:Consolas'>null</span><span
  style='font-family:宋体'>不特殊处理会抛：</span><span lang=EN-US style='font-family:
  Consolas'>NullPointerExceptions</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>返回值直接</span><span lang=EN-US
  style='font-family:Consolas'>getOrElse</span><span style='font-family:宋体'>或者列表操作</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span style='font-family:
  宋体'>类比：</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
  style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>Stringx.split</span><span
  style='font-family:宋体'>返回</span><span lang=EN-US style='font-family:Consolas'>null</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>类比：</span><span lang=EN-US
  style='font-family:Consolas'>Java</span><span style='font-family:宋体'>的</span><span
  lang=EN-US style='font-family:Consolas'>Stringx.split</span><span
  style='font-family:宋体'>返回</span><span lang=EN-US style='font-family:Consolas'>new
  String[0]</span></p>
  </td>
 </tr>
 <tr>
  <td width=722 colspan=2 valign=top style='width:541.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span style='font-family:宋体;color:#0070C0'>结论：函数永远不要返回</span></b><b><span
  lang=EN-US style='font-family:Consolas;color:#0070C0'>null</span></b><b><span
  style='font-family:宋体;color:#0070C0'>值，如果输入有问题或者抛异常，返回</span></b><b><span
  lang=EN-US style='font-family:Consolas;color:#0070C0'>Option[T]</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><u><span style='font-family:宋体'>参数有效性检查</span></u></b><span
style='font-family:宋体'>没有那么烦人了：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>没有</span></b><b><span lang=EN-US style='font-family:
  Consolas'>Option</span></b><b><span style='font-family:宋体'>的日子</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>现在</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
  blank(s:String) = <span style='background:yellow'>if (s==null) false else</span>
  {</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
  s.toList.forall(_.isWhitespace) }</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>def blank(s:String) = <span style='background:
  yellow'>Option</span>(s).toList.forall(</span></p>
  <p class=MsoNormal align=left style='text-align:left;text-indent:5.25pt'><span
  lang=EN-US style='font-family:Consolas'>_.forall(_.isWhitespace))</span></p>
  </td>
 </tr>
 <tr>
  <td width=722 colspan=2 valign=top style='width:541.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span style='font-family:宋体;color:#0070C0'>结论：尽可能地不要浪费代码去检测输入，包装成</span></b><b><span
  lang=EN-US style='font-family:Consolas;color:#0070C0'>Option[T]</span></b><b><span
  style='font-family:宋体;color:#0070C0'>来统一处理</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027480"></a><a
name="_Toc281659958"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.8.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>使用</span></u></a></h3>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>Some(3).<span style='background:yellow'>getOrElse</span>(4)
// 3</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>None.<span style='background:yellow'>getOrElse</span>(4)
// 4</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如打印</span><span lang=EN-US
style='font-family:Consolas'>key=3</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>value</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>写法</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def p(map:Map[Int,Int]) = println(map(3))</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>p(Map(1-&gt;100,2-&gt;200)) // </span><span
style='font-family:宋体'>抛异常</span></p>

<p class=MsoNormal><span style='font-family:宋体'>写法</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def p(map:Map[Int,Int]) = println(map <span
style='background:yellow'>get</span> 3 <span style='background:yellow'>getOrElse</span>
&quot;...&quot;)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>p(Map(1-&gt;100,2-&gt;200)) // ...</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>p(Map(1-&gt;100,3-&gt;300)) // 300</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027481"></a><a
name="_Toc281659959"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.8.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>例子</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US>1</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>def</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>m</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>k</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>:</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Int</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>) = {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#2300FB'>Map</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'>((1,100),(2,200),(3,300)) </span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:#003E85'>get</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>k</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>) </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>match</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>case</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#8E3E00'>Some</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>v</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>) =&gt;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#2300FB'>k</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#003E85'>+</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:green'>&quot;: &quot;</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>+</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>v</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>case</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#8E3E00'>None</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> =&gt;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><a name="_Toc282027482"><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:green'>&quot;not found&quot;</span></a></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>def</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>main</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>args</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> : </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Array</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>[</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>String</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>]) : </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Unit</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> = {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>println</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'>(</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#003E85'>m</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(1)) // 100</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>println</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'>(</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#003E85'>m</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(2)) // 200</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>println</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'>(</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#003E85'>m</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(3)) // 300</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>println</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'>(</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#003E85'>m</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(4)) // &quot;not
found&quot;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>println</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'>(</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#003E85'>m</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(-1)) // &quot;not
found&quot;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; }</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val l = List(Some(100), <span style='background:
silver'>None</span>, Some(200), Some(120), <span style='background:silver'>None</span>)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>for (<span style='background:yellow'>Some</span>(<span
style='color:#C00000'>s</span>) &lt;- l) yield <span style='color:#C00000'>s</span>
<span style='color:#5B6E6E'>// List(100, 200, 120)</span></span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span style='font-family:宋体'>或</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>l flatMap (x=&gt;x)<span style='color:#5B6E6E'> //
List(100, 200, 120)</span></span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：</span><span
lang=EN-US style='font-family:Consolas'> Option</span><span style='font-family:
宋体'>结合</span><span lang=EN-US style='font-family:Consolas'>flatMap</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
toint(s:String) = </span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>try { Some(Integer.parseInt(s)) } catch { case
e:Exception =&gt; None }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(&quot;123&quot;,
&quot;12a&quot;, &quot;45&quot;) flatMap toint // List(123, 45)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(&quot;123&quot;,
&quot;12a&quot;, &quot;45&quot;) map toint // List(Some(123), None, Some(45))</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132196"></a><a
name="_Toc282027483"></a><a name="_Toc281659960"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.9.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>区分</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>&lt;-,=&gt;,-&gt;</span></u></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=42 valign=top style='width:31.35pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;-</span></p>
  </td>
  <td width=211 valign=top style='width:158.4pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for (i &lt;-
  0 until 100)</span></p>
  </td>
  <td width=451 valign=top style='width:337.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'><pre><span style='font-size:
  10.5pt'>用于</span><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
  background:yellow'>f</span><span lang=EN-US style='font-size:10.5pt;
  font-family:Consolas'>or</span><span style='font-size:10.5pt'>循环</span><span
  lang=EN-US style='font-size:10.5pt;font-family:Consolas'>, </span><span
  style='font-size:10.5pt'>符号<span lang=EN-US style='background:yellow'>∈</span>的象形</span></pre></td>
 </tr>
 <tr>
  <td width=42 valign=top style='width:31.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>=&gt;</span></p>
  </td>
  <td width=211 valign=top style='width:158.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=DA style='font-family:Consolas'>List(1,2,3).map(x=&gt;
  x*x)</span></p>
  <p class=MsoNormal><span lang=DA style='font-family:Consolas'>((i:Int)=&gt;i*i)(5)
  // 25</span></p>
  </td>
  <td width=451 valign=top style='width:337.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>用于<span style='background:
  yellow'>匿</span>名函数，相当于</span><span lang=DA style='font-family:Consolas'>Ruby</span><span
  style='font-family:宋体'>的</span><span lang=DA style='font-family:Consolas'>
  |x|,Groovy</span><span style='font-family:宋体'>的</span><span lang=DA
  style='font-family:Consolas'>{x-&gt; x*x}</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>也可用在</span><span lang=DA
  style='font-family:Consolas'>import</span><span style='font-family:宋体'>中定义别名：</span><span
  lang=DA style='font-family:Consolas'>import javax.swing.{JFrame=&gt;<span
  style='background:yellow'>jf</span>}</span></p>
  </td>
 </tr>
 <tr>
  <td width=42 valign=top style='width:31.35pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-&gt;</span></p>
  </td>
  <td width=211 valign=top style='width:158.4pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Map(1-&gt;&quot;a&quot;,2-&gt;&quot;b&quot;)</span></p>
  </td>
  <td width=451 valign=top style='width:337.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>用于</span><span lang=EN-US
  style='font-family:Consolas'>Map</span><span style='font-family:宋体'>初始化</span><span
  lang=EN-US style='font-family:Consolas'>, </span><span style='font-family:
  宋体'>也可以不用</span><span lang=EN-US style='font-family:Consolas'>-&gt;</span><span
  style='font-family:宋体'>而写成</span><span style='font-family:Consolas'> <span
  lang=EN-US>Map((1,&quot;a&quot;),(2,&quot;b&quot;))</span></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132197"></a><a
name="_Toc282027484"></a><a name="_Toc281659961"></a><a
name="_match..case(switch)"></a><span lang=DE style='font-size:10.5pt;
line-height:173%;font-family:Consolas'>2.10.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=DE style='font-family:Consolas'>match..case(switch)</span></u></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027485"></a><a
name="_Toc281659962"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.10.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>和</span></u></a><u><span lang=EN-US style='font-size:14.0pt;
line-height:173%;font-family:Consolas'>switch..case</span></u><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>的区别</span></u></h3>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>里面的写法</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>switch(n) {</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case(1):
...; break;</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case(2):
...; break;</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; default:
...;</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>变成</span><span lang=DE
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>写法</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>def m(n:String) =
</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>n <span
style='background:yellow'>match</span> {</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
&quot;a&quot; <span style='background:yellow'>|</span> &quot;b&quot; <span
style='background:yellow'>=&gt;</span> ... // </span><span style='font-family:
宋体'>这个比较好</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
&quot;c&quot; <span style='background:yellow'>=&gt;</span> ...</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
<span style='background:yellow'>_</span> <span style='background:yellow'>=&gt;</span>
...</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>每个</span><span lang=DE
style='font-family:Consolas'>case..=&gt;</span><span style='font-family:宋体'>结束不用写</span><span
lang=DE style='font-family:Consolas'>break</span><span style='font-family:宋体'>了</span><span
style='font-family:宋体'>，</span><span lang=DE style='font-family:Consolas'>_</span><span
style='font-family:宋体'>相当于</span><span lang=DE style='font-family:Consolas'>default</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027486"></a><a
name="_Toc281659963"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.10.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>匹配数据类型</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>match </span><span
style='font-family:宋体'>可以很简单地匹配数据类型（不需要</span><span lang=EN-US
style='font-family:Consolas'>isInstanceOf[T]</span><span style='font-family:
宋体'>）：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f(v:Any) =
v match {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
null =&gt; &quot;null&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
i:Int =&gt; i*100</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
s:String =&gt; s</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
_ =&gt; &quot;others&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：上面</span><span lang=EN-US
style='font-family:Consolas'>case</span><span style='font-family:宋体'>中的</span><span
lang=EN-US style='font-family:Consolas'>i</span><span style='font-family:宋体'>、</span><span
lang=EN-US style='font-family:Consolas'>s</span><span style='font-family:宋体'>都叫模式变量</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(null) //
&quot;null&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(5) // 500</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(&quot;hello&quot;)
// &quot;hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(3.14) //
&quot;others&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：自定义类型如果也要匹配，需要用</span><span
lang=EN-US style='font-family:Consolas'><a href="#_case_class">case class</a></span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027487"></a><a
name="_Toc281659964"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.10.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>命令行参数解析例子</span></u></a></h3>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>/** Basic command line parsing. */</span></pre><pre><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>object</span></b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'> Main {</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp; <b>var</b> verbose = <b>false&nbsp; </b><span
style='color:#5B6E6E'>// </span></span><span style='font-size:10.5pt;
color:#5B6E6E'>记录标识，以便能同时对</span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:#5B6E6E'>-h</span><span style='font-size:10.5pt;
color:#5B6E6E'>和</span><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas;color:#5B6E6E'>-v</span><span style='font-size:10.5pt;color:#5B6E6E'>做出响应</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp; <b>def</b> main(args: Array[String]) {</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp; <b>for</b> (a &lt;- args) a <b>match</b> {</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>case</b> <span
style='color:red'>&quot;-h&quot;</span> | <span style='color:red'>&quot;-help&quot;</span>&nbsp;&nbsp;&nbsp; <b>=&gt;</b></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; println(<span
style='color:red'>&quot;Usage: scala Main [-help|-verbose]&quot;</span>)</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>case</b> <span
style='color:red'>&quot;-v&quot;</span> | <span style='color:red'>&quot;-verbose&quot;</span> <b>=&gt;</b></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; verbose = <b>true</b></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <b>case</b> x <b>=&gt; </b>// </span><span
style='font-size:10.5pt'>这里</span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas'>x</span><span style='font-size:10.5pt'>是临时变量</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; println(<span
style='color:red'>&quot;Unknown option: '&quot;</span> + x + <span
style='color:red'>&quot;'&quot;</span>)</span></pre><pre><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp; }</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp; <b>if</b> (verbose) println(<span
style='color:red'>&quot;How are you today?&quot;</span>)</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp; }</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>}</span></pre>

<h3 style='margin-left:9.0pt'><a name="_Toc282027488"></a><a
name="_Toc281659965"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.10.4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>使用</span></u></a><u><span lang=EN-US style='font-size:
14.0pt;line-height:173%;font-family:Consolas'>case</span></u><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>的递归函数</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>写法</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def fac(n:Int):Int = n match {</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; case 0=&gt;1</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; case _=&gt;n*fac(n-1)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>}</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>写法</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>（使用</span><span
lang=EN-US style='font-family:Consolas'><a href="#_映射式定义"><span lang=EN-US
style='font-family:宋体'><span lang=EN-US>映<span lang=EN-US>射</span></span></span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>式</span></span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>函数</span></span></a></span><span
style='font-family:宋体'>）：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def fac: Int=&gt;Int = {</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>case 0=&gt; 1</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>case n=&gt; n*fac(n-1)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>}</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<pre><span style='font-size:10.5pt'>写法</span><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas'>3</span><span style='font-size:10.5pt'>（使用尾递归）：</span></pre>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>def</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>fac</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>: (</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Int</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>,</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Int</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>)=&gt;</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Int</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> = {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>case</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> (0,y) =&gt; </span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#2300FB'>y</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>case</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> (x,y) =&gt; </span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#003E85'>fac</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>x</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>-</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>1, </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>x</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>*</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>y</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>)</span></p>

<pre><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; }</span></pre><pre
style='text-indent:10.5pt'><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas'>fac(5,1) // 120</span></pre><pre style='text-indent:10.5pt'><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;</span></pre><pre><span
style='font-size:10.5pt'>写法</span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas'>4</span><span style='font-size:10.5pt'>（</span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>reduceLeft+!</span><span
style='font-size:10.5pt'>）：</span></pre><pre style='text-indent:10.5pt'><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>def fac(n:Int) = 1 to n <span
style='background:yellow'>reduceLeft</span>(_*_)</span></pre><pre
style='text-indent:10.5pt'><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas'>implicit def foo(n:Int) = new { def ! = fac(n) }</span></pre><pre
style='text-indent:10.5pt'><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas'>5! // 120</span></pre><pre style='text-indent:10.5pt'><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;</span></pre><pre><span
style='font-size:10.5pt'>写法</span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas'>5</span><span style='font-size:10.5pt'>：</span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>(</span><span
style='font-size:10.5pt'>最简洁高效</span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas'>)</span></pre><pre><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas'>&nbsp; def fac(n:Int) = (1:BigInt) to n <span
style='background:yellow'>product</span></span></pre><pre><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'>&nbsp; fac(5) // 120</span></pre>

<h3 style='margin-left:9.0pt'><a name="_Toc282027489"></a><a
name="_Toc281659966"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.10.5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>变量匹配</span></u></a></h3>

<pre><span style='font-size:10.5pt'>常量匹配很简单，即</span><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'>case</span><span
style='font-size:10.5pt'>后跟的都是常量；</span></pre><pre><span style='font-size:10.5pt'>变量匹配需要注意，</span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>case</span><span
style='font-size:10.5pt'>后跟的是</span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas'>match</span><span style='font-size:10.5pt'>里面的临时变量，而不是其他变量名：</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>3 match {</span></pre><pre
style='text-indent:10.5pt'><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas'>case i =&gt; println(&quot;i=&quot; + i) // </span><span
style='font-size:10.5pt'>这里</span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas'>i</span><span style='font-size:10.5pt'>是<span
style='background:lime'>模式变量</span>（临时变量），就是</span><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'>3</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>}</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>val a = 10</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>20 match { case <span
style='background:lime'>a</span> =&gt; 1 } // 1</span><span style='font-size:
10.5pt'>，</span><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'> a</span><span
style='font-size:10.5pt'>是<span style='background:lime'>模式变量</span>，不是</span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>10</span></pre><pre><span
style='font-size:10.5pt'>为了使用变量</span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas'>a</span><span style='font-size:10.5pt'>，必须用</span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>`a`:</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20 match { case <span
style='background:yellow'>`a`</span> =&gt; 1; case b =&gt; -1 } // -1</span><span
style='font-size:10.5pt'>，</span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas'>`a`</span><span style='font-size:10.5pt'>是变量</span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>10</span></pre><pre><span
style='font-size:10.5pt'>或者用大写的变量：</span></pre><pre><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; val A = 10</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 20 match { case <span
style='background:yellow'>A</span> =&gt; 1; case b =&gt; -1 } // -1</span><span
style='font-size:10.5pt'>，大写</span><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas'>A</span><span style='font-size:10.5pt'>是变量</span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>10</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;</span></pre>

<h3 style='margin-left:9.0pt'><a name="_Toc282027490"></a><a
name="_Toc281659967"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.10.6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>case..if</span></u></a><u><span style='font-size:14.0pt;
line-height:173%;font-family:"微软雅黑","sans-serif"'>条件匹配</span></u></h3>

<pre><span class=br0><span style='font-size:10.5pt'>写法</span></span><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'>1</span></span><span
class=br0><span style='font-size:10.5pt'>：</span></span></pre><pre><span
class=br0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'>(</span></span><span
class=nu0><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'>1</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'> to <span class=nu0>20</span><span
class=br0>)</span> foreach <span class=br0>{</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
&nbsp;&nbsp;&nbsp; <a href="http://scala-lang.org"><span class=kw1>case</span></a> x <a
href="http://scala-lang.org"><span class=kw1>if</span></a> <span class=br0>(</span>x <span
class=sy0>%</span> <span class=nu0>15</span> <span class=sy0>==</span> <span
class=nu0>0</span><span class=br0>)</span> <span class=sy0>=&gt;</span> printf<span
class=br0>(</span><span class=st0>&quot;%2d:15n\n&quot;,x</span><span
class=br0>)</span><br>
&nbsp;&nbsp;&nbsp; <a href="http://scala-lang.org"><span class=kw1>case</span></a> x <a
href="http://scala-lang.org"><span class=kw1>if</span></a> <span class=br0>(</span>x <span
class=sy0>%</span> <span class=nu0>3</span> <span class=sy0>==</span> <span
class=nu0>0</span><span class=br0>)</span> &nbsp;<span class=sy0>=&gt;</span> printf<span
class=br0>(</span><span class=st0>&quot;%2d:3n\n&quot;,x</span><span class=br0>)</span><br>
&nbsp;&nbsp;&nbsp; <a href="http://scala-lang.org"><span class=kw1>case</span></a> x <a
href="http://scala-lang.org"><span class=kw1>if</span></a> <span class=br0>(</span>x <span
class=sy0>%</span> <span class=nu0>5</span> <span class=sy0>==</span> <span
class=nu0>0</span><span class=br0>)</span> &nbsp;<span class=sy0>=&gt;</span> printf<span
class=br0>(</span><span class=st0>&quot;%2d:5n\n&quot;,x</span><span class=br0>)</span><br>
&nbsp;&nbsp;&nbsp; <a href="http://scala-lang.org"><span class=kw1>case</span></a> x <span
class=sy0>=&gt;</span> printf<span class=br0>(&quot;%2d\n&quot;,</span>x<span
class=br0>)</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
<span class=br0>}</span></span></pre><pre><span style='font-size:10.5pt'>写法</span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>2</span><span
style='font-size:10.5pt'>：</span><a name="_Toc282027491"></a></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>(1 to 20) map (x=&gt; <span
style='background:yellow'>(x%3,x%5)</span> match {</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp; case <span
style='background:yellow'>(0,0)</span> =&gt; printf(&quot;%2d:15n\n&quot;,x)</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp; case <span
style='background:yellow'>(0,_)</span> =&gt; printf(&quot;%2d:3n\n&quot;,x)</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp; case <span
style='background:yellow'>(_,0)</span> =&gt; printf(&quot;%2d:5n\n&quot;,x)</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp; case <span
style='background:yellow'>(_,_)</span> =&gt; printf(&quot;%2d\n&quot;,x)</span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>})</span></pre>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132198"></a><a
name="_Toc282027492"></a><a name="_Toc281659968"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.11.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>try..catch..finally</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var f =
openFile()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>try </span><span lang=EN-US style='font-family:Consolas'>{ </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; f = new
FileReader(&quot;input.txt&quot;) </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>} <span
style='background:yellow'>catch </span>{ </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; <span
style='background:yellow'>case </span>ex: FileNotFoundException =&gt; // Handle
missing file </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; <span
style='background:yellow'>case </span>ex: IOException =&gt; // Handle other I/O
error </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>} <span
style='background:yellow'>finally </span>{</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
f.close()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132199"></a><a
name="_Toc282027493"></a><a name="_Toc281659969"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.12.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>require</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f(n:Int) =
{ require(n!=0); 1.0/n }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f(n:Int) =
{ require(n!=0, &quot;<i><u>n can't be zero</u></i>&quot;); 1.0/n }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(0)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// java.lang.IllegalArgumentException:
requirement failed: <i><u>n can't be zero</u></i></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132200"></a><a
name="_Toc282027494"></a><a name="_Toc281659970"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.13.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>main</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>方法</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>main</span><span
style='font-family:宋体'>方法</span><span lang=EN-US style='font-family:Consolas'>(</span><span
style='font-family:宋体'>包括所有类似</span><span lang=EN-US style='font-family:Consolas'>java</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>static</span><span
style='font-family:宋体'>方法</span><span lang=EN-US style='font-family:Consolas'>)</span><span
style='font-family:宋体'>必须定义在一个</span><span lang=EN-US style='font-family:Consolas'>object</span><span
style='font-family:宋体'>内：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>object</span><span lang=EN-US
style='font-family:Consolas'> Test1 {</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; def <span style='background:
yellow'>main(args: Array[String])</span> {</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; println(&quot;hello
world&quot;)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>编译：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>fsc
Test1.scala // </span><span style='font-family:宋体'>常驻内存编译服务器，第一次转载之后比</span><span
lang=EN-US style='font-family:Consolas'>scalac</span><span style='font-family:
宋体'>快</span></p>

<p class=MsoNormal><span style='font-family:宋体'>运行：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala
Test1.scala // </span><span style='font-family:宋体'>方式</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>，没有输出</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala -cp
e:\scala\lib\scala-library.jar Test1 // </span><span style='font-family:宋体'>方式</span><span
lang=EN-US style='font-family:Consolas'>2</span><span style='font-family:宋体'>，慢</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>java -cp
e:\scala\lib\scala-library.jar Test1 // </span><span style='font-family:宋体'>方式</span><span
lang=EN-US style='font-family:Consolas'>3</span><span style='font-family:宋体'>，快</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果文件不是</span><span lang=EN-US
style='font-family:Consolas'>utf8</span><span style='font-family:宋体'>编码，执行需要使用</span><span
lang=EN-US style='font-family:Consolas'>.scala</span><span style='font-family:
宋体'>文件的编码，如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala <span
style='background:yellow'>-encoding gbk</span> test.scala</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027495"></a><a
name="_Toc281659971"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.13.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>Application</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>不带命令行参数的简化</span><span
lang=EN-US style='font-family:Consolas'>main</span><span style='font-family:
宋体'>方法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>object</span><span lang=EN-US style='font-family:Consolas'> app1 <span
style='background:yellow'>extends Application</span> {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
println(&quot;hello world&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132201"></a><a
name="_Toc282027496"></a><a name="_Toc281659972"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.14.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>package, import</span></u></a></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027497"></a><a
name="_Toc281659973"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.14.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>import</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>import</span><span
style='font-family:宋体'>可以只在局部作用域内生效；</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以格式</span><span
style='font-family:Consolas'> </span><span style='font-family:宋体'>“</span><span
lang=EN-US style='font-family:Consolas'>import javax.swing.{JFrame=&gt;<span
style='background:yellow'>jf</span>}</span><span style='font-family:宋体'>”来声明类型的别名。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>jf</span><span lang=EN-US style='font-family:Consolas'>.show()</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>import
javax.swing._</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>import
java.util.{List, Map}</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>import java.util._,
java.io._</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala </span><span
style='font-family:宋体'>缺省导入如下包：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>java.lang.*</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>scala.*</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>scala.Predef</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>由于</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>package</span><span style='font-family:
宋体'>可以是相对路径下定义，有可能命名冲突，可以用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>import <span
style='background:yellow'>_root_</span>.java.lang.Long</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027498"></a><a
name="_Toc281659974"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.14.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>package</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>package</span><span lang=EN-US style='font-family:Consolas'> com.wr3 {
// C# </span><span style='font-family:宋体'>和</span><span lang=EN-US
style='font-family:Consolas'>Ruby</span><span style='font-family:宋体'>的方式，也可以改用</span><span
lang=EN-US style='font-family:Consolas'>Java</span><span style='font-family:
宋体'>的方式</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; //
<span style='background:yellow'>import</span> java.nio.<span style='background:
yellow'>_</span> // &quot;*&quot; </span><span style='font-family:宋体'>是</span><span
lang=EN-US style='font-family:Consolas'>scala</span><span style='font-family:
宋体'>的正常函数名，所以用</span><span lang=EN-US style='font-family:Consolas'>_</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; class
c1 {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def
m1() { println(&quot;c1.m1()&quot;) }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; object
o1 {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; def
<span style='background:yellow'>main</span>(args: Array[String]) { </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
println(&quot;o1.main()&quot;) </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span
style='background:yellow'>new c1().m1()</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>编译：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>fsc
package.scala</span></p>

<p class=MsoNormal><span style='font-family:宋体'>运行：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>java
com.wr3.o1 // </span><span style='font-family:宋体'>方式</span><span lang=EN-US
style='font-family:Consolas'>1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala
com.wr3.o1 // </span><span style='font-family:宋体'>方式</span><span lang=EN-US
style='font-family:Consolas'>2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027499"></a><a
name="_Toc281659975"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.14.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>包对象</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala2.8+</span><span
style='font-family:宋体'>支持包对象（</span><span lang=EN-US style='font-family:Consolas'>package
object</span><span style='font-family:宋体'>），除了和</span><span lang=EN-US
style='font-family:Consolas'>2.8</span><span style='font-family:宋体'>之前一样可以有下级的</span><span
lang=EN-US style='font-family:Consolas'>object</span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>class</span><span
style='font-family:宋体'>，还可以直接有下级变量和函数，例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>--------------------------------
foo.scala</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>package p0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>package object</span><span lang=EN-US style='font-family:Consolas'> <span
style='background:yellow'>p1</span> {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
val a = 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
def b = &quot;hello &quot; + a</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
def main(args:Array[String]):Unit = printf(&quot;%s&quot;, <span
style='background:yellow'>p0.p1.b</span>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>--------------------------------</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>p1</span><span
style='font-family:宋体'>就是一个包对象，</span><span lang=EN-US style='font-family:Consolas'>a</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>b</span><span
style='font-family:宋体'>就是包</span><span lang=EN-US style='font-family:Consolas'>p1</span><span
style='font-family:宋体'>直属的常量和函数</span><span lang=EN-US style='font-family:Consolas'>,</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>$fsc foo.scala
</span><span style='font-family:宋体'>命令产生如下</span><span lang=EN-US
style='font-family:Consolas'>class</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>./p0/p1/package.class</span></p>

<p class=MsoNormal><span style='font-family:宋体'>调用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala
p0.p1.package</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132202"></a><a
name="_Toc282027500"></a><a name="_Toc281659976"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.15.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>if..else</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>没有</span><span lang=EN-US
style='font-family:Consolas'>java</span><span style='font-family:宋体'>的：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>b = (x&gt;y) ?
100 : -1</span></p>

<p class=MsoNormal><span style='font-family:宋体'>就用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>if (x&gt;y) 100
else -1</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132203"></a><a
name="_Toc282027501"></a><a name="_Toc281659977"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.16.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>循环操作</span></u></a></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;m</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>flatMap</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>indices</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;m</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>foreach</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;Unit</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for (... if
  ...) yield</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>collect {
  case ... if ... =&gt; ... }</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>filter,
  filterNot</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>take</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>takeWhile</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;n</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>forall</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;1
  (true|false)</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>reduceLeft,
  foldLeft</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;1</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scanLeft</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;m+1</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>exists</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;1
  (true|false)</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>find</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;1 (</span><span
  style='font-family:宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>None)</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>count</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;1</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>span,
  partition</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m-&gt;2</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027502"></a><a
name="_Toc281659978"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.16.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>for</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>循环中的变量不用定义，如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for(i&lt;-1 to
10; <span style='background:yellow'>j</span>=i*i) println(<span
style='background:yellow'>j</span>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for (s &lt;-
ss) foo(s)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for (i &lt;- 0
to n) foo(i) // </span><span style='font-family:宋体'>包含</span><span lang=EN-US
style='font-family:Consolas'>n</span><span style='font-family:宋体'>，即</span><span
lang=EN-US style='font-family:Consolas'>Range(0,1,2,...,n,n+1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for (i &lt;- 0
until n) foo(i)&nbsp; // </span><span style='font-family:宋体'>不包含</span><span
lang=EN-US style='font-family:Consolas'>n</span><span style='font-family:宋体'>，即</span><span
lang=EN-US style='font-family:Consolas'>Range(0,1,2,3,...,n)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>for</span><span lang=EN-US style='font-family:Consolas'> (n&lt;-List(1,2,3,4)
<span style='background:yellow'>if</span> n%2==1) <span style='background:yellow'>yield</span>
n*n&nbsp; // List(1, 9)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for (n&lt;-Array(1,2,3,4)
if n%2==1) <span style='background:yellow'>yield</span> n*n&nbsp; // Array(1,
9)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：如果</span><span lang=EN-US
style='font-family:Consolas'>if</span><span style='font-family:宋体'>后面不止一条语句，要用</span><span
lang=EN-US style='font-family:Consolas'>{..}</span><span style='font-family:
宋体'>包裹。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var s = 0; for
(i &lt;- 0 <span style='background:yellow'>until</span> 100) { s += i } // s =
4950</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>等价于不用</span><span lang=EN-US
style='font-family:Consolas'>for</span><span style='font-family:宋体'>的写法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,2,3,4).<span
style='background:yellow'>filter</span>(_%2==1).map(n =&gt; n*n)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果</span><span lang=EN-US
style='font-family:Consolas'>for</span><span style='font-family:宋体'>条件是多行，不能用</span><span
lang=EN-US style='font-family:Consolas'>(),</span><span style='font-family:
宋体'>要用</span><span lang=EN-US style='font-family:Consolas'>{}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for(i&lt;-0 to
5; j&lt;-0 to 2) yield i+j</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// Vector(<u>0,
1, 2</u>, <u>1, 2, 3</u>, <u>2, 3, 4</u>, <u>3, 4, 5</u>, <u>4, 5</u></span><u><span
lang=EN-US> </span></u><u><span lang=EN-US style='font-family:Consolas'>, 6</span></u><span
lang=EN-US style='font-family:Consolas'>, <u>5, 6, 7</u>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for{i&lt;-0 to
5</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>j&lt;-0 to 2} yield i+j</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体'>边长</span><span lang=EN-US style='font-family:Consolas'>21</span><span
style='font-family:宋体'>以内所有符合勾股弦的三角形：</span></p>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'><a
href="http://scala-lang.org"><span class=kw1>def</span></a> triangle<span
class=br0>(</span>n<span class=sy0>:</span> Int<span class=br0>)</span> <span
class=sy0>=</span> <a href="http://scala-lang.org"><span class=kw1>for</span></a> <span
class=br0>{</span><br>
&nbsp; x <span class=sy0>&lt;</span>- <span class=nu0>1</span> to <span
class=nu0>21</span><br>
&nbsp; y <span class=sy0>&lt;</span>- x to <span class=nu0>21</span><br>
&nbsp; z <span class=sy0>&lt;</span>- y to <span class=nu0>21</span><br>
&nbsp; <a href="http://scala-lang.org"><span class=kw1>if</span></a> x <span
class=sy0>*</span> x + y <span class=sy0>*</span> y <span class=sy0>==</span> z <span
class=sy0>*</span> z<br>
<span class=br0>}</span> <a href="http://scala-lang.org"><span class=kw1>yield</span></a> <span
class=br0>(</span>x, y, z<span class=br0>)</span></span></pre>

<p class=MsoNormal><span style='font-family:宋体'>结果：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// Vector((3,4,5),
(5,12,13), (6,8,10), (8,15,17), (9,12,15), (12,16,20))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3><a name="_Toc282027503"></a><a name="_Toc281659979"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.16.1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>for ..
yield</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>把每次循环的结果“<b>移</b>”进一个集合（类型和循环内的一致）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for {</span><span
style='font-family:宋体'>子句</span><span lang=EN-US style='font-family:Consolas'>}
yield {</span><span style='font-family:宋体'>循环体</span><span lang=EN-US
style='font-family:Consolas'>} </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>正确：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for
(e&lt;-List(1,2,3)) yield (e*e) // List(1,4,9)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for
{e&lt;-List(1,2,3)} yield { e*e } // List(1,4,9)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for
{e&lt;-List(1,2,3)} yield e*e // List(1,4,9)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体;color:red'>错误：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for
(e&lt;-List(1,2,3)) { yield e*e } // </span><span style='font-family:宋体'>语法错误</span><span
lang=EN-US style='font-family:Consolas'>,yield</span><span style='font-family:
宋体'>不能在任何括号内</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027504"></a><a
name="_Toc281659980"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.16.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>foreach</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,2,3).foreach(println)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>1</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>2</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>3</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span style='font-family:宋体'>也可以写成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(1 <span
style='background:yellow'>to</span> 3).foreach(println)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(1 <span
style='background:yellow'>until</span> 4) foreach println</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Range(1,3)
foreach println</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>to</span><span
style='font-family:宋体'>包含，</span><span lang=EN-US style='font-family:Consolas'>until</span><span
style='font-family:宋体'>不包含（最后的数）</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>都可以写步长，如：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>1 to (11<span style='background:yellow'>,2</span>)
// 1,3,5,7,9,11 </span><span style='font-family:宋体'>步长为</span><span lang=EN-US
style='font-family:Consolas'>2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; 1
to 11 <span style='background:yellow'>by</span> 2</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>1 until (11<span style='background:yellow'>,2</span>)
// 1,3,5,7,9 </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>1 until 11 <span style='background:yellow'>by</span>
2</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>val r = (1 to 10 by 4) <span style='color:#5B6E6E'>//
(1,5,9), r.start=r.first=1; r.end=10, r.last=9</span></span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>也可以是</span><span lang=EN-US
style='font-family:Consolas'>BigInt</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(1:BigInt) to 3</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027505"></a><a
name="_Toc281659981"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.16.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>forall</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;</span><u><span
style='font-family:宋体'>所有都符合</span></u><span lang=EN-US style='font-family:
Consolas'>&quot;</span><span style='font-family:宋体'>――相当于</span><span
style='font-family:Consolas'> <span lang=EN-US>A1 &amp;&amp; A2 &amp;&amp; A3 &amp;&amp;
... &amp;&amp; Ai &amp;&amp; ... &amp;&amp; An</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(1 to 3)
forall (0&lt;) // true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(-1 to 3)
forall (0&lt;) // false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>又如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
isPrime(n:Int) = 2 until n forall (n%_!=0)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for (i&lt;-1
to 100 if isPrime(i)) println(i)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(2 to 20)
partition (isPrime _) <span style='color:#5B6E6E'>// (2,3,5,7,11,13,17,19), (4,6,8,9,10,12,14,15,16,18,20)</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可直接调用</span><span lang=EN-US
style='font-family:Consolas'>BigInt</span><span style='font-family:宋体'>的内部方法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(2 to 20)
partition (BigInt(_) isProbablePrime(10)) </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
</span><span style='font-family:宋体;color:#5B6E6E'>注：</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>isProbablePrime(c)</span><span
style='font-family:宋体;color:#5B6E6E'>中</span><span lang=EN-US style='font-family:
Consolas;color:#5B6E6E'>c</span><span style='font-family:宋体;color:#5B6E6E'>越大，是质数的概率越高，</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>10</span><span
style='font-family:宋体;color:#5B6E6E'>对应概率：</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>1 - 1/(2**10) = 0.999</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027506"></a><a
name="_Toc281659982"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.16.4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>reduceLeft</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>reduceLeft </span><span
style='font-family:宋体'>方法首先应用于前两个元素，然后再应用于第一次应用的结果和接下去的一个元素，等等，直至整个列表。例如</span></p>

<p class=MsoNormal><span style='font-family:宋体'>计算阶乘：</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>def <span style='background:yellow'>fac</span>(n:
Int) = 1 to n reduceLeft(_*_)</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>fac(5) // 5*4*3*2 = 120</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((((1*2)*3)*4)*5)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>计算</span><span lang=EN-US
style='font-family:Consolas'>sum</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <a
name="_Toc282027507">List(2,4,6).reduceLeft(_+_) // 12</a></span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((2+4)+6)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>取</span><span lang=EN-US
style='font-family:Consolas'>max</span><span style='font-family:宋体'>：</span><a
name="_Toc282027508"></a></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>List(1,4,9,6,7).reduceLeft( (x,y)=&gt; if (x&gt;y)
x else y ) // 9</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>或者简化为：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><a name="_Toc282027509"><span
lang=EN-US style='font-family:Consolas'>List(1,4,9,6,7).reduceLeft(_ <span
style='background:yellow'>max</span> _) // 9</span></a></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((((1
max 4) max 9) max 6) max 7)</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027510"></a><a
name="_Toc281659983"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.16.5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>foldLeft</span></u></a><u><span lang=EN-US
style='font-size:14.0pt;line-height:173%;font-family:Consolas'> scanLeft</span></u></h3>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>累加或累乘</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def sum(L:
List[Int]): Int = {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
var result = 0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
for (item &lt;- L)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result += item</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
result</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>更</span><span lang=EN-US
style='font-family:Consolas'>scalable</span><span style='font-family:宋体'>的写法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def sum(L:
Seq[Int]) = L.<span style='background:yellow'>foldLeft</span>(0)((a, b) =&gt; a
+ b)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def sum(L: Seq[Int])
= L.<span style='background:yellow'>foldLeft</span>(0)(_ + _)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def sum(L:
List[Int]) = (0/:L){_ + _}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>调用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>sum(List(1,3,5,7))
// 16</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>乘法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def multiply(L:
Seq[Int]) = L.<span style='background:yellow'>foldLeft</span>(<span
style='background:yellow'>1</span>)(_ * _)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>multiply(Seq(1,2,3,4,5))
// 120</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>multiply(1
until 5+1) // 120</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><span lang=EN-US style='font-size:10.5pt;
line-height:173%;font-family:Consolas'>2.16.6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>scanLeft</span></u></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,2,3,4,5).scanLeft(0)(_+_)
// (0,1,3,6,10,15)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(0,(0+1),(0+1+2),(0+1+2+3),(0+1+2+3+4),(0+1+2+3+4+5))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,2,3,4,5).scanLeft(1)(_*_)
// (1,2,6,24,120)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(1, 1*1,
1*1*2, 1*1*2*3, 1*1*2*3*4, 1*1*2*3*4*5)</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>(<span
style='background:yellow'>z</span> <span style='background:yellow'>/:</span>
List(a, b, c))(<span style='background:yellow'>op</span>) </span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>
op(op(op(<span style='background:yellow'>z</span>, a), b), c)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>简单来说：加法用</span><span
lang=EN-US style='font-family:Consolas'>0</span><span style='font-family:宋体'>，乘法用</span><span
lang=EN-US style='font-family:Consolas'>1</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>(List(a, b, c) <span
style='background:yellow'>:\</span> <span style='background:yellow'>z</span>)
(op) equals op(a, op(b, op(c, <span style='background:yellow'>z</span>)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027511"></a><a
name="_Toc281659984"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.16.7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>take drop splitAt</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 10 by 2
take 3 // Range(1, 3, 5)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 10 by 2
drop 3 // Range(7, 9)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 10 by 2
splitAt 2 // (Range(1, 3),Range(5, 7, 9))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：前</span><span lang=EN-US
style='font-family:Consolas'>10</span><span style='font-family:宋体'>个质数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
prime(n:Int) = (! ((2 to math.sqrt(n).toInt) exists (i=&gt; n%i==0)))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>2 to 100
filter prime take 10</span></p>

<h3 style='margin-left:9.0pt'><span lang=EN-US style='font-size:10.5pt;
line-height:173%;font-family:Consolas'>2.16.8.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>takeWhile, dropWhile, span</span></u></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>while</span><span
style='font-family:宋体'>语句的缩写，</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  lime'>take</span><span lang=EN-US style='font-family:Consolas;background:
  yellow'>While</span><span lang=EN-US style='font-family:Consolas'> (...)</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>等价于：</span><span lang=EN-US
  style='font-family:Consolas;background:yellow'>while</span><span lang=EN-US
  style='font-family:Consolas'> (...) { <span style='background:lime'>take</span>
  }</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  lime'>drop</span><span lang=EN-US style='font-family:Consolas;background:
  yellow'>While</span><span lang=EN-US style='font-family:Consolas'> (...)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>等价于：</span><span lang=EN-US
  style='font-family:Consolas;background:yellow'>while</span><span lang=EN-US
  style='font-family:Consolas'> (...) { <span style='background:lime'>drop</span>
  }</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>span (...)</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>等价于：</span><span lang=EN-US
  style='font-family:Consolas'>while (...) { take; drop }</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 10
takeWhile (_&lt;5) // (1,2,3,4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 10
takeWhile (_&gt;5) // ()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>10 to (1,-1)
takeWhile(_&gt;6) // (10,9,8,7)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 10
takeWhile (n=&gt;n*n&lt;25) // (1, 2, 3, 4)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果不想直接用集合元素做条件，可以定义</span><span
lang=EN-US style='font-family:Consolas'>var</span><span style='font-family:
宋体'>变量来判断：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如，从</span><span lang=EN-US
style='font-family:Consolas'>1 to 10</span><span style='font-family:宋体'>取前几个数字，要求累加不超过</span><span
lang=EN-US style='font-family:Consolas'>30</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var sum=0; </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val rt = (1 to
10).takeWhile(<u>e=&gt; {sum=sum+e;sum&lt;30}</u>) <span style='color:#5B6E6E'>//
Range(1, 2, 3, 4, 5, 6, 7)</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span><span lang=EN-US
style='font-family:Consolas'>takeWhile</span><span style='font-family:宋体'>中的函数要返回</span><span
lang=EN-US style='font-family:Consolas'>Boolean</span><span style='font-family:
宋体'>，</span><span lang=EN-US style='font-family:Consolas'>sum&lt;30</span><span
style='font-family:宋体'>要放在最后；</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 10
dropWhile (_&lt;5) // (5,6,7,8,9,10)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 10
dropWhile (n=&gt;n*n&lt;25) // (5,6,7,8,9,10)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 10 span
(_&lt;5) // ((1,2,3,4),(5,6,7,8)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,0,1,0)
span (_&gt;0) // ((1), (0,1,0))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意，</span><span lang=EN-US
style='font-family:Consolas'>partition</span><span style='font-family:宋体'>是和</span><span
lang=EN-US style='font-family:Consolas'>span</span><span style='font-family:
宋体'>完全不同的操作</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,0,1,0)
partition (_&gt;0) // ((1,1),(0,0))</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027512"></a><a
name="_Toc281659985"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.16.9.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>break</span></u></a><u><span style='font-size:14.0pt;
line-height:173%;font-family:"微软雅黑","sans-serif"'>、</span></u><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>continue</span></u></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>中<b><u>没有</u></b></span><span lang=EN-US
style='font-family:Consolas'>break</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>continue</span><span style='font-family:
宋体'>语法！需要</span><span lang=EN-US style='font-family:Consolas'>break</span><span
style='font-family:宋体'>得加辅助</span><span lang=EN-US style='font-family:Consolas'>boolean</span><span
style='font-family:宋体'>变量，或者用库（</span><span lang=EN-US style='font-family:Consolas'>continue</span><span
style='font-family:宋体'>没有）</span><span lang=EN-US style='font-family:Consolas'>.</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：打印</span><span
lang=EN-US style='font-family:Consolas'>'a' to 'z'</span><span
style='font-family:宋体'>的前</span><span lang=EN-US style='font-family:Consolas'>10</span><span
style='font-family:宋体'>个</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var <span
style='background:yellow'>i</span>=0; val rt = for(e&lt;-('a' to 'z') if {<span
style='background:yellow'>i</span>=<span style='background:yellow'>i</span>+1;<span
style='background:yellow'>i&lt;=10</span>}) printf(&quot;%d:%s\n&quot;,i,e)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>('a' to 'z').<span
style='background:yellow'>slice</span>(0,10).foreach(println)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span><span
lang=EN-US style='font-family:Consolas'>1 to 100 </span><span style='font-family:
宋体'>和小于</span><span lang=EN-US style='font-family:Consolas'>1000</span><span
style='font-family:宋体'>的数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var
(n,sum)=(0,0); for(i&lt;-0 to 100 if (sum+i&lt;1000)) { n=i; sum+=i }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
n = 44, sum = 990</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：使用库来实现</span><span
lang=EN-US style='font-family:Consolas'>break</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>import&nbsp;<span
style='background:yellow'><a
href="http://lampsvn.epfl.ch/svn-repos/scala/scala/trunk/src/library/scala/util/control/Breaks.scala"><span
style='color:windowtext;text-decoration:none'>scala.util.control.Breaks._</span></a></span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for(e&lt;-1 to
10) { val e2 = e*e; if (e2&gt;10) <span style='background:yellow'>break</span>;
println(e) }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132204"></a><a
name="_Toc282027513"></a><a name="_Toc281659986"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.17.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>操作符重载</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>注意：其实</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>没有操作符，更谈不上操作符重载；</span><span
lang=EN-US style='font-family:Consolas'>+-/*</span><span style='font-family:
宋体'>都是方法名，如</span><span lang=EN-US style='font-family:Consolas'>1+2</span><span
style='font-family:宋体'>其实是</span><span lang=EN-US style='font-family:Consolas'>(1).+(2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>object
operator {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
class complex(<span style='background:yellow'>val </span>i:Int, <span
style='background:yellow'>val </span>j:Int) { // val </span><span
style='font-family:宋体'>是必须的</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
def <span style='background:yellow'>+</span> (c2: complex) = {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
new complex (i+c2.i, j+c2.j)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=DA style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
override def toString() = { &quot;(&quot; + i + &quot;,&quot; + j +
&quot;)&quot; }</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; def
main(args:Array[String]) = { </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
val c1 = new complex(3, 10)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
val c2 = new complex(5, 70)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
printf(&quot;%s + %s = %s&quot;, c1, c2, c1<span style='background:yellow'>+</span>c2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
} </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>编译：</span><span lang=EN-US
style='font-family:Consolas'>fsc operator.scala</span></p>

<p class=MsoNormal><span style='font-family:宋体'>运行：</span><span lang=EN-US
style='font-family:Consolas'>java operator // (3,10) + (5,70) = (8,80)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132205"></a><a
name="_Toc282027514"></a><a name="_Toc281659987"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.18.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>系统定义</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>scala._</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala._</span><span
style='font-family:宋体'>自动加载，只有发生类名冲突时才需要带上</span><span lang=EN-US
style='font-family:Consolas'>scala.</span><span style='font-family:宋体'>包名。</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=119 valign=top style='width:89.1pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala.AnyValue</span></p>
  </td>
  <td width=211 valign=top style='width:157.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>所有基本类型的根</span></p>
  </td>
  <td width=247 valign=top style='width:185.15pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Int,Char,Boolean,Double,Unit</span></p>
  </td>
 </tr>
 <tr>
  <td width=119 valign=top style='width:89.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala.AnyRef</span></p>
  </td>
  <td width=211 valign=top style='width:157.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>所有引用类型的根</span></p>
  </td>
  <td width=247 valign=top style='width:185.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>相当于</span><span lang=EN-US
  style='font-family:Consolas'>java</span><span style='font-family:宋体'>的</span><span
  lang=EN-US style='font-family:Consolas'>java.lang.Object</span></p>
  </td>
 </tr>
 <tr>
  <td width=119 valign=top style='width:89.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala.Null</span></p>
  </td>
  <td width=211 valign=top style='width:157.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>所有引用类型的子类</span></p>
  </td>
  <td width=247 valign=top style='width:185.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=119 valign=top style='width:89.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala.Nothing</span></p>
  </td>
  <td width=211 valign=top style='width:157.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>所有全部类型的子类</span></p>
  </td>
  <td width=247 valign=top style='width:185.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=119 valign=top style='width:89.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala.List</span></p>
  </td>
  <td width=211 valign=top style='width:157.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>不可变的</span><span lang=EN-US
  style='font-family:Consolas'>List</span></p>
  </td>
  <td width=247 valign=top style='width:185.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala</span><span
  style='font-family:宋体'>特色的不可变</span><span lang=EN-US style='font-family:Consolas'>List</span></p>
  </td>
 </tr>
 <tr>
  <td width=119 valign=top style='width:89.1pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala.Int</span></p>
  </td>
  <td width=211 valign=top style='width:157.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala</span><span
  style='font-family:宋体'>中可以用</span><span lang=EN-US style='font-family:Consolas'>int</span><span
  style='font-family:宋体'>作为别名</span></p>
  </td>
  <td width=247 valign=top style='width:185.15pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Double</span><span
  style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>Float</span><span
  style='font-family:宋体'>等类似</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132206"></a><a
name="_Toc282027515"></a><a name="_Toc281659988"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.19.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>implicit</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>隐式转换</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>用途：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>把一种</span><span lang=EN-US
style='font-family:Consolas'>object</span><span style='font-family:宋体'>类型安全地自动转换成另一种</span><span
lang=EN-US style='font-family:Consolas'>object</span><span style='font-family:
宋体'>类型</span><span lang=EN-US style='font-family:Consolas'>;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>不改动已有</span><span lang=EN-US
style='font-family:Consolas'>class</span><span style='font-family:宋体'>设计即可添加新的方法</span><span
lang=EN-US style='font-family:Consolas'>;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027516"></a><a
name="_Toc281659989"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.19.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>类型转换</span></u></a></h3>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>implicit def foo(s:String):Int =
Integer.parseInt(s) // </span><span style='font-family:宋体'>需要时把</span><span
lang=EN-US style='font-family:Consolas'>String-&gt;Int</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>def add(a:Int, b:Int) = a+b</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>add(&quot;100&quot;,8) // 108, </span><span
style='font-family:宋体'>先把</span><span lang=EN-US style='font-family:Consolas'>&quot;100&quot;</span><span
style='font-family:宋体'>隐式转换为</span><span lang=EN-US style='font-family:Consolas'>100</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027517"></a><a
name="_Toc281659990"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.19.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>例子：阶乘</span></u></a><u><span lang=EN-US style='font-size:
14.0pt;line-height:173%;font-family:Consolas'>n!</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>第一步：写函数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def <span
style='background:yellow'>factorial</span>(x: Int) = 1 to n reduceLeft(_*_)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>第二步：定义</span><span lang=EN-US
style='font-family:Consolas'> &quot;!&quot; </span><span style='font-family:
宋体'>函数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
class <span style='background:yellow'>m1</span>(n: Int) {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
def <span style='background:yellow'>!</span> = <span style='background:yellow'>factorial</span>(n)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal style='text-indent:20.25pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>implicit</span><span lang=EN-US
style='font-family:Consolas'> def m2(n:<span style='background:yellow'>Int</span>)
= new <span style='background:yellow'>m1</span>(n) // </span><b><u><span
style='font-family:宋体'>隐式转换</span></u></b><span style='font-family:宋体'>，即<b><u>在需要时</u></b>把</span><span
lang=EN-US style='font-family:Consolas'>n</span><span style='font-family:宋体'>转换为</span><span
lang=EN-US style='font-family:Consolas'>new m1(n)</span></p>

<p class=MsoNormal style='text-indent:20.25pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='text-indent:20.25pt'><span style='font-family:宋体'>注意：上面可以用匿名类简化为：</span></p>

<p class=MsoNormal style='text-indent:20.25pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span style='background:yellow'>implicit</span>
def m2(n:Int) = <span style='background:yellow'>new</span> { def ! =
factorial(n) }</span></p>

<p class=MsoNormal style='text-indent:20.25pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>第三步：使用</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
val n = 100</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>printf(&quot;%d! = %s\n&quot;, n, (<span
style='background:yellow'>n!</span>))&nbsp; // n! </span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>
new m1(n).!()</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>println(10!)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027518"></a><a
name="_Toc281659991"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.19.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>例子：</span></u></a><u><span lang=EN-US style='font-size:
14.0pt;line-height:173%;font-family:Consolas'>cout</span></u></h3>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>import java.io._</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>class C1(p:PrintStream) {</span></p>

<p class=MsoNormal style='text-indent:31.5pt'><span lang=EN-US
style='font-family:Consolas'>def &lt;&lt; (a:Any) = {</span></p>

<p class=MsoNormal style='text-indent:42.0pt'><span lang=EN-US
style='font-family:Consolas'>p.print(a)</span></p>

<p class=MsoNormal style='text-indent:42.0pt'><span lang=EN-US
style='font-family:Consolas'>p.flush</span></p>

<p class=MsoNormal style='text-indent:42.0pt'><span lang=EN-US
style='font-family:Consolas'>p</span></p>

<p class=MsoNormal style='text-indent:31.5pt'><span lang=EN-US
style='font-family:Consolas'>}</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>}</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>implicit def foo(p:PrintStream) = new C1(p)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>val endl = '\n'</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>System.out&lt;&lt;&quot;hello&quot;&lt;&lt;&quot;
world&quot;&lt;&lt;endl</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027519"></a><a
name="_Toc281659992"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.19.4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>例子：定义</span></u></a><u><span lang=EN-US style='font-size:
14.0pt;line-height:173%;font-family:Consolas'>?:</span></u></h3>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#140DCC'>implicit</span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'> <span
style='color:#140DCC'>def</span> elvisOperator<span class=br0><span
style='color:#7F0055'>[</span></span><span style='color:#7F0055'>T<span
class=br0>]</span></span><span class=br0>(</span>alt: T<span class=br0>)</span> = <span
style='color:#140DCC'>new</span> <span class=br0>{</span></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp; <span
style='color:#140DCC'>def</span> ?:<span class=br0><span style='color:#7F0055'>[</span></span><span
style='color:#7F0055'>A &gt;: T<span class=br0>]</span></span><span class=br0>(</span>pred: A<span
class=br0>)</span> = <span style='color:#140DCC'>if</span> <span class=br0>(</span>pred == <span
style='color:#A40D14'>null</span><span class=br0>)</span> alt <span
style='color:#140DCC'>else</span> pred</span></pre><pre><span class=br0><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span></pre>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>null ?:
&quot;&quot; // &quot;&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;abc&quot;
?: &quot;&quot; // &quot;abc&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>10 ?: 0 // 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(null ?:
0).asInstanceOf[Int] // 0</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027520"></a><a
name="_Toc281659993"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.19.5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>已有</span></u></a><u><span lang=EN-US style='font-size:
14.0pt;line-height:173%;font-family:Consolas'>Object</span></u><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>加新方法</span></u></h3>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>object</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>NewMethod</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#5B6E6E'>&nbsp; //
</span><span style='font-size:10.0pt;font-family:宋体;color:#5B6E6E'>定义新方法</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#5B6E6E'>join()</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; </span><b><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>implicit</span></b><b><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span></b><b><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>def</span></b><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>foo1</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>[</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>T</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>](</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>list</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>: </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>List</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>[</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>T</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>]) = </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>new</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>def</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><b><u><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#003E85'>join</span></u></b><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>s</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>:</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>String</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>) = </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>list</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>mkString</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>s</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#5B6E6E'>&nbsp; //
</span><span style='font-size:10.0pt;font-family:宋体;color:#5B6E6E'>测试</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>def</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>main</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>args</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> : </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Array</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>[</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>String</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>]) : </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Unit</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> = {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#8E3E00'>Console</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'> </span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#003E85'>println</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>List</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(1,2,3,4,5).</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>join</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:green'>&quot; -
&quot;</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>) </span><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
&quot; 1 - 2 - 3 - 4 C 5&quot;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>解释：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>编译器发现</span><span lang=EN-US
style='font-family:Consolas'>List</span><span style='font-family:宋体'>没有</span><span
lang=EN-US style='font-family:Consolas'>join(String)</span><span
style='font-family:宋体'>方法，就发查找代码中有没有定义在</span><span lang=EN-US
style='font-family:Consolas'>implicit def xx(List)</span><span
style='font-family:宋体'>内的</span><span lang=EN-US style='font-family:Consolas'>
join(String)</span><span style='font-family:宋体'>方法，如果有就调用这个。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>为</span><span lang=EN-US
style='font-family:Consolas'>Int</span><span style='font-family:宋体'>增加乘方操作：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def pow(n:Int,
m:Int):Int = if (m==0) 1 else n*pow(n,m-1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>implicit</span><span lang=EN-US style='font-family:Consolas'> def
foo(n:<span style='background:yellow'>Int</span>) = new {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; def <span
style='background:yellow'>**</span>(m:<span style='background:yellow'>Int</span>)
= pow(n,m)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>2**10 // 1024</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：定义如</span><span
lang=EN-US style='font-family:Consolas'>ruby</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>10.next</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>implicit def
foo(n:Int) = new { def next = n+1 }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>10.next // 11</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132207"></a><a
name="_Toc282027521"></a><a name="_Toc281659994"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.20.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>type</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>做</span></u><u><span lang=EN-US
style='font-family:Consolas'>alias</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>相当于</span><span lang=EN-US
style='font-family:Consolas'>C</span><span style='font-family:宋体'>语言的类型定义</span><span
lang=EN-US style='font-family:Consolas'>typedef</span><span style='font-family:
宋体'>，建立新的数据类型名（别名）；在一个函数中用到同名类时可以起不同的别名</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>type</span><span lang=EN-US
style='font-family:Consolas'> JDate = java.util.Date&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>type</span><span lang=EN-US
style='font-family:Consolas'> SDate = java.sql.Date</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>val d1 = new JDate()&nbsp; // </span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>
val d = new java.util.Date()</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>val d2 = new SDate()&nbsp; // </span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>
val d = new java.sql.Date()</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span><span lang=EN-US
style='font-family:Consolas'>type</span><span style='font-family:宋体'>也可以做泛型</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132208"></a><a
name="_Toc282027522"></a><a name="_Toc281659995"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.21.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>泛型</span></u></a></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027523"></a><a
name="_Toc281659996"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.21.1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>函数中的泛型：</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
foo[T](a:T) = println(&quot;value is &quot; + a)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>foo(10) //
&quot;value is 10&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>foo(3.14) //
&quot;value is 3.14&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>foo(&quot;hello&quot;)
// &quot;value is hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027524"></a><a
name="_Toc281659997"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.21.2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>类中的泛型：</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class C1[<span
style='background:yellow'>T</span>] {</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>private var v:T = _&nbsp;&nbsp; // </span><span
style='font-family:宋体'>初始值为</span><span lang=EN-US style='font-family:Consolas'>T</span><span
style='font-family:宋体'>类型的缺省值</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def set(v1:T) = { v = v1 }</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def get = v</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>new C1[<span
style='background:yellow'>Int</span>].set(10).get // 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>new C1[<span
style='background:yellow'>String</span>].set(&quot;hello&quot;).get //
&quot;hello&quot;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027525"></a><a
name="_Toc281659998"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.21.3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>泛型</span></u></a><u><span lang=EN-US style='font-size:
14.0pt;line-height:173%;font-family:Consolas'>qsort</span></u><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>例子</span></u></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def qsort<span
style='background:yellow'>[T &lt;% Ordered[T]]</span>(a:List[<span
style='background:yellow'>T</span>]): List[<span style='background:yellow'>T</span>]
= if (a.size&lt;=1) a else {</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val m = a(a.size/2)</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>qsort(a.filter(m&gt;)) ++ a.filter(m==) ++ qsort(a.filter(m&lt;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>调用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
val a = List(1, 3, 6, 2, 0, 9, 8, 7, 2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
qsort[<span style='background:yellow'>Int</span>](a) // </span><span
style='font-family:宋体'>注意</span><span lang=EN-US style='font-family:Consolas'>2
a</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
val b = List(1.0, 3.3, 6.2, 6.3, 0, 9.5, 8.7, 7.3, 2.2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
qsort[<span style='background:yellow'>Double</span>](b) // </span><span
style='font-family:宋体'>注意</span><span lang=EN-US style='font-family:Consolas'>2
b</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者使用自带库：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1, 3, 6, 2,
0, 9, 8, 7, 2) <span style='background:yellow'>sortWith</span>(_&lt;_)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1.0, 3.3,
6.2, 6.3, 0, 9.5, 8.7, 7.3, 2.2).<span style='background:yellow'>sortWith</span>(_&lt;_)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027526"></a><a
name="_Toc281659999"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.21.4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>泛型</span></u></a><u><span lang=EN-US style='font-size:
14.0pt;line-height:173%;font-family:Consolas'>add</span></u><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>例子</span></u></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体'>采用</span><span lang=EN-US style='font-family:Consolas'>implicit
parameters</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
add[T](x:T, y:T)(<span style='background:yellow'>implicit n:Numeric[T]</span>)
= {</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>n.plus(x,y) // </span><span style='font-family:
宋体'>或者用</span><span lang=EN-US style='font-family:Consolas'> import n._; x + y</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>add(1,2) // 3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>add(1,2.14) //
3.14</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>再如，求</span><span lang=EN-US
style='font-family:Consolas'>max</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
max2[T](x:T, y:T)(implicit n:Numeric[T]) = {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; import
n._</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; if (x
&gt; y) x else y</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>max2(2, 3.14)
// 3.14 </span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027527"></a><a
name="_Toc281660000"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.21.5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>泛型定义</span></u></a><u><span lang=EN-US style='font-size:
14.0pt;line-height:173%;font-family:Consolas'>type</span></u></h3>

<p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas;background:
yellow'>abstract</span></b><span lang=EN-US style='font-family:Consolas'> class
<span style='background:yellow'>C1</span> {</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>type T</span></span></b></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; val
e:T</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas;background:
yellow'>abstract</span></b><span lang=EN-US style='font-family:Consolas'> class
<span style='background:yellow'>C2</span> {</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>type T</span></span></b></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; val
list:List[T]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; def
len = list.length</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def m1(e1:Int)
= new <span style='background:yellow'>C1</span> {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <b><span
style='background:yellow'>type T = Int</span></b></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; val
e = e1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
m2(e1:List[Int]) = new <span style='background:yellow'>C2</span> {</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>type T = Int</span></span></b></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; val
list = e1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}<a
name="_Toc282027528"></a></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Console
println m1(10) // 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Console
println m2(List(1,2,3,4,5)).len // 5</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span><span lang=EN-US
style='font-family:Consolas'>type</span><span style='font-family:宋体'>也可以做数据类型的</span><span
lang=EN-US style='font-family:Consolas'>alias</span><span style='font-family:
宋体'>，类似</span><span lang=EN-US style='font-family:Consolas'>C</span><span
style='font-family:宋体'>语言中的</span><span lang=EN-US style='font-family:Consolas'>typedef</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027529"></a><a
name="_Toc281660001"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>2.21.6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>@specialized</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def test[<span
style='background:yellow'>@specialized</span>(Int,Double) T](x:T)&nbsp; = x
match { case i:Int =&gt; &quot;int&quot;; case _ =&gt; &quot;other&quot; }</span></p>

<p class=MsoNormal><span style='font-family:宋体'>没有</span><span lang=EN-US
style='font-family:Consolas'>@specialized</span><span style='font-family:宋体'>之前，是编译成</span><span
lang=EN-US style='font-family:Consolas'>Object</span><span style='font-family:
宋体'>的代码；用了</span><span lang=EN-US style='font-family:Consolas'>@specialized</span><span
style='font-family:宋体'>，变成</span><span lang=EN-US style='font-family:Consolas'>IntTest(),DoubleTest(),...</span></p>

<p class=MsoNormal><span style='font-family:宋体'>编译后的文件尺寸扩充了，但性能也强了，不用</span><span
lang=EN-US style='font-family:Consolas'>box</span><span style='font-family:
宋体'>，</span><span lang=EN-US style='font-family:Consolas'>unbox</span><span
style='font-family:宋体'>了</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132209"></a><a
name="_Toc282027530"></a><a name="_Toc281660002"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>2.22.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>枚举</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>Enum</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>没有在语言层面定义</span><span lang=EN-US style='font-family:
Consolas'>Enumeration</span><span style='font-family:宋体'>，而是在库中实现：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>object Color extends <span style='background:yellow'>Enumeration</span>
{</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; type Color = <span style='background:yellow'>Value</span></span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; val RED, GREEN, BLUE, WHITE, BLACK = <span
style='background:yellow'>Value</span></span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>}<a name="_Toc282027531"></a></span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>Color.RED // Color.Value = RED</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>import Color._</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val colorful = Color.<span style='background:yellow'>values</span>
filterNot (e=&gt; e==WHITE || e==BLACK)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>colorful foreach println // RED\nGREEN\nBLUE</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>object Color extends Enumeration {</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; val RED = <span style='background:yellow'>Value</span>(&quot;</span><span
style='font-family:宋体'>红色</span><span lang=EN-US style='font-family:Consolas'>&quot;)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; val GREEN = Value(&quot;</span><span
style='font-family:宋体'>绿色</span><span lang=EN-US style='font-family:Consolas'>&quot;)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; val BLUE = Value(&quot;</span><span
style='font-family:宋体'>蓝色</span><span lang=EN-US style='font-family:Consolas'>&quot;)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; val WHITE = Value(&quot;</span><span
style='font-family:宋体'>黑</span><span lang=EN-US style='font-family:Consolas'>&quot;)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; val BLASK = Value(&quot;</span><span
style='font-family:宋体'>白</span><span lang=EN-US style='font-family:Consolas'>&quot;)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>}<a name="_Toc282027532"></a></span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>Color.RED // Color.Value = </span><span
style='font-family:宋体'>红色</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>import Color._</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val colorful = Color.values filterNot (List(&quot;</span><span
style='font-family:宋体'>黑</span><span lang=EN-US style='font-family:Consolas'>&quot;,&quot;</span><span
style='font-family:宋体'>白</span><span lang=EN-US style='font-family:Consolas'>&quot;)
contains _.toString)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>colorful foreach println //</span><span
style='font-family:宋体'>红色</span><span lang=EN-US style='font-family:Consolas'>\n</span><span
style='font-family:宋体'>绿色</span><span lang=EN-US style='font-family:Consolas'>\n</span><span
style='font-family:宋体'>蓝色</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; </span></p>

<h1><a name="_Toc306132210"></a><a name="_Toc282027533"></a><a
name="_Toc281660003"><span lang=EN-US style='font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>FP</span></u></a></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132211"></a><a
name="_Toc282027534"></a><a name="_Toc281660004"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>3.1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>函数</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>函数的地位和一般的变量是同等的，可以作为函数的参数，可以作为返回值。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>传入函数的任何输入是只读的，比如一个字符串，不会被改变，只会返回一个新的字符串。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>里面的一个问题就是很多只用到一次的</span><span lang=EN-US
style='font-family:Consolas'>private</span><span style='font-family:宋体'>方法，没有和使用它的方法紧密结合；</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>可以在函数里面定义函数，很好地解决了这个问题。</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027535"></a><a
name="_Toc281660005"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.1.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>函数定义</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>函数和方法一般用</span><span
lang=EN-US style='font-family:Consolas;background:yellow'>def</span><span
style='font-family:宋体'>定义；也可以用</span><span lang=EN-US style='font-family:Consolas;
background:yellow'>val</span><span style='font-family:宋体'>定义<u>匿名函数</u>，或者定义<u>函数别名</u>。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def m0(x:Int)
= x*x</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val m1 =
(x:Int)=&gt; x*x // ()</span><span style='font-family:宋体'>是必须的</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val m2 =
{x:Int=&gt; x*x} // </span><span style='font-family:宋体'>不用</span><span
lang=EN-US style='font-family:Consolas'>(), </span><span style='font-family:
宋体'>用</span><span lang=EN-US style='font-family:Consolas'>{}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m0(10) // 100</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m1(10) // 100</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m2(10) // 100</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>不需要返回值的函数，可以使用</span><span
lang=EN-US style='font-family:Consolas'>def f() {...}</span><span
style='font-family:宋体'>，永远返回</span><span lang=EN-US style='font-family:Consolas'>Unit</span><span
style='font-family:宋体'>（即使使用了</span><span lang=EN-US style='font-family:Consolas'>return</span><span
style='font-family:宋体'>）</span><span lang=EN-US style='font-family:Consolas'>,</span><span
style='font-family:宋体'>即：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; def
f() {...}&nbsp; </span><span style='font-family:宋体'>等价于</span><span lang=EN-US
style='font-family:Consolas'> def f():Unit = {...}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f() { return
&quot;hello world&quot; }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f() // Unit</span><span
style='font-family:宋体'>，而不是</span><span lang=EN-US style='font-family:Consolas'>
&quot;hello world&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>需要返回值的函数，用</span><span
lang=EN-US style='font-family:Consolas'> def f() = {...} </span><span
style='font-family:宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>
def f = {...}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f() = {
&quot;hello world&quot; } </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f() //
&quot;hello world&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f = {
&quot;hello world&quot; } // f</span><span style='font-family:宋体'>是匿名函数</span><span
lang=EN-US style='font-family:Consolas'> {&quot;hello world&quot;}</span><span
style='font-family:宋体'>的别名</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f //
&quot;hello world&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>三种定义方式的区别：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=266 valign=top style='width:199.8pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f() {
  return .. }</span></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>调用：</span><span lang=EN-US
  style='font-family:Consolas'>f, f()</span><span style='font-family:宋体'>皆可</span></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>始终返回：</span><span lang=EN-US
  style='font-family:Consolas'>Unit</span></p>
  </td>
 </tr>
 <tr>
  <td width=266 valign=top style='width:199.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f() =
  ...</span></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>调用：</span><span lang=EN-US
  style='font-family:Consolas'>f, f()</span><span style='font-family:宋体'>皆可</span></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>返回</span><span lang=EN-US
  style='font-family:Consolas'>Unit</span><span style='font-family:宋体'>或者值</span></p>
  </td>
 </tr>
 <tr>
  <td width=266 valign=top style='width:199.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f = ...</span></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>调用：</span><span lang=EN-US
  style='font-family:Consolas'>f</span></p>
  </td>
  <td width=228 valign=top style='width:171.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>返回</span><span lang=EN-US
  style='font-family:Consolas'>Unit</span><span style='font-family:宋体'>或者值</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>提示：函数式风格――尽量编写有返回值的函数</span><span
lang=EN-US style='font-family:Consolas'>; </span><span style='font-family:宋体'>尽量简短（函数体不使用</span><span
lang=EN-US style='font-family:Consolas'>{...}</span><span style='font-family:
宋体'>）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027536"></a><a
name="_Toc281660006"></a><a name="_映射式定义"></a><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>3.1.2.<span
style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>映射式定义</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>一种特殊的定义：映射式定义（直接相当于数学中的映射关系）</span><span
lang=EN-US style='font-family:Consolas'>;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>其实也可以看成是没有参数的函数，返回一个匿名函数；调用的时候是调用这个返回的匿名函数。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
f:Int=&gt;Double = { // </span><span style='font-family:宋体'>请看做</span><span
lang=EN-US style='font-family:Consolas'> def f: (Int=&gt;Double) = {...}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
1 =&gt; 0.1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
2 =&gt; 0.2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
_ =&gt; 0.0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(1) // 0.1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(3) // 0.0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
m:Option[User]=&gt;User = { </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
Some(x) =&gt; x</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
None =&gt; null</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m(o).getOrElse(&quot;none...&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：</span><span
lang=EN-US style='font-family:Consolas'>(</span><span style='font-family:宋体'>多</span><span
lang=EN-US style='font-family:Consolas'>-&gt;1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
m:(Int,Int)=&gt;Int = _+_</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m(2,3) // 5</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>4</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def m:Int=&gt;Int
= 30+&nbsp; // </span><span style='font-family:宋体'>相当于</span><span lang=EN-US
style='font-family:Consolas'>30+_,</span><span style='font-family:宋体'>如果唯一的</span><span
lang=EN-US style='font-family:Consolas'>&quot;_&quot;</span><span
style='font-family:宋体'>在最后</span><span lang=EN-US style='font-family:Consolas'>,</span><span
style='font-family:宋体'>可以省略</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m(5) // 35</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027537"></a><a
name="_Toc281660007"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.1.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>特殊函数名</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'> + -
* /</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>方法名可以是</span><span lang=EN-US
style='font-family:Consolas'>*</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def *(x:Int,
y:Int) = { x*y }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>*(10,20) // =
200</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1+2, </span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>1.+(2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义一元操作符（置前）可用</span><span
lang=EN-US style='font-family:Consolas'>unary_</span><span style='font-family:
宋体'>。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><i><span style='font-family:宋体'>注：</span></i><i><span
lang=EN-US style='font-family:Consolas'>unary </span></i><i><span
style='font-family:宋体'>：一元的，单一元素的</span></i><i><span lang=EN-US
style='font-family:Consolas'>, </span></i><i><span style='font-family:宋体'>单一构成的</span></i><i><span
style='font-family:Consolas'> </span></i><i><span style='font-family:宋体'>。发音：【</span></i><i><span
lang=EN-US style='font-family:Consolas'>`ju: ne ri</span></i><i><span
style='font-family:宋体'>】</span></i></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-2</span><span
style='font-family:宋体'>，相当于：</span><span lang=EN-US style='font-family:Consolas'>(2).unary_<span
style='background:yellow'>-</span> // -2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>+2</span><span
style='font-family:宋体'>，相当于：</span><span lang=EN-US style='font-family:Consolas'>(2).unary_<span
style='background:yellow'>+</span> // 2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>!true, </span><span
style='font-family:宋体'>相当于：</span><span lang=EN-US style='font-family:Consolas'>(true).unary_<span
style='background:yellow'>!</span> // false</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>~0</span><span
style='font-family:宋体'>，相当于</span><span lang=EN-US style='font-family:Consolas'>
(0).unary_<span style='background:yellow'>~</span>&nbsp; // -1</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027538"></a><a
name="_Toc281660008"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.1.4.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>缺省参数、命名参数</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>注意：从</span><span lang=EN-US
style='font-family:Consolas'>Scala2.8</span><span style='font-family:宋体'>开始支持。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>请对比以下两种写法的可读性：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>一般函数调用</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>命名函数调用</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>sendEmail(</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>&quot;jon.pretty@example.com&quot;, </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>List(&quot;recipient@example.com&quot;), </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>&quot;Test email&quot;, </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>b, </span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>Nil, Nil, Nil)</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-left:-1.45pt'><span lang=EN-US
  style='font-family:Consolas'>sendEmail(</span></p>
  <p class=MsoNormal style='margin-left:-1.45pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; body = b,</span></p>
  <p class=MsoNormal style='margin-left:-1.45pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; subject = &quot;Test
  email&quot;,</span></p>
  <p class=MsoNormal style='margin-left:-1.45pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; to =
  List(&quot;recipient@example.com&quot;),</span></p>
  <p class=MsoNormal style='margin-left:-1.45pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; from =
  &quot;jon.pretty@example.com&quot;,</span></p>
  <p class=MsoNormal style='margin-left:-1.45pt'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; attachments = List(file1,
  file2) )</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义和使用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def join(a:List[String],
s:String<span style='background:yellow'>=&quot;-&quot;</span>) = {
a.mkString(s) }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>join(List(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;))
// a-b-c</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>join(List(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;),
<span style='background:yellow'>&quot;:&quot;</span>) // a:b:c</span></p>

<p class=MsoNormal><span style='font-family:宋体'>调整参数调用顺序：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>join(<span
style='background:yellow'>s=</span>&quot;:&quot;,<span style='background:yellow'>a=</span>List(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;))
// a:b:c</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027539"></a><a
name="_Toc281660009"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.1.5.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>函数调用</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f(s:
String = &quot;default&quot;) = { s }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f //
&quot;hello world&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f() //
&quot;hello world&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>对象的无参数方法的调用，可以省略</span><span
lang=EN-US style='font-family:Consolas'>.</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;hello
world&quot; toUpperCase // &quot;HELLO WORLD&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>对象的</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>个参数方法的调用，可以省略</span><span
lang=EN-US style='font-family:Consolas'>.</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;hello
world&quot; indexOf w // 6</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;hello
world&quot; substring 5 // &quot;world&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Console print
10 // </span><span style='font-family:宋体'>但不能写</span><span lang=EN-US
style='font-family:Consolas'> print 10</span><span style='font-family:宋体'>，只能</span><span
lang=EN-US style='font-family:Consolas'>print(10)</span><span style='font-family:
宋体'>，省略</span><u><span lang=EN-US style='font-family:Consolas'>Console.</span></u></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 + 2 // </span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>
(1).+(2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>对象的多个参数方法的调用</span><span lang=EN-US
style='font-family:Consolas'>,</span><span style='font-family:宋体'>也可省略</span><span
lang=EN-US style='font-family:Consolas'>.</span><span style='font-family:宋体'>但不能省略</span><span
lang=EN-US style='font-family:Consolas'>()</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;hello
world&quot; substring (0, 5) // &quot;hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>注意：</span></b></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>不在</span><span lang=EN-US
style='font-family:Consolas'>class</span><span style='font-family:宋体'>或者</span><span
lang=EN-US style='font-family:Consolas'>object</span><span style='font-family:
宋体'>中的函数不能如此调用：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>def m(i:Int) = i*i</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>m 10 // </span><span style='font-family:
宋体;color:red'>错误</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>但在</span><span lang=EN-US
style='font-family:Consolas'>class</span><span style='font-family:宋体'>或者</span><span
lang=EN-US style='font-family:Consolas'>object</span><span style='font-family:
宋体'>中可以使用</span><span lang=EN-US style='font-family:Consolas'>this</span><span
style='font-family:宋体'>调用：</span></p>

<p class=MsoNormal style='margin-left:31.5pt'><span lang=EN-US
style='font-family:Consolas'>object method {</span></p>

<p class=MsoNormal style='margin-left:31.5pt'><span lang=DA style='font-family:
Consolas'>&nbsp;&nbsp;&nbsp; def m(i:Int) = i*i</span></p>

<p class=MsoNormal style='margin-left:31.5pt'><span lang=DA style='font-family:
Consolas'>&nbsp;&nbsp;&nbsp; </span><span lang=EN-US style='font-family:Consolas'>def
main(args: Array[String]) = {</span></p>

<p class=MsoNormal style='margin-left:31.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; val ii
= <span style='background:yellow'>this m 15</span> &nbsp;// </span><span
style='font-family:宋体'>等同于</span><span lang=EN-US style='font-family:Consolas'>
m(15), this </span><span style='font-family:宋体'>不能省略</span></p>

<p class=MsoNormal style='margin-left:31.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=DE style='font-family:Consolas'>println(ii)</span></p>

<p class=MsoNormal style='margin-left:31.5pt'><span lang=DE style='font-family:
Consolas'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal style='margin-left:31.5pt'><span lang=DE style='font-family:
Consolas'>}</span></p>

<p class=MsoNormal style='margin-left:31.5pt'><span lang=DE style='font-family:
Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>提示：这种调用方法最大的用途在于操作符重载，以及阅读性强的</span><span
lang=EN-US style='font-family:Consolas'>DSL</span><span style='font-family:
宋体'>。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; System
exit 0</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas'>Thread sleep 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; Console
println &quot;hello world&quot; // </span><span style='font-family:宋体'>省略</span><span
lang=EN-US style='font-family:Consolas'>Console</span><span style='font-family:
宋体'>则报错</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; 2
** 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &quot;-&quot;
* 100</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027540"></a><a
name="_Toc281660010"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.1.6.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>匿名函数</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>形式：</span><span lang=DA
style='font-family:Consolas'>((</span><span style='font-family:宋体'>命名参数列表</span><span
lang=DA style='font-family:Consolas'>)=&gt;</span><span style='font-family:
宋体'>函数实现</span><span lang=DA style='font-family:Consolas'>)(</span><span
style='font-family:宋体'>参数列表</span><span lang=DA style='font-family:Consolas'>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>特殊地：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=DA style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>无参数：</span><span lang=DA
style='font-family:Consolas'> (()=&gt;</span><span style='font-family:宋体'>函数实现</span><span
lang=DA style='font-family:Consolas'>)()</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=DA style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>有一个参数且在最后：</span><span lang=DA
style='font-family:Consolas'> (</span><span style='font-family:宋体'>函数实现</span><span
lang=DA style='font-family:Consolas'>)(</span><span style='font-family:宋体'>参数</span><span
lang=DA style='font-family:Consolas'>)</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=DA style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>无返回值：</span><span lang=DA
style='font-family:Consolas'> ((</span><span style='font-family:宋体'>命名参数列表</span><span
lang=DA style='font-family:Consolas'>)=&gt;Unit)(</span><span style='font-family:
宋体'>参数列表</span><span lang=DA style='font-family:Consolas'>)</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>有参数的匿名函数（参数名称不能省）：</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>(<span
style='background:yellow'>(i:Int)=&gt; i*i</span>)(3) // 9</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>(<span
style='background:yellow'>(i:Int, j:Int) =&gt; i+j</span>)(3, 4) // 7</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>有一个参数且在最后的：</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>(10*)(2) // 20, </span><span
style='font-family:宋体'>相当于</span><span lang=DA style='font-family:Consolas'>
((x:Int)=&gt;10*x)(2)</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>(10+)(2) // 12, </span><span
style='font-family:宋体'>相当于</span><span lang=DA style='font-family:Consolas'>
((x:Int)=&gt;10+x)(2)</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>(List(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)
mkString)(&quot;=&quot;) // a=b=c</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>无参数的匿名函数：</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>(<span
style='background:yellow'>()=&gt; 10</span>)() // 10</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>无参数无返回值：</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>(<span
style='background:yellow'>() =&gt; Unit</span>)</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>( ()=&gt; {println(&quot;hello&quot;);
20*10} )()</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>{
println(&quot;hello&quot;); 20*10 }</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=DA
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=DA style='font-family:
Consolas'>def m = <span style='background:yellow'>(i:Int)=&gt; i*i</span></span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=DA style='font-family:
Consolas'>m(3) // 9</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=DA style='font-family:
Consolas'>List(1,2,3,4).map(m) // List(1, 4, 9, 16)</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=DA
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def times3(m: ()=&gt; Unit) = { m();m();m() }</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>times3 ( ()=&gt; println(&quot;hello world&quot;)
)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>由于是无参数的匿名函数，可进一步简化：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def times3(m: <span style='background:yellow'>=&gt;</span>Unit)
= { m;m;m } // </span><span style='font-family:宋体'>参见“</span><span lang=EN-US
style='font-family:Consolas'>lazy</span><span style='font-family:宋体'>参数”</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>times3 ( println(&quot;hello world&quot;) )</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027541"></a><a
name="_Toc281660011"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.1.7.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>偏函数</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>用下划线代替</span><span lang=EN-US
style='font-family:Consolas'>1+</span><span style='font-family:宋体'>个参数的函数叫偏函数（</span><span
lang=EN-US style='font-family:Consolas'>partially applied function</span><span
style='font-family:宋体'>），如：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><a name="OLE_LINK2"></a><a
name="OLE_LINK1"><span lang=EN-US style='font-family:Consolas'>def
sum(a:Int,b:Int,c:Int) = a+b+c</span></a></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val p0 = sum _ // </span><span style='font-family:
宋体'>正确</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val p1 = sum(10,_,20) // </span><span
style='font-family:宋体'>错误</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val p2 = sum(10,_:Int,20) // </span><span
style='font-family:宋体'>正确</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val p3 = sum(_:Int,100,_:Int)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>p0(1,2,3) // 6</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>p2(100) // 130</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>p3(10,1) // 111</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (sum
_)(1 2 3) // 6</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
(sum(1,_:Int,3))(2) // 6</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
(sum(_:Int,2,_:Int))(1,3) // 6</span></p>

<p class=MsoNormal><span style='font-family:宋体'>从上面可以看出，</span><span
lang=EN-US style='font-family:Consolas'>partial</span><span style='font-family:
宋体'>函数是一个正常函数中抽出来的一部分（参数不全），故称为</span><span lang=EN-US style='font-family:Consolas'>partial</span><span
style='font-family:宋体'>函数。</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027542"></a><a
name="_Toc281660012"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.1.8.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>“_”</span></u></a><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>匿名参数</span></u></h3>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>_</span><span
style='font-family:宋体'>：匿名函数中的匿名参数，同</span><span lang=DA style='font-family:
Consolas'>Groovy</span><span style='font-family:宋体'>的</span><span lang=DA
style='font-family:Consolas'>it</span><span style='font-family:宋体'>一样，</span><span
lang=DA style='font-family:Consolas'>groovy</span><span style='font-family:
宋体'>：</span><span style='font-family:Consolas'> <span lang=DA>3.times { print
it }</span></span><span style='font-family:宋体'>；但也有差别：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=204 valign=top style='width:152.65pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=238 valign=top style='width:178.8pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=DA
  style='font-family:Consolas'>Groovy</span></p>
  </td>
  <td width=280 valign=top style='width:210.35pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=DA
  style='font-family:Consolas'>Scala</span></p>
  </td>
 </tr>
 <tr>
  <td width=204 valign=top style='width:152.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=right style='text-align:right'><span
  style='font-family:宋体'>同</span></p>
  </td>
  <td width=238 valign=top style='width:178.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=DA style='font-family:Consolas'>print({it*10}(5))
  // 50</span></p>
  </td>
  <td width=280 valign=top style='width:210.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=DA style='font-family:Consolas'>((_:Int)*10)(5)
  // 50</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>强类型语言，必须标明类型为</span><span
  lang=DA style='font-family:Consolas'>Int</span></p>
  </td>
 </tr>
 <tr>
  <td width=204 valign=top style='width:152.65pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=right style='text-align:right'><span
  style='font-family:宋体'>不同</span></p>
  </td>
  <td width=238 valign=top style='width:178.8pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=DA style='font-family:Consolas'>def a =
  {it*it}(5) // 25</span></p>
  <p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>两个</span><span lang=DA
  style='font-family:Consolas'>it</span><span style='font-family:宋体'>完全一样</span></p>
  </td>
  <td width=280 valign=top style='width:210.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=DA style='font-family:Consolas'>((_:Int)*(_:Int))(5,5)
  // 25</span></p>
  <p class=MsoNormal><span lang=DA style='font-family:Consolas'>((it:Int)=&gt;it*it)(5)
  // 25</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>不能用：</span><span lang=DA
  style='font-family:Consolas'>((_:Int)*(_:Int))(5)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>两个</span><span lang=DA
  style='font-family:Consolas'>_</span><span style='font-family:宋体'>不一样，表示</span><span
  lang=DA style='font-family:Consolas'>2</span><span style='font-family:宋体'>个不同参数</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span><span
style='font-family:宋体'>多个下划线指代多个参数，而不是单个参数的重复使用。第一个下划线代表第一个参数，第二个下划线代表第二个，第三个……，如此类推。</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><i><u><span lang=DA
style='font-family:Consolas'>int</span></u></i><span lang=DA style='font-family:
Consolas'> <i><u>add</u></i>(int i, int j) { <i><u>return</u></i> i+j; }</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=DA style='font-family:
Consolas'>add(3,4)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>返回值、函数名和</span><span
lang=DA style='font-family:Consolas'>return</span><span style='font-family:
宋体'>关键字可以省略，变为：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=DA style='font-family:
Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>scala </span><span
style='font-family:宋体'>写法</span><span lang=DA style='font-family:Consolas'>1</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=DA style='font-family:
Consolas'>((i:Int, j:Int) =&gt; i+j)(3, 4) // 7</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=DA style='font-family:
Consolas'>i,j</span><span style='font-family:宋体'>变量名可以省略，变为：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=DA style='font-family:
Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>scala</span><span
style='font-family:宋体'>写法</span><span lang=DA style='font-family:Consolas'>2</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ((_:Int)
+ (_:Int))(3,4) // 7</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>注意：括号</span><span lang=DA style='font-family:Consolas'>(_:Int)</span><span
style='font-family:宋体'>括号是必须的</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>其他例子</span><span
style='font-family:宋体'>：</span><a name="_Toc282027543"></a></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=DA style='font-family:
Consolas'>&quot;Hello&quot;.exists(_.isUpper) // true</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=DA
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=DA style='font-family:
Consolas'>def sum(x:Int,y:Int,z:Int) = x+y+z</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>val sum1 = sum <span style='background:yellow'>_</span></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>val sum2 = sum(1000,<span style='background:yellow'>_</span>:Int,100)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>sum1(1,2,3) // 6</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>sum2(5) // 1105</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果</span><span lang=EN-US
style='font-family:Consolas'>_</span><span style='font-family:宋体'>在最后，还可以省略</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>1 to 5 foreach println</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>1 to 5 map (10*) </span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>1 to 5 map (*10) // </span><span style='font-family:
宋体;color:red'>错误！</span><span lang=EN-US style='font-family:Consolas'>_</span><span
style='font-family:宋体'>不在最后不能省</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027544"></a><a
name="_Toc281660013"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.1.9.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>变长参数</span></u></a><u><span
style='font-size:14.0pt;line-height:173%;font-family:Consolas'> <span
lang=EN-US>*</span></span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>变长参数只能放在最后一个，否则就歧义了，</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
sum(ns:Int*, s:String) = ... // </span><span style='font-family:宋体;color:red'>错误</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def sum(ns:
Int<span style='background:yellow'>*</span>) = {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; </span><span
lang=DA style='font-family:Consolas'>var s = 0</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; for
(n&lt;-ns) </span><span lang=EN-US style='font-family:Consolas'>s += n</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; s</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>sum(1,2,3,4)
// 10</span></p>

<p class=MsoNormal><span style='font-family:宋体'>更函数化的写法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def sum(ns:Int<span
style='background:yellow'>*</span>) = ns.reduceLeft(_+_) </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>sum(1,2,3,4)
// 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def m(args:Any<span
style='background:yellow'>*</span>) = args foreach println</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#F3F5F5;
background:black'>scala&gt;</span><span lang=EN-US style='font-family:Consolas'>
m(3,3.14,&quot;hello&quot;,List(1,2,3))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>3.14</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>hello</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1, 2, 3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027545"></a><a
name="_Toc281660014"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.1.10.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:14.0pt;line-height:173%;
font-family:Consolas'>lazy</span></u></a><u><span style='font-size:14.0pt;
line-height:173%;font-family:"微软雅黑","sans-serif"'>参数</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>就是调用时用到函数的该参数，每次都重新计算：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US>1</span><span
style='font-family:宋体'>：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>一般参数</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>lazy</span></b><b><span
  style='font-family:宋体'>参数</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f1(x:
  Long) = { </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; val
  (a,b) = (x,x)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
  println(&quot;a=&quot;+a+&quot;,b=&quot;+b)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f2(x: <span
  style='background:yellow'>=&gt;</span>Long) = { </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; val
  (a,b) = (x,x)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
  println(&quot;a=&quot;+a+&quot;,b=&quot;+b)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f1(System.nanoTime)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// a=140857176658355,b=140857176658355</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f2(System.nanoTime)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// a=14088022678<span
  style='background:yellow'>6534</span>,b=14088022678<span style='background:
  yellow'>7666</span></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span><span
style='font-family:Consolas'> <span lang=EN-US>lazy</span></span><span
style='font-family:宋体'>参数是函数</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>一般参数</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>lazy</span></b><b><span
  style='font-family:宋体'>参数</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def times3(m:
  Unit) = { m;m;m }</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def times3(m:
  <span style='background:yellow'>=&gt;</span>Unit) = { m;m;m }</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>times3 (
  println(&quot;hello world&quot;) )</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
  style='font-family:宋体'>打印</span><span lang=EN-US style='font-family:Consolas'>1</span><span
  style='font-family:宋体'>次</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>times3 (
  println(&quot;hello world&quot;) )</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
  style='font-family:宋体'>打印</span><span lang=EN-US style='font-family:Consolas'>3</span><span
  style='font-family:宋体'>次</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US>3</span><span
style='font-family:宋体'>：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>一般参数</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>lazy</span></b><b><span
  style='font-family:宋体'>参数</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>def f(x:Int m: Unit) = { print(x*x); m }</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>def f(x:Int, m: <span style='background:yellow'>=&gt;</span>Unit)
  = { print(x*x); m }</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(3,println(&quot;end&quot;))
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
  style='font-family:宋体'>先执行</span><span lang=EN-US style='font-family:Consolas'>m</span><span
  style='font-family:宋体'>，输出：</span><span lang=EN-US style='font-family:Consolas'>&quot;end\n9&quot;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(3,println(&quot;end&quot;))
  </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// lazy</span><span
  style='font-family:宋体'>执行</span><span lang=EN-US style='font-family:Consolas'>m</span><span
  style='font-family:宋体'>，输出</span><span style='font-family:Consolas'> </span><span
  style='font-family:宋体'>“</span><span lang=EN-US style='font-family:Consolas'>9end</span><span
  style='font-family:宋体'>”</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>4</span><span style='font-family:宋体'>：自定义</span><span
lang=EN-US style='font-family:Consolas'>loop</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def loop2
(cond: <span style='background:yellow'>=&gt;</span>Boolean)(body: <span
style='background:yellow'>=&gt;</span>Unit): Unit = </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; if
(cond) { body; loop2(cond)(body) }</span></p>

<p class=MsoNormal><span style='font-family:宋体'>调用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var i=0; loop2
(i&lt;3) (i+=1) // i=3</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var i=0; loop2
{i&lt;3} {i+=1} // i=3</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者我们更习惯的方式</span><span
lang=EN-US style='font-family:Consolas'>:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var i=0; loop2
(i&lt;3) {i+=1}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>5</span><span style='font-family:宋体'>：自定义</span><span
lang=EN-US style='font-family:Consolas'>loop..until</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def loop3
(body: <span style='background:yellow'>=&gt;</span>Unit): foo = new foo(body)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class
foo(body: <span style='background:yellow'>=&gt;</span>Unit) {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; def
until(cond: <span style='background:yellow'>=&gt;</span>Boolean) { body; if(!cond)
until(cond) }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>//</span><span
style='font-family:宋体'>调用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var i = 0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>loop3 { i+=1;
println(i) } until (i&gt;3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132212"></a><a
name="_Toc282027546"></a><a name="_Toc281660015"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>3.2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>函数式编程</span></u></a></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027547"></a><a
name="_Toc281660016"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.2.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>风格</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>首选使用</span><span lang=EN-US
style='font-family:Consolas'>val</span><span style='font-family:宋体'>，用</span><span
lang=EN-US style='font-family:Consolas'>var</span><span style='font-family:
宋体'>之前要仔细考虑是否真正需要。</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>非函数式</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>函数式</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var s =
  &quot;&quot;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>if
  (args.length&gt;0) s = args[0]</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val s = if
  (args.length&gt;0) args[0] else &quot;&quot;</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
  gcd(a0:Int,b0:Int) = {</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; var a
  = a0; var b = b0</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
  while(a!=0) {</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>val t = a</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>a = a % b</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>b = t</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; }</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
  return b</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>求</span><span lang=EN-US
  style='font-family:Consolas'>a</span><span style='font-family:宋体'>，</span><span
  lang=EN-US style='font-family:Consolas'>b</span><span style='font-family:
  宋体'>的最大公约数</span><span lang=EN-US style='font-family:Consolas'>,</span><span
  style='font-family:宋体'>所有的</span><span lang=EN-US style='font-family:Consolas'>while</span><span
  style='font-family:宋体'>循环基本都可以被替代：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
  gcd(a:Int,b:Int) = </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>if (b==0) a else gcd(b, a % b)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>函数要短，可以试着所有的函数体都没有</span><span
lang=EN-US style='font-family:Consolas'> {...} </span><span style='font-family:
宋体'>包围，一旦出现，尽量分解</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如打印</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>1&nbsp; 2&nbsp; 3</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>2&nbsp; 4&nbsp; 6</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>3&nbsp; 6&nbsp; 9</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='margin-left:21.0pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>非函数式</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>函数式</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for(i&lt;-1
  to 3; j&lt;-1 to 3) {</span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>print(i*j + &quot; &quot;);</span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>if (j==3) println</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f(n:Int)
  = 1 to 3 map (_*n) mkString &quot; &quot;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 3 map f
  mkString &quot;\n&quot;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027548"></a><a
name="_Toc281660017"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.2.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>函数作为参数</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>采用映射式函数定义：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def f(x:Int, y:Int, m:<span style='background:
yellow'>(Int, Int)=&gt;Int</span>) = m(x,y) </span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>f(3,4, <span style='background:yellow'>(x,y)=&gt;x+y</span>)
// 7</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>f(3,4, <span style='background:yellow'>(x,y)=&gt;scala.math.sqrt(x*x+y*y)</span>)
// 5</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def f(x:Int, y:Int, m: <span style='background:
yellow'>=&gt;Unit</span>) = { println(x*y); m } // </span><span
style='font-family:宋体'>参见“</span><span lang=EN-US style='font-family:Consolas'>lazy</span><span
style='font-family:宋体'>参数”</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>f(3,4, <span style='background:yellow'>println(&quot;end&quot;)</span>)
</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>// 12</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>// end</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; def
f(f2:Int=&gt;Int) = f2(5)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; f(100+)
// 105, 100+</span><span style='font-family:宋体'>是匿名函数</span><span lang=EN-US
style='font-family:Consolas'> ((x:Int)=&gt;100+x)</span><span style='font-family:
宋体'>的简写</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027549"></a><a
name="_Toc281660018"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.2.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>函数作为返回值</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
f(s:String):(Int =&gt; String) = { n:Int=&gt; s * n }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(&quot;*&quot;)
// res32: (Int) =&gt; String = &lt;function1&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>res32(10) //
&quot;**********&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(&quot;*&quot;)(10)
// </span><span style='font-family:宋体'>相当于先得到</span><span lang=EN-US
style='font-family:Consolas'>f(&quot;*&quot;)</span><span style='font-family:
宋体'>的返回值函数，再用该返回值函数调用一个参数</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027550"></a><a
name="_Toc281660019"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.2.4.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>Curry</span></u></a><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>化</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def sum(a:Int,
b:Int) = { a + b } // sum(1, 2) = 3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Curry</span><span
style='font-family:宋体'>化后：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
sum(a:Int)(b:Int) = { a + b } // sum(1)(2) = 3</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def sum(a:Int)
= { (b:Int)=&gt; a + b } // sum(1)(2) = 3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体'>调用方式二：</span><span lang=EN-US style='font-family:Consolas'>val
t1 = sum(10);&nbsp; val t2 = t1(20)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027551"></a><a
name="_Toc281660020"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.2.5.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>递归</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>使用递归的原因：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>其一是很多数学关系、逻辑关系本身就是递归描述（</span><span
lang=EN-US style='font-family:Consolas'>Hanoi</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Fib</span><span
style='font-family:宋体'>）的；</span></p>

<p class=MsoNormal><span style='font-family:宋体'>其二是函数式编程不鼓励用变量循环，而是用递归。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>递归包含递归出口和递归体：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>递归出口</span></p>
  </td>
  <td width=358 valign=top style='width:268.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>即递归的终止条件</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>比如</span><span lang=EN-US
  style='font-family:Consolas'>0!=1, fib(1)=fib(2)=1, index==1000</span></p>
  </td>
 </tr>
 <tr style='height:28.65pt'>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt;height:28.65pt'>
  <p class=MsoNormal><span style='font-family:宋体'>递归体</span></p>
  </td>
  <td width=358 valign=top style='width:268.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:28.65pt'>
  <p class=MsoNormal><span style='font-family:宋体'>即和前面或后面的值之间的关系</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>比如</span><span lang=EN-US
  style='font-family:Consolas'>n! = n*(n-1)!, fib(n)=fib(n-2)+fib(n-1)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：幂运算</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如计算</span><span lang=EN-US
style='font-family:Consolas'>2^100, scala.math.pow(2,2000)</span><span
style='font-family:宋体'>越界，可用递归</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
pow(n:BigInt, m:BigInt):BigInt = if (m==0) 1 else pow(n,m-1)*n</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span><span
lang=EN-US style='font-family:Consolas'>Hanoi</span><span style='font-family:
宋体'>汉诺塔</span></p>

<p class=MsoNormal><span style='font-family:宋体'>从</span><span lang=EN-US
style='font-family:Consolas'>a</span><span style='font-family:宋体'>挪到</span><span
lang=EN-US style='font-family:Consolas'>c</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=154 valign=bottom style='width:115.45pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;text-indent:21.1pt'><b><span
  lang=EN-US style='font-family:Consolas;background:yellow'>a(from)</span></b></p>
  </td>
  <td width=154 valign=bottom style='width:115.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>b(via)</span></b></p>
  </td>
  <td width=154 valign=bottom style='width:115.45pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas;background:yellow'>c(to)</span></b></p>
  </td>
 </tr>
 <tr style='height:31.85pt'>
  <td width=154 valign=bottom style='width:115.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt;height:31.85pt'>
  <p class=MsoNormal style='text-indent:21.1pt'><b><span lang=EN-US
  style='font-family:Consolas;color:#C00000'>=&nbsp;&nbsp;&nbsp;&nbsp; --- 1</span></b></p>
  <p class=MsoNormal style='text-indent:15.8pt'><b><span lang=EN-US
  style='font-family:Consolas;color:#C00000'>===</span></b></p>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas;
  color:#C00000'>&nbsp; =====&nbsp;&nbsp; --- n-1</span></b></p>
  <p class=MsoNormal style='text-indent:5.25pt'><b><span lang=EN-US
  style='font-family:Consolas'>=======&nbsp; --- n</span></b></p>
  </td>
  <td width=154 valign=bottom style='width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:31.85pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></b></p>
  </td>
  <td width=154 valign=bottom style='width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt;height:31.85pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=154 valign=bottom style='width:115.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:5.25pt'><b><span lang=EN-US
  style='font-family:Consolas'>=======&nbsp; --- n</span></b></p>
  </td>
  <td width=154 valign=bottom style='width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.1pt'><b><span lang=EN-US
  style='font-family:Consolas;color:#C00000'>=&nbsp; &nbsp;&nbsp;&nbsp;--- 1</span></b></p>
  <p class=MsoNormal style='text-indent:15.8pt'><b><span lang=EN-US
  style='font-family:Consolas;color:#C00000'>===</span></b></p>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas;
  color:#C00000'>&nbsp; =====&nbsp;&nbsp; --- n-1</span></b></p>
  </td>
  <td width=154 valign=bottom style='width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=154 valign=bottom style='width:115.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:5.25pt'><b><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></b></p>
  </td>
  <td width=154 valign=bottom style='width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.1pt'><b><span lang=EN-US
  style='font-family:Consolas;color:#C00000'>=&nbsp;&nbsp;&nbsp;&nbsp; --- 1</span></b></p>
  <p class=MsoNormal style='text-indent:15.8pt'><b><span lang=EN-US
  style='font-family:Consolas;color:#C00000'>===</span></b></p>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas;
  color:#C00000'>&nbsp; =====&nbsp;&nbsp; --- n-1</span></b></p>
  </td>
  <td width=154 valign=bottom style='width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:5.25pt'><b><span lang=EN-US
  style='font-family:Consolas'>=======&nbsp; --- n</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=154 valign=bottom style='width:115.45pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:5.25pt'><b><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></b></p>
  </td>
  <td width=154 valign=bottom style='width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.1pt'><b><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></b></p>
  </td>
  <td width=154 valign=bottom style='width:115.45pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:21.1pt'><b><span lang=EN-US
  style='font-family:Consolas;color:#C00000'>=&nbsp;&nbsp;&nbsp;&nbsp; --- 1</span></b></p>
  <p class=MsoNormal style='text-indent:15.8pt'><b><span lang=EN-US
  style='font-family:Consolas;color:#C00000'>===</span></b></p>
  <p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas;
  color:#C00000'>&nbsp; =====&nbsp;&nbsp; --- n-1</span></b></p>
  <p class=MsoNormal style='text-indent:5.25pt'><b><span lang=EN-US
  style='font-family:Consolas'>=======&nbsp; --- n</span></b></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
move(n:Int, a:Int, b:Int, c:Int) = {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; if
(n==1) println(&quot;%s to %s&quot; format (a, c)) else {</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>move(n-1, a,c,b); move(1,a,b,c); move(n-1,b,a,c)
}}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：最大公约数</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>12&nbsp; 20</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
20&nbsp; 12 (=12%20)</span></p>

<p class=MsoNormal style='text-indent:42.0pt'><span lang=EN-US
style='font-family:Consolas'>12&nbsp; 8 (=20%12)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;8&nbsp;
4 (=12%8)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;<span
style='color:#C00000'>4</span>&nbsp; 0 (=8%4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def gcd(n:Int,
m:Int):Int = if(m==0) n else gcd(m, n%m)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>4</span><span style='font-family:宋体'>：上台阶</span></p>

<p class=MsoNormal><span style='font-family:宋体'>上</span><span lang=EN-US
style='font-family:Consolas'>N</span><span style='font-family:宋体'>级台阶，即可每次</span><span
lang=EN-US style='font-family:Consolas'>1</span><span style='font-family:宋体'>步也可每次</span><span
lang=EN-US style='font-family:Consolas'>2</span><span style='font-family:宋体'>步走，共有多少种不同走法</span></p>

<p class=MsoNormal><span style='font-family:宋体'>解法：迈出第一步有两种方法，第一步后就是</span><span
lang=EN-US style='font-family:Consolas'>N-1</span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>N-2</span><span
style='font-family:宋体'>的走法了</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>def step(n:Int):Int = if (n&lt;=2) n else
step(n-1)+step(n-2)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>推广：如果每次可走</span><span
lang=EN-US style='font-family:Consolas'>1</span><span style='font-family:宋体'>步或</span><span
lang=EN-US style='font-family:Consolas'>2</span><span style='font-family:宋体'>步或</span><span
lang=EN-US style='font-family:Consolas'>3</span><span style='font-family:宋体'>步，则</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>def step(n:Int):Int = n match { case 1=&gt;1; case
2=&gt;2; case 3=&gt;4; </span></p>

<p class=MsoNormal style='text-indent:31.5pt'><span lang=EN-US
style='font-family:Consolas'>case _ =&gt;step(n-1)+step(n-2)+step(n-3) }</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027552"></a><a
name="_Toc281660021"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>3.2.6.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>尾</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>-</span></u><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>递归</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>定义：函数尾（最后一条语句）是递归调用的函数。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>tail-recursive</span><span
style='font-family:宋体'>会被优化成循环，所以没有堆栈溢出的问题。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>线性递归的阶乘：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def <span
style='background:yellow'>nn1</span>(n:Int):BigInt = if (n==0) 1 else
nn1(n-1)*n</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>println(nn1(1000))
// 4023...000</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>println(nn1(10000))
// </span><span style='font-family:宋体'>崩溃：（</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>尾递归的阶乘：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def <span
style='background:yellow'>nn2</span>(n:Int, rt:BigInt):BigInt = if (n==0) rt
else nn2(n-1, rt*n)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>println(nn2(1000,1))
// 40...8896</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>println(nn2(10000,1))
// 2846...000</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def <span
style='background:yellow'>nn3</span>(n:Int):BigInt = nn2(n,1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对比：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>线性递归</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>尾递归</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>nn1(5)&nbsp;
  <br>
  {5 * nn1(4) }<br>
  {5 * {4 * nn1(3) }}<br>
  {5 * {4 * {3 * nn1(2) }}}<br>
  {5 * {4 * {3 * {2 * nn1(1) }}}}<br>
  {5 * {4 * {3 * {2 * 1}}}}<br>
  {5 * {4 * {3 * 2}}}<br>
  {5 * {4 * 6}}<br>
  {5 * 24}<br>
  120</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>nn2(5, 1)<br>
  nn2(4, 1*5=5)<br>
  nn2(3, 4*5=20)<br>
  nn2(2, 3*20=60)<br>
  nn2(1, 2*60=120)<br>
  120</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>不算，直到递归到一个确定的值后，又从这个具体值向后计算；</span><span
  style='font-family:宋体'>更耗资源</span><span lang=EN-US style='font-family:Consolas'>,</span><span
  style='font-family:宋体'>每次重复的调用都使得调用链条不断加长</span><span lang=EN-US
  style='font-family:Consolas'>. </span><span style='font-family:宋体'>系统使用栈进行数据保存和恢复</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>每递归一次就算出相应的结果。</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>不能优化成循环</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>可以优化成循环</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：查找第</span><span lang=EN-US
style='font-family:Consolas'>10001</span><span style='font-family:宋体'>个质数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
prime(n:Int) = 2 to math.sqrt(n).toInt forall (n%_!=0)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
next(p:Int) = p+1 to 2*p <span style='background:yellow'>find</span> prime get</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def f(p:Int, <span
style='background:yellow'>i</span>:Int):Int = if (i==10001) p else f(next(p), <span
style='background:yellow'>i+1</span>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>f(2,1) //
104743</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者使用</span><span lang=EN-US
style='font-family:Consolas'>Stream</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>def f2(p:Int):<span style='background:yellow'>Stream</span>[Int]
= p <span style='background:yellow'>#::</span> f2(next(p))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>f2(2).<span style='background:yellow'>take</span>(10001).last
// 104743</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>fib</span><span style='font-family:宋体'>数列</span><span
lang=EN-US style='font-family:Consolas'>(1 1 2 3 5 8 13 21)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>def fib2(n1:BigInt, n2:BigInt, i:Int, n:Int):BigInt
=</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; if (i==n) n1 else fib2(n2, n1+n2, i+1, n)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>def fib(n:Int) = fib2(1,1,0,n)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>0 to 10 map fib</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>fib(100-1) // </span><span style='font-family:
宋体'>第</span><span lang=EN-US style='font-family:Consolas'>100</span><span
style='font-family:宋体'>个</span><span lang=EN-US style='font-family:Consolas'>fib</span><span
style='font-family:宋体'>数</span><span lang=EN-US style='font-family:Consolas'>=354224848179261915075</span></p>

<h1><a name="_Toc306132213"></a><a name="_Toc282027553"></a><a
name="_Toc281660022"><span lang=EN-US style='font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>OOP</span></u></a></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132214"></a><a
name="_Toc282027554"></a><a name="_Toc281660023"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>4.1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>类</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>class</span></u></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027555"></a><a
name="_Toc281660024"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.1.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>定义</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class User {</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>var name = &quot;anonymous&quot;</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>var age:Int = _</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val country = &quot;china&quot;</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>def email = name + &quot;@mail&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val u = new
User</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
var</span><span style='font-family:宋体;color:#5B6E6E'>定义的属性可读可写</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>u.name =
&quot;qh&quot;; u.age = 30</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>println(u.name
+ &quot;, &quot; + u.age) <span style='color:#5B6E6E'>// &quot;qh, 30&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
val </span><span style='font-family:宋体;color:#5B6E6E'>定义的属性只读不可写</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>u.country =
&quot;usa&quot; <span style='color:#5B6E6E'>// </span></span><span
style='font-family:宋体;color:red'>报错</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>println(u.country)
<span style='color:#5B6E6E'>// &quot;china&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
def </span><span style='font-family:宋体;color:#5B6E6E'>定义的是方法</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>, </span><span
style='font-family:宋体;color:#5B6E6E'>每次调用时重新计算</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>u.email <span
style='color:#5B6E6E'>// &quot;qh@mail&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><a
name="_Toc282027556"><span style='font-family:宋体'>定义</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class Person(<u>ln
: String, fn : String, s : Person = null</u>) {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; def
lastName = ln;&nbsp;&nbsp; // </span><span style='font-family:宋体'>用</span><span
lang=EN-US style='font-family:Consolas'>def</span><span style='font-family:
宋体'>定义后才是属性，</span><span lang=EN-US style='font-family:Consolas'>ln</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>fn</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>s</span><span
style='font-family:宋体'>不可见</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; def
firstName = fn;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; def
spouse = s;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; def
introduction() : String = </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
return (&quot;Hi, &quot; + firstName + &quot; &quot; + lastName) +</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
(if (spouse != null) &quot; and spouse, &quot; + spouse.firstName + &quot;
&quot; + spouse.lastName + &quot;.&quot; </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;
else &quot;.&quot;);</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US>// </span><span style='font-family:宋体'>调用</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>new
Person(&quot;aa&quot;,&quot;bb&quot;, new
Person(&quot;cc&quot;,&quot;dd&quot;)).introduction();</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027557"></a><a
name="_Toc281660025"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.1.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>构造方法</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class
c1(x:String) // </span><span style='font-family:宋体'>等同于：</span><span
lang=EN-US style='font-family:Consolas'>class c1(<span style='background:yellow'>private</span>
<span style='background:yellow'>var</span> x:String)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val o1 = new
c1(&quot;aaa&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>o1.x // </span><span
style='font-family:宋体;color:red'>报错</span><span style='font-family:宋体'>，因为是</span><span
lang=EN-US style='font-family:Consolas'>private</span><span style='font-family:
宋体'>的，定义成</span><span lang=EN-US style='font-family:Consolas'> class c1(<span
style='background:yellow'>var</span> x:String) </span><span style='font-family:
宋体'>才能这样用</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>object
construct1 {</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>class c1(name:String, age:Int)</span><span
lang=EN-US style='font-family:Consolas'> { // (1)</span><span style='font-family:
宋体'>直接在类定义处</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; def <span style='background:
yellow'>this</span>() { <span style='background:yellow'>this</span>(&quot;anonymous&quot;,
20) } // (2)</span><span style='font-family:宋体'>用</span><span lang=EN-US
style='font-family:Consolas'>this</span><span style='font-family:宋体'>定义</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
def m1() = {&nbsp; printf(&quot;%s=%d\n&quot;, name, age) }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; def
main(args:Array[String]) = { </span></p>

<p class=MsoNormal style='text-indent:31.5pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>new c1().</span><span
lang=EN-US style='font-family:Consolas'>m1()</span></p>

<p class=MsoNormal style='text-indent:31.5pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>new c1(&quot;qh&quot;, 30)</span><span
lang=EN-US style='font-family:Consolas'>.m1() </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>} </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>编译：</span><span lang=EN-US
style='font-family:Consolas'>fsc construct1.scala</span></p>

<p class=MsoNormal><span style='font-family:宋体'>运行：</span><span lang=EN-US
style='font-family:Consolas'>java construct1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：继承中的构造方法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class
c2(name:String, age:Int, female:Boolean=false) </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>extends</span> <span style='background:yellow'>c1(name,age)</span>
{</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; override
def toString = { name + &quot;,&quot; +&nbsp; age + &quot;,&quot; + female }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027558"></a><a
name="_Toc281660026"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.1.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>override</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>不同于</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>的使用</span><span
lang=EN-US style='font-family:Consolas'> @Override</span><span
style='font-family:宋体'>，或者直接使用相同名字覆盖父类方法。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; <span
style='background:yellow'>override</span> def toString = { name + &quot;,&quot;
+&nbsp; age + &quot;,&quot; + female }</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果是覆盖抽象方法，可以不用</span><span
lang=EN-US style='font-family:Consolas'>overriade</span><span style='font-family:
宋体'>关键字。</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027559"></a><a
name="_Toc281660027"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.1.4.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>object</span></u></a><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>单例对象</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>如：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>Java</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Scala</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>public class
  User {</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
  private String name;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
  private User(String name) { this.name=name; }</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
  public static User instance(String name) {</span></p>
  <p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
  style='font-family:Consolas'>return new User(name)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; }</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>object User
  {&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; var
  name:String = _</span></p>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>&nbsp; def apply(name:String){this.name=name;
  this}</span></p>
  <p class=MsoNormal align=left style='text-align:left'><span lang=EN-US
  style='font-family:Consolas'>&nbsp; override def toString = &quot;name:
  &quot; + name</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>调用：</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val u =
  User(&quot;qh&quot;) // &quot;name: qh&quot;</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027560"></a><a
name="_Toc281660028"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.1.5.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>静态方法</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>没有静态方法，类似静态方法的函数定义在</span><span lang=EN-US
style='font-family:Consolas'>object</span><span style='font-family:宋体'>中：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>object Stringx
{</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; def
left(s0:String, s:String) = ...</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span style='font-family:宋体'>直接调用</span><span lang=EN-US
style='font-family:Consolas'>Stringx.left(s0, s)</span><span style='font-family:
宋体'>，或者</span><span lang=EN-US style='font-family:Consolas'> Stringx left (s0,
s)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义在</span><span lang=EN-US
style='font-family:Consolas'>object</span><span style='font-family:宋体'>中的</span><span
lang=EN-US style='font-family:Consolas'>implicit</span><span style='font-family:
宋体'>方法也能被直接调用：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>--------- <u>ImportSub.scala</u></span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>object</span><span
lang=EN-US style='font-family:Consolas;color:black'> <span style='background:
silver'>ImportSub</span> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>def</span><span
lang=EN-US style='font-family:Consolas;color:black'> fac(n: </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>Int</span><span
lang=EN-US style='font-family:Consolas;color:black'>) = 1 to n reduceLeft (_ *
_)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>implicit</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#7F0055'>def</span><span lang=EN-US
style='font-family:Consolas;color:black'> foo(n: </span><span lang=EN-US
style='font-family:Consolas;color:#7F0055'>Int</span><span lang=EN-US
style='font-family:Consolas;color:black'>) = </span><span lang=EN-US
style='font-family:Consolas;color:#7F0055'>new</span><span lang=EN-US
style='font-family:Consolas;color:black'> { </span><span lang=EN-US
style='font-family:Consolas;color:#7F0055'>def</span><span lang=EN-US
style='font-family:Consolas;color:black'> ! = fac(n) }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:black'>}</span></p>

<p class=MsoNormal><a name="_case_class"></a><span lang=EN-US style='font-family:
Consolas'>--------- <u>ImportMain.scala</u></span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055;background:yellow'>import</span><span
lang=EN-US style='font-family:Consolas;color:black;background:yellow'>
ImportSub._</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>object</span><span
lang=EN-US style='font-family:Consolas;color:black'> ImportMain {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>def</span><span
lang=EN-US style='font-family:Consolas;color:black'> main(args : </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>Array</span><span
lang=EN-US style='font-family:Consolas;color:black'>[String]) : </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>Unit</span><span
lang=EN-US style='font-family:Consolas;color:black'> = {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; &nbsp;
println(<span style='background:yellow'>5!</span>) </span><span lang=EN-US
style='font-family:Consolas;color:#3F7F5F'>// </span><span style='font-family:
宋体;color:#3F7F5F'>调用</span><span lang=EN-US style='font-family:Consolas;
color:#3F7F5F'>ImportSub</span><span style='font-family:宋体;color:#3F7F5F'>中定义的</span><span
lang=EN-US style='font-family:Consolas;color:#3F7F5F'>implicit</span><span
style='font-family:宋体;color:#3F7F5F'>函数</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:black'>}</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027561"></a><a
name="_Toc281660029"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.1.6.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>case
class(</span></u></a><u><span style='font-size:14.0pt;line-height:173%;
font-family:"微软雅黑","sans-serif"'>条件类</span></u><u><span lang=EN-US
style='font-size:14.0pt;line-height:173%;font-family:Consolas'>)</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>例如：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>case class</span><span
lang=EN-US style='font-family:Consolas'> Person(name:String, age:Int)&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal><span style='font-family:宋体'>特殊之处：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>新建类实例不用</span><span lang=EN-US
style='font-family:Consolas'>new Person(..)</span><span style='font-family:
宋体'>，直接用</span><span lang=EN-US style='font-family:Consolas'>Person(&quot;qh&quot;,20)</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>自动定义好</span><span lang=EN-US
style='font-family:Consolas'>getXX</span><span style='font-family:宋体'>方法，</span><span
lang=EN-US style='font-family:Consolas'>Person(&quot;qh&quot;,20).name //
&quot;qh&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>提供默认的</span><span lang=EN-US
style='font-family:Consolas'>toString(), Person(&quot;qh&quot;,20) // &quot;Person(qh,20)&quot;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>结合类继承可以通过模式匹配进行分解</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>abstract class Person</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>case class Man(power:Int) extends Person</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>case class Woman(beauty:Int, from:String) extends
Person</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>val w1 = Woman(100,&quot;china&quot;) </span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>val w2 = w1.<span style='background:yellow'>copy</span>(from=&quot;usa&quot;)
// Woman(100,&quot;usa&quot;)</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>def f(t:Person) = t match { </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas;background:yellow'>case Man</span><span
lang=EN-US style='font-family:Consolas'>(x) =&gt; &quot;man's power:&quot; + x </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas;background:yellow'>case Woman</span><span
lang=EN-US style='font-family:Consolas'>(x,y) =&gt; y + &quot; beauty:&quot; +
x</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>} </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>f(Man(100)) // man's power:100</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>f(Woman(90, &quot;china&quot;)) // china beauty:90</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>注：基本类型直接可以用</span><span
lang=EN-US style='font-family:Consolas'><a href="#_match..case(switch)">math case</a></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：可变的类状态</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>case class C1(<span style='background:yellow'>var
s</span>: String, <span style='background:yellow'>var ops</span>: Int) {&nbsp; </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; def &gt;&gt;= (f: (String=&gt;String)) = {</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; s = f(s)&nbsp; // s</span><span
style='font-family:宋体'>改变</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; ops += 1&nbsp; // ops</span><span
style='font-family:宋体'>改变</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; this // </span><span
style='font-family:宋体'>返回自身，可以连续调用</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp; }&nbsp; </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>}&nbsp;&nbsp; </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>val C1(res, ops) = C1(&quot;ab&quot;, 0) &gt;&gt;=
(_ * 3) &gt;&gt;= (_ drop 3) </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>// res=&quot;ab&quot;-&gt;&quot;ababab&quot;-&gt;&quot;bab&quot;,
ops=0-&gt; 0+1+1-&gt;2</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：用</span><span
lang=EN-US style='font-family:Consolas'>case class</span><span
style='font-family:宋体'>代替</span><span lang=EN-US style='font-family:Consolas'>tuple</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val p =
(&quot;qh&quot;,20) // p._1 = &quot;qh&quot;, p._2 = 20</span><span
style='font-family:宋体'>；好处是简洁，但无意义</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>case class person</span><span lang=EN-US style='font-family:Consolas'>(name:String,
age:Int)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val p =
person(&quot;qh&quot;,20) // p.name = &quot;qh&quot;, p.age = 20; </span><span
style='font-family:宋体'>好处是有名字，自说明，可读性强</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>4</span><span style='font-family:宋体'>：用</span><span
lang=EN-US style='font-family:Consolas'>case class</span><span
style='font-family:宋体'>来描述元数据</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>xml</span><span
style='font-family:宋体'>的版本：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&lt;todo name = &quot;housework&quot;&gt;</span></p>

<p class=MsoNormal style='text-indent:31.5pt'><span lang=EN-US
style='font-family:Consolas'>&lt;item priority = &quot;high&quot;&gt;Clean the
hose&lt;/item&gt;</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&lt;item priority =
&quot;medium&quot;&gt;Wash the dishes&lt;/item&gt;</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&lt;item priority =
&quot;medium&quot;&gt;Buy more soap&lt;/item&gt;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&lt;/todo&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Lisp</span><span
style='font-family:宋体'>的版本：</span><a name="_Toc282027562"></a></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>(todo &quot;housework&quot;</span></p>

<p class=MsoNormal style='text-indent:31.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;(item (priority high) &quot;Clean the
house&quot;)</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;(item (priority medium)
&quot;Wash the dishes&quot;)</span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>&nbsp;(item (priority medium) &quot;Buy
more soap&quot;))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>的版本：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
class item(priority:String, s:String)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
class todo(name:String, items:List[item])</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; todo
(name=&quot;housework&quot;, </span></p>

<p class=MsoNormal style='text-indent:52.5pt'><span lang=EN-US
style='font-family:Consolas'>items=item(&quot;high&quot;,&quot;Clean the
house&quot;)::</span></p>

<p class=MsoNormal style='text-indent:89.25pt'><span lang=EN-US
style='font-family:Consolas'>item(&quot;medium&quot;,&quot;Wash the
dishes&quot;)::</span></p>

<p class=MsoNormal style='text-indent:89.25pt'><span lang=EN-US
style='font-family:Consolas'>item(&quot;medium&quot;,&quot;Buy more
soap&quot;)::Nil)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027563"></a><a
name="_Toc281660030"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.1.7.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>case
object(</span></u></a><u><span style='font-size:14.0pt;line-height:173%;
font-family:"微软雅黑","sans-serif"'>条件单例对象</span></u><u><span lang=EN-US
style='font-size:14.0pt;line-height:173%;font-family:Consolas'>)</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>比如定义一个标识类（而不是字符串）：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>case object
Start</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>case object
Stop</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027564"></a><a
name="_Toc281660031"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.1.8.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>枚举</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>中：</span></p>

<pre><span class=kw2><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp;&nbsp; enum</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'> fruits <span
class=br0>{</span> apple, banana, cherry <span class=br0>}</span></span></pre>

<p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>中，则是：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>sealed abstract class Fruits // sealed</span><span
style='font-family:宋体'>类似于</span><span lang=EN-US style='font-family:Consolas'>java</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>final</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>case object Apple extends Fruits</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>case object Banana extends Fruits</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>case object Cherry extends Fruits</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以是</span><span lang=EN-US
style='font-family:Consolas'> case class</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027565"></a><a
name="_Toc281660032"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.1.9.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>属性和</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>Bean</span></u></h3>

<p class=MsoNormal><a name="OLE_LINK12"></a><a name="OLE_LINK11"><span
style='font-family:宋体'>例子</span></a><span lang=EN-US style='font-family:Consolas'>1</span><span
style='font-family:宋体'>（直接定义和使用属性）：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class c {</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>var name = &quot;anonymous&quot; <span
style='color:#5B6E6E'>// var</span></span><span style='font-family:宋体;
color:#5B6E6E'>定义的是</span><span lang=EN-US style='font-family:Consolas;
color:#5B6E6E'>r/w</span><span style='font-family:宋体;color:#5B6E6E'>的属性</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val age = 20&nbsp; <span style='color:#5B6E6E'>//
val</span></span><span style='font-family:宋体;color:#5B6E6E'>定义的是只</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>r</span><span
style='font-family:宋体;color:#5B6E6E'>属性</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val o = new c</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>o.name =
&quot;qh&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>o.name <span
style='color:#5B6E6E'>// &quot;qh&quot;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>o.age = 10 <span
style='color:#5B6E6E'>// </span></span><span style='font-family:宋体;color:red'>错误</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>o.age <span
style='color:#5B6E6E'>// 20</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>o.</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>（定义</span><span
lang=EN-US style='font-family:Consolas'>get/set</span><span style='font-family:
宋体'>方法）：</span></p>

<p class=MsoNormal><a name="OLE_LINK14"></a><a name="OLE_LINK13"><span
lang=EN-US style='font-family:Consolas'>class c2 {</span></a></p>

<p class=MsoNormal style='text-indent:10.5pt'><a name="_Toc282027566"><span
lang=EN-US style='font-family:Consolas'>@reflect.BeanProperty var name =
&quot;anonymous&quot;</span></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val o2 = new
c2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>o2.name =
&quot;qh&quot; // </span><span style='font-family:宋体'>也可以直接存取</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>o2.name //
&quot;qh&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>o2.<span
style='background:yellow'>setName</span>(&quot;james&quot;) // </span><span
style='font-family:宋体'>增加了</span><span lang=EN-US style='font-family:Consolas'>set/get</span><span
style='font-family:宋体'>方法</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>o2.<span
style='background:yellow'>getName</span>() // &quot;james&quot;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027567"></a><a
name="_Toc281660033"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.1.10.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span style='font-size:14.0pt;line-height:173%;font-family:
"微软雅黑","sans-serif"'>反射</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>没有太特别的反射机制，使用</span><span lang=EN-US style='font-family:
Consolas'>java</span><span style='font-family:宋体'>的即可，不过</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>在</span><span lang=EN-US style='font-family:Consolas'>match..case</span><span
style='font-family:宋体'>中可以匹配类型：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; case
o:FooClass1 =&gt; ...</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相关还有</span><span lang=EN-US
style='font-family:Consolas'>isInstanceOf[T], asInstanceOf[T]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>（利用</span><span
lang=EN-US style='font-family:Consolas'>java</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>reflect</span><span
style='font-family:宋体'>）：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;hello&quot;.getClass.getMethods.map(_.getName).toList.sortWith(_&lt;_).mkString(&quot;,
&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>classOf</span><span lang=EN-US style='font-family:Consolas'>[String] //
</span><span style='font-family:宋体'>相当于</span><span lang=EN-US
style='font-family:Consolas'>java</span><span style='font-family:宋体'>中的</span><span
lang=EN-US style='font-family:Consolas'>String.class</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;aaa&quot;.<span
style='background:yellow'>isInstanceOf</span>[String] // true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&quot;aaa&quot;.<span
style='background:yellow'>asInstanceOf</span>[String] </span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132215"></a><a
name="_Toc282027568"></a><a name="_Toc281660034"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>4.2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>trait</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>超级接口</span></u></h2>

<p class=MsoNormal><i><span style='font-family:宋体'>注：</span></i><i><span
lang=EN-US style='font-family:Consolas'>trait &nbsp;[<span style='color:green'>treit</span>]
n.</span></i><i><span style='font-family:宋体'>特征，特点，特性</span></i></p>

<p class=MsoNormal><span style='font-family:宋体'>和</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>Interface</span><span style='font-family:
宋体'>类似，但可以定义实体方法，而非仅仅方法定义</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>trait</span><span
style='font-family:宋体'>可以看作有方法实现和字段的</span><span lang=EN-US style='font-family:
Consolas'>interface</span><span style='font-family:宋体'>；代表一类事物的特性；</span></p>

<p class=MsoNormal><span style='font-family:宋体'>比如</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>Tom</span><span style='font-family:宋体'>，可能是</span><span
lang=EN-US style='font-family:Consolas'>Engine </span><span style='font-family:
宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Son</span><span
style='font-family:宋体'>两个</span><span lang=EN-US style='font-family:Consolas'>trait</span><span
style='font-family:宋体'>的混合；</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>Sunny</span><span style='font-family:宋体'>可能</span><span
lang=EN-US style='font-family:Consolas'>Sales</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Son</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Father</span><span
style='font-family:宋体'>三个</span><span lang=EN-US style='font-family:Consolas'>trait</span><span
style='font-family:宋体'>的混合；</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span style='font-family:宋体'>当在运行时往</span><span
lang=EN-US style='font-family:Consolas'>Son</span><span style='font-family:
宋体'>里面增加方法或者字段的时候，</span><span lang=EN-US style='font-family:Consolas'>Tom</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Sunny</span><span
style='font-family:宋体'>都得到增加的特性。</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027569"></a><a
name="_Toc281660035"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.2.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>trait</span></u></a><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>使用</span></u></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>trait</span><span lang=EN-US style='font-family:Consolas'> Runnable {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; def
run(): Unit;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>只是用一个接口，就用</span><span
lang=EN-US style='font-family:Consolas'>extends:</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class c1 <span
style='background:yellow'>extends</span> Runnable {...}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>2</span><span
style='font-family:宋体'>个接口（或一个继承一个接口），用</span><span lang=EN-US
style='font-family:Consolas'>with</span><span style='font-family:宋体'>而不是</span><span
lang=EN-US style='font-family:Consolas'>implements</span><span
style='font-family:宋体'>如下：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class c1 <span
style='background:yellow'>extends</span> c0 <span style='background:yellow'>with</span>
Runnable {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; def
run(): Unit = {...}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>一个类可以组合多个</span><span
lang=EN-US style='font-family:Consolas'>trait</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class c1
extends t1 with t2 with t3 {...}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027570"></a><a
name="_Toc281660036"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.2.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>mixin</span></u></a></h3>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>class</span><span
lang=EN-US style='font-family:Consolas;color:black'> <span style='background:
silver'>Human</span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>class</span><span
lang=EN-US style='font-family:Consolas;color:black'> Child</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>trait</span><span
lang=EN-US style='font-family:Consolas;color:black'> Dad {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>private</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#7F0055'>var</span><span lang=EN-US
style='font-family:Consolas;color:black'> children:List[Child] = Nil</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>def</span><span
lang=EN-US style='font-family:Consolas;color:black'> add(child:Child) = child
:: children</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>}</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>class</span><span
lang=EN-US style='font-family:Consolas;color:black'> Man1(name:String) </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>extends</span><span
lang=EN-US style='font-family:Consolas;color:black'> <span style='background:
silver'>Human</span> </span><span lang=EN-US style='font-family:Consolas;
color:#7F0055'>with</span><span lang=EN-US style='font-family:Consolas;
color:black'> Dad </span><span lang=EN-US style='font-family:Consolas;
color:#3F7F5F'>// </span><span style='font-family:宋体;color:#3F7F5F'>静态</span><span
lang=EN-US style='font-family:Consolas;color:#3F7F5F'>mixin</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>class</span><span
lang=EN-US style='font-family:Consolas;color:black'> Man2(name:String) </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>extends</span><span
lang=EN-US style='font-family:Consolas;color:black'> <span style='background:
silver'>Human</span> // </span><span style='font-family:宋体;color:black'>先不具备</span><span
lang=EN-US style='font-family:Consolas;color:black'>Dad trait</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt;font-family:Consolas;color:black'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>val</span><span
lang=EN-US style='font-family:Consolas;color:black'> <span style='background:
silver'>m1</span> = </span><span lang=EN-US style='font-family:Consolas;
color:#7F0055'>new</span><span lang=EN-US style='font-family:Consolas;
color:black'> Man1(</span><span lang=EN-US style='font-family:Consolas;
color:#2A00FF'>&quot;qh&quot;</span><span lang=EN-US style='font-family:Consolas;
color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black;background:silver'>m1</span><span
lang=EN-US style='font-family:Consolas;color:black'>.add(</span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>new</span><span
lang=EN-US style='font-family:Consolas;color:black'> Child)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; &nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>val</span><span
lang=EN-US style='font-family:Consolas;color:black'> m2 = </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>new</span><span
lang=EN-US style='font-family:Consolas;color:black'> Man2(</span><span
lang=EN-US style='font-family:Consolas;color:#2A00FF'>&quot;</span><span
style='font-family:宋体;color:#2A00FF'>小孩</span><span lang=EN-US
style='font-family:Consolas;color:#2A00FF'>&quot;</span><span lang=EN-US
style='font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#3F7F5F'>//&nbsp; &nbsp;
m2.add(new Child) // </span><span style='font-family:宋体;color:#3F7F5F'>报错</span><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; &nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>val</span><span
lang=EN-US style='font-family:Consolas;color:black'> m2$ = </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>new</span><span
lang=EN-US style='font-family:Consolas;color:black'> Man2(</span><span
lang=EN-US style='font-family:Consolas;color:#2A00FF'>&quot;james&quot;</span><span
lang=EN-US style='font-family:Consolas;color:black'>) </span><span lang=EN-US
style='font-family:Consolas;color:#7F0055'>with</span><span lang=EN-US
style='font-family:Consolas;color:black'> Dad </span><span lang=EN-US
style='font-family:Consolas;color:#3F7F5F'>// </span><span style='font-family:
宋体;color:#3F7F5F'>动态</span><span lang=EN-US style='font-family:Consolas;
color:#3F7F5F'>mixin</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>m2$.add(</span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>new</span><span
lang=EN-US style='font-family:Consolas;color:black'> Child)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132216"></a><a
name="_Toc282027571"></a><a name="_Toc281660037"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>4.3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>协变和逆变</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>(co-|contra-)variance</span></u></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027572"></a><a
name="_Toc281660038"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.3.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>概念</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>使用“</span><span lang=EN-US
style='font-family:Consolas'>+</span><span style='font-family:宋体'>”“</span><span
lang=EN-US style='font-family:Consolas'>-</span><span style='font-family:宋体'>”差异标记</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Function[A, B]</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>Function[-A,
+B]</span><span style='font-family:宋体'>的区别图示：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><img
  border=0 width=341 height=244 src="Scala-Handbook.files/image008.jpg"></span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><img
  border=0 width=341 height=244 src="Scala-Handbook.files/image009.jpg"></span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Function[A,B]</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Function[-A,+B]</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>trait
  Queue[T] {}</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>非变</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>trait
  Queue[+T] {}</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='text-indent:5.25pt'><span style='font-family:宋体'>协变</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>如果</span><span lang=EN-US
  style='font-family:Consolas'>S extends A (S</span><span style='font-family:
  宋体'>为子类型，</span><span lang=EN-US style='font-family:Consolas'>A</span><span
  style='font-family:宋体'>为父类型</span><span lang=EN-US style='font-family:Consolas'>)</span><span
  style='font-family:宋体'>，</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>则</span><span lang=EN-US
  style='font-family:Consolas'>Queue[S]</span><span style='font-family:宋体'>为子类型，</span><span
  lang=EN-US style='font-family:Consolas'>Queue[A]</span><span
  style='font-family:宋体'>为父类型</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>S &lt;: A
  =&gt; Queue[S] &lt;: Queue[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>trait
  Queue[-T] {}</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>逆变</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>如果</span><span lang=EN-US
  style='font-family:Consolas'>S extends A (S</span><span style='font-family:
  宋体'>为子类型，</span><span lang=EN-US style='font-family:Consolas'>A</span><span
  style='font-family:宋体'>为父类型</span><span lang=EN-US style='font-family:Consolas'>)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>则</span><span lang=EN-US
  style='font-family:Consolas'>Queue[S]</span><span style='font-family:宋体'>为父类型，</span><span
  lang=EN-US style='font-family:Consolas'>Queue[A]</span><span
  style='font-family:宋体'>为子类型，和协变互逆</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>S &lt;: A
  =&gt; Queue[S] &gt;: Queue[A]</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-A</span><span
style='font-family:宋体'>是</span><span lang=EN-US style='font-family:Consolas'>A</span><span
style='font-family:宋体'>的子集，叫逆变</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>+B</span><span
style='font-family:宋体'>是</span><span lang=EN-US style='font-family:Consolas'>B</span><span
style='font-family:宋体'>的超集，叫协变</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027573"></a><a
name="_Toc281660039"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.3.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>类型上下界</span></u></a></h3>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td valign=top style='border:solid windowtext 1.0pt;border-left:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;%</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>foo[T &lt;%
  Ordered[T]](...)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>关系较弱：</span><span lang=EN-US
  style='font-family:Consolas'>T</span><span style='font-family:宋体'>能够隐式转换为</span><span
  lang=EN-US style='font-family:Consolas'>Ordered[T]</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;:</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>foo[T &lt;:
  Ordered[T]](...)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>关系较强：</span><span lang=EN-US
  style='font-family:Consolas'>T</span><span style='font-family:宋体'>必须是</span><span
  lang=EN-US style='font-family:Consolas'>Ordered[T]</span><span
  style='font-family:宋体'>的子类型，即</span><span lang=EN-US style='font-family:Consolas'>T</span><span
  style='font-family:宋体'>的类型范围小于</span><span lang=EN-US style='font-family:
  Consolas'>Ordered[T]</span><span style='font-family:宋体'>，</span><span
  lang=EN-US style='font-family:Consolas'>Ordered[T]</span><span
  style='font-family:宋体'>为上界</span></p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:solid windowtext 1.0pt;border-top:none;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&gt;:</span></p>
  </td>
  <td valign=top style='border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>foo[T &gt;: A](...)</span></p>
  <p class=MsoNormal><span style='font-family:宋体'>关系较强：</span><span lang=EN-US
  style='font-family:Consolas'>T</span><span style='font-family:宋体'>必须是</span><span
  lang=EN-US style='font-family:Consolas'>A</span><span style='font-family:
  宋体'>的父类型，即</span><span lang=EN-US style='font-family:Consolas'>Tde</span><span
  style='font-family:宋体'>类型范围大于</span><span lang=EN-US style='font-family:Consolas'>A</span><span
  style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>A</span><span
  style='font-family:宋体'>为下界</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027574"></a><a
name="_Toc281660040"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>4.3.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>协变、逆变结合上下界</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>trait c1[<span
  style='background:yellow'>+T</span>] { </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>def m[K <span style='background:yellow'>&gt;:</span>
  T](x:K) = x }</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>trait c1[<span
  style='background:yellow'>-T</span>] { </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>def m[K <span style='background:yellow'>&lt;:</span>
  T](x:K) = x }</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>object c2
  extends c1[<span style='background:yellow'>Int</span>]</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>c2.m(3) // 3</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>c2.m(3.0) //
  3.0</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>c2.m(&quot;abc&quot;)
  // &quot;abc&quot;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>object c2
  extends c1[<span style='background:yellow'>Int</span>]</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>c2.m(3) // 3</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>c2.m(3.0) //
  </span><span style='font-family:宋体'>报错</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>c2.m(&quot;abc&quot;)
  // </span><span style='font-family:宋体'>报错</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体;color:#1F497D;background:yellow'>非变</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>case class
T1[T](e:T)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
v1:T1[java.lang.Integer] = new T1(100)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
v2:T1[java.lang.Integer] = v1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>v2.e // 100</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
v3:T1[java.lang.Number] = v1 // </span><span style='font-family:宋体;color:#C00000'>报错</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#C00000'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体;background:yellow'>协变</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>case class
T1[+T](e:T)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val v1:T1[java.lang.Integer]
= new T1(100)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
v2:T1[java.lang.Integer] = v1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>v2.e // 100</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
v3:T1[java.lang.Number] = v1 // </span><span style='font-family:宋体;color:#0070C0'>合法</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>v3.e // 100</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
v4:T1[java.lang.Integer] = v3 //</span><span style='font-family:宋体;color:red'>非法</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体;background:yellow'>逆变</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class
T1[-T](e:T)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
v1:T1[java.lang.Number] = new T1(100)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
v2:T1[java.lang.Number] = v1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
v3:T1[java.lang.Integer] = v1 // </span><span style='font-family:宋体;color:#0070C0'>合法</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
v4:T1[java.lang.Number] = v3 // </span><span style='font-family:宋体;color:red'>非法</span></p>

<h1><a name="_Toc306132217"></a><a name="_Toc282027575"></a><a
name="_Toc281660041"><span lang=EN-US style='font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>util</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>包</span></u></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132218"></a><a
name="_Toc282027576"></a><a name="_Toc281660042"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>5.1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>架构</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://www.scala-lang.org/docu/files/collections-api/collections.html">http://www.scala-lang.org/docu/files/collections-api/collections.html</a></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
class=apple-style-span><span lang=EN-US style='font-size:13.5pt;font-family:
Consolas;color:black'>scala.collection.<span style='background:yellow'>immutable</span></span></span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=708 height=623
src="Scala-Handbook.files/image010.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal align=center style='text-align:center'><span
class=apple-style-span><span lang=EN-US style='font-size:13.5pt;font-family:
Consolas;color:black'>scala.collection.<span style='background:yellow'>mutable</span></span></span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US><img
border=0 width=708 height=479 src="Scala-Handbook.files/image011.jpg"></span></p>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US>&nbsp;</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>不可变（</span></b><b><span lang=EN-US style='font-family:
  Consolas'>collection.immutable._</span></b><b><span style='font-family:宋体'>）</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>可变（</span></b><b><span lang=EN-US style='font-family:
  Consolas'>collection.mutable._</span></b><b><span style='font-family:宋体'>）</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>Array</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>ArrayBuffer</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>List</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>ListBuffer</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>String</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>StringBuilder</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>/</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>LinkedList, DoubleLinkedList</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>List</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>MutableList</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>/</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>Queue</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>Array</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>ArraySeq</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>Stack</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>Stack</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>HashMap HashSet</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>HashMap HashSet</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
  style='font-family:Consolas'>ArrayStack</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132219"></a><a
name="_Toc282027577"></a><a name="_Toc281660043"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>5.2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>集合</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>Array,List,Tuple</span></u></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=65 valign=top style='width:48.7pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Array</span></p>
  </td>
  <td width=82 valign=top style='width:61.8pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>长度固定</span></p>
  </td>
  <td width=96 valign=top style='width:72.3pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>元素可变</span></p>
  </td>
  <td width=471 valign=top style='width:353.6pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>确定长度，后赋值</span><span
  lang=EN-US style='font-family:Consolas'>;</span></p>
  </td>
 </tr>
 <tr>
  <td width=65 valign=top style='width:48.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List</span></p>
  </td>
  <td width=82 valign=top style='width:61.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>长度固定</span></p>
  </td>
  <td width=96 valign=top style='width:72.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>元素不可变</span></p>
  </td>
  <td width=471 valign=top style='width:353.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=65 valign=top style='width:48.7pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Tuple</span></p>
  </td>
  <td width=82 valign=top style='width:61.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>长度固定</span></p>
  </td>
  <td width=96 valign=top style='width:72.3pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>元素不可变</span></p>
  </td>
  <td width=471 valign=top style='width:353.6pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>常用于有多个返回值的函数；或者多个变量的同时定义</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala 2.8</span><span
style='font-family:宋体'>中，</span><span lang=EN-US style='font-family:Consolas'>3</span><span
style='font-family:宋体'>者的元素都可以混合不同的类型（转化为</span><span lang=EN-US
style='font-family:Consolas'>Any</span><span style='font-family:宋体'>类型）；</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala 2.7</span><span
style='font-family:宋体'>中，</span><span lang=EN-US style='font-family:Consolas'>Array</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>List</span><span
style='font-family:宋体'>都不能混合类型，只有</span><span lang=EN-US style='font-family:
Consolas'>Tuple</span><span style='font-family:宋体'>可以；</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027578"></a><a
name="_Toc281660044"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.2.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>定义和初始化</span></u></a></h3>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.1.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>Array</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list1 =
new Array<span style='background:yellow'>[</span>String<span style='background:
yellow'>]</span>(0) // Array()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list2 =
new Array[String](3) // Array(null, null, null)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
list3:Array[String] = new Array(3) // // Array(null, null, null)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list1 =
Array(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;) // </span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>Array.apply(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义一个类型为</span><span lang=EN-US
style='font-family:Consolas'>Any</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>Array</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val aa = Array[Any](1,
2)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val aa: Array[Any]
= Array(1, 2)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val aa:
Array[_] = Array(1, 2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Array
(1,3,5,7,9,11)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以用</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Array[Int](1
to 11 by 2:_*)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Array</span><span
style='font-family:宋体'>对应的可变</span><span lang=EN-US style='font-family:Consolas'>ArrayBuffer</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val ab =
collection.mutable.<span style='background:yellow'>ArrayBuffer</span>[Int]()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>ab +=
(1,3,5,7)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>ab ++=
List(9,11) // ArrayBuffer(1, 3, 5, 7, 9, 11)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>ab toArray // Array
(1, 3, 5, 7, 9, 11)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>ab clear //
ArrayBuffer()</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.1.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>List</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list:List<span
style='background:yellow'>[</span>Int<span style='background:yellow'>]</span> =
List(1,3,4,5,6) // </span><span style='font-family:宋体'>或者</span><span
lang=EN-US style='font-family:Consolas'> List(1 to 6:_*)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list1 =
List(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;) // </span><span
style='font-family:宋体'>或者</span><span lang=EN-US style='font-family:Consolas'>
List('a' to 'd':_*) map (_.toString)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>元素合并进</span><span lang=EN-US
style='font-family:Consolas'>List</span><span style='font-family:宋体'>用</span><span
lang=EN-US style='font-family:Consolas;background:yellow'>::</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list2 =
&quot;a&quot;::&quot;b&quot;::&quot;c&quot;::Nil // Nil</span><span
style='font-family:宋体'>是必须的</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list3 =
&quot;begin&quot; :: list2 // list2</span><span style='font-family:宋体'>不变，只能加在头，不能加在尾</span></p>

<p class=MsoNormal><span style='font-family:宋体'>多个</span><span lang=EN-US
style='font-family:Consolas'>List</span><span style='font-family:宋体'>合并用</span><span
lang=EN-US style='font-family:Consolas;background:yellow'>++</span><span
style='font-family:宋体'>，也可以用</span><span lang=EN-US style='font-family:Consolas;
background:yellow'>:::</span><span lang=EN-US style='font-family:Consolas'>(</span><span
style='font-family:宋体'>不如</span><span lang=EN-US style='font-family:Consolas'>++)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list4 =
list2 <span style='background:yellow'>++</span> &quot;end&quot; <span
style='background:yellow'>++</span> Nil</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list4 =
list2 <span style='background:yellow'>:::</span> &quot;end&quot; :: Nil // </span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>
list2 ::: List(&quot;end&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>当</span><span lang=EN-US
style='font-family:Consolas'> import java.util._ </span><span style='font-family:
宋体'>之后会产生冲突，需要指明包</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>scala.List</span><span lang=EN-US style='font-family:Consolas'>(1,2,3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>ListBuffer</span><span
style='font-family:宋体'>是可变的：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val lb =
scala.collection.mutable.ListBuffer(1,2,3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>lb.append(4)
// ListBuffer(1, 2, 3, 4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>建议定义方式：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val head::body
= List(4,&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;) </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// head: Any =
4</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// body:
List[Any] = List(a, b, c, d)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val a::b::c =
List(1,2,3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// a: Int = 1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// b: Int = 2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// c:
List[Int] = List(3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义固定长度的</span><span lang=EN-US
style='font-family:Consolas'>List</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List.fill(10)(2)
<span style='color:#5B6E6E'>// List(2, 2, 2, 2, 2, 2, 2, 2, 2, 2)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Array.fill(10)(2)<span
style='color:#5B6E6E'> // Array(2, 2, 2, 2, 2, 2, 2, 2, 2, 2)</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>又如：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>List.fill(10)(scala.util.Random.nextPrintableChar)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>// List(?, =, ^, L, p, &lt;, \, 4,
0, !)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>List.fill(10)(scala.util.Random.nextInt(101))</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>// List(80, 45, 26, 75, 24, 72, 96,
88, 86, 15)</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List</span><span
style='font-family:宋体'>对应的可变</span><span lang=EN-US style='font-family:Consolas'>ListBuffer</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val lb = collection.mutable.<span
style='background:yellow'>ListBuffer</span>[Int]()</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>lb += (1,3,5,7)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>lb ++= List(9,11) // ListBuffer(1, 3, 5, 7, 9, 11)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>lb.toList // List(1, 3, 5, 7, 9, 11)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>lb.clear // ListBuffer()</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.1.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>Vector</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala2.8</span><span
style='font-family:宋体'>为了提高</span><span lang=EN-US style='font-family:Consolas'>list</span><span
style='font-family:宋体'>的随机存取效率而引入的新集合类型（而</span><span lang=EN-US
style='font-family:Consolas'>list</span><span style='font-family:宋体'>存取前部的元素快，越往后越慢）。</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val v = Vector.empty</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val v2 = 0 <span style='background:yellow'>+:</span>
v <span style='background:yellow'>:+</span> 10 <span style='background:yellow'>:+</span>
20 // Vector(0, 10, 20), Vector </span><span style='font-family:宋体'>那一边始终有</span><span
lang=EN-US style='font-family:Consolas'>&quot;:&quot;</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>v2(1) // 10</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>v2 <span style='background:yellow'>updated</span>
(1,100) // Vector(0, 100, 20)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Seq</span><span
style='font-family:宋体'>的缺省实现是</span><span lang=EN-US style='font-family:Consolas'>List</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>Seq(1,2,3) // List(1, 2, 3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>IndexSeq</span><span
style='font-family:宋体'>的缺省实现是</span><span lang=EN-US style='font-family:Consolas'>Vector:</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>IndexSeq(1,2,3) // Vector(1, 2, 3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.1.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>Tuple</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val t1 =
(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var t2 =
(&quot;a&quot;, 123, 3.14, new Date())</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val (a,b,c) =
(2,4,6)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>最简单的</span><span lang=EN-US
style='font-family:Consolas'>Tuple</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1-&gt;&quot;hello
world&quot;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>和下面的写法是等价的：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(1,
&quot;hello world&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.1.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>Range</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Range(0, 5) //
(0,1,2,3,4)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>等同于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>0 until 5</span></p>

<p class=MsoNormal><span style='font-family:宋体'>等同于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>0 to 4</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>两个</span><span lang=EN-US
style='font-family:Consolas'>Range</span><span style='font-family:宋体'>相加：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>('0' to '9')
++ ('A' to 'Z') // (0,1,..,9,A,B,...,Z)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Range</span><span
style='font-family:宋体'>和序列转换：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>1 to 5 toList</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当与：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>List(1 to 5:_*)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>Vector(1 to 5: _*) // Vector(1,2,3,4,5)</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.1.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>Stream</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Stream</span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>lazy
List</span><span style='font-family:宋体'>，避免在中间过程中生成不必要的集合。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>定义生成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val st = 1 <span
style='background:yellow'>#::</span> 2 <span style='background:yellow'>#::</span>
3 <span style='background:yellow'>#::</span> Stream.empty // Stream(1, ?)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span><span lang=EN-US
style='font-family:Consolas'>fib</span><span style='font-family:宋体'>数列的</span><span
lang=EN-US style='font-family:Consolas'>Stream</span><span style='font-family:
宋体'>版本简单易懂</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def fib(a:
Int, b: Int): Stream[Int] = a <span style='background:yellow'>#::</span> fib(b,&nbsp;
a+b)</span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-family:Consolas;color:#0000E5'>val</span></span><span
class=apple-style-span><span lang=EN-US style='font-family:Consolas;color:black'>
fibs = fib(1, 1).<span style='background:yellow'>take</span>(7).toList // List(1,
1, 2, 3, 5, 8, 13)</span></span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-family:Consolas;color:black'>fib</span></span><span
class=apple-style-span><span style='font-family:宋体;color:black'>数列的前后项比值趋于黄金分割：</span></span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-family:Consolas;color:black'>def fn(n:Int) = fib(1,1)(n)</span></span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-family:Consolas;color:black'>1 to 10 map (n=&gt; 1.0*fn(n)/fn(n+1))
// Vector(0.5, 0.666, ..., 0.618)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>Range</span><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(1,50000000).filter (_ % 13==0)(1) // 26, </span><span style='font-family:宋体'>但很慢，需要大量内存</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>Stream.range</span><span lang=EN-US style='font-family:Consolas'>(1,50000000).filter(_%13==0)(1)
// 26</span><span style='font-family:宋体'>，很快，只计算最终结果需要的内容</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注意：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>第一个版本在</span><span lang=EN-US
style='font-family:Consolas'>filter</span><span style='font-family:宋体'>后生成一个中间</span><span
lang=EN-US style='font-family:Consolas'>collection</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>size=50000000/13;</span><span
style='font-family:宋体'>而后者不生成此中间</span><span lang=EN-US style='font-family:
Consolas'>collection</span><span style='font-family:宋体'>，只计算到</span><span
lang=EN-US style='font-family:Consolas'>26</span><span style='font-family:宋体'>即可。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(1 to
100).map(i=&gt; i*3+7).filter(i=&gt; (i%10)==0).sum // map</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>filter</span><span
style='font-family:宋体'>生成两个中间</span><span lang=EN-US style='font-family:Consolas'>collection</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(1 to 100).toStream.map(i=&gt;
i*3+7).filter(i=&gt; (i%10)==0).sum</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.1.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>Stack Queue</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>先进后出的堆栈：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val s = collection.immutable.Stack()</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val s2 = s.<span style='background:yellow'>push</span>(10,20,30)
// Stack(30, 20, 10)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>s2.<span style='background:yellow'>head</span> //
30</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>s2.<span style='background:yellow'>pop</span>.pop
// Stack(10)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对应的可变</span><span lang=EN-US
style='font-family:Consolas'>Stack</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val ms = collection.mutable.Stack()</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>ms.push(1,3,5).push(7) // Stack(7, 5, 3, 1)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>ms.head // 7</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>ms.pop // 7, ms = Stack(5,3,1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>先进先出的队列：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val q = collection.immutable.Queue() // </span><span
style='font-family:宋体'>也可指定类型</span><span lang=EN-US style='font-family:Consolas'>
Queue[Int]()</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val q2 = q.<span style='background:yellow'>enqueue</span>(0).enqueue(List(10,20,30))
// Queue(0, 10, 20, 30)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>q2.<span style='background:yellow'>dequeue</span>._1
// 0</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>q2.dequeue._2 // Queue(10, 20, 30)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对应的可变</span><span lang=EN-US
style='font-family:Consolas'>Queue</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val mq = collection.mutable.Queue[Int]()</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mq <span style='background:yellow'>+=</span>
(1,3,5)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mq <span style='background:yellow'>++=</span>
List(7,9) // Queue(1, 3, 5, 7, 9)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mq dequeue // 1, mq= Queue(3, 5, 7, 9)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mq clear // Queue()</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027579"></a><a
name="_Toc281660045"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.2.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>使用</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>(map,
flatMap, filter, exists</span></u><u><span style='font-size:14.0pt;line-height:
173%;font-family:"微软雅黑","sans-serif"'>等</span></u><u><span lang=EN-US
style='font-size:14.0pt;line-height:173%;font-family:Consolas'>)</span></u></h3>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.1<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>map</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体'>类型可以混合：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>import
java.util.<span style='background:yellow'>_</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list3 =
Array(&quot;a&quot;, 123, 3.14, new Date())<a name="_Toc282027580"><br>
<br>
</a></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).map(s<span
style='background:yellow'>=&gt;</span> s.toUpperCase()) // </span><span
style='font-family:宋体'>方式</span><span lang=EN-US style='font-family:Consolas'>1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;).map(<span
style='background:yellow'>_</span>.toUpperCase()) &nbsp;&nbsp;&nbsp;&nbsp;// </span><span
style='font-family:宋体'>方式</span><span lang=EN-US style='font-family:Consolas'>2,
</span><span style='font-family:宋体'>类似于</span><span lang=EN-US
style='font-family:Consolas'>Groovy</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>it</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// = List(A,
B, C)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.2<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>filter filterNot</span></u></h4>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>List(1,2,3,4,5).<span
style='background:yellow'>filter</span>(_%2==0) // List(2, 4)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以写成</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for
(x&lt;-List(1,2,3,4,5) if x%2==0) yield x<a name="_Toc282027581"></a></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>List(1,2,3,4,5).<span
style='background:yellow'>filterNot</span>(_%2==0) // List(1, 3, 5)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.3<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>partition span splitAt groupBy</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>注：</span><span lang=EN-US
style='font-family:Consolas'>val (a,b) = List(1,2,3,4,5).<span
style='background:yellow'>partition</span>(_%2==0) // (List(2,4), List(1,3,5))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可把</span><span lang=EN-US
style='font-family:Consolas'>Collection</span><span style='font-family:宋体'>分成：满足条件的一组，其他的另一组。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>和</span><span lang=EN-US
style='font-family:Consolas'>partition</span><span style='font-family:宋体'>相似的是</span><span
lang=EN-US style='font-family:Consolas;background:yellow'>span</span><span
style='font-family:宋体'>，但有不同：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#8E3E00'>List</span><span
lang=EN-US style='font-family:Consolas;color:black'>(1,9,2,4,5).</span><span
lang=EN-US style='font-family:Consolas;color:#003E85'>span</span><span
lang=EN-US style='font-family:Consolas;color:black'>(_</span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>&lt;</span><span lang=EN-US
style='font-family:Consolas;color:black'>3)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
(List(1),List(9, 2, 4, 5))</span><span style='font-family:宋体;color:#5B6E6E'>，碰到不符合就结束</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#8E3E00'>List</span><span
lang=EN-US style='font-family:Consolas;color:black'>(1,9,2,4,5).</span><span
lang=EN-US style='font-family:Consolas;color:#003E85'>partition</span><span
lang=EN-US style='font-family:Consolas;color:black'>(_</span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>&lt;</span><span lang=EN-US
style='font-family:Consolas;color:black'>3) </span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>// (List(1, 2),List(9, 4, 5))</span><span
style='font-family:宋体;color:#5B6E6E'>，扫描所有</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>List(1,3,5,7,9) <span style='background:
yellow'>splitAt</span> 2 <span style='color:#5B6E6E'>// (List(1, 3),List(5, 7,
9))</span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>List(1,3,5,7,9) <span style='background:
yellow'>groupBy</span> (5&lt;) <span style='color:#5B6E6E'>// Map((true,List(7,
9)), (false,List(1, 3, 5)))</span></span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.4<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>foreach</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>打印</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Array(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;).foreach(<span
style='background:yellow'>printf</span>(&quot;[%s].&quot;,<span
style='background:yellow'>_</span>))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// [a].[b].[c].[d].</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.5<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>exists</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体'>集合中是否存在符合条件的元素</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,2,3,4,5).exists(_%3==0)
// true</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.6<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>find</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>返回序列中符合条件的第一个。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：查找整数的第一个因子（最小因子、质数）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def fac1(n:Int)
= if (n&gt;= -1 &amp;&amp; n&lt;=1) n else (2 to n.abs) find (n%_==0) get</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.7<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>sorted sortWith sortBy</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>例子（排序）：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,3,2,0,5,9,7).<span
style='background:yellow'>sorted</span> // &nbsp;<span style='color:#5B6E6E'>List(0,
1, 2, 3, 5, 7, 9)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,3,2,0,5,9,7).<span
style='background:yellow'>sortWith</span>(_&gt;_) <span style='color:#5B6E6E'>//
List(9, 7, 5, 3, 2, 1, 0)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(&quot;abc&quot;,
&quot;cb&quot;, &quot;defe&quot;, &quot;z&quot;).sortBy(_.size) // <span
style='color:#5B6E6E'>List(z, cb, abc, defe)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List((1,'c'),
(1,'b'), (2,'a'))</span><span lang=EN-US> </span><span lang=EN-US
style='font-family:Consolas'>.<span style='background:yellow'>sortBy</span>(_._2)
<span style='color:#5B6E6E'>// List((2,a), (1,b), (1,c))</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.8<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>distinct</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>例子：（去除</span><span lang=EN-US
style='font-family:Consolas'>List</span><span style='font-family:宋体'>中的重复元素）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def uniq[T](l:List[T])
= l.<span style='background:yellow'>distinct</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>uniq(List(1,2,3,2,1))
// List(1,2,3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.9<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>flatMap</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>flatMap</span><span
style='font-family:宋体'>的作用：把多层次的数据结构“平面化”，并去除空元素（如</span><span lang=EN-US
style='font-family:Consolas'>None</span><span style='font-family:宋体'>）。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可用于：得到</span><span lang=EN-US
style='font-family:Consolas'>xml</span><span style='font-family:宋体'>等树形结构的所有节点名称，去除</span><span
lang=EN-US style='font-family:Consolas'>None</span><span style='font-family:
宋体'>等</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1a</span><span style='font-family:宋体'>：（两个</span><span
lang=EN-US style='font-family:Consolas'>List</span><span style='font-family:
宋体'>做乘法）</span><a name="_Toc282027582"></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>List(1,2,3)
* List(10,20,30) = List(<u>10, 20, 30</u>, <u>20, 40, 60</u>, <u>30, 60, 90</u>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val (a,b) =
(List(1,2,3), List(10,20,30))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a <span
style='background:yellow'>flatMap</span> (i=&gt; b map (j=&gt; i*j))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>等同于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for (i&lt;-a; i&lt;-b)
yield i*j // </span><span style='font-family:宋体'>这个写法更清晰</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1b</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果不用</span><span lang=EN-US
style='font-family:Consolas'>flatMap</span><span style='font-family:宋体'>而是用</span><span
lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
宋体'>，结果就是：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a <span
style='background:yellow'>map</span> (i=&gt; b map (j=&gt; i*j)) <span
style='color:#5B6E6E'>// List(List(<u>10, 20, 30</u>), List(<u>20, 40, 60</u>),
List(<u>30, 60, 90</u>))</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>等同于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for (i&lt;-a)
yield { for (j&lt;-b) yield i*j } // </span><span style='font-family:宋体'>不如上面的清晰</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(&quot;abc&quot;,&quot;def&quot;)
flatMap (_.toList) // List(a, b, c, d, e, f)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>而</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(&quot;abc&quot;,&quot;def&quot;)
map (_.toList) // List(List(a, b, c), List(d, e, f))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：</span><span
lang=EN-US style='font-family:Consolas'>flatMap</span><span style='font-family:
宋体'>结合</span><span lang=EN-US style='font-family:Consolas'>Option</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
toint(s:String) = </span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>try { Some(Integer.parseInt(s)) } catch { case
e:Exception =&gt; None }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(&quot;123&quot;,
&quot;12a&quot;, &quot;45&quot;) flatMap toint // List(123, 45)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(&quot;123&quot;,
&quot;12a&quot;, &quot;45&quot;) map toint // List(Some(123), None, Some(45))</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.10<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>indices</span></u><u><span style='font-size:10.5pt;
line-height:156%;font-family:"微软雅黑","sans-serif"'>，</span></u><u><span
lang=EN-US style='font-size:10.5pt;line-height:156%;font-family:Consolas'>zipWithIndex</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>得到</span><span lang=EN-US
style='font-family:Consolas'>indices</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val a =
List(100,200,300)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a <span
style='background:yellow'>indices</span> // (0,1,2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a <span
style='background:yellow'>zipWithIndex</span> // ((100,0), (200,1), (300,2))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(a indices)
zip a // ((0,100), (1,200), (2,300))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>截取一部分</span><span lang=EN-US
style='font-family:Consolas'>,</span><span style='font-family:宋体'>相当于</span><span
lang=EN-US style='font-family:Consolas'>String</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>substring</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(100,200,300,400,500)
<span style='background:yellow'>slice</span> (2,4) // (300,400), </span><span
style='font-family:宋体'>取</span><span lang=EN-US style='font-family:Consolas'>l(2),
l(3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.11<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>take drop splitAt</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,3,5,7)
take 2 // List(1,3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,3,5,7)
drop 2 // List(5,7)</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.12<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>count</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>满足条件的元素数目：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例如</span><span lang=EN-US
style='font-family:Consolas'>1000</span><span style='font-family:宋体'>内质数的个数：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def
prime(n:Int) = if (n&lt;2) false else 2 to math.sqrt(n).toInt forall (n%_!=0)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>1 to 1000 <span
style='background:yellow'>count</span> prime&nbsp; // 168</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.13<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>updated patch</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>对于</span><span lang=EN-US
style='font-family:Consolas'>immutable</span><span style='font-family:宋体'>的数据结构，使用</span><span
lang=EN-US style='font-family:Consolas'>updated</span><span style='font-family:
宋体'>返回一个新的</span><span lang=EN-US style='font-family:Consolas'>copy</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val v1 = List(1,2,3,<span style='background:yellow'>4</span>)</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>v1.updated(3,10) // List(1, 2, 3, <span
style='background:yellow'>10</span>), v1</span><span style='font-family:宋体'>还是</span><span
lang=EN-US style='font-family:Consolas'>List(1, 2, 3, <span style='background:
yellow'>4</span>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对于可变的数据结构，直接更改：</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val mseq = scala.collection.<span
style='background:yellow'>mutable</span>.ArraySeq(1, 2, 4, <span
style='background:yellow'>6</span>)</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>mseq(3) = 10 // mseq = ArraySeq(1, 2, 4, <span
style='background:yellow'>10</span>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>批量替换，返回新的</span><span
lang=EN-US style='font-family:Consolas'>copy</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val v1 = List(<span style='background:lime'>1,2,3</span>,4,5)</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val v2 = List(<span style='background:yellow'>10,20,30</span>)</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>v1 patch (0, v2, 3) // List(<span
style='background:yellow'>10,20,30</span>,4,5), </span><span style='font-family:
宋体'>但</span><span lang=EN-US style='font-family:Consolas'>v1,v2</span><span
style='font-family:宋体'>不变</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.14<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>reverse reverseMap</span></u></h4>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>1 to 5 <span style='background:yellow'>reverse</span>
// Range(5, 4, 3, 2, 1)</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&quot;james&quot;.reverse.reverse //
&quot;james&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>reverseMap</span><span
style='font-family:宋体'>就是</span><span lang=EN-US style='font-family:Consolas'>revese
+ map</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; 1 to 5 <span
style='background:yellow'>reverseMap</span> (10*) // Vector(50, 40, 30, 20, 10)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; (1 to 5
reverse) map (10*)</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.15<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-size:10.5pt;line-height:156%;
font-family:Consolas'>contains startsWith endWith</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; 1 to 5 <span
style='background:yellow'>contains</span> 3 // true, </span><span
style='font-family:宋体'>后一个参数是</span><span lang=EN-US style='font-family:Consolas'>1</span><span
style='font-family:宋体'>个元素</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; 1 to 5 <span
style='background:yellow'>containsSlice</span> (2 to 4) // true, </span><span
style='font-family:宋体'>后一个参数是</span><span lang=EN-US style='font-family:Consolas'>1</span><span
style='font-family:宋体'>个集合</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(1 to 5) <span style='background:yellow'>startsWith</span>
(1 to 3) // true </span><span style='font-family:宋体'>后一个参数是</span><span
lang=EN-US style='font-family:Consolas'>1</span><span style='font-family:宋体'>个集合</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(1 to 5) <span style='background:yellow'>endsWith</span>
(4 to 5)</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>(List(1,2,3) <span style='background:yellow'>corresponds</span>
List(4,5,6)) (<span style='background:yellow'>_&lt;_</span>) <span
style='color:#5B6E6E'>// true</span></span><span style='font-family:宋体;
color:#5B6E6E'>，长度相同且每个对应项符合判断条件</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.16<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span style='font-size:10.5pt;line-height:156%;font-family:
"微软雅黑","sans-serif"'>集合运算</span></u></h4>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,2,3,4) <span
style='background:yellow'>intersect</span> List(4,3,6) // </span><span
style='font-family:宋体'>交集</span><span lang=EN-US style='font-family:Consolas'>
= List(3, 4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,2,3,4) <span
style='background:yellow'>diff</span> List(4,3,6) // A-B = List(1, 2)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,2,3,4) <span
style='background:yellow'>union</span> List(4,3,6) // A+B = List(1, 2, 3, 4, 4,
3, 6)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体'>相当于</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>List(1,2,3,4) <span
style='background:yellow'>++</span> List(4,3,6) // A+B = List(1, 2, 3, 4, 4, 3,
6)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.17<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span style='font-size:10.5pt;line-height:156%;font-family:
"微软雅黑","sans-serif"'>殊途同归</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>例子：得到</span><span
style='font-family:Consolas'> <span lang=EN-US>(4, 16, 36, 64, 100)</span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>写法</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(1 to 10) <span
style='background:yellow'>filter</span> (_%2==0) <span style='background:yellow'>map</span>
(x=&gt;x*x) </span></p>

<p class=MsoNormal><span style='font-family:宋体'>写法</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
yellow'>for</span><span lang=EN-US style='font-family:Consolas'>(x&lt;-1 to 10 <span
style='background:yellow'>if</span> x%2==0) <span style='background:yellow'>yield</span>
x*x</span></p>

<p class=MsoNormal><span style='font-family:宋体'>写法</span><span lang=EN-US
style='font-family:Consolas'>3</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(1 to 10) <span
style='background:yellow'>collect</span> { <span style='background:yellow'>case</span>
x <span style='background:yellow'>if</span> x%2==0 =&gt; x*x }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h4 style='margin-left:.65pt'><span lang=EN-US style='font-size:12.0pt;
line-height:156%;font-family:Consolas'>5.2.2.18<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span style='font-size:10.5pt;line-height:156%;font-family:
"微软雅黑","sans-serif"'>其他</span></u></h4>

<p class=MsoNormal><span style='font-family:宋体'>对其他语言去重感兴趣，可看看：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://rosettacode.org/wiki/Remove_duplicate_elements">http://rosettacode.org/wiki/Remove_duplicate_elements</a>&nbsp;
</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027583"></a><a
name="_Toc281660046"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.2.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>数组元素定位</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>统一使用</span><span lang=EN-US
style='font-family:Consolas'>()</span><span style='font-family:宋体'>，而不是</span><span
lang=EN-US style='font-family:Consolas'>[]</span><span style='font-family:宋体'>，</span><span
lang=EN-US style='font-family:Consolas'>()</span><span style='font-family:宋体'>就是</span><span
lang=EN-US style='font-family:Consolas'>apply()</span><span style='font-family:
宋体'>的简写，</span><span lang=EN-US style='font-family:Consolas'>a(i)===a.apply(i)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// Array</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val a =
Array(100,200,300) // a(0)=100, a(1)=200, a(3)=300</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a(0) // 100, </span><span
style='font-family:宋体'>相当于</span><span lang=EN-US style='font-family:Consolas'>a.apply(0)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a(0)=10 // Array(10,
200, 300)</span><span style='font-family:宋体'>，相当于</span><span lang=EN-US
style='font-family:Consolas'>a.update(0, 10)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// List</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val list =
List(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>//
list(0)==&quot;a&quot;, list(1)==&quot;b&quot;, list(2)==&quot;c&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// Tuple</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>val t1 =
(&quot;a&quot;,&quot;b&quot;,&quot;c&quot;) // t1._1=&quot;a&quot;,
t1._2=&quot;b&quot;, t1._3=&quot;c&quot;</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027584"></a><a
name="_Toc281660047"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.2.4.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>view</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>在某类型的集合对象上调用</span><span
lang=EN-US style='font-family:Consolas'>view</span><span style='font-family:
宋体'>方法，得到相同类型的集合，但所有的</span><span lang=EN-US style='font-family:Consolas'>transform</span><span
style='font-family:宋体'>函数都是</span><span lang=EN-US style='font-family:Consolas'>lazy</span><span
style='font-family:宋体'>的，从该</span><span lang=EN-US style='font-family:Consolas'>view</span><span
style='font-family:宋体'>返回调用</span><span lang=EN-US style='font-family:Consolas'>force</span><span
style='font-family:宋体'>方法。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>对比：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val v = Vector(1 to 10:_*)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>v map (1+) map (2*) // <span
class=apple-style-span><span style='color:#660099'>Vector</span><span
style='color:black'>(4,&nbsp;6,&nbsp;8,&nbsp;10,&nbsp;12,&nbsp;14,&nbsp;16,&nbsp;18,&nbsp;20,&nbsp;22)</span></span></span></p>

<p class=MsoNormal><span style='font-family:宋体'>以上过程得生成</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>个新的</span><span
lang=EN-US style='font-family:Consolas'>Vector</span><span style='font-family:
宋体'>，而：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val v = Vector(1 to 10:_*)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>v.view map (1+) map (2*) force </span></p>

<p class=MsoNormal><span style='font-family:宋体'>只在过程中生成</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>个新的</span><span
lang=EN-US style='font-family:Consolas'>Vector</span><span style='font-family:
宋体'>，相当于：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>v map (x=&gt;2*(1+x))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>又如：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>((1 to 1000000000) view).take(3).force //
Vector(1,2,3)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>Stream</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>Stream.range(1,1000000000).take(3).force // &nbsp;Stream(1,
2, 3)</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027585"></a><a
name="_Toc281660048"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.2.5.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>和</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>Java</span></u><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>集合间的转换（</span></u><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>scalaj</span></u><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>）</span></u></h3>

<p class=MsoNormal style='margin-left:42.5pt;text-indent:-42.5pt'><span
style='font-family:宋体'>方案一：</span><span lang=DE style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>的</span><span lang=DE style='font-family:Consolas'>List&lt;T&gt;</span><span
style='font-family:宋体'>很容易通过</span><span lang=DE style='font-family:Consolas'>List.toArray</span><span
style='font-family:宋体'>转换到</span><span lang=DE style='font-family:Consolas'>Array</span><span
style='font-family:宋体'>，和</span><span lang=DE style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>中的</span><span lang=DE style='font-family:Consolas'>Array</span><span
style='font-family:宋体'>是等价的，可使用</span><span lang=DE style='font-family:Consolas'>map</span><span
style='font-family:宋体'>、</span><span lang=DE style='font-family:Consolas'>filter</span><span
style='font-family:宋体'>等。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>方案二：使用第三方的</span><span lang=DE
style='font-family:Consolas'>scalaj</span><span style='font-family:宋体'>扩展包（需自行下载设置</span><span
lang=DE style='font-family:Consolas'>classpath</span><span style='font-family:
宋体'>）</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=DE
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>val a1 = new java.util.ArrayList[Int]</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>a1.add(100);
a1.add(200); a1.add(300)</span></p>

<p class=MsoNormal><a name="OLE_LINK4"></a><a name="OLE_LINK3"><span lang=DE
style='font-family:Consolas;color:#5B6E6E'>// </span></a><span
style='font-family:宋体;color:#5B6E6E'>自行转换</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>val a2 = a1.<span
style='background:yellow'>toArray</span></span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>a2 map (e=&gt;e.<span
style='background:yellow'>asInstanceOf</span>[Int]) map(2*) filter (300&gt;)</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas;color:#5B6E6E'>//</span><span
style='font-family:宋体;color:#5B6E6E'>采用</span><span lang=DE style='font-family:
Consolas;color:#5B6E6E'>scalaj(</span><span lang=EN-US style='font-family:Consolas;
color:#5B6E6E'><a href="http://github.com/scalaj/scalaj-collection"><span
lang=DE style='color:#5B6E6E'>http://github.com/scalaj/scalaj-collection</span></a></span><span
lang=DE style='font-family:Consolas;color:#5B6E6E'>)</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>import
scalaj.collection.Imports._</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>val a3 = a1.<span
style='background:yellow'>asScala</span></span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas;color:#5B6E6E'>//
scala-&gt;java</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>List(1, 2,
3).asJava</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>Map(1 -&gt;
&quot;a&quot;, 2 -&gt; &quot;b&quot;, 3 -&gt; &quot;c&quot;).asJava</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas'>Set(1, 2,
3).asJava</span></p>

<p class=MsoNormal><span lang=DE style='font-family:Consolas;color:#5B6E6E'>// scalaj</span><span
style='font-family:宋体;color:#5B6E6E'>还可以在</span><span lang=DE style='font-family:
Consolas;color:#5B6E6E'>java</span><span style='font-family:宋体;color:#5B6E6E'>的</span><span
lang=DE style='font-family:Consolas;color:#5B6E6E'>collection</span><span
style='font-family:宋体;color:#5B6E6E'>上使用</span><span lang=DE style='font-family:
Consolas;color:#5B6E6E'>foreach (</span><span style='font-family:宋体;color:#5B6E6E'>目前除</span><span
lang=DE style='font-family:Consolas;color:#5B6E6E'>foreach</span><span
style='font-family:宋体;color:#5B6E6E'>外</span><span style='font-family:宋体;
color:#5B6E6E'>，</span><span style='font-family:宋体;color:#5B6E6E'>还不支持</span><span
lang=DE style='font-family:Consolas;color:#5B6E6E'>filter</span><span
style='font-family:宋体;color:#5B6E6E'>、</span><span lang=DE style='font-family:
Consolas;color:#5B6E6E'>map)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a1.foreach(println)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scalaj</span><span
style='font-family:宋体'>的简易文档如下：</span></p>

<p class=MsoNormal><code><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:#5B6E6E'>// <a name="_Toc282027586">Java to Scala</a></span></code></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=224 valign=top style='width:167.75pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='text-align:center;line-height:16.8pt'><code><b><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#C0504D'>Java</span></b></code><code><b><span
  style='font-size:10.0pt;color:#C0504D'>类型</span></b></code></pre></td>
  <td width=400 valign=top style='width:300.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='text-align:center;
  line-height:16.8pt'><code><b><span style='font-size:10.0pt;color:#C0504D'>转换方法</span></b></code></pre></td>
 </tr>
 <tr>
  <td width=224 valign=top style='width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>java.lang.Comparable[A] </span></code></pre></td>
  <td width=400 valign=top style='width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asScala: scala.math.Ordered[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=224 valign=top style='width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>java.util.Comparator[A] </span></code></pre></td>
  <td width=400 valign=top style='width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asScala: scala.math.Ordering[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=224 valign=top style='width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>java.util.Enumeration[A]</span></code></pre></td>
  <td width=400 valign=top style='width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asScala: scala.collection.Iterator[A]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>#foreach(A =&gt; Unit): Unit</span></code></pre></td>
 </tr>
 <tr>
  <td width=224 valign=top style='width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>java.util.Iterator[A] </span></code></pre></td>
  <td width=400 valign=top style='width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asScala: scala.collection.Iterator[A]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>#foreach(A =&gt; Unit): Unit</span></code></pre></td>
 </tr>
 <tr>
  <td width=224 valign=top style='width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>java.lang.Iterable[A] </span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:#5B6E6E'>&nbsp;</span></code></pre></td>
  <td width=400 valign=top style='width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asScala: scala.collection.Iterable[A]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>#foreach(A =&gt; Unit): Unit</span></code></pre></td>
 </tr>
 <tr>
  <td width=224 valign=top style='width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>java.util.List[A]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:#5B6E6E'>&nbsp;</span></code></pre></td>
  <td width=400 valign=top style='width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asScala: scala.collection.Seq[A]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>#asScalaMutable: scala.collection.mutable.Seq[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=224 valign=top style='width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>java.util.Set[A] </span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>&nbsp;</span></code></pre></td>
  <td width=400 valign=top style='width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asScala: scala.collection.Set[A]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>#asScalaMutable: scala.collection.mutable.Set[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=224 valign=top style='width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>java.util.Map[A, B] </span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>&nbsp;</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>&nbsp;</span></code></pre></td>
  <td width=400 valign=top style='width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asScala: scala.collection.Map[A, B]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>#asScalaMutable: scala.collection.mutable.Map[A, B]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>#foreach(((A, B)) =&gt; Unit): Unit</span></code></pre></td>
 </tr>
 <tr>
  <td width=224 valign=top style='width:167.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>java.util.Dictionary[A, B] </span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>&nbsp;</span></code></pre></td>
  <td width=400 valign=top style='width:300.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asScala: scala.collection.mutable.Map[A, B]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>#foreach(((A, B)) =&gt; Unit): Unit</span></code></pre></td>
 </tr>
</table>

<pre style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#5B6E6E'>// Scala to Java</span></code></pre>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='text-align:center;line-height:16.8pt'><code><b><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#C0504D'>Scala</span></b></code><code><b><span
  style='font-size:10.0pt;color:#C0504D'>类型</span></b></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='text-align:center;
  line-height:16.8pt'><code><b><span style='font-size:10.0pt;color:#C0504D'>转换方法</span></b></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.math.Ordered[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.util.Comparable[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.math.Ordering[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.util.Comparator[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.collection.Iterator[A]&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:#5B6E6E'>&nbsp;</span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.util.Iterator[A]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>#asJavaEnumeration: java.util.Enumeration[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.collection.Iterable[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.lang.Iterable[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.collection.Seq[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; </span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.util.List[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.collection.mutable.Seq[A] &nbsp;&nbsp; </span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.util.List[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.collection.mutable.Buffer[A]</span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.util.List[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.collection.Set[A]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; </span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.util.Set[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.collection.mutable.Set[A] &nbsp;&nbsp; </span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.util.Set[A]</span></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.collection.Map[A, B]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.util.Map[A, B]</span></code></pre></td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:206.75pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>scala.collection.mutable.Map[A, B]</span></code></pre></td>
  <td width=356 valign=top style='width:267.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'><pre style='line-height:16.8pt'><code><span
  lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>#asJava: java.util.Map[A, B]</span></code></pre><pre
  style='line-height:16.8pt'><code><span lang=EN-US style='font-size:10.0pt;
  font-family:Consolas;color:black'>#asJavaDictionary: java.util.Dictionary[A, B]</span></code></pre></td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132220"></a><a
name="_Toc282027587"></a><a name="_Toc281660049"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>5.3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Map</span></u></a></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027588"></a><a
name="_Toc281660050"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.3.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>定义</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>Map</span></u></h3>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>var m = Map[Int,
Int]()</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>var m =
Map(1-&gt;100, 2-&gt;200)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>var m =
Map((1,100), (2,200))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>相加：</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>val m =
Map(1-&gt;100, 2-&gt;200) <span style='background:yellow'>++</span>
Map(3-&gt;300)&nbsp; <span style='color:#5B6E6E'>//</span></span><span lang=DA
style='color:#5B6E6E'> </span><span lang=DA style='font-family:Consolas;
color:#5B6E6E'>Map((1,100), (2,200), (3,300))</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>可以用</span><span lang=DA
style='font-family:Consolas'>zip()</span><span style='font-family:宋体'>生成</span><span
lang=DA style='font-family:Consolas'>Map</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=DA style='font-family:Consolas'>List(1,2,3).<span
style='background:yellow'>zip</span>(List(100,200,300)).toMap <span
style='color:#5B6E6E'>// Map((1,100), (2,200), (3,300))</span></span></p>

<p class=MsoNormal><i><span style='font-family:宋体'>注解：</span></i><i><span
lang=DA style='font-family:Consolas'>zip</span></i><i><span style='font-family:
宋体'>有“拉拉链”的意思，就是把两排链扣完全对应扣合在一起，非常形象。</span></i></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027589"></a><a
name="_Toc281660051"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.3.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>不可变</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>Map(</span></u><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>缺省</span></u><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>)</span></u></h3>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>定义：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val m2 = <span
style='background:yellow'>Map</span>()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val m3 = <span
style='background:yellow'>Map</span>(1-&gt;100, 2-&gt;200, 3-&gt;300)&nbsp; </span></p>

<p class=MsoNormal><span style='font-family:宋体'>指定类型：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val m1:Map<span
style='background:yellow'>[Int,String]</span> =
Map(1-&gt;&quot;a&quot;,2-&gt;&quot;b&quot;)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>注：如果</span><span lang=EN-US
style='font-family:Consolas'>import java.util._</span><span style='font-family:
宋体'>后发生冲突，可指明：</span><span lang=EN-US style='font-family:Consolas;background:
yellow'>scala.collection.immutable.Map</span></p>

<p class=MsoNormal><span style='font-family:宋体'>保持循序的</span><span lang=EN-US
style='font-family:Consolas'>Map</span><span style='font-family:宋体'>可以使用：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>collection.immutable.ListMap</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>读取元素：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// m3<span
style='background:yellow'>(1)</span>=100, m3(2)=200, m3(3)=300</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// m3.<span
style='background:yellow'>get(1)</span>=Some(100), m3.get(3)=Some(300),
m3.get(4)=None</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val v = m3.get(4).<span style='background:yellow'>getOrElse</span>(-1)
// -1</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者简化成：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m3.<span
style='background:yellow'>getOrElse</span>(4, -1) // -1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>增加、删除、更新：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Map</span><span
style='font-family:宋体'>本身不可改变，即使定义为</span><span lang=EN-US style='font-family:
Consolas'>var</span><span style='font-family:宋体'>，</span><span lang=EN-US
style='font-family:Consolas'>update</span><span style='font-family:宋体'>也是返回一个新的不可变</span><span
lang=EN-US style='font-family:Consolas'>Map</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>var m4 = Map(1-&gt;100)</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val m5 = <span style='background:yellow'>m4(1)=1000</span>
// m4</span><span style='font-family:宋体'>还是</span><span lang=EN-US
style='font-family:Consolas'> 1-&gt;100, m5</span><span style='font-family:
宋体'>：</span><span lang=EN-US style='font-family:Consolas'>1-&gt;1000</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>m4 += (2-&gt;200) // m4</span><span
style='font-family:宋体'>指向新的</span><span lang=EN-US style='font-family:Consolas'>(1-&gt;100,2-&gt;200),
(1-&gt;100)</span><span style='font-family:宋体'>应该被回收</span></p>

<p class=MsoNormal><span style='font-family:宋体'>另一种更新方式：</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>m4.<span style='background:yellow'>updated</span>(1,1000)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>增加多个元素：</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>Map(1-&gt;100,2-&gt;200) <span style='background:
yellow'>+</span> (3-&gt;300, 4-&gt;400) // Map((1,100), (2,200), (3,300),
(4,400))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>删除元素：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
Map(1-&gt;100,2-&gt;200,3-&gt;300) <span style='background:yellow'>-</span>
(2,3) // Map((1,100))</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>Map(1-&gt;100,2-&gt;200,3-&gt;300) <span
style='background:yellow'>--</span> List(2,3) // Map((1,100))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>合并</span><span lang=EN-US
style='font-family:Consolas'>Mpa</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Map(1-&gt;100,2-&gt;200)
<span style='background:yellow'>++</span> Map(3-&gt;300) // Map((1,100),
(2,200), (3,300))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027590"></a><a
name="_Toc281660052"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.3.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>可变</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>Map</span></u></h3>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val map = <span style='background:yellow'>scala.collection.mutable.Map</span>[String,
Any]()</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>map(&quot;k1&quot;)=100&nbsp;&nbsp;&nbsp;&nbsp; //
</span><span style='font-family:宋体'>增加元素，方法</span><span lang=EN-US
style='font-family:Consolas'>1</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>map += &quot;k2&quot;-&gt;&quot;v2&quot; // </span><span
style='font-family:宋体'>增加元素，方法</span><span lang=EN-US style='font-family:Consolas'>2</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>// map(&quot;k2&quot;)==&quot;v2&quot;,
map.get(&quot;k2&quot;)==Some(&quot;v2&quot;), map.get(&quot;k3&quot;)==None</span></p>

<p class=MsoNormal><span style='font-family:宋体'>有则取之，无则加之：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val mm =
collection.mutable.Map(1-&gt;100,2-&gt;200,3-&gt;300)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm <span style='background:yellow'>getOrElseUpdate</span>
(3,-1) // 300, mm</span><span style='font-family:宋体'>不变</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm <span style='background:yellow'>getOrElseUpdate</span>
(4,-1) // 300, mm=</span><span lang=EN-US> </span><span lang=EN-US
style='font-family:Consolas'>Map((2,200), <b><u>(4,-1)</u></b>, (1,100),
(3,300))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>删除：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val mm =
collection.mutable.Map(1-&gt;100,2-&gt;200,3-&gt;300)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm <span style='background:yellow'>-=</span> 1 // Map((2,200),
(3,300))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm <span style='background:yellow'>-=</span> (2,3)
// Map()</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm <span style='background:yellow'>+=</span>
(1-&gt;100,2-&gt;200,3-&gt;300) // Map((2,200), (1,100), (3,300))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm <span style='background:yellow'>--=</span> List(1,2)
// Map((3,300))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm <span style='background:yellow'>remove</span> 1
// Some(300), mm=Map()</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm <span style='background:yellow'>+=</span>
(1-&gt;100,2-&gt;200,3-&gt;300)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm.<span style='background:yellow'>retain</span>((x,y)
=&gt; x&gt;1) // mm = Map((2,200), (3,300))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm.<span style='background:yellow'>clearn</span>
// mm = Map()</span></p>

<p class=MsoNormal><span style='font-family:宋体'>改变</span><span lang=EN-US
style='font-family:Consolas'>value</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm <span style='background:yellow'>transform</span>
((x,y)=&gt; 0) // mm = Map((2,0), (1,0), (3,0))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm transform ((x,y)=&gt; x*10) // Map((2,20),
(1,10), (3,30))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>mm transform ((x,y)=&gt; y+3) // Map((2,23), (1,13),
(3,33))</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027591"></a><a
name="_Toc281660053"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.3.4.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>Java</span></u></a><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>的</span></u><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>HashMap</span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>使用</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>HashMap</span><span style='font-family:
宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
m1:java.util.Map[Int, String] = new java.util.HashMap</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027592"></a><a
name="_Toc281660054"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.3.5.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>读取所有元素</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>上面说过，</span><span lang=EN-US
style='font-family:Consolas'>Map(1-&gt;100,2-&gt;200,3-&gt;300) </span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>
Map((1,100),(2,200),(3,300))</span><span style='font-family:宋体'>的写法是一样的，可见</span><span
lang=EN-US style='font-family:Consolas'>Map</span><span style='font-family:
宋体'>中的每一个</span><span lang=EN-US style='font-family:Consolas'>entry</span><span
style='font-family:宋体'>都是一个</span><span lang=EN-US style='font-family:Consolas'>Tuple</span><span
style='font-family:宋体'>，所以：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>for(e&lt;-map) println(e._1 + &quot;: &quot; +
e._2)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>map.foreach(e=&gt;println(e._1 + &quot;: &quot; +
e._2))</span></p>

<p class=MsoNormal><span style='font-family:宋体'>或者（<b><span style='color:red'>最好</span></b>）</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>for (<span style='background:yellow'>(k,v)</span>&lt;-map)
println(k + &quot;: &quot; + v)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也可以进行</span><span lang=EN-US
style='font-family:Consolas'>filter</span><span style='font-family:宋体'>、</span><span
lang=EN-US style='font-family:Consolas'>map</span><span style='font-family:
宋体'>操作：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map <span
style='background:yellow'>filter</span> (e=&gt;e._1&gt;1) <span
style='color:#5B6E6E'>// Map((2,200), (3,300))</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map <span
style='background:yellow'>filterKeys</span> (_&gt;1) <span style='color:#5B6E6E'>//
Map((2,200), (3,300))</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map.map(e=&gt;(e._1*10,
e._2)) // Map(10-&gt;100,20-&gt;200,30-&gt;300)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map <span
style='background:yellow'>map</span> (e=&gt;e._2) <span style='color:#5B6E6E'>//
List(100, 200, 300)</span></span></p>

<p class=MsoNormal><span style='font-family:宋体;color:#5B6E6E'>相当于：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>map.values.toList</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>按照</span><span lang=EN-US
style='font-family:Consolas'>key</span><span style='font-family:宋体'>来取对应的</span><span
lang=EN-US style='font-family:Consolas'>value</span><span style='font-family:
宋体'>值：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>2 to 100
flatMap map.get // (200,300) </span><span style='font-family:宋体'>只有</span><span
lang=EN-US style='font-family:Consolas'>key=2</span><span style='font-family:
宋体'>，</span><span lang=EN-US style='font-family:Consolas'>3</span><span
style='font-family:宋体'>有值</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027593"></a><a
name="_Toc281660055"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.3.6.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>多值</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>Map</span></u><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'> </span></u></h3>

<p class=MsoNormal><span style='font-family:宋体'>结合</span><span lang=EN-US
style='font-family:Consolas'>Map</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>Tuple</span><span style='font-family:
宋体'>，很容易实现一个</span><span lang=EN-US style='font-family:Consolas'>key</span><span
style='font-family:宋体'>对应的</span><span lang=EN-US style='font-family:Consolas'>value</span><span
style='font-family:宋体'>是组合值的数据结构：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val m =
Map(1-&gt;(&quot;james&quot;,20), 2-&gt;(&quot;qh&quot;,30),
3-&gt;(&quot;qiu&quot;, 40))</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m(2)._1 //
&quot;qh&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>m(2)._2 // 30</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>for( <span
style='background:yellow'>(k,(v1,v2))</span> &lt;- m ) printf(&quot;%d: (%s,%d)\n&quot;,
k, v1, v2)</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132221"></a><a
name="_Toc282027594"></a><a name="_Toc281660056"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>5.4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Set</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>注：</span><span lang=EN-US
style='font-family:Consolas'>BitSet</span><span style='font-family:宋体'>（</span><span
lang=EN-US style='font-family:Consolas'>collection.immutable.BitSet</span><span
style='font-family:宋体'>）</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>Set</span><span style='font-family:
宋体'>类似，但操作更快</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027595"></a><a
name="_Toc281660057"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.4.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>定义</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var s =
Set(1,2,3,4,5) // scala.collection.immutable.Set</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>var s2 =
Set[Int]() // scala.collection.immutable.Set[Int]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体'>增加元素：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>s2 += 1&nbsp;
// Set(1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>s2 += 3&nbsp;
// Set(1,3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>s2 += (2,4) //
Set(1,3,2,4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体'>删除元素</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3) - 2
// Set(1,3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3) -
(1,2) // Set(3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3).empty
// Set() </span><span style='font-family:宋体'>全部删除</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体'>判断是否包含某元素</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>s(3) // true, </span><span
style='font-family:宋体'>集合中有元素</span><span lang=EN-US style='font-family:Consolas'>3</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>s(0) // false,
</span><span style='font-family:宋体'>集合中没有元素</span><span lang=EN-US
style='font-family:Consolas'>0</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
style='font-family:宋体'>合并</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3) <span
style='background:yellow'>++</span> Set(2,3,4) // Set(1, 2, 3, 4)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3) <span
style='background:yellow'>--</span> Set(2,3,4) // Set(1)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027596"></a><a
name="_Toc281660058"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.4.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>逻辑运算</span></u></a></h3>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;border-collapse:collapse;border:none'>
 <tr>
  <td width="13%" valign=top style='width:13.12%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>运算</span></b></p>
  </td>
  <td width="86%" valign=top style='width:86.88%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>例子</span></b></p>
  </td>
 </tr>
 <tr>
  <td width="13%" valign=top style='width:13.12%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>交集</span></p>
  </td>
  <td width="86%" valign=top style='width:86.88%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3) <span
  style='background:yellow'>&amp;</span> Set(2,3,4) // Set(2,3)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3) <span
  style='background:yellow'>intersect</span> Set(2,3,4) </span></p>
  </td>
 </tr>
 <tr>
  <td width="13%" valign=top style='width:13.12%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>并集</span></p>
  </td>
  <td width="86%" valign=top style='width:86.88%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3) <span
  style='background:yellow'>|</span> Set(2,3,4) // Set(1,2,3,4)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3) <span
  style='background:yellow'>union</span> Set(2,3,4) // Set(1,2,3,4)</span></p>
  </td>
 </tr>
 <tr>
  <td width="13%" valign=top style='width:13.12%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>差集</span></p>
  </td>
  <td width="86%" valign=top style='width:86.88%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3) <span
  style='background:yellow'>&amp;~</span> Set(2,3,4) // Set(1)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Set(1,2,3) <span
  style='background:yellow'>diff</span> Set(2&nbsp; ,3,4) // Set(1)</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027597"></a><a
name="_Toc281660059"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>5.4.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>可变</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>BitSet</span></u></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val bs =
collection.mutable.BitSet()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>bs += (1,3,5)
// BitSet(1, 5, 3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>bs ++=
List(7,9) // BitSet(1, 9, 7, 5, 3)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>bs.clear //
BitSet()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132222"></a><a
name="_Toc282027598"></a><a name="_Toc281660060"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>5.5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Iterator</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Iterator</span><span
style='font-family:宋体'>不属于集合类型，只是逐个存取集合中元素的方法：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val it = Iterator(1,3,5,7) // Iterator[Int] =
non-empty iterator</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>it foreach println // 1 3 5 7</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>it foreach println // </span><span
style='font-family:宋体'>无输出</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>三种常用的使用模式：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// <a
name="_Toc282027599">1</a></span><span style='font-family:宋体'>、使用</span><span
lang=EN-US style='font-family:Consolas'>while</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val it = Iterator(1,3,5,7)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>while(it.<span style='background:yellow'>hasNext</span>)
println(it.<span style='background:yellow'>next</span>)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// 2</span><span
style='font-family:宋体'>、使用</span><span lang=EN-US style='font-family:Consolas'>for</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas;background:yellow'>for</span><span lang=EN-US
style='font-family:Consolas'>(e&lt;- Iterator(1,3,5,7)) println(e)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// <a
name="_Toc282027600">3</a></span><span style='font-family:宋体'>、使用</span><span
lang=EN-US style='font-family:Consolas'>foreach</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>Iterator(1,3,5,7) <span style='background:yellow'>foreach</span>
println</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Iterator</span><span
style='font-family:宋体'>也可以使用</span><span lang=EN-US style='font-family:Consolas'>map</span><span
style='font-family:宋体'>的方法：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>Iterator(1,3,5,7) map (10*) toList // List(10, 30,
50, 70)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>Iterator(1,3,5,7) dropWhile (5&gt;) toList //
List(5,7)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>由于</span><span lang=EN-US
style='font-family:Consolas'>Iterator</span><span style='font-family:宋体'>用一次后就消失了，如果要用两次，需要</span><span
lang=EN-US style='font-family:Consolas'>toList</span><span style='font-family:
宋体'>或者使用</span><span lang=EN-US style='font-family:Consolas'>duplicate</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val (a,b) = Iterator(1,3,5,7) duplicate // a = b =
non-empty iterator</span></p>

<p class=MsoNormal><span style='font-family:宋体'>又如：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val it = Iterator(1,3,5,7)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>val (a,b) = it duplicate</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>// </span><span style='font-family:宋体'>在使用</span><span
lang=EN-US style='font-family:Consolas'>a</span><span style='font-family:宋体'>、</span><span
lang=EN-US style='font-family:Consolas'>b</span><span style='font-family:宋体'>前，不能使用</span><span
lang=EN-US style='font-family:Consolas'>it</span><span style='font-family:宋体'>，否则</span><span
lang=EN-US style='font-family:Consolas'>a</span><span style='font-family:宋体'>、</span><span
lang=EN-US style='font-family:Consolas'>b</span><span style='font-family:宋体'>都不可用了。</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>a toList // List(1,3,5,7)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>b toList // List(1,3,5,7)</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>// </span><span style='font-family:宋体'>此时</span><span
lang=EN-US style='font-family:Consolas'>it</span><span style='font-family:宋体'>也不可用了</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132223"><span
lang=EN-US style='font-size:10.5pt;line-height:173%;font-family:Consolas'>5.6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Paralllel collection</span></u></a></h2>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>Scala 2.9+</span><span style='font-family:宋体'>引入：</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span lang=EN-US
style='font-family:Consolas'>(1 to 10).<span style='background:yellow'>par</span>
foreach println</span></p>

<p class=MsoNormal style='text-indent:21.2pt'><span style='font-family:宋体'>多运行几次，注意打印顺序会有不同</span></p>

<h1><a name="_Toc306132224"></a><a name="_Toc282027601"></a><a
name="_Toc281660061"><span lang=EN-US style='font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal'>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>io</span></u></a></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132225"></a><a
name="_Toc282027602"></a><a name="_Toc281660062"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>6.1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>文件</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>I/O</span></u></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027603"></a><a
name="_Toc281660063"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>6.1.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>读文件</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala</span><span
style='font-family:宋体'>特有的是</span><span lang=EN-US style='font-family:Consolas'>scala.io.Source</span><span
style='font-family:宋体'>，例如：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>import scala.io._</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:Consolas'>Source.fromFile(&quot;cn.scala&quot;,&quot;utf8&quot;).mkString</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>逐行读文件内容：</span><a
name="_Toc282027604"></a></p>

<p class=MsoNormal style='text-indent:21.0pt'><u><span lang=EN-US
style='font-family:Consolas'>Source.fromFile</span></u><span lang=EN-US
style='font-family:Consolas'>(<u>new java.io.File(&quot;cn.scala&quot;)</u>).getLines().foreach(println)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027605"></a><a
name="_Toc281660064"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>6.1.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>写文件</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>直接调用</span><span lang=EN-US
style='font-family:Consolas'>java</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>io</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>import java.io._, java.nio.channels._, java.nio._</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>// </span><span style='font-family:宋体'>写文件</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val f = new
FileOutputStream(&quot;o.txt&quot;).getChannel</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>f write ByteBuffer.wrap(&quot;a little bit long
...&quot;.getBytes)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>f close</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>var out = new
java.io.FileWriter(&quot;./out.txt&quot;) // <span style='color:#5B6E6E'>FileWriter(&quot;./out.txt&quot;,
<span style='background:yellow'>true</span>) </span></span><span
style='font-family:宋体;color:#5B6E6E'>为追加模式</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>out.write(&quot;hello\n&quot;)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>out close</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027606"></a><a
name="_Toc281660065"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>6.1.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>复制文件</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>直接调用</span><span lang=EN-US
style='font-family:Consolas'>java</span><span style='font-family:宋体'>的</span><span
lang=EN-US style='font-family:Consolas'>io</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val in&nbsp; = new
FileInputStream(&quot;in&quot;).getChannel</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val out = new
FileOutputStream(&quot;out&quot;).getChannel</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>in transferTo (0, in.size, out)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027607"></a><a
name="_Toc281660066"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>6.1.4.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>全目录扫描</span></u></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>递归使用</span><span lang=EN-US
style='font-family:Consolas'>listFiles</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>import</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>java</span><span lang=EN-US
style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>io</span><span lang=EN-US
style='font-family:Consolas;color:black'>.File</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>class</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>Dir</span><span lang=EN-US
style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>file</span><span lang=EN-US
style='font-family:Consolas;color:black'>:</span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>File</span><span lang=EN-US
style='font-family:Consolas;color:black'>) {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:gray'>// </span><span
style='font-family:宋体;color:gray'>目录则返回所有</span><span lang=EN-US
style='font-family:Consolas;color:gray'>1</span><span style='font-family:宋体;
color:gray'>级子文件；文件则返回</span><span lang=EN-US style='font-family:Consolas;
color:gray'>empty</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
text-autospace:none'><span lang=EN-US style='font-family:Consolas;color:#4C4C4C'>def</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>child</span><span lang=EN-US
style='font-family:Consolas;color:black'> = </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>new</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>Iterable</span><span lang=EN-US
style='font-family:Consolas;color:black'>[</span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>File</span><span lang=EN-US
style='font-family:Consolas;color:black'>] {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
text-autospace:none'><span lang=EN-US style='font-family:Consolas;color:black'>&nbsp;
</span><span lang=EN-US style='font-family:Consolas;color:gray'>// Iterable</span><span
style='font-family:宋体;color:gray'>接口必须实现</span><span lang=EN-US
style='font-family:Consolas;color:gray'>elements</span><span style='font-family:
宋体;color:gray'>方法</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-family:Consolas;color:#4C4C4C'>def</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>elements</span><span lang=EN-US
style='font-family:Consolas;color:black'> = </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>if</span><span lang=EN-US
style='font-family:Consolas;color:black'> (</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>file</span><span lang=EN-US
style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>isDirectory</span><span lang=EN-US
style='font-family:Consolas;color:black'>) </span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>file</span><span lang=EN-US
style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>listFiles</span><span lang=EN-US
style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>elements</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>else</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>Iterator</span><span lang=EN-US
style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>empty</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
}&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:gray'>// </span><span
style='font-family:宋体;color:gray'>递归扫描，组成列表</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>def</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>scan</span><span lang=EN-US
style='font-family:Consolas;color:black'>:</span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>Iterable</span><span lang=EN-US
style='font-family:Consolas;color:black'>[</span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>File</span><span lang=EN-US
style='font-family:Consolas;color:black'>] = {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-family:Consolas;color:#8E3E00'>Seq</span><span
lang=EN-US style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>singleton</span><span lang=EN-US
style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>file</span><span lang=EN-US
style='font-family:Consolas;color:black'>) </span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>++</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>child</span><span lang=EN-US
style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>flatMap</span><span lang=EN-US
style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>i</span><span lang=EN-US
style='font-family:Consolas;color:black'>=&gt; </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>new</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>Dir</span><span lang=EN-US
style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>i</span><span lang=EN-US
style='font-family:Consolas;color:black'>).</span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>scan</span><span lang=EN-US
style='font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:gray'>// </span><span
style='font-family:宋体;color:gray'>定义一个隐式类型转换</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>implicit</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>def</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>foo</span><span lang=EN-US
style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>f</span><span lang=EN-US
style='font-family:Consolas;color:black'>:</span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>File</span><span lang=EN-US
style='font-family:Consolas;color:black'>) = </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>new</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>Dir</span><span lang=EN-US
style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>f</span><span lang=EN-US
style='font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>val</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>file</span><span lang=EN-US
style='font-family:Consolas;color:black'> = </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>new</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>File</span><span lang=EN-US
style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:green'>&quot;.&quot;</span><span lang=EN-US
style='font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#8E3E00'>Console</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>println</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>new</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>File</span><span lang=EN-US
style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:green'>&quot;.&quot;</span><span lang=EN-US
style='font-family:Consolas;color:black'>).</span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>getCanonicalPath</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>val</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>list</span><span lang=EN-US
style='font-family:Consolas;color:black'> = </span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>file</span><span lang=EN-US
style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>scan</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:gray'>// File</span><span style='font-family:
宋体;color:gray'>对象隐形转换成</span><span lang=EN-US style='font-family:Consolas;
color:gray'>Dir</span><span style='font-family:宋体;color:gray'>对象</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>for</span><span
lang=EN-US style='font-family:Consolas;color:black'> (</span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>f</span><span lang=EN-US
style='font-family:Consolas;color:black'>&lt;-</span><u><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>lis</span></u><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>t</span><span lang=EN-US
style='font-family:Consolas;color:black'>) </span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>println</span><span lang=EN-US
style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>f</span><span lang=EN-US
style='font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132226"></a><a
name="_Toc282027608"></a><a name="_Toc281660067"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>6.2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>网络</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>I/O</span></u></h2>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'><a
href="http://scala-lang.org"><span class=kw1>import</span></a> java.<span
class=me1>net</span>.<span class=br0>{</span>URL, URLEncoder<span class=br0>}</span><br>
<a href="http://scala-lang.org"><span class=kw1>import</span></a> scala.<span
class=me1>io</span>.<span class=me1>Source</span>.<span class=me1><span
style='background:yellow'>fromURL</span></span></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;background:yellow'>fromURL</span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>(new URL(&quot;<u>http://qh.appspot.com</u>&quot;)).mkString</span></pre>

<p class=MsoNormal><span style='font-family:宋体'>或者指定编码：</span></p>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;background:
yellow'>fromURL</span><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas'>(new URL(&quot;<u>http://qh.appspot.com</u>&quot;))(<span
style='background:yellow'>io.Codec.UTF8</span>).mkString</span></pre>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc306132227"></a><a name="_Toc282027609"></a><a
name="_Toc281660068"><span lang=EN-US style='font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal'>7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>actor</span></u></a></h1>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://www.scala-lang.org/docu/files/actors-api/actors_api_guide.html">http://www.scala-lang.org/docu/files/actors-api/actors_api_guide.html#</a></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>中处理并发，有很多选择：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>actor</span><span
style='font-family:宋体'>消息模型，类似</span><span lang=EN-US style='font-family:Consolas'>Erlang</span><span
style='font-family:宋体'>，首选，</span><span lang=EN-US style='font-family:Consolas'>Lift</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>akka</span><span
style='font-family:宋体'>也实现了自己的</span><span lang=EN-US style='font-family:Consolas'>actor</span><span
style='font-family:宋体'>模型。</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Thread</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Runnable</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>java.util.concurennt</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>3<sup>rd</sup></span><span
style='font-family:宋体'>并发框架如</span><span lang=EN-US style='font-family:Consolas'>Netty</span><span
style='font-family:宋体'>，</span><span lang=EN-US style='font-family:Consolas'>Mina</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132228"></a><a
name="_Toc282027610"></a><a name="_Toc281660069"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>7.1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>actor</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>模型</span></u></h2>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Java</span></b><b><span
  style='font-family:宋体'>内置线程模型</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  lang=EN-US style='font-family:Consolas'>Scala actor</span></b><b><span
  style='font-family:宋体'>模型</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>“共享数据</span><span lang=EN-US
  style='font-family:Consolas'>-</span><span style='font-family:宋体'>锁”模型（</span><span
  lang=EN-US style='font-family:Consolas'>share data and lock</span><span
  style='font-family:宋体'>）</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>share
  nothing</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>每个</span><span lang=EN-US
  style='font-family:Consolas'>object</span><span style='font-family:宋体'>有一个</span><span
  lang=EN-US style='font-family:Consolas'>monitor</span><span style='font-family:
  宋体'>，监视多线程对共享数据的访问</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>不共享数据，</span><span
  lang=EN-US style='font-family:Consolas'>actor</span><span style='font-family:
  宋体'>之间通过</span><span lang=EN-US style='font-family:Consolas'>message</span><span
  style='font-family:宋体'>通讯</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>加锁的代码段用</span><span
  lang=EN-US style='font-family:Consolas'>synchronized</span><span
  style='font-family:宋体'>标识</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>死锁问题</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>每个线程内部是顺序执行的</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>每个</span><span lang=EN-US
  style='font-family:Consolas'>actor</span><span style='font-family:宋体'>内部是顺序执行的</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132229"></a><a
name="_Toc282027611"></a><a name="_Toc281660070"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>7.2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>多核计算</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>对比如下的算法：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="100%"
 style='width:100.0%;border-collapse:collapse;border:none'>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def perfect(n:Int)
  = </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>n==(1 until n filter (n%_==0) sum)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val n =
  33550336</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
  style='font-family:宋体'>串行计算</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n to n+10
  foreach (i=&gt;println(perfect(i)))</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>def perfect(n:Int)
  = </span></p>
  <p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
  style='font-family:Consolas'>n==(1 until n filter (n%_==0) sum)</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val n =
  33550336</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// </span><span
  style='font-family:宋体'>并行计算</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>class
  T1(n:Int) extends Thread {</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; override
  def run(){println(perfect(n))}}</span></p>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>n to n+10
  foreach (i=&gt;new T1(i).start)</span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>耗时：</span><span lang=EN-US
  style='font-family:Consolas'>8297</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>耗时：</span><span lang=EN-US
  style='font-family:Consolas'>5134</span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><img border=0 width=188 height=271
  src="Scala-Handbook.files/image012.jpg"></span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US><img border=0 width=188 height=271
  src="Scala-Handbook.files/image013.jpg"></span></p>
  </td>
 </tr>
 <tr>
  <td width="50%" valign=top style='width:50.0%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>单线程串行计算，不能很好发挥多核优势</span></p>
  </td>
  <td width="50%" valign=top style='width:50.0%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>多线程并行计算，平均分配到多核，更快</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span style='font-family:宋体'>上面是</span><span lang=EN-US
style='font-family:Consolas'>Java</span><span style='font-family:宋体'>的写法，也可以用</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>actor</span><span
style='font-family:宋体'>写法：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>写法</span><span lang=EN-US style='font-family:Consolas'>1</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>import actors.Actor,actors.Actor._</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>class A1 extends Actor { </span></p>

<p class=MsoNormal style='margin-left:10.5pt;text-indent:10.5pt'><span
lang=EN-US style='font-family:Consolas'>def act { react { case
n:Int=&gt;println(perfect(n)) }}}</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>n to n+10 foreach (i=&gt;{ (new A1).start ! i})</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>写法</span><span lang=EN-US style='font-family:Consolas'>2</span><span
style='font-family:宋体'>：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>val aa = Array.fill(11)(actor { react { case
n:Int=&gt;println(perfect(n)) }})</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>n to n+10 foreach (i=&gt;aa(i-n) ! i)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span style='font-family:宋体'>或者：</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>n to n+10 foreach (i=&gt; <u>actor { react { case
n:Int=&gt;println(perfect(n)) }}</u> ! i)</span></p>

<p class=MsoNormal style='margin-left:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132230"></a><a
name="_Toc282027612"></a><a name="_Toc281660071"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>7.3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Actor</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>用法</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>会建立一个线程池共所有</span><span lang=EN-US style='font-family:
Consolas'>Actor</span><span style='font-family:宋体'>来使用。</span><span lang=EN-US
style='font-family:Consolas'>receive</span><span style='font-family:宋体'>模型是</span><span
lang=EN-US style='font-family:Consolas'>Actor</span><span style='font-family:
宋体'>从池中取一个线程一直使用；</span><span lang=EN-US style='font-family:Consolas'>react</span><span
style='font-family:宋体'>模型是</span><span lang=EN-US style='font-family:Consolas'>Actor</span><span
style='font-family:宋体'>从池中取一个线程用完给其他</span><span lang=EN-US style='font-family:
Consolas'>Actor</span><span style='font-family:宋体'>用</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>实现方式</span></b><b><span
lang=EN-US style='font-family:Consolas'>1</span></b><b><span style='font-family:
宋体'>：</span></b></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>import</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>scala</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>actors</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>._</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>object</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Actor1</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>extends</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Actor</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> { // </span><span
style='font-size:10.0pt;font-family:宋体;color:black'>或者</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>class</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:10.0pt;
text-autospace:none'><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// </span><span style='font-size:10.0pt;font-family:宋体;color:gray'>实现线程</span></p>

<p class=MsoNormal style='text-indent:10.0pt'><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>def</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>act</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>() { react
{ case _ =&gt;println(&quot;ok&quot;); exit} }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>}</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas'>//</span><span
style='font-size:10.0pt;font-family:宋体'>发送消息：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas'>Actor1.start ! 1001 //
</span><span style='font-size:10.0pt;font-family:宋体'>必须调用</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas'>start</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>实现方式</span></b><b><span
lang=EN-US style='font-family:Consolas'>2</span></b><b><span style='font-family:
宋体'>：</span></b></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>import</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>scala</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>actors.Actor</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>._</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>val</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>a2</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> = </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>actor</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> {</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas'> react { case _ =&gt;println(&quot;ok&quot;)
} <span style='color:black'>} // </span></span><span style='font-size:10.0pt;
font-family:宋体;color:black'>马上启动</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas'>//</span><span
style='font-size:10.0pt;font-family:宋体'>发送消息：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas'>a2 !
&quot;message&quot; // </span><span style='font-size:10.0pt;font-family:宋体'>不必调用</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas'>start</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>提示：</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0 width="66%"
 style='width:66.62%;border-collapse:collapse;border:none'>
 <tr>
  <td width="10%" valign=top style='width:10.14%;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>!</span><span lang=EN-US style='font-family:Consolas'>&nbsp; </span></p>
  </td>
  <td width="89%" valign=top style='width:89.86%;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>发送异步消息，没有返回值。</span></p>
  </td>
 </tr>
 <tr>
  <td width="10%" valign=top style='width:10.14%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>!?</span></p>
  </td>
  <td width="89%" valign=top style='width:89.86%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>发送同步消息，等待返回值。（会阻塞发送消息语句所在的线程）</span><span
  style='font-family:Consolas'> </span></p>
  </td>
 </tr>
 <tr>
  <td width="10%" valign=top style='width:10.14%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>!!</span></p>
  </td>
  <td width="89%" valign=top style='width:89.86%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>发送异步消息，返回值是</span><span
  lang=EN-US style='font-family:Consolas'> Future[Any]</span><span
  style='font-family:宋体'>。</span><span style='font-family:Consolas'> </span></p>
  </td>
 </tr>
 <tr>
  <td width="10%" valign=top style='width:10.14%;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
  yellow'>?</span><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
  <td width="89%" valign=top style='width:89.86%;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span style='font-family:宋体'>不带参数。查看</span><span
  lang=EN-US style='font-family:Consolas'> mailbox </span><span
  style='font-family:宋体'>中的下一条消息。</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132231"></a><a
name="_Toc282027613"></a><a name="_Toc281660072"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>7.4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>方式</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>1</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>：接受</span></u><u><span
lang=EN-US style='font-family:Consolas'>receive</span></u></h2>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
style='font-size:10.0pt;font-family:宋体;color:black'>特点：要反复处理消息，</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>receive</span><span
style='font-size:10.0pt;font-family:宋体;color:black'>外层用</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>while(..)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>import
actors.Actor, actors.Actor._</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>val a1 = </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>Actor.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>actor</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:10.0pt;
text-autospace:none'><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>var</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#2300FB'>work</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> = </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>true</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:10.0pt;
text-autospace:none'><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>while</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'>(</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#2300FB'>work</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>) {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:20.0pt;
text-autospace:none'><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85;background:yellow'>receive</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> { </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'>// </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>接受消息</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:gray'>, </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>或者用</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:gray'>receiveWith(1000)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:30.0pt;
text-autospace:none'><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>case</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#2300FB'>msg</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>:</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>String</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> =&gt; </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>println</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:green'>&quot;a1:
&quot;</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'> </span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>+</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#2300FB'>msg</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:30.0pt;
text-autospace:none'><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>case</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#2300FB'>x</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:black'>:</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Int</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> =&gt; </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>work</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> = </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>false;</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>println</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:green'>&quot;a1
stop: &quot;</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'> </span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>+</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#2300FB'>x</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:20.0pt;
text-autospace:none'><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>}</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:10.0pt;
text-autospace:none'><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>}</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a1 <span
style='background:yellow'>!</span> &quot;hello&quot; // &quot;a1: hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a1 <span
style='background:yellow'>!</span> &quot;world&quot; // &quot;a1: world&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a1 <span
style='background:yellow'>!</span> -1 // &quot;a1 stop: -1&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a1 <span
style='background:yellow'>!</span> &quot;no response :(&quot; </span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132232"></a><a
name="_Toc282027614"></a><a name="_Toc281660073"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>7.5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>方式</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>2</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>：接受</span></u><u><span
lang=EN-US style='font-family:Consolas'>react, loop</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>特点：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>从不返回</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>要反复执行消息处理，</span><span lang=EN-US
style='font-family:Consolas'>react</span><span style='font-family:宋体'>外层用</span><span
lang=EN-US style='font-family:Consolas'>loop</span><span style='font-family:
宋体'>，<span style='background:yellow'>不能</span>用</span><span lang=EN-US
style='font-family:Consolas'>while(..); </span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>通过复用线程，比</span><span lang=EN-US
style='font-family:Consolas'>receive</span><span style='font-family:宋体'>更高效，应尽可能使用</span><span
lang=EN-US style='font-family:Consolas'>react</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>import
actors.Actor, Actor._</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>val a1 = </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>Actor.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>actor</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
text-autospace:none'><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black;background:yellow'>react</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>case</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> x:Int
=&gt; println(</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:green'>&quot;a1 stop: &quot;</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:black'> + x)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>case</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>
msg:String =&gt; println(</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:green'>&quot;a1: &quot;</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> + msg); <span
style='background:yellow'>act()</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a1 <span
style='background:yellow'>!</span> &quot;hello&quot; // &quot;a1: hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a1 <span
style='background:yellow'>!</span> &quot;world&quot; // &quot;a1: world&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a1 <span
style='background:yellow'>!</span> -1 // &quot;a1 stop: -1&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>a1 <span
style='background:yellow'>!</span> &quot;no response :(&quot; </span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果不用退出的线程，可使用</span><span
lang=EN-US style='font-family:Consolas'>loop</span><span style='font-family:
宋体'>改写如下：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>val a1 = </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>Actor.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>actor</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; <span
style='background:yellow'>loop</span> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
text-autospace:none'><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black;background:yellow'>react</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#4C4C4C'>case</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>x</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>:</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Int</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> =&gt; </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>println</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:green'>&quot;a1
stop: &quot;</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'> </span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>+</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#2300FB'>x</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:black'>); </span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:#003E85;background:yellow'>exit</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>()</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>case</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>
msg:String =&gt; println(</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:green'>&quot;a1: &quot;</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> + msg)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>&nbsp; }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132233"></a><a
name="_Toc282027615"></a><a name="_Toc281660074"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>7.6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>REPL</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>接受消息</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala&gt; self
! &quot;hello&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala&gt; self.receive
{ case x =&gt; x }</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>scala&gt; self.receiveWithin(1000)
{ case x =&gt; x }</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132234"></a><a
name="_Toc282027616"></a><a name="_Toc281660075"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>7.7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>actor</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>最佳实践</span></u></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027617"></a><a
name="_Toc281660076"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>7.7.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>不阻塞</span></u></a><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>actor</span></u></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>actor</span><span
style='font-family:宋体'>不应由于处理某条消息而阻塞，可以调用</span><span lang=EN-US
style='font-family:Consolas'>helper-actor</span><span style='font-family:宋体'>处理耗时操作</span><span
lang=EN-US style='font-family:Consolas'>(helper actor</span><span
style='font-family:宋体'>虽然是阻塞的，但由于不接受消息所以没问题</span><span lang=EN-US
style='font-family:Consolas'>)</span><span style='font-family:宋体'>，以便</span><span
lang=EN-US style='font-family:Consolas'>actor</span><span style='font-family:
宋体'>接着处理下一条消息</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-----------------------------------------</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>import</span><span
lang=EN-US style='font-family:Consolas;color:black'> actors._, actors.Actor._</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-indent:10.5pt;
text-autospace:none'><span lang=EN-US style='font-family:Consolas;color:#7F0055'>val</span><span
lang=EN-US style='font-family:Consolas;color:black'> time = 1000</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Fixedsys;color:black'>&nbsp;</span><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;</span><span
lang=EN-US style='font-family:Consolas;color:#3F7F5F'>// </span><span
style='font-family:宋体;color:#3F7F5F'>（</span><span lang=EN-US style='font-family:
Consolas;color:#3F7F5F'>1</span><span style='font-family:宋体;color:#3F7F5F'>）</span><span
style='font-family:宋体;color:#3F7F5F'>原来阻塞的程序</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>val</span><span
lang=EN-US style='font-family:Consolas;color:black'> mainActor1 = actor {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; loop {
react {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-family:Consolas;color:#7F0055'>case</span><span
lang=EN-US style='font-family:Consolas;color:black'> n: </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>Int</span><span
lang=EN-US style='font-family:Consolas;color:black'> =&gt; <span
style='background:yellow'>Thread.sleep(time)</span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println(n)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-family:Consolas;color:#7F0055'>case</span><span
lang=EN-US style='font-family:Consolas;color:black'> s =&gt; println(s) } }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; 1 to 5 foreach {
mainActor1 ! _ } </span><span lang=EN-US style='font-family:Consolas;
color:#3F7F5F'>// 5</span><span style='font-family:宋体;color:#3F7F5F'>秒钟后打印完数字</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#3F7F5F'>// </span><span
style='font-family:宋体;color:#3F7F5F'>（</span><span lang=EN-US style='font-family:
Consolas;color:#3F7F5F'>2</span><span style='font-family:宋体;color:#3F7F5F'>）</span><span
style='font-family:宋体;color:#3F7F5F'>改写由</span><span lang=EN-US
style='font-family:Consolas;color:#3F7F5F'>helper actor</span><span
style='font-family:宋体;color:#3F7F5F'>去阻塞的程序</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>val</span><span
lang=EN-US style='font-family:Consolas;color:black'> mainActor2: Actor = actor
{</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; loop {
react {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-family:Consolas;color:#7F0055'>case</span><span
lang=EN-US style='font-family:Consolas;color:black'> n: </span><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>Int</span><span
lang=EN-US style='font-family:Consolas;color:black'> =&gt; <span
style='background:yellow'>actor { Thread.sleep(time); mainActor2 ! </span></span><span
lang=EN-US style='font-family:Consolas;color:#2A00FF;background:yellow'>&quot;wakeup&quot;</span><span
lang=EN-US style='font-family:Consolas;color:black;background:yellow'> }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;println(n)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-family:Consolas;color:#7F0055'>case</span><span
lang=EN-US style='font-family:Consolas;color:black'> s =&gt; println(s) } }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; 1 to 5 foreach {
mainActor2 ! _ } </span><span lang=EN-US style='font-family:Consolas;
color:#3F7F5F'>// </span><span style='font-family:宋体;color:#3F7F5F'>马上打印数字</span><span
lang=EN-US style='font-family:Consolas;color:#3F7F5F'>; 1</span><span
style='font-family:宋体;color:#3F7F5F'>秒钟后打印</span><span lang=EN-US
style='font-family:Consolas;color:#3F7F5F'>5</span><span style='font-family:
宋体;color:#3F7F5F'>个</span><span lang=EN-US style='font-family:Consolas;
color:#3F7F5F'>wakeup</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>-----------------------------------------</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027618"></a><a
name="_Toc281660077"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>7.7.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>actor</span></u></a><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>之间用且仅用消息来通讯</span></u></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='font-family:
Consolas'>actor</span><span style='font-family:宋体'>模型让我们写多线程程序时只用关注各个独立的单线程程序（</span><span
lang=EN-US style='font-family:Consolas'>actor</span><span style='font-family:
宋体'>），他们之间通过消息来通讯。例如，如果</span><span lang=EN-US style='font-family:Consolas'>BadActor</span><span
style='font-family:宋体'>中有一个</span><span lang=EN-US style='font-family:Consolas'>GoodActor</span><span
style='font-family:宋体'>的引用</span><span lang=EN-US style='font-family:Consolas'>:</span></p>

<p class=MsoNormal style='text-indent:21.0pt;line-height:150%'><span
lang=EN-US style='font-family:Consolas'>class BadActor(a:GoodActor) extends
Actor {...}</span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体'>那在</span><span
lang=EN-US style='font-family:Consolas'>BadActor</span><span style='font-family:
宋体'>中即可以通过该引用来直接调用</span><span lang=EN-US style='font-family:Consolas'>GoodActor</span><span
style='font-family:宋体'>的方法，也可以通过“</span><span lang=EN-US style='font-family:
Consolas'>!</span><span style='font-family:宋体'>”来传递消息。<span style='background:
yellow'>选择后者</span>！因为一旦</span><span lang=EN-US style='font-family:Consolas'>BadActor</span><span
style='font-family:宋体'>通过引用读取</span><span lang=EN-US style='font-family:Consolas'>GoodActor</span><span
style='font-family:宋体'>实例的私有数据，而这些数据可能正被其他线程改写值，结果就避免不了“共享数据</span><span
lang=EN-US style='font-family:Consolas'>-</span><span style='font-family:宋体'>锁”模型中的麻烦事：即必须保证</span><span
lang=EN-US style='font-family:Consolas'>BadActor</span><span style='font-family:
宋体'>线程读取</span><span lang=EN-US style='font-family:Consolas'>GoodActor</span><span
style='font-family:宋体'>的私有数据时，</span><span lang=EN-US style='font-family:Consolas'>GoodActor</span><span
style='font-family:宋体'>线程在这块成为“共享数据”的操作上加锁。</span><span lang=EN-US
style='font-family:Consolas'>GoodActor</span><span style='font-family:宋体'>只要有了共享数据，就必须来加锁防范竞用冲突和死锁，你又得从</span><span
lang=EN-US style='font-family:Consolas'>actor</span><span style='font-family:
宋体'>模型退回到“共享数据</span><span lang=EN-US style='font-family:Consolas'>-</span><span
style='font-family:宋体'>锁”模型（注：</span><span lang=EN-US style='font-family:Consolas'>actor</span><span
style='font-family:宋体'>对消息是顺序处理的，本来不用考虑共享数据）。</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027619"></a><a
name="_Toc281660078"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>7.7.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>采用不可变消息</span></u></a></h3>

<p class=MsoNormal style='line-height:150%'><span lang=EN-US style='font-family:
Consolas'>Scala</span><span style='font-family:宋体'>的</span><span lang=EN-US
style='font-family:Consolas'>actor</span><span style='font-family:宋体'>模型让每个</span><span
lang=EN-US style='font-family:Consolas'>actor</span><span style='font-family:
宋体'>的</span><span lang=EN-US style='font-family:Consolas'>act</span><span
style='font-family:宋体'>方法内部接近于单线程环境，你不用当心</span><span lang=EN-US
style='font-family:Consolas'>act</span><span style='font-family:宋体'>方法里面的操作是否线程安全。在</span><span
lang=EN-US style='font-family:Consolas'>act</span><span style='font-family:
宋体'>方法中你可以尽情使用非同步、可变对象，因为每个</span><span lang=EN-US style='font-family:Consolas'>act</span><span
style='font-family:宋体'>方法被有效限制在单个线程中，这也是</span><span lang=EN-US
style='font-family:Consolas'>actor</span><span style='font-family:宋体'>模型被称为“</span><span
lang=EN-US style='font-family:Consolas'>share-nothing</span><span
style='font-family:宋体'>”</span><span style='font-family:Consolas'> </span><span
style='font-family:宋体'>模型（零共享模型）的原因，其数据的作用范围被限制在单个线程中。不过一旦对象内的数据被用于多个</span><span
lang=EN-US style='font-family:Consolas'>actor</span><span style='font-family:
宋体'>之间进行消息传递。这时你就必须考虑消息对象是否线程安全。</span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体'>保证消息对象线程安全的最好方法就是保证只使用不可变对象作为消息对象。<b><u>消息类中只定义</u></b></span><b><u><span
lang=EN-US style='font-family:Consolas'>val</span></u></b><b><u><span
style='font-family:宋体'>字段，且只能指向不可变对象</span></u></b><span style='font-family:
宋体'>。定义这种不可变消息类的简单方法就是使用</span><span lang=EN-US style='font-family:Consolas'>case
class</span><span style='font-family:宋体'>，</span><span style='font-family:Consolas'>
</span><span style='font-family:宋体'>并保证其所有的</span><span lang=EN-US
style='font-family:Consolas'>val</span><span style='font-family:宋体'>字段都是不可变的。</span><span
lang=EN-US style='font-family:Consolas'>Scala API</span><span style='font-family:
宋体'>中提供了很多不可变对象可用，例如基本类型、</span><span lang=EN-US style='font-family:Consolas'>String</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>Tuple</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>List</span><span
style='font-family:宋体'>，不可变</span><span lang=EN-US style='font-family:Consolas'>Set</span><span
style='font-family:宋体'>、不可变</span><span lang=EN-US style='font-family:Consolas'>Map</span><span
style='font-family:宋体'>等。</span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体'>如果你发现确实需要把一个可变对象</span><span
lang=EN-US style='font-family:Consolas'>obj1</span><span style='font-family:
宋体'>发送给其他</span><span lang=EN-US style='font-family:Consolas'>actor</span><span
style='font-family:宋体'>，也因该是发送一份拷贝对象</span><span lang=EN-US style='font-family:
Consolas'>obj1.clone</span><span style='font-family:宋体'>过去，而不是把</span><span
lang=EN-US style='font-family:Consolas'>obj1</span><span style='font-family:
宋体'>直接发过去。例如，数据对象</span><span lang=EN-US style='font-family:Consolas'>Array</span><span
style='font-family:宋体'>是可变且未做同步的，所以</span><span lang=EN-US style='font-family:
Consolas'>Array</span><span style='font-family:宋体'>只应该由一个</span><span
lang=EN-US style='font-family:Consolas'>actor</span><span style='font-family:
宋体'>同时存取，如果需要发送数组</span><span lang=EN-US style='font-family:Consolas'>arr</span><span
style='font-family:宋体'>，就发送</span><span lang=EN-US style='font-family:Consolas'>arr.clone</span><span
style='font-family:宋体'>（</span><span lang=EN-US style='font-family:Consolas'>arr</span><span
style='font-family:宋体'>中的元素也应该是不可变对象），或者直接发送一个不可变对象</span><span lang=EN-US
style='font-family:Consolas'>arr.toList</span><span style='font-family:宋体'>更好。</span></p>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体'>总结：大部分时候使用不可变对象很方便，不可变对象是并行系统的曙光，它们是易使用、低风险的线程安全对象。当你将来要设计一个和并行相关的程序时，无论是否使用</span><span
lang=EN-US style='font-family:Consolas'>actor</span><span style='font-family:
宋体'>，都应该尽量使用不可变的数据结构。</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027620"></a><a
name="_Toc281660079"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>7.7.4.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>让消息自说明</span></u></a></h3>

<p class=MsoNormal style='line-height:150%'><span style='font-family:宋体'>对每一种消息创建一个对应的</span><span
lang=EN-US style='font-family:Consolas'>case class</span><span
style='font-family:宋体'>，而不是使用上面的</span><span lang=EN-US style='font-family:
Consolas'>tuple</span><span style='font-family:宋体'>数据结构。虽然这种包装在很多情况下并非必须，但该做法能使</span><span
lang=EN-US style='font-family:Consolas'>actor</span><span style='font-family:
宋体'>程序易于理解，例如：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#3F7F5F'>// </span><span
style='font-family:宋体;color:#3F7F5F'>不易理解，因为传递的是个一般的字符串，很难指出那个</span><span
lang=EN-US style='font-family:Consolas;color:#3F7F5F'>actor</span><span
style='font-family:宋体;color:#3F7F5F'>来响应这个消息</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>lookerUpper ! (</span><span
lang=EN-US style='font-family:Consolas;color:#2A00FF'>&quot;www.scala-lang.org&quot;</span><span
lang=EN-US style='font-family:Consolas;color:black'>, self)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#3F7F5F'>// </span><span
style='font-family:宋体;color:#3F7F5F'>改为如下，则指出只有</span><span lang=EN-US
style='font-family:Consolas;color:#3F7F5F'>react</span><span style='font-family:
宋体;color:#3F7F5F'>能处理</span><span lang=EN-US style='font-family:Consolas;
color:#3F7F5F'>LoopupIP</span><span style='font-family:宋体;color:#3F7F5F'>的</span><span
lang=EN-US style='font-family:Consolas;color:#3F7F5F'>actor</span><span
style='font-family:宋体;color:#3F7F5F'>来处理：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#7F0055'>case</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#7F0055'>class</span><span lang=EN-US
style='font-family:Consolas;color:black'> LookupIP(hostname: String, requester:
Actor)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>lookerUpper ! LookupIP(</span><span
lang=EN-US style='font-family:Consolas;color:#2A00FF'>&quot;www.scala-lang.org&quot;</span><span
lang=EN-US style='font-family:Consolas;color:black'>, self)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132235"></a><a
name="_Toc282027621"></a><a name="_Toc281660080"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>7.8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>不同</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>jvm</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>间的消息访问</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>服务器端：</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>object</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>ActorServer</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>extends</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Application</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>import</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'> </span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#8E3E00'>actors</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>.Actor, <u>actor</u></span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>s</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Actor</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>._, </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>actors</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>remote</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.<span
style='background:yellow'>RemoteActor</span></span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#8E3E00'>Actor</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'>.</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#003E85'>actor</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> { </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'>// </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>创建并启动一个</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'> actor</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// </span><span style='font-size:10.0pt;font-family:宋体;color:gray'>当前</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'> actor </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>监听的端口：</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'> 3000</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#8E3E00'>RemoteActor</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'>.</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#003E85'>alive</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(3000)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// </span><span style='font-size:10.0pt;font-family:宋体;color:gray'>在</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'> 3000 </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>端口注册本</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'> actor</span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>，取名为</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:gray'> server1</span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// </span><span style='font-size:10.0pt;font-family:宋体;color:gray'>第一个参数为</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'> actor </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>的标识，它以单引号开头，是</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'> Scala </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>中的</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:gray'> Symbol </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>量，</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// Symbol </span><span style='font-size:10.0pt;font-family:宋体;
color:gray'>量和字符串相似，但</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:gray'> Symbol </span><span style='font-size:10.0pt;
font-family:宋体;color:gray'>相等是基于字符串比较的。</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// self </span><span style='font-size:10.0pt;font-family:宋体;
color:gray'>指代当前</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:gray'> actor </span><span style='font-size:10.0pt;font-family:
宋体;color:gray'>（注意此处不能用</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:gray'> this</span><span style='font-size:10.0pt;
font-family:宋体;color:gray'>）</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#8E3E00'>RemoteActor</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'>.</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#003E85'>register</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#FF5E5E'>'server1</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>, </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Actor</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>self</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// </span><span style='font-size:10.0pt;font-family:宋体;color:gray'>收到消息后的响应</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>loop</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#8E3E00'>Actor</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'>.</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#003E85'>react</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> {</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>case</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>msg</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> =&gt;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#003E85'>println</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:green'>&quot;server1
get: &quot;</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'> </span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>+</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#2300FB'>msg</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>客户端：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>object</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>ActorClient</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#4C4C4C'>extends</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Application</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'> {&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>import</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'> </span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#8E3E00'>actors</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'>.Actor, </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>actors</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>remote</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.Node, </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>actors</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>remote</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.RemoteActor&nbsp;
</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#8E3E00'>Actor</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'>.</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#003E85'>actor</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> {&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// </span><span style='font-size:10.0pt;font-family:宋体;color:gray'>取得一个节点（</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'>ip:port </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>唯一标识一个节点）</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'>&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// Node </span><span style='font-size:10.0pt;font-family:宋体;
color:gray'>是个</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'> case class</span><span style='font-size:10.0pt;font-family:宋体;
color:gray'>，所以不需要</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:gray'> new&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>val</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#2300FB'>node</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> = </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>Node</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:green'>&quot;127.0.0.1&quot;</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>,
3000)&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// </span><span style='font-size:10.0pt;font-family:宋体;color:gray'>取得节点对应的</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'> actor </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>代理对象</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:gray'>&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#4C4C4C'>val</span><span lang=EN-US style='font-size:10.0pt;font-family:
Consolas;color:black'> </span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:#2300FB'>remoteActor</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> = </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#8E3E00'>RemoteActor</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>.</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#003E85'>select</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>(</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#2300FB'>node</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>, </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:#FF5E5E'>'server1</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>)&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:gray'>// </span><span style='font-size:10.0pt;font-family:宋体;color:gray'>现在</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'>
remoteActor </span><span style='font-size:10.0pt;font-family:宋体;color:gray'>就和普通的</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'> actor </span><span
style='font-size:10.0pt;font-family:宋体;color:gray'>一样，可以向它发送消息了！</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:gray'>&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>println</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'>(</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:green'>&quot;-- begin to send message&quot;</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#2300FB'>remoteActor</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'> </span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:#003E85'>!</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:black'> </span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:green'>&quot;ActorClient</span><span
style='font-size:10.0pt;font-family:宋体;color:green'>的消息</span><span lang=EN-US
style='font-size:10.0pt;font-family:Consolas;color:green'>&quot;</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:#003E85'>println</span><span lang=EN-US style='font-size:10.0pt;
font-family:Consolas;color:black'>(</span><span lang=EN-US style='font-size:
10.0pt;font-family:Consolas;color:green'>&quot;-- end&quot;</span><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-size:10.0pt;font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;
}&nbsp; </span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;font-family:Consolas;
color:black'>}</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132236"></a><a
name="_Toc282027622"></a><a name="_Toc281660081"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>7.9.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>STM</span></u></a><u><span lang=EN-US
style='font-family:Consolas'> </span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://nbronson.github.com/scala-stm/">http://nbronson.github.com/scala-stm/</a></span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-size:11.5pt;font-family:"Verdana","sans-serif";color:black'>a
lightweight <b><u>Software Transactional Memory</u></b> for Scala, inspired by
the STMs in Haskell and Clojure.</span></span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-size:11.5pt;font-family:"Verdana","sans-serif";color:black'>Cheat-Sheet:</span></span></p>

<div style='border:solid #A0A0A0 1.0pt;padding:7.0pt 7.0pt 7.0pt 7.0pt'><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>import</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=nn><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:blue'>scala.concurrent.stm._</span></b></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;</span></code></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>val</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>x</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=nc><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:blue;background:yellow'>Ref</span></b></span><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>(</span></span><span
class=mi><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>0</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>)</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=c1><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:gray'>// allocate a Ref[Int]</span></span></pre><pre style='line-height:
15.0pt;border:none;padding:0cm'><span class=k><b><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:green'>val</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>y</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=nc><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:blue;background:yellow'>Ref</span></b></span><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>.</span></span><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>make</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>[</span></span><span class=kt><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#B00040'>String</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>]()</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=c1><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:gray'>// type-specific default</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>val</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>z</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>x</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>.</span></span><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black;background:
yellow'>single</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=c1><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:gray'>// Ref.View[Int]</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;</span></code></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black;background:
yellow'>atomic</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>{</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=k><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:green'>implicit</span></b></span><code><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>txn</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=k><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:green'>=&gt;</span></b></span></pre><pre style='line-height:15.0pt;
border:none;padding:0cm'><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>&nbsp; </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>val</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>i</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>x</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>()</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=c1><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:gray'>// read</span></span></pre><pre style='line-height:15.0pt;
border:none;padding:0cm'><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>&nbsp; </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>y</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>()</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=s><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#BA2121'>&quot;x was &quot;</span></span><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>+</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>i</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=c1><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:gray'>// write</span></span></pre><pre style='line-height:15.0pt;
border:none;padding:0cm'><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>&nbsp; </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>val</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>eq</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black;background:yellow'>atomic</span></span><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>{</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>implicit</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>txn</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=&gt;</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=c1><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:gray'>// nested atomic</span></span></pre><pre style='line-height:15.0pt;
border:none;padding:0cm'><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>x</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>()</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>==</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>z</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>()</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=c1><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:gray'>// both Ref and Ref.View can be used inside atomic</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp; </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>}</span></span></pre><pre style='line-height:15.0pt;border:none;
padding:0cm'><code><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>&nbsp; </span></code><span class=n><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>assert</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>(</span></span><span class=n><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>eq</span></span><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>)</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp; </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>y</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>.</span></span><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>set</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>(</span></span><span class=n><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>y</span></span><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>.</span></span><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>get</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>+</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=s><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#BA2121'>&quot;, long-form access&quot;</span></span><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>)</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>}</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;</span></code></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=c1><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:gray'>// only Ref.View can be used outside atomic</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>println</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>(</span></span><span class=s><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#BA2121'>&quot;y was '&quot;</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>+</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>y</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>.</span></span><span class=n><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>single</span></span><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>()</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>+</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=s><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#BA2121'>&quot;'&quot;</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>)</span></span></pre><pre style='line-height:15.0pt;border:none;
padding:0cm'><span class=n><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas;color:black'>println</span></span><span class=o><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:#666666'>(</span></span><span
class=s><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#BA2121'>&quot;z was &quot;</span></span><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>+</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>z</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>())</span></span></pre><pre style='line-height:15.0pt;
border:none;padding:0cm'><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>&nbsp;</span></code></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black;background:
yellow'>atomic</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>{</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=k><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:green'>implicit</span></b></span><code><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>txn</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=k><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:green'>=&gt;</span></b></span></pre><pre style='line-height:15.0pt;
border:none;padding:0cm'><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'>&nbsp; </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>y</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>()</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>y</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>()</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>+</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=s><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#BA2121'>&quot;, first alternative&quot;</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp; </span></code><span
class=k><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:green'>if</span></b></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>(</span></span><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>x</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>getWith</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>{</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>_</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>&gt;</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=mi><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>0</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>})</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=c1><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:gray'>// read via a function</span></span></pre><pre
style='text-indent:21.0pt;line-height:15.0pt;border:none;padding:0cm'><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>retry</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=c1><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:gray'>// try alternatives or block </span></span><a
name="_Toc282027623"></a></pre><pre style='line-height:15.0pt;border:none;
padding:0cm'><span class=o><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas;color:#666666'>}</span></span><code><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>orAtomic</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>{</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>implicit</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>txn</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=&gt;</span></b></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp; </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>y</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>()</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=k><b><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:green'>=</span></b></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>y</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>()</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>+</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=s><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#BA2121'>&quot;, second alternative&quot;</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>}</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>&nbsp;</span></code></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>val</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>prev</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>z</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>.</span></span><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>swap</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>(</span></span><span class=mi><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>10</span></span><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>)</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=c1><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:gray'>// atomic swap</span></span></pre><pre style='line-height:15.0pt;
border:none;padding:0cm'><span class=k><b><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:green'>val</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>success</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>z</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>.</span></span><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>compareAndSet</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>(</span></span><span class=mi><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>10</span></span><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>,</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=mi><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>11</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>)</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=c1><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:gray'>// atomic compare-and-set</span></span></pre><pre style='line-height:
15.0pt;border:none;padding:0cm'><span class=n><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'>z</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>.</span></span><span class=n><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>transform</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>{</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>_</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>max</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=mi><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>20</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>}</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=c1><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:gray'>// atomic transformation</span></span></pre><pre
style='line-height:15.0pt;border:none;padding:0cm'><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>val</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>pre</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>y</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>.</span></span><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>single</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>.</span></span><span class=n><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>getAndTransform</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>{</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>_</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>.</span></span><span class=n><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>toUpperCase</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>}</span></span></pre><pre style='line-height:15.0pt;border:none;
padding:0cm'><span class=k><b><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:green'>val</span></b></span><code><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>post</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>=</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=n><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:black'>y</span></span><span class=o><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:#666666'>.</span></span><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>single</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>.</span></span><span class=n><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>transformAndGet</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>{</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=n><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'>_</span></span><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>.</span></span><span class=n><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas;color:black'>filterNot</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>{</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=k><b><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:green'>_</span></b></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>==</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=sc><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#BA2121'>' '</span></span><code><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:black'> </span></code><span
class=o><span lang=EN-US style='font-size:10.5pt;font-family:Consolas;
color:#666666'>}</span></span><code><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas;color:black'> </span></code><span class=o><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas;color:#666666'>}</span></span></pre></div>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-size:11.5pt;font-family:"Verdana","sans-serif";color:black'>&nbsp;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h1><a name="_Toc306132237"></a><a name="_Toc282027624"></a><a
name="_Toc281660082"><span lang=EN-US style='font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal'>8.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span lang=EN-US style='font-family:Consolas'>misc</span></u></a></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132238"></a><a
name="_Toc282027625"></a><a name="_Toc281660083"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>8.1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>xml</span></u></a></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027626"></a><a
name="_Toc281660084"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>8.1.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>生成</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>原生支持</span><span lang=EN-US style='font-family:Consolas'>xml</span><span
style='font-family:宋体'>，就如同</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>支持</span><span lang=EN-US style='font-family:Consolas'>String</span><span
style='font-family:宋体'>一样，这就让生成</span><span lang=EN-US style='font-family:Consolas'>xml</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>xhtml</span><span
style='font-family:宋体'>很简单优雅：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val name =
&quot;james&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val age = 10</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val html =
&lt;html&gt;name=<span style='background:yellow'>{name}</span>, age=&quot;<span
style='background:yellow'>{age}</span>&quot;&lt;/html&gt; toString</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// &lt;html&gt;name=james,
age=&amp;quot;10&amp;quot;&lt;/html&gt;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>又如：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val html =
&lt;html&gt;&lt;head&gt;&lt;title&gt;<span style='background:yellow'>{myTitle}</span>&lt;/title&gt;&lt;/head&gt;&lt;body&gt;<span
style='background:yellow'>{&quot;hello world&quot;}</span>&lt;/boty&gt;&lt;/html&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>更复杂的例子：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val x =
&lt;r&gt;<span style='background:yellow'>{(1 to 5).map(i =&gt;
&lt;e&gt;{i}&lt;/e&gt;)}</span>&lt;/r&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>// &lt;r&gt;&lt;e&gt;1&lt;/e&gt;&lt;e&gt;2&lt;/e&gt;&lt;e&gt;3&lt;/e&gt;&lt;e&gt;4&lt;/e&gt;&lt;e&gt;5&lt;/e&gt;&lt;/r&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val x0 =
&lt;users&gt;<span style='background:yellow'>&lt;user name=&quot;qh&quot;/&gt;</span>&lt;/users&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
&lt;users&gt;<span style='background:yellow'>{u}</span>&lt;/users&gt; =
x0&nbsp; // u: scala.xml.Node = <span style='background:yellow'>&lt;user
name=&quot;qh&quot;&gt;&lt;/user&gt;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027627"></a><a
name="_Toc281660085"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>8.1.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>xml</span></u></a><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>文件</span></u></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>xml.XML <span
style='background:yellow'>loadString</span> &quot;&lt;p&gt;&lt;/p&gt;&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>xml.XML <span
style='background:yellow'>loadFile</span> &quot;abc.xml&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>xml.XML.<span
style='background:yellow'>saveFull</span>(&quot;foo.xml&quot;, node,
&quot;UTF-8&quot;, &#61623;</span></p>

<p class=MsoNormal style='margin-left:63.0pt;text-indent:21.0pt'><span
lang=EN-US style='font-family:Consolas'>xmlDecl:&nbsp;Boolean,&nbsp;doctype&nbsp;:&nbsp;DocType)</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027628"></a><a
name="_Toc281660086"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>8.1.3.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>读取：</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val x =
&lt;r&gt;<span style='background:yellow'>{(1 to 5).map(i =&gt;
&lt;e&gt;{i}&lt;/e&gt;)}</span>&lt;/r&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
&lt;r&gt;<u>&lt;e&gt;1&lt;/e&gt;&lt;e&gt;2&lt;/e&gt;&lt;e&gt;3&lt;/e&gt;&lt;e&gt;4&lt;/e&gt;&lt;e&gt;5&lt;/e&gt;</u>&lt;/r&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(x \
&quot;e&quot;) map (_.text.toInt) <span style='color:#5B6E6E'>// List(1, 2, 3,
4, 5)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val x0 =
&lt;users&gt;</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&lt;user
name=&quot;qh&quot;&gt;&lt;age&gt;20&lt;/age&gt;&lt;/user&gt;</span></p>

<p class=MsoNormal style='text-indent:10.5pt'><span lang=EN-US
style='font-family:Consolas'>&lt;user
name=&quot;james&quot;&gt;&lt;age&gt;30&lt;/age&gt;&lt;/user&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&lt;/users&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(x0 \
&quot;user&quot;) // <span style='color:#5B6E6E'>&lt;user
name=&quot;qh&quot;&gt;&lt;age&gt;20&lt;/age&gt;&lt;/user&gt;, &lt;user
name=&quot;james&quot;&gt;&lt;age&gt;30&lt;/age&gt;&lt;/user&gt;)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(x0 \
&quot;user&quot; \ &quot;age&quot;) // <span style='color:#5B6E6E'>(&lt;age&gt;20&lt;/age&gt;,
&lt;age&gt;30&lt;/age&gt;)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(x0 \
&quot;age&quot;)&nbsp; <span style='color:#5B6E6E'>// </span></span><span
style='font-family:宋体;color:#5B6E6E'>直接下级</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>: ()</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(x0 \\
&quot;age&quot;) <span style='color:#5B6E6E'>// </span></span><span
style='font-family:宋体;color:#5B6E6E'>所有下级：</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>(&lt;age&gt;20&lt;/age&gt;,
&lt;age&gt;30&lt;/age&gt;)</span><a name="_Toc282027629"></a></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(x0 \
&quot;_&quot;) </span><span style='font-family:宋体'>所有</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027630"></a><a
name="_Toc281660087"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>8.1.4.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>访问属性</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val x =
&lt;uu&gt;&lt;<span style='background:yellow'>u</span> <span style='background:
yellow'>name</span>=&quot;qh&quot; /&gt;&lt;u name=&quot;james&quot; /&gt;&lt;u
name=&quot;qiu&quot; /&gt;&lt;/uu&gt;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>(x \ &quot;<span
style='background:yellow'>u</span>&quot; \\ &quot;<b><span style='background:
lime'>@</span></b><span style='background:yellow'>name</span>&quot;) foreach
println // &quot;qh\njames\nqiu&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子：</span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-family:Consolas;color:black'>val data = </span></span></p>

<p class=MsoNormal><span class=apple-style-span><span lang=EN-US
style='font-family:Consolas;color:black'>&lt;shopping&gt;</span></span><span
lang=EN-US style='font-family:Consolas;color:black'><br>
<span class=apple-style-span>&nbsp; &lt;item name=&quot;bread&quot;
quantity=&quot;3&quot; price=&quot;2.50&quot;/&gt;</span><br>
<span class=apple-style-span>&nbsp; &lt;item name=&quot;milk&quot;
quantity=&quot;2&quot; price=&quot;3.50&quot;/&gt;</span><br>
<span class=apple-style-span>&lt;/shopping&gt;</span><br>
<br>
<span class=apple-style-span>val res = for (item &lt;- data \ &quot;item&quot;
; </span><br>
<span class=apple-style-span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
price = (item \ &quot;@price&quot;).text.toDouble ; </span><br>
<span class=apple-style-span>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qty
= (item \ &quot;@quantity&quot;).text.toInt)</span><br>
<span class=apple-style-span>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yield
(price * qty)</span><br>
<br>
<span class=apple-style-span>printf(&quot;$%.2f\n&quot;, res.sum)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027631"></a><a
name="_Toc281660088"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>8.1.5.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>格式化输出</span></u></a></h3>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val&nbsp;pp&nbsp;=&nbsp;new&nbsp;xml.<span
style='background:yellow'>PrettyPrinter</span>(80,&nbsp;4)&nbsp;&nbsp;//&nbsp;</span><span
style='font-family:宋体'>行宽</span><span lang=EN-US style='font-family:Consolas'>&nbsp;80</span><span
style='font-family:宋体'>，缩进为</span><span lang=EN-US style='font-family:Consolas'>&nbsp;4&nbsp;&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>pp&nbsp;<span
style='background:yellow'>formatNodes</span>&nbsp;&lt;b&gt;&lt;a/&gt;&lt;/b&gt;&nbsp;&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>结果是字符串</span><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
#D9D9D9'>&lt;b&gt;&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
#D9D9D9'>&nbsp;&nbsp;&nbsp;&nbsp;&lt;a&gt;&lt;/a&gt;&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;background:
#D9D9D9'>&lt;/b&gt;&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132239"></a><a
name="_Toc282027632"></a><a name="_Toc281660089"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>8.2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>json</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala-json</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132240"></a><a
name="_Toc282027633"></a><a name="_Toc281660090"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>8.3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Configgy</span></u></a></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://www.lag.net/configgy/">http://www.lag.net/configgy/</a></span></p>

<p class=MsoNormal><span style='font-family:宋体'>简单配置及</span><span lang=EN-US
style='font-family:Consolas'>logging</span><span style='font-family:宋体'>：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>----------------------------</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>log {</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;
filename = &quot;/var/log/pingd.log&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; roll =
&quot;daily&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp; level =
&quot;debug&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>}</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>hostname =
&quot;pingd.example.com&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>port = 3000</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>----------------------------</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val conf = net.lag.configgy.Configgy.configure(&quot;<u>/etc/pingd.conf</u>&quot;).config</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val hostname =
conf.getString(&quot;<span style='background:yellow'>hostname</span>&quot;,
&quot;localhost&quot;)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val port =
conf.getInt(&quot;<span style='background:yellow'>port</span>&quot;, 3000)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132241"></a><a
name="_Toc282027634"></a><a name="_Toc281660091"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>8.4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>正则表达式</span></u></a><u><span
lang=EN-US style='font-family:Consolas'>regex</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>1</span><span style='font-family:宋体'>：完全匹配</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//</span><span
style='font-family:宋体;color:#5B6E6E'>将字符串转为</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>scala.util.matching.Regex</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val pattern = &quot;<span
style='color:#C00000'>^[a-z0-9._%\\-+]+@(?:[a-z0-9\\-]+\\.)+[a-z]{2,4}$</span>&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val emailRegex
= pattern.<span style='background:yellow'>r</span> <span style='color:#5B6E6E'>//
</span></span><span style='font-family:宋体;color:#5B6E6E'>或者</span><span
lang=EN-US style='font-family:Consolas;color:#5B6E6E'> new
scala.util.matching.Regex(pattern)</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//<a
name="_Toc282027635">emailRegex.pattern=&gt;java.util.regex.Pattern </a></span><span
style='font-family:宋体;color:#5B6E6E'>使用</span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>java</span><span style='font-family:
宋体;color:#5B6E6E'>的</span><span lang=EN-US style='font-family:Consolas;
color:#5B6E6E'>Pattern</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>emailRegex.<span
style='background:yellow'>pattern</span>.<span style='background:yellow'>matcher</span>(&quot;<span
style='color:#0070C0'>tt@16.cn</span>&quot;).<span style='background:yellow'>matches</span>
<span style='color:#5B6E6E'>// true</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US
style='font-family:Consolas'>2</span><span style='font-family:宋体'>：查找匹配部分</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val p = &quot;<span
style='color:#C00000'>[0-9]+</span>&quot;.r&nbsp;&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>p.<span
style='background:yellow'>findAllIn</span>(&quot;<span style='color:#C00000'>2</span><span
style='color:#0070C0'> ad </span><span style='color:#C00000'>12</span><span
style='color:#0070C0'>ab ab</span><span style='color:#C00000'>21</span><span
style='color:#0070C0'> </span><span style='color:#C00000'>23</span>&quot;).toList
<span style='color:#5B6E6E'>// List(2, 12, 21, 23)</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>p.<span
style='background:yellow'>findFirstMatchIn</span>(&quot;<span style='color:
#0070C0'>abc</span><span style='color:#C00000'>123</span><span
style='color:#0070C0'>xyz</span>&quot;).get <span style='color:#5B6E6E'>// scala.util.matching.Regex.Match
= 123</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>更多例子如下：</span></p>

<p class=MsoNormal><b><u><span style='font-family:宋体'>定义：</span></u></b></p>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'><a
href="http://scala-lang.org"><span class=kw1>val</span></a> r1 <span class=sy0>=</span> <span
class=st0>&quot;(</span><span class=es0>\\</span><span class=st0>d+) lines&quot;</span><span
style='background:yellow'>.<span class=me1>r</span></span>&nbsp; <span
class=co1><span style='color:#5B6E6E'>// syntactic sugar</span></span><span
style='color:#5B6E6E'><br>
</span><a href="http://scala-lang.org"><span class=kw1>val</span></a> r2 <span
class=sy0>=</span> <span class=st0>&quot;&quot;&quot;(</span><span class=es0>\d</span><span
class=st0>+) lines&quot;&quot;&quot;</span><span style='background:yellow'>.<span
class=me1>r</span></span> <span style='color:#5B6E6E'>&nbsp;<span class=co1>// using triple-quotes to preserve backslashes</span></span></span></pre><pre><span
class=co1><span style='font-size:10.5pt'>或者</span></span></pre><pre><span
class=co1><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'>import scala.util.matching.Regex</span></span><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'><br>
<a href="http://scala-lang.org"><span class=kw1>val</span></a> r3 <span
class=sy0>=</span> <a href="http://scala-lang.org"><span class=kw1>new</span></a> <span
class=me1>Regex</span><span class=br0>(</span><span class=st0>&quot;(</span><span
class=es0>\\</span><span class=st0>d+) lines&quot;</span><span class=br0>)</span>&nbsp; <span
class=co1><span style='color:#5B6E6E'>// standard</span></span><span
style='color:#5B6E6E'><br>
</span><a href="http://scala-lang.org"><span class=kw1>val</span></a> r4 <span
class=sy0>=</span> <a href="http://scala-lang.org"><span class=kw1>new</span></a> <span
class=me1>Regex</span><span class=br0>(</span><span class=st0>&quot;&quot;&quot;(</span><span
class=es0>\d</span><span class=st0>+) lines&quot;&quot;&quot;</span>, <span
class=st0>&quot;lines&quot;</span><span class=br0>)</span> <span class=co1><span
style='color:#5B6E6E'>// with named groups</span></span></span></pre>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><u><span lang=EN-US style='font-family:Consolas'>search</span></u></b><b><u><span
style='font-family:宋体'>和</span></u></b><b><u><span lang=EN-US style='font-family:
Consolas'>replace</span></u></b><b><u><span style='font-family:宋体'>（</span></u></b><b><u><span
lang=EN-US style='font-family:Consolas'>java.lang.String</span></u></b><b><u><span
style='font-family:宋体'>的方法）：</span></u></b></p>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&quot;99 lines&quot; <span
style='background:yellow'>matches</span> &quot;(\\d+) lines&quot; <span
style='color:#5B6E6E'>// true</span></span></pre><pre><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'>&quot;99 Lines&quot; <span
style='background:yellow'>matches</span> &quot;(\\d+) lines&quot; <span
style='color:#5B6E6E'>// false</span></span></pre><pre><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'>&quot;99 lines&quot; <span
style='background:yellow'>replace</span> (&quot;99&quot;, &quot;98&quot;) <span
style='color:#5B6E6E'>// &quot;98 lines&quot;</span></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&quot;99 lines lines&quot; <span
style='background:yellow'>replaceAll</span> (&quot;l&quot;, &quot;L&quot;) <span
style='color:#5B6E6E'>// 99 Lines Lines</span></span></pre>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><u><span lang=EN-US style='font-family:Consolas'>search</span></u></b><b><u><span
style='font-family:宋体'>（</span></u></b><b><u><span lang=EN-US style='font-family:
Consolas'>regex</span></u></b><b><u><span style='font-family:宋体'>的方法）：</span></u></b></p>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&quot;\\d+&quot;.r <span
style='background:yellow'>findFirstIn</span> &quot;99 lines&quot; <span
style='color:#5B6E6E'>// Some(99)</span></span></pre><pre><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'>&quot;\\w+&quot;.r <span
style='background:yellow'>findAllIn</span> &quot;99 lines&quot; <span
style='color:#5B6E6E'>// iterator(</span></span><span style='font-size:10.5pt;
color:#5B6E6E'>长度为</span><span lang=EN-US style='font-size:10.5pt;font-family:
Consolas;color:#5B6E6E'>2)</span></pre><pre><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas'>&quot;\\s+&quot;.r <span style='background:yellow'>findPrefixOf</span> &quot;99 lines&quot; <span
style='color:#5B6E6E'>// None</span></span></pre><pre><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'>&quot;\\s+&quot;.r <span
style='background:yellow'>findPrefixOf</span> &quot;&nbsp; 99 lines&quot; <span
style='color:#5B6E6E'>// Some(&nbsp; )</span></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'><a
href="http://scala-lang.org"><span class=kw1>val</span></a> r4 <span class=sy0>=</span> <a
href="http://scala-lang.org"><span class=kw1>new</span></a> <span class=me1>Regex</span><span
class=br0>(</span><span class=st0>&quot;&quot;&quot;(</span><span class=es0>\d</span><span
class=st0>+) lines&quot;&quot;&quot;</span>, <span class=st0>&quot;<span
style='background:lime'>g1</span>&quot;</span><span class=br0>)</span> <span
class=co1><span style='color:#5B6E6E'>// with named groups</span></span></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>r4 <span
style='background:yellow'>findFirstMatchIn</span> &quot;99 lines-a&quot; <span
style='color:#5B6E6E'>// Some(99 lines)</span></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>r4 <span
style='background:yellow'>findPrefixMatchOf</span> &quot;99 lines-a&quot; <span
style='color:#5B6E6E'>// Some(99 lines)</span></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'><a
href="http://scala-lang.org"><span style='color:windowtext;text-decoration:
none'>val</span></a> b = (r4 <span style='background:yellow'>findFirstMatchIn</span> &quot;99 lines&quot;).<span
style='background:yellow'>get.group</span>(&quot;<span style='background:lime'>g1</span>&quot;) <span
style='color:#5B6E6E'>// &quot;99&quot;</span></span></pre>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><u><span lang=EN-US style='font-family:Consolas'>match</span></u></b><b><u><span
style='font-family:宋体'>（</span></u></b><b><u><span lang=EN-US style='font-family:
Consolas'>regex</span></u></b><b><u><span style='font-family:宋体'>的方法）：</span></u></b></p>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'><a
href="http://scala-lang.org"><span class=kw1>val</span></a> r1 <span class=sy0>=</span> <span
class=st0>&quot;<span style='background:lime'>(</span></span><span class=es0><span
style='background:lime'>\\</span></span><span class=st0><span style='background:
lime'>d+)</span> lines&quot;</span><span style='background:yellow'>.<span
class=me1>r</span></span></span></pre><pre><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas'><a href="http://scala-lang.org"><span class=kw1>val</span></a> r4 <span
class=sy0>=</span> <a href="http://scala-lang.org"><span class=kw1>new</span></a> <span
class=me1>Regex</span><span class=br0>(</span><span class=st0>&quot;&quot;&quot;(</span><span
class=es0>\d</span><span class=st0>+) lines&quot;&quot;&quot;</span>, <span
class=st0>&quot;<span style='background:lime'>g1</span>&quot;</span><span
class=br0>)</span></span></pre><pre><span lang=EN-US style='font-size:10.5pt;
font-family:Consolas'><a href="http://scala-lang.org"><span class=kw1>val</span></a> Some<span
class=br0>(</span>b<span class=br0>)</span> <span class=sy0>=</span> r4 <span
style='background:yellow'>findPrefixOf</span> <span class=st0>&quot;99 lines&quot;</span> <span
class=co1>// &quot;99 lines&quot;</span><br>
<a href="http://scala-lang.org"><span class=kw1>for</span></a> <span class=br0>{</span><br>
&nbsp; line <span class=sy0>&lt;</span>- <span class=st0>&quot;&quot;&quot;|99 lines-a</span><br>
<span class=st0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |99 lines</span><br>
<span class=st0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |pass</span><br>
<span class=st0>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |98 lines-c&quot;&quot;&quot;</span>.<span
class=me1>stripMargin</span>.<span class=me1>lines</span><br>
<span class=br0>}</span> line <span style='background:yellow'><a
href="http://scala-lang.org"><span class=kw1>match</span></a></span> <span
class=br0>{</span><br>
&nbsp; <a href="http://scala-lang.org"><span class=kw1>case</span></a> r1<span
class=br0>(</span><span style='background:lime'>n</span><span class=br0>)</span> <span
class=sy0>=&gt;</span> println<span class=br0>(</span><span class=st0>&quot;Has &quot; </span>+ <span
style='background:lime'>n</span> + <span class=st0>&quot; Lines.&quot;</span><span
class=br0>) // &quot;Has 99 Lines.&quot;</span></span></pre><pre><span
lang=EN-US style='font-size:10.5pt;font-family:Consolas'>&nbsp; <a
href="http://scala-lang.org"><span class=kw1>case</span></a> <span class=sy0>_</span> <span
class=sy0>=&gt;</span><br>
<span class=br0>}</span></span></pre><pre><span lang=EN-US style='font-size:
10.5pt;font-family:Consolas'>&nbsp;</span></pre><pre><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'><a href="http://scala-lang.org"><span
class=kw1>for</span></a> (<span style='background:yellow'>matched</span> <span
class=sy0>&lt;</span>- <span class=st0>&quot;(</span><span class=es0>\\</span><span
class=st0>w+)&quot;</span>.<span class=me1>r</span> <span style='background:
yellow'>findAllIn</span> <span class=st0>&quot;99 lines&quot;</span> <span
style='background:yellow'>matchData</span>)</span></pre><pre><span lang=EN-US
style='font-size:10.5pt;font-family:Consolas'> &nbsp;println<span class=br0>(</span><span
class=st0>&quot;Matched from &quot; </span>+ <span style='background:yellow'>matched</span>.<span
class=me1>start </span>+ <span class=st0>&quot; to &quot; </span>+ <span
style='background:yellow'>matched</span>.<span class=me1>end</span><span
class=br0>)</span></span></pre>

<p class=MsoNormal><span style='font-family:宋体'>输出：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Matched from 0
to 2</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Matched from 3
to 8</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><b><u><span lang=EN-US style='font-family:Consolas'>replace</span></u></b><b><u><span
style='font-family:宋体'>（</span></u></b><b><u><span lang=EN-US style='font-family:
Consolas'>regex</span></u></b><b><u><span style='font-family:宋体'>的方法）：</span></u></b></p>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'><a
href="http://scala-lang.org"><span class=kw1>val</span></a> r2 <span class=sy0>=</span> <span
class=st0>&quot;&quot;&quot;(</span><span class=es0>\d</span><span class=st0>+) lines&quot;&quot;&quot;</span><span
style='background:yellow'>.<span class=me1>r</span></span> <span
style='color:#5B6E6E'>&nbsp;<span class=co1>// using triple-quotes to preserve backslashes</span></span></span></pre>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>r2
replaceFirstIn (&quot;99 lines-a&quot;, &quot;aaa&quot;) // &quot;aaa-a&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>r2
replaceAllIn (&quot;99 lines-a, 98 lines-b&quot;, &quot;bbb&quot;) // &quot;bbb-a,
bbb-b&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>其他：使用正则表达式定义变量</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val regex =
&quot;(\\d+)/(\\d+)/(\\d+)&quot;.r</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>val
regex(year, month, day) = &quot;2010/1/13&quot;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
year: String = 2010</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
month: String = 1</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas;color:#5B6E6E'>//
day: String = 13</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132242"></a><a
name="_Toc282027636"></a><a name="_Toc281660092"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>8.5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>GUI</span></u></a></h2>

<h3 style='margin-left:9.0pt'><a name="_Toc282027637"></a><a
name="_Toc281660093"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>8.5.1.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>java</span></u></a><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>方式</span></u></h3>

<pre><span lang=EN-US style='font-size:10.5pt;font-family:Consolas'><a
href="http://scala-lang.org"><span class=kw1>import</span></a> javax.<span
class=me1>swing</span>.<span class=me1>JFrame</span><br>
<a href="http://scala-lang.org"><span class=kw1>var</span></a> jf <span
class=sy0>=</span> <a href="http://scala-lang.org"><span class=kw1>new</span></a> JFrame<span
class=br0>(</span><span class=st0>&quot;Hello!&quot;</span><span class=br0>)</span><br>
jf.<span class=me1>setSize</span><span class=br0>(</span><span class=nu0>800</span>, <span
class=nu0>600</span><span class=br0>)</span><br>
jf.<span class=me1>setDefaultCloseOperation</span><span class=br0>(</span>JFrame.<span
class=me1>EXIT_ON_CLOSE</span><span class=br0>)</span><br>
jf.<span class=me1>setVisible</span><span class=br0>(</span><a
href="http://scala-lang.org"><span class=kw1>true</span></a><span class=br0>)</span></span></pre>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3 style='margin-left:9.0pt'><a name="_Toc282027638"></a><a
name="_Toc281660094"><span lang=EN-US style='font-size:10.5pt;line-height:173%;
font-family:Consolas'>8.5.2.<span style='font:7.0pt "Times New Roman"'>&nbsp; </span></span><u><span
lang=EN-US style='font-size:14.0pt;line-height:173%;font-family:Consolas'>scala</span></u></a><u><span
style='font-size:14.0pt;line-height:173%;font-family:"微软雅黑","sans-serif"'>方式</span></u></h3>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>import</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>swing</span><span lang=EN-US
style='font-family:Consolas;color:black'>._, </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>swing</span><span lang=EN-US
style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>Swing</span><span lang=EN-US
style='font-family:Consolas;color:black'>._</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>object</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>Swing1</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>extends</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>SimpleGUIApplication</span><span
lang=EN-US style='font-family:Consolas;color:black'> { </span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>// scala2.7</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>def</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#003E85'>top</span><span lang=EN-US
style='font-family:Consolas;color:black'> = </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>new</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>MainFrame</span><span lang=EN-US
style='font-family:Consolas;color:black'> { </span><span lang=EN-US
style='font-family:Consolas;color:#5B6E6E'>// </span><span style='font-family:
宋体;color:#5B6E6E'>必须实现</span><span lang=EN-US style='font-family:Consolas;
color:#5B6E6E'>top</span><span style='font-family:宋体;color:#5B6E6E'>方法</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#003E85'>title</span><span
lang=EN-US style='font-family:Consolas;color:black'> = </span><span lang=EN-US
style='font-family:Consolas;color:green'>&quot;</span><span style='font-family:
宋体;color:green'>窗口</span><span lang=EN-US style='font-family:Consolas;
color:green'>1&quot;</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#003E85'>preferredSize</span><span
lang=EN-US style='font-family:Consolas;color:black'> = (400, 300)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#4C4C4C'>val</span><span
lang=EN-US style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>label</span><span lang=EN-US
style='font-family:Consolas;color:black'> = </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>new</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>Label</span><span lang=EN-US
style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:green'>&quot;hello world cn</span><span
style='font-family:宋体;color:green'>中文</span><span lang=EN-US style='font-family:
Consolas;color:green'>&quot;</span><span lang=EN-US style='font-family:Consolas;
color:black'>)</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:Consolas;color:#003E85'>contents</span><span
lang=EN-US style='font-family:Consolas;color:black'> = </span><span lang=EN-US
style='font-family:Consolas;color:#4C4C4C'>new</span><span lang=EN-US
style='font-family:Consolas;color:black'> </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>BorderPanel</span><span lang=EN-US
style='font-family:Consolas;color:black'> {</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span lang=EN-US style='font-family:Consolas;color:#003E85'>layout</span><span
lang=EN-US style='font-family:Consolas;color:black'>(</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>label</span><span lang=EN-US
style='font-family:Consolas;color:black'>) = </span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>BorderPanel</span><span lang=EN-US
style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#8E3E00'>Position</span><span lang=EN-US
style='font-family:Consolas;color:black'>.</span><span lang=EN-US
style='font-family:Consolas;color:#2300FB'>Center</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;&nbsp;&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp; }</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>}</span></p>

<p class=MsoNormal align=left style='text-align:left;text-autospace:none'><span
lang=EN-US style='font-family:Consolas;color:black'>&nbsp;</span></p>

<h1><a name="_Toc306132243"></a><a name="_Toc282027639"></a><a
name="_Toc281660095"><span lang=EN-US style='font-size:10.5pt;line-height:240%;
font-family:Consolas;font-weight:normal'>9.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><u><span style='font-family:"微软雅黑","sans-serif"'>附录</span></u></a></h1>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc282027640"></a><a
name="_Toc281660096"></a><a name="_Toc306132244"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>9.1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>stackoverflow</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>的</span></u><u><span lang=EN-US
style='font-family:Consolas'>scala</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>教程</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>解答一些实际问题：</span></p>

<p class=MsoNormal><a href="http://stackoverflow.com/tags/scala/info"><span
lang=EN-US style='font-family:Consolas'>http://stackoverflow.com/tags/scala/info</span></a></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132245"><span
lang=EN-US style='font-size:10.5pt;line-height:173%;font-family:Consolas'>9.2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>ProjectEuler</span></u></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>数学</span><span lang=EN-US
style='font-family:Consolas'>+</span><span style='font-family:宋体'>编程答题：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://projecteuler.net/index.php?section=problems">http://projecteuler.net/index.php?section=problems</a></span></p>

<p class=MsoNormal><span style='font-family:宋体'>对上面问题的</span><span lang=EN-US
style='font-family:Consolas'>Haskell</span><span style='font-family:宋体'>解答参考：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://www.haskell.org/haskellwiki/Euler_problems">http://www.haskell.org/haskellwiki/Euler_problems</a></span></p>

<p class=MsoNormal><span style='font-family:宋体'>对上面问题的</span><span lang=EN-US
style='font-family:Consolas'>Python</span><span style='font-family:宋体'>解答参考：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://www.s-anand.net/euler.html">http://www.s-anand.net/euler.html</a></span></p>

<p class=MsoNormal><span style='font-family:宋体'>对上面问题的</span><span lang=EN-US
style='font-family:Consolas'>Scala</span><span style='font-family:宋体'>解答参考：</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://pavelfatin.com/scala-for-project-euler/">http://pavelfatin.com/scala-for-project-euler/</a></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132246"></a><a
name="_Toc282027641"></a><a name="_Toc281660097"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>9.3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Scala</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>问答</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://stackoverflow.com/questions/tagged/scala+list">http://stackoverflow.com/questions/tagged/scala+list</a></span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132247"></a><a
name="_Toc282027642"></a><a name="_Toc281660098"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>9.4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>rosettacode</span></u></a></h2>

<p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'><a
href="http://rosettacode.org/wiki/Category:Scala">http://rosettacode.org/wiki/Category:Scala</a>
</span></b><b><span style='font-family:宋体'>（各种语言解题汇编）</span></b></p>

<p class=MsoNormal><b><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></b></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132248"></a><a
name="_Toc282027643"></a><a name="_Toc281660099"><span lang=EN-US
style='font-size:10.5pt;line-height:173%;font-family:Consolas'>9.5.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
style='font-family:"微软雅黑","sans-serif"'>编译、</span></u></a><u><span lang=EN-US
style='font-family:Consolas'>mvn</span></u><u><span style='font-family:"微软雅黑","sans-serif"'>、</span></u><u><span
lang=EN-US style='font-family:Consolas'>SBT</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>见</span><span lang=EN-US
style='font-family:Consolas'>“<a href="file:///F:\data\__Apache\Maven\Maven%20学习笔记.doc">Maven
<span lang=EN-US style='font-family:宋体'><span lang=EN-US>学<span lang=EN-US>习笔记</span></span></span></a>”</span><span
style='font-family:宋体'>中的</span><span lang=EN-US style='font-family:Consolas'>4</span><span
style='font-family:宋体'>、</span><span lang=EN-US style='font-family:Consolas'>SBT</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>中类似于</span><span lang=EN-US style='font-family:Consolas'>ant</span><span
style='font-family:宋体'>和</span><span lang=EN-US style='font-family:Consolas'>maven</span><span
style='font-family:宋体'>的东西，配置文件使用</span><span lang=EN-US style='font-family:
Consolas'>.scala,</span><span style='font-family:宋体'>交互模式下使用，可以自定编译和测试。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>和</span><span lang=EN-US
style='font-family:Consolas'>vim/emacs/textmate</span><span style='font-family:
宋体'>等结合进行增量开发。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>结合</span><span lang=EN-US
style='font-family:Consolas'>mvn</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>sbt</span><span style='font-family:
宋体'>，可以利用</span><span lang=EN-US style='font-family:Consolas'>mvn
eclipse:eclipse</span><span style='font-family:宋体'>来产生</span><span lang=EN-US
style='font-family:Consolas'>.project</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>.classpath</span><span
style='font-family:宋体'>，利用</span><span lang=EN-US style='font-family:Consolas'>sbt</span><span
style='font-family:宋体'>的不间断编译运行，步骤：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>运行</span><span lang=EN-US
style='font-family:Consolas'>maven</span><span style='font-family:宋体'>命令（看</span><span
lang=EN-US style='font-family:Consolas'>mvnh.bat</span><span style='font-family:
宋体'>）创建目录</span><span lang=EN-US style='font-family:Consolas'>./prj1/</span><span
style='font-family:宋体'>结构：</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>mvn archetype:create -DgroupId=jamesqiu -DartifactId=prj1
-DpackageName=test</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
----------&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ----------</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style='font-family:宋体'>项目在仓库中的唯一标识</span><span
lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp; </span><span
style='font-family:宋体'>跟目录名及</span><span lang=EN-US style='font-family:Consolas'>jar</span><span
style='font-family:宋体'>名</span><span lang=EN-US style='font-family:Consolas'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-family:宋体'>包名</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>运行</span><span lang=EN-US
style='font-family:Consolas'>sbt</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>问及</span><span
lang=EN-US style='font-family:Consolas'>name</span><span style='font-family:
宋体'>就填和</span><span lang=EN-US style='font-family:Consolas'>mvn</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>packageName</span><span
style='font-family:宋体'>一样（“</span><span lang=EN-US style='font-family:Consolas'>test</span><span
style='font-family:宋体'>”）</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>问及</span><span
lang=EN-US style='font-family:Consolas'>organization</span><span
style='font-family:宋体'>就填和</span><span lang=EN-US style='font-family:Consolas'>mvn</span><span
style='font-family:宋体'>的</span><span lang=EN-US style='font-family:Consolas'>groupId</span><span
style='font-family:宋体'>一样（“</span><span lang=EN-US style='font-family:Consolas'>jamesqiu</span><span
style='font-family:宋体'>”）</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span style='font-family:宋体'>问及</span><span
lang=EN-US style='font-family:Consolas'>scala version</span><span
style='font-family:宋体'>就填</span><span lang=EN-US style='font-family:Consolas'>2.8.0</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>运行</span><span lang=EN-US
style='font-family:Consolas'>mvn eclipse:eclipse</span><span style='font-family:
宋体'>生成</span><span lang=EN-US style='font-family:Consolas'>eclipse</span><span
style='font-family:宋体'>项目文件</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>运行</span><span lang=EN-US
style='font-family:Consolas'>sbt</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>sbt ~compile </span><span style='font-family:宋体'>进行增量编译；</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>sbt ~run </span><span style='font-family:宋体'>进行增量编译运行，有多个可执行类时需要手工选择。</span></p>

<p class=MsoNormal style='margin-left:21.0pt'><span lang=EN-US
style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132249"><span
lang=EN-US style='font-size:10.5pt;line-height:173%;font-family:Consolas'>9.6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Scala</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>水平划分</span></u></h2>

<p class=MsoNormal><span style='font-family:宋体'>来源：</span><span lang=EN-US
style='font-family:Consolas'><a href="http://www.scala-lang.org/node/8610">http://www.scala-lang.org/node/8610</a>
</span><span style='font-family:宋体'>（</span><span class=apple-style-span><span
lang=EN-US style='font-size:10.0pt;font-family:"Arial","sans-serif";color:black'>Martin
Odersky</span></span><span style='font-family:宋体'>）</span></p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>应用开发者</span></b></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><b><span
  style='font-family:宋体'>库开发者</span></b></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt'><span
  lang=EN-US style='font-family:Consolas;color:#222222'>Level A1: Beginning
  application programmer</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Java-like
  statements and expressions: standard operators, method calls, conditionals,
  loops, try/catch</span></p>
  <ul style='margin-top:0cm' type=disc>
   <li class=MsoNormal style='color:#222222;text-align:left;line-height:12.0pt'><span
       lang=EN-US style='font-family:Consolas'>class, object, def, val, var,
       import, package</span></li>
   <li class=MsoNormal style='color:#222222;text-align:left;line-height:12.0pt'><span
       lang=EN-US style='font-family:Consolas'>Infix notation for method calls</span></li>
   <li class=MsoNormal style='color:#222222;text-align:left;line-height:12.0pt'><span
       lang=EN-US style='font-family:Consolas'>Simple closures</span></li>
   <li class=MsoNormal style='color:#222222;text-align:left;line-height:12.0pt'><span
       lang=EN-US style='font-family:Consolas'>Collections with map, filter,
       etc</span></li>
  </ul>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>for-expressions</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt'><span
  lang=EN-US style='font-family:Consolas;color:#222222'>Level A2: Intermediate
  application programmer</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Pattern
  matching</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Trait
  composition</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Recursion,
  in particular tail recursion</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>XML
  literals</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt'><span
  lang=EN-US style='font-family:Consolas;color:#222222'>Level L1: Junior
  library designer</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Type
  parameters</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Traits</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Lazy
  vals</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Control
  abstraction, currying</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>By-name
  parameters</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt'><span
  lang=EN-US style='font-family:Consolas;color:#222222'>Level A3: Expert
  application programmer</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Folds,
  i.e. methods such as&nbsp;foldLeft, foldRight</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Streams
  and other lazy data structures</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Actors</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Combinator
  parsers</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt'><span
  lang=EN-US style='font-family:Consolas;color:#222222'>Level L2: Senior
  library designer</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Variance
  annotations</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Existential
  types (e.g., to interface with Java wildcards)</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Self
  type annotations and the cake pattern for dependency injection</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Structural
  types (aka&nbsp;static duck typing)</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Defining
  map/flatmap/withFilter for new kinds of for-expressions</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Extractors</span></p>
  </td>
 </tr>
 <tr>
  <td width=361 valign=top style='width:270.9pt;border:solid windowtext 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt'><span
  lang=EN-US style='font-family:Consolas;color:#222222'>&nbsp;</span></p>
  </td>
  <td width=361 valign=top style='width:270.9pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal align=left style='margin-top:6.0pt;margin-right:0cm;
  margin-bottom:6.0pt;margin-left:0cm;text-align:left;line-height:13.5pt'><span
  lang=EN-US style='font-family:Consolas;color:#222222'>Level L3: Expert
  library designer</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Early
  initializers</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Abstract
  types</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Implicit
  definitions</span></p>
  <p class=MsoNormal align=left style='margin-left:35.7pt;text-align:left;
  text-indent:-17.85pt;line-height:12.0pt'><span lang=EN-US style='font-size:
  10.0pt;font-family:Symbol;color:#222222'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span lang=EN-US style='font-family:Consolas;color:#222222'>Higher-kinded
  types</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132250"><span
lang=EN-US style='font-size:10.5pt;line-height:173%;font-family:Consolas'>9.7.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Scala</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>适合的领域</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://goodstuff.im/scala-use-is-less-good-than-java-use-for-at-l">http://goodstuff.im/scala-use-is-less-good-than-java-use-for-at-l</a>
by David Pollak</span></p>

<p class=MsoNormal><span style='font-family:宋体'>小结：</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>更适合</span><span lang=EN-US style='font-family:Consolas'>real-time,
distributed, concurrent</span><span style='font-family:宋体'>的应用，而不是</span><span
lang=EN-US style='font-family:Consolas'>ORM</span><span style='font-family:
宋体'>、</span><span lang=EN-US style='font-family:Consolas'>CRUD</span><span
style='font-family:宋体'>应用（尽管有</span><span lang=EN-US style='font-family:Consolas'>Squeryl</span><span
style='font-family:宋体'>）；</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>大部分的应用还是</span><span lang=EN-US
style='font-family:Consolas'>ORM</span><span style='font-family:宋体'>和</span><span
lang=EN-US style='font-family:Consolas'>CRUD</span><span style='font-family:
宋体'>，与其推销</span><span lang=EN-US style='font-family:Consolas'>Scala</span><span
style='font-family:宋体'>到</span><span lang=EN-US style='font-family:Consolas'>5</span><span
style='font-family:宋体'>万个项目里只成功</span><span lang=EN-US style='font-family:Consolas'>20%</span><span
style='font-family:宋体'>，还不如推荐到</span><span lang=EN-US style='font-family:Consolas'>5</span><span
style='font-family:宋体'>千个合适项目里成功</span><span lang=EN-US style='font-family:
Consolas'>80%</span><span style='font-family:宋体'>；</span></p>

<p class=MsoNormal style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>l<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>你的公司已高端人才为主，推荐</span><span
lang=EN-US style='font-family:Consolas'>Scala</span><span style='font-family:
宋体'>；以堆人力为主，还是</span><span lang=EN-US style='font-family:Consolas'>Java</span><span
style='font-family:宋体'>吧；</span></p>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'>&nbsp;</span></p>

<h2 style='margin-left:18.0pt;text-indent:-18.0pt'><a name="_Toc306132251"><span
lang=EN-US style='font-size:10.5pt;line-height:173%;font-family:Consolas'>9.8.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><u><span
lang=EN-US style='font-family:Consolas'>Twitter</span></u></a><u><span
style='font-family:"微软雅黑","sans-serif"'>的</span></u><u><span lang=EN-US
style='font-family:Consolas'>Scala School</span></u></h2>

<p class=MsoNormal><span lang=EN-US style='font-family:Consolas'><a
href="http://twitter.github.com/scala_school/">http://twitter.github.com/scala_school/</a></span></p>

<p class=MsoNormal><span style='font-family:宋体'>训练</span><span lang=EN-US
style='font-family:Consolas'>java expert</span><span style='font-family:宋体'>快速成为</span><span
lang=EN-US style='font-family:Consolas'>scala expert</span></p>

</div>

</body>

</html>
